/*! For license information please see main.js.LICENSE.txt */
!function(){var e={442:function(e,t){"use strict";!function(){var e=60112,n=60115;if("function"==typeof Symbol&&Symbol.for){var r=Symbol.for;r("react.element"),r("react.portal"),r("react.fragment"),r("react.strict_mode"),r("react.profiler"),r("react.provider"),r("react.context"),e=r("react.forward_ref"),r("react.suspense"),r("react.suspense_list"),n=r("react.memo"),r("react.lazy"),r("react.block"),r("react.server.block"),r("react.fundamental"),r("react.scope"),r("react.opaque.id"),r("react.debug_trace_mode"),r("react.offscreen"),r("react.legacy_hidden")}var i=e,o=n;t.ForwardRef=i,t.Memo=o}()},217:function(e,t,n){"use strict";e.exports=n(442)},184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},959:function(e,t,n){"use strict";var r=n(81),i=n.n(r),o=n(645);n.n(o)()(i()).push([e.id,"body {\r\n    margin: 0;\r\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\r\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\r\n      sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n  }\r\n  \r\n  code {\r\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\r\n      monospace;\r\n  }\r\n  ",""])},645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},81:function(e){"use strict";e.exports=function(e){return e[1]}},209:function(e,t){"use strict";function n(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function r(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={p:r,P:function(e,t){var i,o=e.match(/(P+)(p+)?/)||[],a=o[1],s=o[2];if(!s)return n(e,t);switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",n(a,t)).replace("{{time}}",r(s,t))}};t.default=i,e.exports=t.default},679:function(e,t,n){"use strict";var r=n(864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!(o[y]||r&&r[y]||m&&m[y]||s&&s[y])){var _=d(n,y);try{c(t,y,_)}catch(e){}}}}return t}},158:function(e){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),n=i(a),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return r(0,(function(e){var t="2.7.0",n=r;function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var i=o;function o(e,t){this.x=e,this.y=t}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(e){return e instanceof o?e:Array.isArray(e)?new o(e[0],e[1]):e};var a="undefined"!=typeof self?self:{},s=1e-6,l="undefined"!=typeof Float32Array?Float32Array:Array;function c(){var e=new l(9);return l!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function h(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],_=t[15],v=n[0],x=n[1],b=n[2],w=n[3];return e[0]=v*r+x*s+b*h+w*m,e[1]=v*i+x*l+b*d+w*g,e[2]=v*o+x*c+b*p+w*y,e[3]=v*a+x*u+b*f+w*_,e[4]=(v=n[4])*r+(x=n[5])*s+(b=n[6])*h+(w=n[7])*m,e[5]=v*i+x*l+b*d+w*g,e[6]=v*o+x*c+b*p+w*y,e[7]=v*a+x*u+b*f+w*_,e[8]=(v=n[8])*r+(x=n[9])*s+(b=n[10])*h+(w=n[11])*m,e[9]=v*i+x*l+b*d+w*g,e[10]=v*o+x*c+b*p+w*y,e[11]=v*a+x*u+b*f+w*_,e[12]=(v=n[12])*r+(x=n[13])*s+(b=n[14])*h+(w=n[15])*m,e[13]=v*i+x*l+b*d+w*g,e[14]=v*o+x*c+b*p+w*y,e[15]=v*a+x*u+b*f+w*_,e}function d(e,t,n){var r,i,o,a,s,l,c,u,h,d,p,f,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=r*m+s*g+h*y+t[12],e[13]=i*m+l*g+d*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=a*m+u*g+f*y+t[15]),e}function p(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+h*r,e[7]=l*i+d*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=h*i-s*r,e[11]=d*i-l*r,e}function m(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-h*r,e[3]=l*i-d*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+h*i,e[11]=l*r+d*i,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var g=h;function y(){var e=new l(3);return l!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function _(e){var t=new l(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function v(e){return Math.hypot(e[0],e[1],e[2])}function x(e,t,n){var r=new l(3);return r[0]=e,r[1]=t,r[2]=n,r}function b(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function w(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function T(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function E(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function S(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function k(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function C(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function M(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function I(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function P(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function A(e,t,n){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],l=t[2],c=i*l-o*s,u=o*a-r*l,h=r*s-i*a,d=i*h-o*u,p=o*c-r*h,f=r*u-i*c,m=2*n[3];return u*=m,h*=m,p*=2,f*=2,e[0]=a+(c*=m)+(d*=2),e[1]=s+u+p,e[2]=l+h+f,e}var D,z=w,R=T,O=v;function L(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function F(){var e=new l(4);return l!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function B(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function N(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e}function U(e,t){return e[0]===t[0]&&e[1]===t[1]}y(),D=new l(4),l!=Float32Array&&(D[0]=0,D[1]=0,D[2]=0,D[3]=0),y(),x(1,0,0),x(0,1,0),F(),F(),c(),function(){var e;e=new l(2),l!=Float32Array&&(e[0]=0,e[1]=0)}();const j=Math.PI/180,V=180/Math.PI;function $(e){return e*j}function q(e){return e*V}const G=[[0,0],[1,0],[1,1],[0,1]];function W(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Z(e,t,r,i){const o=new n(e,t,r,i);return function(e){return o.solve(e)}}const H=Z(.25,.1,.25,1);function X(e,t,n){return Math.min(n,Math.max(t,e))}function Y(e,t,n){return(n=X((n-e)/(t-e),0,1))*n*(3-2*n)}function K(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function Q(e,t,n){if(!e.length)return n(null,[]);let r=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))}function J(e){const t=[];for(const n in e)t.push(e[n]);return t}function ee(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let te=1;function ne(){return te++}function re(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function ie(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function oe(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function ae(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function se(e,t){return-1!==e.indexOf(t,e.length-t.length)}function le(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function ce(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function ue(e){return Array.isArray(e)?e.map(ue):"object"==typeof e&&e?le(e,ue):e}const he={};function de(e){he[e]||("undefined"!=typeof console&&console.warn(e),he[e]=!0)}function pe(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function fe(e){let t=0;for(let n,r,i=0,o=e.length,a=o-1;i<o;a=i++)n=e[i],r=e[a],t+=(r.x-n.x)*(n.y+r.y);return t}function me(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function ge(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let ye,_e,ve,xe=null;function be(e){if(null==xe){const t=e.navigator?e.navigator.userAgent:null;xe=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return xe}function we(e){try{const t=a[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}const Te={now:()=>void 0!==ve?ve:a.performance.now(),setNow(e){ve=e},restoreNow(){ve=void 0},frame(e){const t=a.requestAnimationFrame(e);return{cancel:()=>a.cancelAnimationFrame(t)}},getImageData(e,t=0){const n=a.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:e=>(ye||(ye=a.document.createElement("a")),ye.href=e,ye.href),get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==_e&&(_e=a.matchMedia("(prefers-reduced-motion: reduce)")),_e.matches)}};let Ee;const Se={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Ee){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Ee=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):e}catch(t){Ee=e}}return Ee},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ke={supported:!1,testSupport:function(e){!Ie&&Me&&(Pe?Ae(e):Ce=e)}};let Ce,Me,Ie=!1,Pe=!1;function Ae(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Me),e.isContextLost())return;ke.supported=!0}catch(e){}e.deleteTexture(t),Ie=!0}a.document&&(Me=a.document.createElement("img"),Me.onload=function(){Ce&&Ae(Ce),Ce=null,Pe=!0},Me.onerror=function(){Ie=!0,Ce=null},Me.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const De="01",ze="NO_ACCESS_TOKEN";function Re(e){return 0===e.indexOf("mapbox:")}function Oe(e){return Se.API_URL_REGEX.test(e)}const Le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fe(e){const t=e.match(Le);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Be(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}function Ne(e){if(!e)return null;const t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(t[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class Ue{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const t=Ne(Se.ACCESS_TOKEN);let n="";return n=t&&t.u?a.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):Se.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${n}`:`mapbox.eventData:${n}`}fetchEventData(){const e=we("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{const e=a.localStorage.getItem(t);e&&(this.eventData=JSON.parse(e));const r=a.localStorage.getItem(n);r&&(this.anonId=r)}catch(e){de("Unable to read from LocalStorage")}}saveEventData(){const e=we("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){de("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,n,r,i){if(!Se.EVENTS_URL)return;const o=Fe(Se.EVENTS_URL);o.params.push(`access_token=${i||Se.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:t,skuId:De,userId:this.anonId},s=n?ee(a,n):a,l={url:Be(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=st(l,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(i)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const je=new class extends Ue{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){Se.EVENTS_URL&&Se.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>Re(e)||Oe(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Ne(Se.ACCESS_TOKEN),n=t?t.u:Se.ACCESS_TOKEN;let r=n!==this.eventData.tokenU;oe(this.anonId)||(this.anonId=re(),r=!0);const i=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(i),n=(i-this.eventData.lastSuccess)/864e5;r=r||n>=1||n<-1||e.getDate()!==t.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},(e=>{e||(this.eventData.lastSuccess=i,this.eventData.tokenU=n)}),e)}},Ve=je.postTurnstileEvent.bind(je),$e=new class extends Ue{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,r){this.skuToken=t,this.errorCb=r,Se.EVENTS_URL&&(n||Se.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ze)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),oe(this.anonId)||(this.anonId=re()),this.postEvent(n,{skuToken:this.skuToken},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},qe=$e.postMapLoadEvent.bind($e),Ge=new class extends Ue{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,r){if(!Se.API_URL||!Se.SESSION_PATH)return;const i=Fe(Se.API_URL+Se.SESSION_PATH);i.params.push(`sku=${t||""}`),i.params.push(`access_token=${r||Se.ACCESS_TOKEN||""}`);const o={url:Be(i),headers:{"Content-Type":"text/plain"}};this.pendingRequest=lt(o,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(e,t,n,r){this.skuToken=t,this.errorCb=r,Se.SESSION_PATH&&Se.API_URL&&(n||Se.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ze)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},We=Ge.getSessionAPI.bind(Ge),Ze=new Set,He="mapbox-tiles";let Xe,Ye,Ke=500,Qe=50;function Je(){a.caches&&!Xe&&(Xe=a.caches.open(He))}function et(e){const t=e.indexOf("?");return t<0?e:e.slice(0,t)}let tt=1/0;const nt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(nt);class rt extends Error{constructor(e,t,n){401===t&&Oe(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const it=me()?()=>self.worker&&self.worker.referrer:()=>("blob:"===a.location.protocol?a.parent:a).location.href,ot=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(it())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(e,t){const n=new a.AbortController,r=new a.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:it(),signal:n.signal});let i=!1,o=!1;const s=(l=r.url).indexOf("sku=")>0&&Oe(l);var l;"json"===e.type&&r.headers.set("Accept","application/json");const c=(n,i,l)=>{if(o)return;if(n&&"SecurityError"!==n.message&&de(n),i&&l)return u(i);const c=Date.now();a.fetch(r).then((n=>{if(n.ok){const e=s?n.clone():null;return u(n,e,c)}return t(new rt(n.statusText,n.status,e.url))})).catch((e=>{20!==e.code&&t(new Error(e.message))}))},u=(n,s,l)=>{("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((e=>{o||(s&&l&&function(e,t,n){if(Je(),!Xe)return;const r={status:t.status,statusText:t.statusText,headers:new a.Headers};t.headers.forEach(((e,t)=>r.headers.set(t,e)));const i=ge(t.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(e,t){if(void 0===Ye)try{new Response(new ReadableStream),Ye=!0}catch(e){Ye=!1}Ye?t(e.body):e.blob().then(t)}(t,(t=>{const n=new a.Response(t,r);Je(),Xe&&Xe.then((t=>t.put(et(e.url),n))).catch((e=>de(e.message)))})))}(r,s,l),i=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((e=>{o||t(new Error(e.message))}))};return s?function(e,t){if(Je(),!Xe)return t(null);const n=et(e.url);Xe.then((e=>{e.match(n).then((r=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=ge(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(r,c):c(null,null),{cancel:()=>{o=!0,i||n.abort()}}}(e,t);if(me()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){const n=new a.XMLHttpRequest;n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer");for(const t in e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=()=>{t(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new rt(n.statusText,n.status,e.url))},n.send(e.body),{cancel:()=>n.abort()}}(e,t)},at=function(e,t){return ot(ee(e,{type:"arrayBuffer"}),t)},st=function(e,t){return ot(ee(e,{method:"POST"}),t)},lt=function(e,t){return ot(ee(e,{method:"GET"}),t)};function ct(e){const t=a.document.createElement("a");return t.href=e,t.protocol===a.document.location.protocol&&t.host===a.document.location.host}const ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ht,dt;ht=[],dt=0;const pt=function(e,t){if(ke.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),dt>=Se.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return ht.push(n),n}dt++;let n=!1;const r=()=>{if(!n)for(n=!0,dt--;ht.length&&dt<Se.MAX_PARALLEL_IMAGE_REQUESTS;){const e=ht.shift(),{requestParameters:t,callback:n,cancelled:r}=e;r||(e.cancel=pt(t,n).cancel)}},i=at(e,((e,n,i,o)=>{r(),e?t(e):n&&(a.createImageBitmap?function(e,t){const n=new a.Blob([new Uint8Array(e)],{type:"image/png"});a.createImageBitmap(n).then((e=>{t(null,e)})).catch((e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,((e,n)=>t(e,n,i,o))):function(e,t){const n=new a.Image,r=a.URL;n.onload=()=>{t(null,n),r.revokeObjectURL(n.src),n.onload=null,a.requestAnimationFrame((()=>{n.src=ut}))},n.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new a.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(i):ut}(n,((e,n)=>t(e,n,i,o))))}));return{cancel:()=>{i.cancel(),r()}}};function ft(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function mt(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class gt{constructor(e,t={}){ee(this,t),this.type=e}}class yt extends gt{constructor(e,t={}){super("error",ee({error:e},t))}}class _t{on(e,t){return this._listeners=this._listeners||{},ft(e,t,this._listeners),this}off(e,t){return mt(e,t,this._listeners),mt(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},ft(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new gt(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const t of r)mt(n,t,this._oneTimeListeners),t.call(this,e);const i=this._eventedParent;i&&(ee(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof yt&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var vt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');class xt{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function bt(e){const t=e.value;return t?[new xt(e.key,t,"constants have been deprecated as of v8")]:[]}function wt(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function Tt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Et(e){if(Array.isArray(e))return e.map(Et);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Et(e[n]);return t}return Tt(e)}class St extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class kt{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,n]of t)this.bindings[e]=n}concat(e){return new kt(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Ct={kind:"null"},Mt={kind:"number"},It={kind:"string"},Pt={kind:"boolean"},At={kind:"color"},Dt={kind:"object"},zt={kind:"value"},Rt={kind:"collator"},Ot={kind:"formatted"},Lt={kind:"resolvedImage"};function Ft(e,t){return{kind:"array",itemType:e,N:t}}function Bt(e){if("array"===e.kind){const t=Bt(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const Nt=[Ct,Mt,It,Pt,At,Ot,Dt,Ft(zt),Lt];function Ut(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ut(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of Nt)if(!Ut(e,t))return null}return`Expected ${Bt(e)} but found ${Bt(t)} instead.`}function jt(e,t){return t.some((t=>t.kind===e.kind))}function Vt(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function $t(e){var t={exports:{}};return e(t,t.exports),t.exports}var qt=$t((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function o(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function a(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),h=s.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),d];case"hsla":if(4!==h.length)return null;d=o(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),m=o(h[2]),g=m<=.5?m*(f+1):m+f-m*f,y=2*m-g;return[r(255*a(y,g,p+1/3)),r(255*a(y,g,p)),r(255*a(y,g,p-1/3)),d];default:return null}}return null}}catch(e){}}));class Gt{constructor(e,t,n,r=1){this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof Gt)return e;if("string"!=typeof e)return;const t=qt.parseCSSColor(e);return t?new Gt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${r})`}toArray(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}}Gt.black=new Gt(0,0,0,1),Gt.white=new Gt(1,1,1,1),Gt.transparent=new Gt(0,0,0,0),Gt.red=new Gt(1,0,0,1),Gt.blue=new Gt(0,0,1,1);class Wt{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Zt{constructor(e,t,n,r,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class Ht{constructor(e){this.sections=e}static fromString(e){return new Ht([new Zt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Ht?e:Ht.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Xt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Xt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Yt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Kt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Gt)return!0;if(e instanceof Wt)return!0;if(e instanceof Ht)return!0;if(e instanceof Xt)return!0;if(Array.isArray(e)){for(const t of e)if(!Kt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Kt(e[t]))return!1;return!0}return!1}function Qt(e){if(null===e)return Ct;if("string"==typeof e)return It;if("boolean"==typeof e)return Pt;if("number"==typeof e)return Mt;if(e instanceof Gt)return At;if(e instanceof Wt)return Rt;if(e instanceof Ht)return Ot;if(e instanceof Xt)return Lt;if(Array.isArray(e)){const t=e.length;let n;for(const t of e){const e=Qt(t);if(n){if(n===e)continue;n=zt;break}n=e}return Ft(n||zt,t)}return Dt}function Jt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Gt||e instanceof Ht||e instanceof Xt?e.toString():JSON.stringify(e)}class en{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Kt(e[1]))return t.error("invalid value");const n=e[1];let r=Qt(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new en(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Gt?["rgba"].concat(this.value.toArray()):this.value instanceof Ht?this.value.serialize():this.value}}class tn{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const nn={string:It,number:Mt,boolean:Pt,object:Dt};class rn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in nn)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=nn[n],r++}else i=zt;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=Ft(i,o)}else n=nn[i];const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,zt);if(!n)return null;o.push(n)}return new rn(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!Ut(this.type,Qt(n)))return n;if(t===this.args.length-1)throw new tn(`Expected value to be of type ${Bt(this.type)}, but found ${Bt(Qt(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((e=>e.serialize())))}}class on{constructor(e){this.type=Ot,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let n=1;n<=e.length-1;++n){const o=e[n];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,Mt),!e))return null;let n=null;if(o["text-font"]&&(n=t.parse(o["text-font"],1,Ft(It)),!n))return null;let a=null;if(o["text-color"]&&(a=t.parse(o["text-color"],1,At),!a))return null;const s=r[r.length-1];s.scale=e,s.font=n,s.textColor=a}else{const o=t.parse(e[n],1,zt);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new on(r)}evaluate(e){return new Ht(this.sections.map((t=>{const n=t.content.evaluate(e);return Qt(n)===Lt?new Zt("",n,null,null,null):new Zt(Jt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class an{constructor(e){this.type=Lt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,It);return n?new an(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Xt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const sn={"to-boolean":Pt,"to-color":At,"to-number":Mt,"to-string":It};class ln{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=sn[n],i=[];for(let n=1;n<e.length;n++){const r=t.parse(e[n],n,zt);if(!r)return null;i.push(r)}return new ln(r,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof Gt)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Yt(t[0],t[1],t[2],t[3]),!n))return new Gt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new tn(n||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new tn(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Ht.fromString(Jt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Xt.fromString(Jt(this.args[0].evaluate(e))):Jt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new on([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new an(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}const cn=["Unknown","Point","LineString","Polygon"];class un{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?cn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Gt.parse(e)),t}}class hn{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const n=e[0],r=hn.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[r,o]of a){s=new Rn(t.registry,t.path,null,t.scope);const a=[];let l=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(r)?r[t-1]:r.type,o=s.parse(n,1+a.length,i);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(r)&&r.length!==a.length)s.error(`Expected ${r.length} arguments, but found ${a.length} instead.`);else{for(let e=0;e<a.length;e++){const t=Array.isArray(r)?r[e]:r.type,n=a[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new hn(n,i,o,a)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(Bt).join(", ")})`:`(${Bt(t.type)}...)`;var t})).join(" | "),r=[];for(let n=1;n<e.length;n++){const i=t.parse(e[n],1+r.length);if(!i)return null;r.push(Bt(i.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){hn.definitions=t;for(const n in t)e[n]=hn}}class dn{constructor(e,t,n){this.type=Rt,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Pt);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Pt);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,It),!o)?null:new dn(r,i,o)}evaluate(e){return new Wt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const pn=8192;function fn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function mn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function gn(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*pn),Math.round(r*i*pn)]}function yn(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function _n(e,t){let n=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(yn(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function vn(e,t){for(let n=0;n<t.length;n++)if(_n(e,t[n]))return!0;return!1}function xn(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function bn(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*l[0]&&xn(r,i,o,a)&&xn(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function wn(e,t){for(let n=0;n<e.length;++n)if(!_n(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(bn(e[n],e[n+1],t))return!1;return!0}function Tn(e,t){for(let n=0;n<t.length;n++)if(wn(e,t[n]))return!0;return!1}function En(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const a=gn(e[i][r],n);fn(t,a),o.push(a)}r.push(o)}return r}function Sn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=En(e[i],t,n);r.push(o)}return r}function kn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}fn(t,e)}function Cn(e,t,n,r){const i=Math.pow(2,r.z)*pn,o=[r.x*pn,r.y*pn],a=[];for(const r of e)for(const e of r){const r=[e.x+o[0],e.y+o[1]];kn(r,t,n,i),a.push(r)}return a}function Mn(e,t,n,r){const i=Math.pow(2,r.z)*pn,o=[r.x*pn,r.y*pn],a=[];for(const n of e){const e=[];for(const r of n){const n=[r.x+o[0],r.y+o[1]];fn(t,n),e.push(n)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)kn(r,t,n,i)}var s;return a}class In{constructor(e,t){this.type=Pt,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Kt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new In(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new In(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new In(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=En(t.coordinates,r,i),a=Cn(e.geometry(),n,r,i);if(!mn(n,r))return!1;for(const e of a)if(!_n(e,o))return!1}if("MultiPolygon"===t.type){const o=Sn(t.coordinates,r,i),a=Cn(e.geometry(),n,r,i);if(!mn(n,r))return!1;for(const e of a)if(!vn(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=En(t.coordinates,r,i),a=Mn(e.geometry(),n,r,i);if(!mn(n,r))return!1;for(const e of a)if(!wn(e,o))return!1}if("MultiPolygon"===t.type){const o=Sn(t.coordinates,r,i),a=Mn(e.geometry(),n,r,i);if(!mn(n,r))return!1;for(const e of a)if(!Tn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Pn(e){if(e instanceof hn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof In)return!1;let t=!0;return e.eachChild((e=>{t&&!Pn(e)&&(t=!1)})),t}function An(e){if(e instanceof hn&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!An(e)&&(t=!1)})),t}function Dn(e,t){if(e instanceof hn&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!Dn(e,t)&&(n=!1)})),n}class zn{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new zn(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Rn{constructor(e,t=[],n,r=new kt,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new rn(t,[e]):"coerce"===n?new ln(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof en)&&"resolvedImage"!==r.type.kind&&On(r)){const t=new un;try{r=new en(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new Rn(this.registry,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new St(n,e))}checkSubtype(e,t){const n=Ut(e,t);return n&&this.error(n),n}}function On(e){if(e instanceof zn)return On(e.boundExpression);if(e instanceof hn&&"error"===e.name)return!1;if(e instanceof dn)return!1;if(e instanceof In)return!1;const t=e instanceof ln||e instanceof rn;let n=!0;return e.eachChild((e=>{n=t?n&&On(e):n&&e instanceof en})),!!n&&Pn(e)&&Dn(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ln(e,t){const n=e.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;o=s+1}else{if(!(r>t))throw new tn("Input is not a number.");a=s-1}return 0}class Fn{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of n)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,Mt);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let n=1;n<e.length;n+=2){const o=1===n?-1/0:e[n],a=e[n+1],s=n,l=n+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([o,c])}return new Fn(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Ln(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}function Bn(e,t,n){return e*(1-n)+t*n}var Nn=Object.freeze({__proto__:null,number:Bn,color:function(e,t,n){return new Gt(Bn(e.r,t.r,n),Bn(e.g,t.g,n),Bn(e.b,t.b,n),Bn(e.a,t.a,n))},array:function(e,t,n){return e.map(((e,r)=>Bn(e,t[r],n)))}});const Un=.95047,jn=1.08883,Vn=4/29,$n=6/29,qn=3*$n*$n,Gn=Math.PI/180,Wn=180/Math.PI;function Zn(e){return e>.008856451679035631?Math.pow(e,1/3):e/qn+Vn}function Hn(e){return e>$n?e*e*e:qn*(e-Vn)}function Xn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Yn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Kn(e){const t=Yn(e.r),n=Yn(e.g),r=Yn(e.b),i=Zn((.4124564*t+.3575761*n+.1804375*r)/Un),o=Zn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Zn((.0193339*t+.119192*n+.9503041*r)/jn)),alpha:e.a}}function Qn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Hn(t),n=Un*Hn(n),r=jn*Hn(r),new Gt(Xn(3.2404542*n-1.5371385*t-.4985314*r),Xn(-.969266*n+1.8760108*t+.041556*r),Xn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Jn(e,t,n){const r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const er={forward:Kn,reverse:Qn,interpolate:function(e,t,n){return{l:Bn(e.l,t.l,n),a:Bn(e.a,t.a,n),b:Bn(e.b,t.b,n),alpha:Bn(e.alpha,t.alpha,n)}}},tr={forward:function(e){const{l:t,a:n,b:r}=Kn(e),i=Math.atan2(r,n)*Wn;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Gn,n=e.c;return Qn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Jn(e.h,t.h,n),c:Bn(e.c,t.c,n),l:Bn(e.l,t.l,n),alpha:Bn(e.alpha,t.alpha,n)}}};var nr=Object.freeze({__proto__:null,lab:er,hcl:tr});class rr{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,r,i){let o=0;if("exponential"===e.name)o=ir(t,e.base,r,i);else if("linear"===e.name)o=ir(t,1,r,i);else if("cubic-bezier"===e.name){const a=e.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(ir(t,1,r,i))}return o}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,Mt),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=At:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<o.length;e+=2){const n=o[e],r=o[e+1],i=e+3,l=e+4;if("number"!=typeof n)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=n)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(r,l,s);if(!c)return null;s=s||c.type,a.push([n,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new rr(s,n,r,i,a):t.error(`Type ${Bt(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=Ln(t,r),a=rr.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);return"interpolate"===this.operator?Nn[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?tr.reverse(tr.interpolate(tr.forward(s),tr.forward(l),a)):er.reverse(er.interpolate(er.forward(s),er.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function ir(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}class or{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const r of e.slice(1)){const e=t.parse(r,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}const o=r&&i.some((e=>Ut(r,e.type)));return new or(o?zt:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(e),n&&n instanceof Xt&&!n.available&&(t||(t=n),n=null,r===this.args.length))return t;if(null!==n)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}class ar{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let r=1;r<e.length-1;r+=2){const i=e[r];if("string"!=typeof i)return t.error(`Expected string, but found ${typeof i} instead.`,r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new ar(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}class sr{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Mt),r=t.parse(e[2],2,Ft(t.expectedType||zt));return n&&r?new sr(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new tn(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new tn(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new tn(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class lr{constructor(e,t){this.type=Pt,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,zt),r=t.parse(e[2],2,zt);return n&&r?jt(n.type,[Pt,It,Mt,Ct,zt])?new lr(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Bt(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Vt(t,["boolean","string","number","null"]))throw new tn(`Expected first argument to be of type boolean, string, number or null, but found ${Bt(Qt(t))} instead.`);if(!Vt(n,["string","array"]))throw new tn(`Expected second argument to be of type array or string, but found ${Bt(Qt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class cr{constructor(e,t,n){this.type=Mt,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,zt),r=t.parse(e[2],2,zt);if(!n||!r)return null;if(!jt(n.type,[Pt,It,Mt,Ct,zt]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Bt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,Mt);return i?new cr(n,r,i):null}return new cr(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Vt(t,["boolean","string","number","null"]))throw new tn(`Expected first argument to be of type boolean, string, number or null, but found ${Bt(Qt(t))} instead.`);if(!Vt(n,["string","array"]))throw new tn(`Expected second argument to be of type array or string, but found ${Bt(Qt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class ur{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let a=2;a<e.length-1;a+=2){let s=e[a];const l=e[a+1];Array.isArray(s)||(s=[s]);const c=t.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,Qt(e)))return null}else n=Qt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(l,a,r);if(!u)return null;r=r||u.type,o.push(u)}const a=t.parse(e[1],1,zt);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new ur(n,r,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(Qt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],r={};for(const e of t){const t=r[this.cases[e]];void 0===t?(r[this.cases[e]]=n.length,n.push([this.cases[e],[e]])):n[t][1].push(e)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,r]of n)e.push(1===r.length?i(r[0]):r.map(i)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}class hr{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let i=1;i<e.length-1;i+=2){const o=t.parse(e[i],i,Pt);if(!o)return null;const a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}const i=t.parse(e[e.length-1],e.length-1,n);return i?new hr(n,r,i):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}class dr{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,zt),r=t.parse(e[2],2,Mt);if(!n||!r)return null;if(!jt(n.type,[Ft(zt),It,zt]))return t.error(`Expected first argument to be of type array or string, but found ${Bt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,Mt);return i?new dr(n.type,n,r,i):null}return new dr(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Vt(t,["string","array"]))throw new tn(`Expected first argument to be of type array or string, but found ${Bt(Qt(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function pr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function fr(e,t,n,r){return 0===r.compare(t,n)}function mr(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=Pt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,zt);if(!o)return null;if(!pr(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${Bt(o.type)}'.`);let a=t.parse(e[2],2,zt);if(!a)return null;if(!pr(n,a.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${Bt(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${Bt(o.type)}' and '${Bt(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new rn(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new rn(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,Rt),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=Qt(o),n=Qt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new tn(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=Qt(o),n=Qt(a);if("string"!==e.kind||"string"!==n.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const gr=mr("==",(function(e,t,n){return t===n}),fr),yr=mr("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!fr(0,t,n,r)})),_r=mr("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),vr=mr(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),xr=mr("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),br=mr(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0}));class wr{constructor(e,t,n,r,i){this.type=It,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Mt);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,It),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,It),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Mt),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=t.parse(r["max-fraction-digits"],1,Mt),!s)?null:new wr(n,i,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Tr{constructor(e){this.type=Mt,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${Bt(n.type)} instead.`):new Tr(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new tn(`Expected value to be of type string or array, but found ${Bt(Qt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Er={"==":gr,"!=":yr,">":vr,"<":_r,">=":br,"<=":xr,array:rn,at:sr,boolean:rn,case:hr,coalesce:or,collator:dn,format:on,image:an,in:lr,"index-of":cr,interpolate:rr,"interpolate-hcl":rr,"interpolate-lab":rr,length:Tr,let:ar,literal:en,match:ur,number:rn,"number-format":wr,object:rn,slice:dr,step:Fn,string:rn,"to-boolean":ln,"to-color":ln,"to-number":ln,"to-string":ln,var:zn,within:In};function Sr(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,a=Yt(t,n,r,o);if(a)throw new tn(a);return new Gt(t/255*o,n/255*o,r/255*o,o)}function kr(e,t){return e in t}function Cr(e,t){const n=t[e];return void 0===n?null:n}function Mr(e){return{type:e}}function Ir(e){return{result:"success",value:e}}function Pr(e){return{result:"error",value:e}}function Ar(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Dr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function zr(e){return!!e.expression&&e.expression.interpolated}function Rr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Or(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Lr(e){return e}function Fr(e,t){const n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||!(r||void 0!==e.property),o=e.type||(zr(t)?"exponential":"interval");if(n&&((e=wt({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],Gt.parse(e[1])]))),e.default=Gt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!nr[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,s,l;if("exponential"===o)a=jr;else if("interval"===o)a=Ur;else if("categorical"===o){a=Nr,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Vr}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,Fr(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:rr.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:({zoom:n},r)=>jr({stops:i,base:e.base},t,n).evaluate(n,r)}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:rr.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:n})=>a(e,t,n,s,l)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?Br(e.default,t.default):a(e,t,i,s,l)}}}function Br(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Nr(e,t,n,r,i){return Br(typeof n===i?r[n]:void 0,e.default,t.default)}function Ur(e,t,n){if("number"!==Rr(n))return Br(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=Ln(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function jr(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==Rr(n))return Br(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=Ln(e.stops.map((e=>e[0])),n),a=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=Nn[t.type]||Lr;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=nr[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return c(t,n,a)}}:c(s,l,a)}function Vr(e,t,n){return"color"===t.type?n=Gt.parse(n):"formatted"===t.type?n=Ht.fromString(n.toString()):"resolvedImage"===t.type?n=Xt.fromString(n.toString()):Rr(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Br(n,e.default,t.default)}hn.register(Er,{error:[{kind:"error"},[It],(e,[t])=>{throw new tn(t.evaluate(e))}],typeof:[It,[zt],(e,[t])=>Bt(Qt(t.evaluate(e)))],"to-rgba":[Ft(Mt,4),[At],(e,[t])=>t.evaluate(e).toArray()],rgb:[At,[Mt,Mt,Mt],Sr],rgba:[At,[Mt,Mt,Mt,Mt],Sr],has:{type:Pt,overloads:[[[It],(e,[t])=>kr(t.evaluate(e),e.properties())],[[It,Dt],(e,[t,n])=>kr(t.evaluate(e),n.evaluate(e))]]},get:{type:zt,overloads:[[[It],(e,[t])=>Cr(t.evaluate(e),e.properties())],[[It,Dt],(e,[t,n])=>Cr(t.evaluate(e),n.evaluate(e))]]},"feature-state":[zt,[It],(e,[t])=>Cr(t.evaluate(e),e.featureState||{})],properties:[Dt,[],e=>e.properties()],"geometry-type":[It,[],e=>e.geometryType()],id:[zt,[],e=>e.id()],zoom:[Mt,[],e=>e.globals.zoom],pitch:[Mt,[],e=>e.globals.pitch||0],"distance-from-center":[Mt,[],e=>e.distanceFromCenter()],"heatmap-density":[Mt,[],e=>e.globals.heatmapDensity||0],"line-progress":[Mt,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[Mt,[],e=>e.globals.skyRadialProgress||0],accumulated:[zt,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[Mt,Mr(Mt),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[Mt,Mr(Mt),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:Mt,overloads:[[[Mt,Mt],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[Mt],(e,[t])=>-t.evaluate(e)]]},"/":[Mt,[Mt,Mt],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[Mt,[Mt,Mt],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[Mt,[],()=>Math.LN2],pi:[Mt,[],()=>Math.PI],e:[Mt,[],()=>Math.E],"^":[Mt,[Mt,Mt],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[Mt,[Mt],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Mt,[Mt],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Mt,[Mt],(e,[t])=>Math.log(t.evaluate(e))],log2:[Mt,[Mt],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Mt,[Mt],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Mt,[Mt],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Mt,[Mt],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Mt,[Mt],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Mt,[Mt],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Mt,[Mt],(e,[t])=>Math.atan(t.evaluate(e))],min:[Mt,Mr(Mt),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[Mt,Mr(Mt),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[Mt,[Mt],(e,[t])=>Math.abs(t.evaluate(e))],round:[Mt,[Mt],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Mt,[Mt],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Mt,[Mt],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Pt,[It,zt],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Pt,[zt],(e,[t])=>e.id()===t.value],"filter-type-==":[Pt,[It],(e,[t])=>e.geometryType()===t.value],"filter-<":[Pt,[It,zt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Pt,[zt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[Pt,[It,zt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Pt,[zt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[Pt,[It,zt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Pt,[zt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[Pt,[It,zt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Pt,[zt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[Pt,[zt],(e,[t])=>t.value in e.properties()],"filter-has-id":[Pt,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Pt,[Ft(It)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Pt,[Ft(zt)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Pt,[It,Ft(zt)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Pt,[It,Ft(zt)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Pt,overloads:[[[Pt,Pt],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Mr(Pt),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Mr(Pt),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Pt,[Pt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Pt,[It],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[It,[It],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[It,[It],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[It,Mr(zt),(e,t)=>t.map((t=>Jt(t.evaluate(e)))).join("")],"resolved-locale":[It,[Rt],(e,[t])=>t.evaluate(e).resolvedLocale()]});class $r{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new un,this._defaultValue=t?function(e){return"color"===e.type&&Or(e.default)?new Gt(0,0,0,0):"color"===e.type?Gt.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new tn(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function qr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Er}function Gr(e,t){const n=new Rn(Er,[],t?function(e){const t={color:At,string:It,number:Mt,enum:It,boolean:Pt,formatted:Ot,resolvedImage:Lt};return"array"===e.type?Ft(t[e.value]||zt,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Ir(new $r(r,t)):Pr(n.errors)}class Wr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!An(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class Zr{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!An(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?rr.interpolationFactor(this.interpolationType,e,t,n):0}}function Hr(e,t){if("error"===(e=Gr(e,t)).result)return e;const n=e.value.expression,r=Pn(n);if(!r&&!Ar(t))return Pr([new St("","data expressions not supported")]);const i=Dn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Dr(t))return Pr([new St("","zoom expressions not supported")]);const o=Yr(n);return o||i?o instanceof St?Pr([o]):o instanceof rr&&!zr(t)?Pr([new St("",'"interpolate" expressions cannot be used with this property')]):Ir(o?new Zr(r?"camera":"composite",e.value,o.labels,o instanceof rr?o.interpolation:void 0):new Wr(r?"constant":"source",e.value)):Pr([new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xr{constructor(e,t){this._parameters=e,this._specification=t,wt(this,Fr(this._parameters,this._specification))}static deserialize(e){return new Xr(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Yr(e){let t=null;if(e instanceof ar)t=Yr(e.result);else if(e instanceof or){for(const n of e.args)if(t=Yr(n),t)break}else(e instanceof Fn||e instanceof rr)&&e.input instanceof hn&&"zoom"===e.input.name&&(t=e);return t instanceof St||e.eachChild((e=>{const n=Yr(e);n instanceof St?t=n:!t&&n?t=new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new St("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Kr(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=Rr(n);if("object"!==l)return[new xt(t,n,`object expected, ${l} found`)];for(const e in n){const l=e.split(".")[0],c=r[l]||r["*"];let u;if(i[l])u=i[l];else if(r[l])u=Pi;else if(i["*"])u=i["*"];else{if(!r["*"]){s.push(new xt(t,n[e],`unknown property "${e}"`));continue}u=Pi}s=s.concat(u({key:(t?`${t}.`:t)+e,value:n[e],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:e},n))}for(const e in r)i[e]||r[e].required&&void 0===r[e].default&&void 0===n[e]&&s.push(new xt(t,n,`missing required property "${e}"`));return s}function Qr(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Pi;if("array"!==Rr(t))return[new xt(o,t,`array expected, ${Rr(t)} found`)];if(n.length&&t.length!==n.length)return[new xt(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new xt(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};i.$version<7&&(s.function=n.function),"object"===Rr(n.value)&&(s=n.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(a({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:r,styleSpec:i,key:`${o}[${e}]`}));return l}function Jr(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Rr(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new xt(t,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Rr(r.minimum)&&(i=r.minimum[e.arrayIndex]),n<i)return[new xt(t,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Rr(r.maximum)&&(i=r.maximum[e.arrayIndex]),n>i)return[new xt(t,n,`${n} is greater than the maximum value ${i}`)]}return[]}function ei(e){const t=e.valueSpec,n=Tt(e.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===Rr(e.value.stops)&&"array"===Rr(e.value.stops[0])&&"object"===Rr(e.value.stops[0][0]),u=Kr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new xt(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(Qr({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Rr(r)&&0===r.length&&t.push(new xt(e.key,r,"array must have at least one stop")),t},default:function(e){return Pi({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new xt(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new xt(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!zr(e.valueSpec)&&u.push(new xt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Ar(e.valueSpec)?u.push(new xt(e.key,e.value,"property functions not supported")):s&&!Dr(e.valueSpec)&&u.push(new xt(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new xt(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const r=e.value,s=e.key;if("array"!==Rr(r))return[new xt(s,r,`array expected, ${Rr(r)} found`)];if(2!==r.length)return[new xt(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Rr(r[0]))return[new xt(s,r,`object expected, ${Rr(r[0])} found`)];if(void 0===r[0].zoom)return[new xt(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new xt(s,r,"object stop key must have value")];if(o&&o>Tt(r[0].zoom))return[new xt(s,r[0].zoom,"stop zoom values must appear in ascending order")];Tt(r[0].zoom)!==o&&(o=Tt(r[0].zoom),i=void 0,a={}),n=n.concat(Kr({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Jr,value:d}}))}else n=n.concat(d({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return qr(Et(r[1]))?n.concat([new xt(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(Pi({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const s=Rr(e.value),l=Tt(e.value),c=null!==e.value?e.value:o;if(r){if(s!==r)return[new xt(e.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new xt(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return Ar(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt(e.key,c,r)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new xt(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new xt(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new xt(e.key,c,`integer expected, found ${l}`)]}}function ti(e){const t=("property"===e.expressionContext?Hr:Gr)(Et(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new xt(`${e.key}${t.key}`,e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new xt(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!An(n))return[new xt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return ni(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Dn(n,["zoom","feature-state"]))return[new xt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Pn(n))return[new xt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ni(e,t){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);for(const e of t.valueSpec.expression.parameters)n.delete(e);if(0===n.size)return[];const r=[];return e instanceof hn&&n.has(e.name)?[new xt(t.key,t.value,`["${e.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(e.eachChild((e=>{r.push(...ni(e,t))})),r)}function ri(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Tt(n))&&i.push(new xt(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(Tt(n))&&i.push(new xt(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function ii(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ii(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function oi(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ii(e)||(e=di(e));const n=e;let r=!0;try{r=function(e){if(!li(e))return e;let t=Et(e);return si(t),t=ai(t),t}(n)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const i=vt[`filter_${t}`],o=Gr(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map((e=>`${e.key}: ${e.message}`)).join(", "));a=(e,t,n)=>o.value.evaluate(e,t,{},n);let s=null,l=null;if(r!==n){const e=Gr(n,i);if("error"===e.result)throw new Error(e.value.map((e=>`${e.key}: ${e.message}`)).join(", "));s=(t,n,r,i,o)=>e.value.evaluate(t,n,{},r,void 0,void 0,i,o),l=!Pn(e.value.expression)}return a=a,{filter:a,dynamicFilter:s||void 0,needGeometry:hi(r),needFeature:!!l}}function ai(e){if(!Array.isArray(e))return e;const t=function(e){if(ci.has(e[0]))for(let t=1;t<e.length;t++)if(li(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>ai(e)))}function si(e){let t=!1;const n=[];if("case"===e[0]){for(let r=1;r<e.length-1;r+=2)t=t||li(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||li(e[1]);for(let t=2;t<e.length-1;t+=2)n.push(e[t+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||li(e[1]);for(let t=1;t<e.length-1;t+=2)n.push(e[t+1])}t&&(e.length=0,e.push("any",...n));for(let t=1;t<e.length;t++)si(e[t])}function li(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let t=1;t<e.length;t++)if(li(e[t]))return!0;return!1}const ci=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ui(e,t){return e<t?-1:e>t?1:0}function hi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(hi(e[t]))return!0;return!1}function di(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?pi(e[1],e[2],"=="):"!="===t?gi(pi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?pi(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(di))):"all"===t?["all"].concat(e.slice(1).map(di)):"none"===t?["all"].concat(e.slice(1).map(di).map(gi)):"in"===t?fi(e[1],e.slice(2)):"!in"===t?gi(fi(e[1],e.slice(2))):"has"===t?mi(e[1]):"!has"===t?gi(mi(e[1])):"within"!==t||e;var n}function pi(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function fi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(ui)]]:["filter-in-small",e,["literal",t]]}}function mi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function gi(e){return["!",e]}function yi(e){if(ii(Et(e.value))){const t=Et(e.layerType);return ti(wt({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${t||"fill"}`]}))}return _i(e)}function _i(e){const t=e.value,n=e.key;if("array"!==Rr(t))return[new xt(n,t,`array expected, ${Rr(t)} found`)];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new xt(n,t,"filter array must have at least 1 element")];switch(o=o.concat(ri({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),Tt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Tt(t[1])&&o.push(new xt(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new xt(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Rr(t[1]),"string"!==i&&o.push(new xt(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=Rr(t[a]),"$type"===Tt(t[1])?o=o.concat(ri({key:`${n}[${a}]`,value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new xt(`${n}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(_i({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Rr(t[1]),2!==t.length?o.push(new xt(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new xt(`${n}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=Rr(t[1]),2!==t.length?o.push(new xt(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new xt(`${n}[1]`,t[1],`object expected, ${i} found`))}return o}function vi(e,t){const n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Pi({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=e.valueSpec||s[a];if(!c)return[new xt(n,o,`unknown property "${a}"`)];let u;if("string"===Rr(o)&&Ar(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new xt(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new xt(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Or(Et(o))&&"identity"===Tt(o.type)&&h.push(new xt(n,o,'"text-font" does not support identity functions'))),h.concat(Pi({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function xi(e){return vi(e,"paint")}function bi(e){return vi(e,"layout")}function wi(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new xt(r,n,'either "type" or "ref" is required'));let a=Tt(n.type);const s=Tt(n.ref);if(n.id){const o=Tt(n.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];Tt(e.id)===o&&t.push(new xt(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new xt(r,n[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{Tt(t.id)===s&&(e=t)})),e?e.ref?t.push(new xt(r,n.ref,"ref cannot reference another ref layer")):a=Tt(e.type):t.push(new xt(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&Tt(e.type);e?"vector"===o&&"raster"===a?t.push(new xt(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new xt(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new xt(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new xt(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new xt(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new xt(r,n.source,`source "${n.source}" not found`))}else t.push(new xt(r,n,'missing required property "source"'));return t=t.concat(Kr({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Pi({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:e=>yi(wt({layerType:a},e)),layout:e=>Kr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>bi(wt({layerType:a},e))}}),paint:e=>Kr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>xi(wt({layerType:a},e))}})}})),t}function Ti(e){const t=e.value,n=e.key,r=Rr(t);return"string"!==r?[new xt(n,t,`string expected, ${r} found`)]:[]}const Ei={promoteId:function({key:e,value:t}){if("string"===Rr(t))return Ti({key:e,value:t});{const n=[];for(const r in t)n.push(...Ti({key:`${e}.${r}`,value:t[r]}));return n}}};function Si(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new xt(n,t,'"type" is required')];const o=Tt(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Kr({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:Ei}),a;case"geojson":if(a=Kr({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Ei}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...ti({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...ti({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Kr({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Kr({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new xt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ri({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function ki(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const a=Rr(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new xt("light",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&r[a[1]]&&r[a[1]].transition?Pi({key:e,value:t[e],valueSpec:n.transition,style:i,styleSpec:n}):r[e]?Pi({key:e,value:t[e],valueSpec:r[e],style:i,styleSpec:n}):[new xt(e,t[e],`unknown property "${e}"`)])}return o}function Ci(e){const t=e.value,n=e.key,r=e.style,i=e.styleSpec,o=i.terrain;let a=[];const s=Rr(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new xt("terrain",t,`object expected, ${s} found`)]),a;for(const e in t){const n=e.match(/^(.*)-transition$/);a=a.concat(n&&o[n[1]]&&o[n[1]].transition?Pi({key:e,value:t[e],valueSpec:i.transition,style:r,styleSpec:i}):o[e]?Pi({key:e,value:t[e],valueSpec:o[e],style:r,styleSpec:i}):[new xt(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=r.sources&&r.sources[t.source],i=e&&Tt(e.type);e?"raster-dem"!==i&&a.push(new xt(n,t.source,`terrain cannot be used with a source of type ${i}, it only be used with a "raster-dem" source type`)):a.push(new xt(n,t.source,`source "${t.source}" not found`))}else a.push(new xt(n,t,'terrain is missing required property "source"'));return a}function Mi(e){const t=e.value,n=e.style,r=e.styleSpec,i=r.fog;let o=[];const a=Rr(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new xt("fog",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?Pi({key:e,value:t[e],valueSpec:r.transition,style:n,styleSpec:r}):i[e]?Pi({key:e,value:t[e],valueSpec:i[e],style:n,styleSpec:r}):[new xt(e,t[e],`unknown property "${e}"`)])}return o}const Ii={"*":()=>[],array:Qr,boolean:function(e){const t=e.value,n=e.key,r=Rr(t);return"boolean"!==r?[new xt(n,t,`boolean expected, ${r} found`)]:[]},number:Jr,color:function(e){const t=e.key,n=e.value,r=Rr(n);return"string"!==r?[new xt(t,n,`color expected, ${r} found`)]:null===qt.parseCSSColor(n)?[new xt(t,n,`color expected, "${n}" found`)]:[]},constants:bt,enum:ri,filter:yi,function:ei,layer:wi,object:Kr,source:Si,light:ki,terrain:Ci,fog:Mi,string:Ti,formatted:function(e){return 0===Ti(e).length?[]:ti(e)},resolvedImage:function(e){return 0===Ti(e).length?[]:ti(e)},projection:function(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style;let o=[];const a=Rr(t);if("object"===a)for(const e in t)o=o.concat(Pi({key:e,value:t[e],valueSpec:r[e],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new xt("projection",t,`object or string expected, ${a} found`)]));return o}};function Pi(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Or(Tt(t))?ei(e):n.expression&&qr(Et(t))?ti(e):n.type&&Ii[n.type]?Ii[n.type](e):Kr(wt({},e,{valueSpec:n.type?r[n.type]:n}))}function Ai(e){const t=e.value,n=e.key,r=Ti(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new xt(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new xt(n,t,'"glyphs" url must include a "{range}" token'))),r}function Di(e,t=vt){let n=[];return n=n.concat(Pi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ai,"*":()=>[]}})),e.constants&&(n=n.concat(bt({key:"constants",value:e.constants,style:e,styleSpec:t}))),zi(n)}function zi(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function Ri(e){return function(...t){return zi(e.apply(this,t))}}Di.source=Ri(Si),Di.light=Ri(ki),Di.terrain=Ri(Ci),Di.fog=Ri(Mi),Di.layer=Ri(wi),Di.filter=Ri(yi),Di.paintProperty=Ri(xi),Di.layoutProperty=Ri(bi);const Oi=Di,Li=Oi.light,Fi=Oi.fog,Bi=Oi.paintProperty,Ni=Oi.layoutProperty;function Ui(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new yt(new Error(r.message))),n=!0;return n}var ji=Vi;function Vi(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var u=n/t*e;this.min=-u,this.max=e+u}Vi.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Vi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vi.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Vi.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Vi.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):e<=u[p+2]&&t<=u[p+3]&&n>=u[p+0]&&r>=u[p+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},Vi.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r),d=l;d<=u;d++)for(var p=c;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&i.call(this,e,t,n,r,f,o,a,s))return}},Vi.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Vi.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Vi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),i[3+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};const{ImageData:$i,ImageBitmap:qi}=a,Gi={};function Wi(e,t,n={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Gi[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}Wi("Object",Object),ji.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},ji.deserialize=function(e){return new ji(e.buffer)},Wi("Grid",ji),Wi("Color",Gt),Wi("Error",Error),Wi("ResolvedImage",Xt),Wi("StylePropertyFunction",Xr),Wi("StyleExpression",$r,{omit:["_evaluator"]}),Wi("ZoomDependentExpression",Zr),Wi("ZoomConstantExpression",Wr),Wi("CompoundExpression",hn,{omit:["_evaluate"]});for(const e in Er)Er[e]._classRegistryKey||Wi(`Expression_${e}`,Er[e]);function Zi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Hi(e){return qi&&e instanceof qi}function Xi(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Zi(e)||Hi(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const n=e;return t&&t.push(n.buffer),n}if(e instanceof $i)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const r of e)n.push(Xi(r,t));return n}if("object"==typeof e){const n=e.constructor,r=n._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");const i=n.serialize?n.serialize(e,t):{};if(!n.serialize){for(const n in e){if(!e.hasOwnProperty(n))continue;if(Gi[r].omit.indexOf(n)>=0)continue;const o=e[n];i[n]=Gi[r].shallow.indexOf(n)>=0?o:Xi(o,t)}e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function Yi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Zi(e)||Hi(e)||ArrayBuffer.isView(e)||e instanceof $i)return e;if(Array.isArray(e))return e.map(Yi);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=Gi[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const n of Object.keys(e)){if("$name"===n)continue;const i=e[n];r[n]=Gi[t].shallow.indexOf(n)>=0?i:Yi(i)}return r}throw new Error("can't deserialize object of type "+typeof e)}class Ki{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const Qi=e=>e>=1536&&e<=1791,Ji=e=>e>=1872&&e<=1919,eo=e=>e>=2208&&e<=2303,to=e=>e>=11904&&e<=12031,no=e=>e>=12032&&e<=12255,ro=e=>e>=12272&&e<=12287,io=e=>e>=12288&&e<=12351,oo=e=>e>=12352&&e<=12447,ao=e=>e>=12448&&e<=12543,so=e=>e>=12544&&e<=12591,lo=e=>e>=12704&&e<=12735,co=e=>e>=12736&&e<=12783,uo=e=>e>=12784&&e<=12799,ho=e=>e>=12800&&e<=13055,po=e=>e>=13056&&e<=13311,fo=e=>e>=13312&&e<=19903,mo=e=>e>=19968&&e<=40959,go=e=>e>=40960&&e<=42127,yo=e=>e>=42128&&e<=42191,_o=e=>e>=44032&&e<=55215,vo=e=>e>=63744&&e<=64255,xo=e=>e>=64336&&e<=65023,bo=e=>e>=65040&&e<=65055,wo=e=>e>=65072&&e<=65103,To=e=>e>=65104&&e<=65135,Eo=e=>e>=65136&&e<=65279,So=e=>e>=65280&&e<=65519;function ko(e){for(const t of e)if(Io(t.charCodeAt(0)))return!0;return!1}function Co(e){for(const t of e)if(!Mo(t.charCodeAt(0)))return!1;return!0}function Mo(e){return!(Qi(e)||Ji(e)||eo(e)||xo(e)||Eo(e))}function Io(e){return!(746!==e&&747!==e&&(e<4352||!(lo(e)||so(e)||wo(e)&&!(e>=65097&&e<=65103)||vo(e)||po(e)||to(e)||co(e)||!(!io(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||fo(e)||mo(e)||ho(e)||(e=>e>=12592&&e<=12687)(e)||(e=>e>=43360&&e<=43391)(e)||(e=>e>=55216&&e<=55295)(e)||(e=>e>=4352&&e<=4607)(e)||_o(e)||oo(e)||ro(e)||(e=>e>=12688&&e<=12703)(e)||no(e)||uo(e)||ao(e)&&12540!==e||!(!So(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!To(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||(e=>e>=5120&&e<=5759)(e)||(e=>e>=6320&&e<=6399)(e)||bo(e)||(e=>e>=19904&&e<=19967)(e)||go(e)||yo(e))))}function Po(e){return!(Io(e)||function(e){return!!((e=>e>=128&&e<=255)(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(e=>e>=8192&&e<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(e=>e>=8448&&e<=8527)(e)||(e=>e>=8528&&e<=8591)(e)||(e=>e>=8960&&e<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(e=>e>=9216&&e<=9279)(e)&&9251!==e||(e=>e>=9280&&e<=9311)(e)||(e=>e>=9312&&e<=9471)(e)||(e=>e>=9632&&e<=9727)(e)||(e=>e>=9728&&e<=9983)(e)&&!(e>=9754&&e<=9759)||(e=>e>=11008&&e<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||io(e)||ao(e)||(e=>e>=57344&&e<=63743)(e)||wo(e)||To(e)||So(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Ao(e){return e>=1424&&e<=2303||xo(e)||Eo(e)}function Do(e,t){return!(!t&&Ao(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||(e=>e>=6016&&e<=6143)(e))}function zo(e){for(const t of e)if(Ao(t.charCodeAt(0)))return!0;return!1}const Ro="deferred",Oo="loading",Lo="loaded";let Fo=null,Bo="unavailable",No=null;const Uo=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Bo="error"),Fo&&Fo(e)};function jo(){Vo.fire(new gt("pluginStateChange",{pluginStatus:Bo,pluginURL:No}))}const Vo=new _t,$o=function(){return Bo},qo=function(){if(Bo!==Ro||!No)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Bo=Oo,jo(),No&&at({url:No},(e=>{e?Uo(e):(Bo=Lo,jo())}))},Go={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Bo===Lo||null!=Go.applyArabicShaping,isLoading:()=>Bo===Oo,setState(e){Bo=e.pluginStatus,No=e.pluginURL},isParsed:()=>null!=Go.applyArabicShaping&&null!=Go.processBidirectionalText&&null!=Go.processStyledBidirectionalText,getPluginURL:()=>No};class Wo{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ki,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const n of e)if(!Do(n.charCodeAt(0),t))return!1;return!0}(e,Go.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}class Zo{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Or(e))return new Xr(e,t);if(qr(e)){const n=Hr(e,t);if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=Gt.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class Ho{constructor(e){this.property=e,this.value=new Zo(e,void 0)}transitioned(e,t){return new Yo(this.property,this.value,t,ee({},e.transition,this.transition),e.now)}untransitioned(){return new Yo(this.property,this.value,null,{},0)}}class Xo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return ue(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ho(this._values[e].property)),this._values[e].value=new Zo(this._values[e].property,null===t?void 0:ue(t))}getTransition(e){return ue(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ho(this._values[e].property)),this._values[e].transition=ue(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new Ko(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new Ko(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Yo{constructor(e,t,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+o,this.end=this.begin+a,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,W(a))}}return i}}class Ko{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new ea(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Qo{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return ue(this._values[e].value)}setValue(e,t){this._values[e]=new Zo(this._values[e].property,null===t?void 0:ue(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new ea(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class Jo{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class ea{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class ta{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const r=Nn[this.specification.type];return r?r(e,t,n):e}}class na{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new Jo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Jo(this,{kind:"constant",value:void 0},e.parameters);const r=Nn[this.specification.type];return r?new Jo(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class ra extends na{possiblyEvaluate(e,t,n,r){if(void 0===e.value)return new Jo(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,t);return new Jo(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Jo(this,{kind:"constant",value:n},t)}return new Jo(this,e.expression,t)}evaluate(e,t,n,r,i,o){if("source"===e.kind){const a=e.evaluate(t,n,r,i,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t,other:n}:{from:n,to:t,other:e}}interpolate(e){return e}}class ia{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new Wo(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Wo(Math.floor(t.zoom),t)),e.expression.evaluate(new Wo(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class oa{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class aa{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const r=this.defaultPropertyValues[t]=new Zo(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new Ho(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}}}function sa(e,t){return 256*(e=X(Math.floor(e),0,255))+X(Math.floor(t),0,255)}Wi("DataDrivenProperty",na),Wi("DataConstantProperty",ta),Wi("CrossFadedDataDrivenProperty",ra),Wi("CrossFadedProperty",ia),Wi("ColorRampProperty",oa);const la={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ca{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ua{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ha(e,t=1){let n=0,r=0;return{members:e.map((e=>{const i=la[e.type].BYTES_PER_ELEMENT,o=n=da(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:da(n,Math.max(r,t)),alignment:t}}function da(e,t){return Math.ceil(e/t)*t}class pa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}pa.prototype.bytesPerElement=4,Wi("StructArrayLayout2i4",pa);class fa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}fa.prototype.bytesPerElement=8,Wi("StructArrayLayout4i8",fa);class ma extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,e}}ma.prototype.bytesPerElement=12,Wi("StructArrayLayout2i4ub1f12",ma);class ga extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}ga.prototype.bytesPerElement=12,Wi("StructArrayLayout3f12",ga);class ya extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s,l,c)}emplace(e,t,n,r,i,o,a,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}ya.prototype.bytesPerElement=20,Wi("StructArrayLayout10ui20",ya);class _a extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,o,a,s)}emplace(e,t,n,r,i,o,a,s,l){const c=8*e;return this.uint16[c+0]=t,this.uint16[c+1]=n,this.uint16[c+2]=r,this.uint16[c+3]=i,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,e}}_a.prototype.bytesPerElement=16,Wi("StructArrayLayout8ui16",_a);class va extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g){const y=16*e;return this.int16[y+0]=t,this.int16[y+1]=n,this.int16[y+2]=r,this.int16[y+3]=i,this.uint16[y+4]=o,this.uint16[y+5]=a,this.uint16[y+6]=s,this.uint16[y+7]=l,this.int16[y+8]=c,this.int16[y+9]=u,this.int16[y+10]=h,this.int16[y+11]=d,this.int16[y+12]=p,this.int16[y+13]=f,this.int16[y+14]=m,this.int16[y+15]=g,e}}va.prototype.bytesPerElement=32,Wi("StructArrayLayout4i4ui4i4i32",va);class xa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}xa.prototype.bytesPerElement=4,Wi("StructArrayLayout1ul4",xa);class ba extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,r,i,o,a,s,l,c,u,h,d)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,p){const f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.int16[f+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=h,this.uint16[f+18]=d,this.uint16[f+19]=p,e}}ba.prototype.bytesPerElement=40,Wi("StructArrayLayout5i4f1i1ul2ui40",ba);class wa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,e}}wa.prototype.bytesPerElement=16,Wi("StructArrayLayout3i2i2i16",wa);class Ta extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}Ta.prototype.bytesPerElement=16,Wi("StructArrayLayout2f1f2i16",Ta);class Ea extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}Ea.prototype.bytesPerElement=12,Wi("StructArrayLayout2ub2f12",Ea);class Sa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}Sa.prototype.bytesPerElement=6,Wi("StructArrayLayout3ui6",Sa);class ka extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b){const w=30*e,T=15*e,E=60*e;return this.int16[w+0]=t,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[T+2]=i,this.float32[T+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[T+5]=l,this.uint32[T+6]=c,this.uint32[T+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=p,this.float32[T+10]=f,this.float32[T+11]=m,this.uint8[E+48]=g,this.uint8[E+49]=y,this.uint8[E+50]=_,this.uint32[T+13]=v,this.int16[w+28]=x,this.uint8[E+58]=b,e}}ka.prototype.bytesPerElement=60,Wi("StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60",ka);class Ca extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,w,T,E,S,k,C,M,I){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,w,T,E,S,k,C,M,I)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,w,T,E,S,k,C,M,I,P){const A=38*e,D=19*e;return this.int16[A+0]=t,this.int16[A+1]=n,this.int16[A+2]=r,this.float32[D+2]=i,this.float32[D+3]=o,this.int16[A+8]=a,this.int16[A+9]=s,this.int16[A+10]=l,this.int16[A+11]=c,this.int16[A+12]=u,this.int16[A+13]=h,this.uint16[A+14]=d,this.uint16[A+15]=p,this.uint16[A+16]=f,this.uint16[A+17]=m,this.uint16[A+18]=g,this.uint16[A+19]=y,this.uint16[A+20]=_,this.uint16[A+21]=v,this.uint16[A+22]=x,this.uint16[A+23]=b,this.uint16[A+24]=w,this.uint16[A+25]=T,this.uint16[A+26]=E,this.uint16[A+27]=S,this.uint16[A+28]=k,this.uint32[D+15]=C,this.float32[D+16]=M,this.float32[D+17]=I,this.float32[D+18]=P,e}}Ca.prototype.bytesPerElement=76,Wi("StructArrayLayout3i2f6i15ui1ul3f76",Ca);class Ma extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Ma.prototype.bytesPerElement=4,Wi("StructArrayLayout1f4",Ma);class Ia extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}Ia.prototype.bytesPerElement=6,Wi("StructArrayLayout3i6",Ia);class Pa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=7*e;return this.float32[l+0]=t,this.float32[l+1]=n,this.float32[l+2]=r,this.float32[l+3]=i,this.float32[l+4]=o,this.float32[l+5]=a,this.float32[l+6]=s,e}}Pa.prototype.bytesPerElement=28,Wi("StructArrayLayout7f28",Pa);class Aa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,e}}Aa.prototype.bytesPerElement=12,Wi("StructArrayLayout1ul3ui12",Aa);class Da extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}Da.prototype.bytesPerElement=4,Wi("StructArrayLayout2ui4",Da);class za extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}za.prototype.bytesPerElement=2,Wi("StructArrayLayout1ui2",za);class Ra extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}Ra.prototype.bytesPerElement=8,Wi("StructArrayLayout2f8",Ra);class Oa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}Oa.prototype.bytesPerElement=16,Wi("StructArrayLayout4f16",Oa);class La extends ca{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}La.prototype.size=40;class Fa extends ba{get(e){return new La(this,e)}}Wi("CollisionBoxArray",Fa);class Ba extends ca{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Ba.prototype.size=60;class Na extends ka{get(e){return new Ba(this,e)}}Wi("PlacedSymbolArray",Na);class Ua extends ca{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ua.prototype.size=76;class ja extends Ca{get(e){return new Ua(this,e)}}Wi("SymbolInstanceArray",ja);class Va extends Ma{getoffsetX(e){return this.float32[1*e+0]}}Wi("GlyphOffsetArray",Va);class $a extends Ia{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Wi("SymbolLineVertexArray",$a);class qa extends ca{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}qa.prototype.size=12;class Ga extends Aa{get(e){return new qa(this,e)}}Wi("FeatureIndexArray",Ga);class Wa extends ca{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Wa.prototype.size=4;class Za extends Da{get(e){return new Wa(this,e)}}Wi("FillExtrusionCentroidArray",Za);const Ha=ha([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Xa=ha([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Ya=$t((function(e){e.exports=function(e,t){var n,r,i,o,a,s,l,c;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),Ka=$t((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),Qa=Ya,Ja=Ka;Qa.murmur3=Ya,Qa.murmur2=Ja;class es{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(ts(e)),this.positions.push(t,n,r)}getPositions(e){const t=ts(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return ns(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new es;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function ts(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Qa(String(e))}function ns(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;rs(e,o,a),rs(t,3*o,3*a),rs(t,3*o+1,3*a+1),rs(t,3*o+2,3*a+2)}a-n<r-a?(ns(e,t,n,a),n=a+1):(ns(e,t,a+1,r),r=a)}}function rs(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}Wi("FeaturePositionMap",es);class is{constructor(e,t){this.gl=e.gl,this.location=t}}class os extends is{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class as extends is{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class ss extends is{constructor(e,t){super(e,t),this.current=Gt.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const ls=new Float32Array(16),cs=new Float32Array(9),us=new Float32Array(4);function hs(e){return[sa(255*e.r,255*e.g),sa(255*e.b,255*e.a)]}class ds{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new ss(e,t):new os(e,t)}}class ps{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tl.concat(t.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,t,n,r){const i="u_pattern_to"===r||"u_dash_to"===r?this.patternTo:"u_pattern_from"===r||"u_dash_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)}getBinding(e,t,n){return"u_pattern_from"===n||"u_pattern_to"===n||"u_dash_from"===n||"u_dash_to"===n?new as(e,t):new os(e,t)}}class fs{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new Wo(0),t,{},i,r,o);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,o)}_setPaintValue(e,t,n){if("color"===this.type){const r=hs(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ms{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i,o){const a=this.expression.evaluate(new Wo(this.zoom),t,{},i,r,o),s=this.expression.evaluate(new Wo(this.zoom+1),t,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,a,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,o,a)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=hs(n),o=hs(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=X(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)}getBinding(e,t,n){return new os(e,t)}}class gs{constructor(e,t,n,r,i,o,a){this.expression=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.layerId=a,this.paintVertexAttributes=("array"===n?Xa:Ha).members;for(let e=0;e<t.length;++e);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(e,t,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i,o){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(e,t,n,r){if(!r||!n)return;const{min:i,mid:o,max:a}=n,s=r[i],l=r[o],c=r[a];if(s&&l&&c)for(let n=e;n<t;n++)this._setPaintValue(this.zoomInPaintVertexArray,n,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,n,l,c)}_setPaintValue(e,t,n,r){e.emplace(t,n.tl[0],n.tl[1],n.br[0],n.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],n.pixelRatio,r.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ys{constructor(e,t,n=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof Jo&&Ar(o.property.specification)))continue;const a=xs(i,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u,d="line-dasharray"===String(i)&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||h){const n=Ts(i,l,"source");this.binders[i]=h?new gs(s,a,l,c,t,n,e.id):new fs(s,a,l,n),r.push(`/a_${i}`)}else{const e=Ts(i,l,"composite");this.binders[i]=new ms(s,a,l,c,t,e),r.push(`/z_${i}`)}else this.binders[i]=h?new ps(s.value,a):new ds(s.value,a,l),r.push(`/u_${i}`)}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof fs||t instanceof ms?t.maxValue:0}populatePaintArrays(e,t,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof fs||s instanceof ms||s instanceof gs)&&s.populatePaintArray(e,t,n,r,i,o)}}setConstantPatternPositions(e,t){for(const n in this.binders){const r=this.binders[n];r instanceof ps&&r.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,n,r,i,o){let a=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=n.feature(t.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof fs||c instanceof ms||c instanceof gs)&&!0===c.expression.isStateDependent){const u=r.paint.get(n);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],i,o),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof ds||n instanceof ps)&&e.push(...n.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof fs||n instanceof ms||n instanceof gs)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof ds||n instanceof ps||n instanceof ms)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof ds||i instanceof ps||i instanceof ms)for(const o of i.uniformNames)if(t[o]){const a=i.getBinding(e,t[o],o);n.push({name:o,property:r,binding:a})}}return n}setUniforms(e,t,n,r){for(const{name:e,property:i,binding:o}of t)this.binders[i].setUniform(o,r,n.get(i),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof gs){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof fs||n instanceof ms)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof fs||n instanceof ms||n instanceof gs)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof fs||t instanceof ms||t instanceof gs)&&t.destroy()}}}class _s{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new ys(r,t,n);this.needsUpload=!1,this._featureMap=new es,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o,a){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(e,t,r,i,o,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const vs={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function xs(e,t){return vs[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const bs={"line-pattern":{source:ya,composite:ya},"fill-pattern":{source:ya,composite:ya},"fill-extrusion-pattern":{source:ya,composite:ya},"line-dasharray":{source:_a,composite:_a}},ws={color:{source:Ra,composite:Oa},number:{source:Ma,composite:Ra}};function Ts(e,t,n){const r=bs[e];return r&&r[n]||ws[t][n]}Wi("ConstantBinder",ds),Wi("CrossFadedConstantBinder",ps),Wi("SourceExpressionBinder",fs),Wi("CrossFadedCompositeBinder",gs),Wi("CompositeExpressionBinder",ms),Wi("ProgramConfiguration",ys,{omit:["_buffers"]}),Wi("ProgramConfigurationSet",_s);const Es="-transition";class Ss extends _t{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Qo(t.layout)),t.paint)){this._transitionablePaint=new Xo(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ea(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(Ni,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return se(e,Es)?this._transitionablePaint.getTransition(e.slice(0,-Es.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(Bi,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(se(e,Es))return this._transitionablePaint.setTransition(e.slice(0,-Es.length),t||void 0),!1;{const n=this._transitionablePaint._values[e],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),ce(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r,i={}){return(!i||!1!==i.validate)&&Ui(this,e.call(Oi,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Jo&&Ar(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=oi(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ks=ha([{name:"a_pos",components:2,type:"Int16"}],4),{members:Cs}=ks;class Ms{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>Ms.MAX_VERTEX_ARRAY_LENGTH&&de(`Max vertices per segment is ${Ms.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>Ms.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new Ms([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}Ms.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wi("SegmentVector",Ms);var Is=8192;class Ps{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Ds?new Ds(e.lng,e.lat):Ds.convert(e),this}setSouthWest(e){return this._sw=e instanceof Ds?new Ds(e.lng,e.lat):Ds.convert(e),this}extend(e){const t=this._sw,n=this._ne;let r,i;if(e instanceof Ds)r=e,i=e;else{if(!(e instanceof Ps))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Ps.convert(e)):this.extend(Ds.convert(e)):this;if(r=e._sw,i=e._ne,!r||!i)return this}return t||n?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Ds(r.lng,r.lat),this._ne=new Ds(i.lng,i.lat)),this}getCenter(){return new Ds((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ds(this.getWest(),this.getNorth())}getSouthEast(){return new Ds(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=Ds.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(e){return!e||e instanceof Ps?e:new Ps(e)}}const As=6371008.8;class Ds{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ds(K(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return As*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Ps(new Ds(this.lng-n,this.lat-t),new Ds(this.lng+n,this.lat+t))}static convert(e){if(e instanceof Ds)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ds(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ds(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const zs=2*Math.PI*As;function Rs(e){return zs*Math.cos(e*Math.PI/180)}function Os(e){return(180+e)/360}function Ls(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Fs(e,t){return e/Rs(t)}function Bs(e){return 360*e-180}function Ns(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Us(e,t){return e*Rs(Ns(t))}const js=85.051129;class Vs{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=Ds.convert(e);return new Vs(Os(n.lng),Ls(n.lat),Fs(t,n.lat))}toLngLat(){return new Ds(Bs(this.x),Ns(this.y))}toAltitude(){return Us(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/zs*(e=Ns(this.y),1/Math.cos(e*Math.PI/180));var e}}function $s(e,t,n,r,o,a,s,l,c){const u=(t+r)/2,h=(n+o)/2,d=new i(u,h);l(d),function(e,t,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-t)*a-(n-e)*s)/Math.hypot(a,s)}(d.x,d.y,a.x,a.y,s.x,s.y)>=c?($s(e,t,n,u,h,a,d,l,c),$s(e,u,h,r,o,d,s,l,c)):e.push(s)}function qs(e,t,n){const r=[];let i,o,a;for(const s of e){const{x:e,y:l}=s;t(s),a?$s(r,i,o,e,l,a,s,t,n):r.push(s),i=e,o=l,a=s}return r}const Gs=Math.pow(2,14)-1,Ws=-Gs-1;function Zs(e,t){const n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=X(n,Ws,Gs),e.y=X(r,Ws,Gs),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&de("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function Hs(e,t,n){const r=e.loadGeometry(),i=e.extent,o=Is/i;if(t&&n&&n.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:a,x:s,y:l,projection:c}=n,u=e=>{const n=Bs((t.x+e.x/i)/o),r=Ns((t.y+e.y/i)/o),u=c.project(n,r);e.x=(u.x*a-s)*i,e.y=(u.y*a-l)*i};for(let t=0;t<r.length;t++)if(1!==e.type)r[t]=qs(r[t],u,1);else{const e=[];for(const n of r[t])n.x<0||n.x>=i||n.y<0||n.y>=i||(u(n),e.push(n));r[t]=e}}for(const e of r)for(const t of e)Zs(t,o);return r}function Xs(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Hs(e):[]}}function Ys(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}class Ks{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new pa,this.indexArray=new Sa,this.segments=new Ms,this.programConfigurations=new _s(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:t,id:i,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Xs(t,e);if(!this.layers[0]._featureFilter.filter(new Wo(this.zoom),c,n))continue;const u=a?a.evaluate(c,{},n):void 0,h={id:i,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Hs(t,n,r),patterns:{},sortKey:u};o.push(h)}a&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of o){const{geometry:i,index:o,sourceLayerIndex:a}=r,s=e[o].feature;this.addFeature(r,i,o,t.availableImages,n),t.featureIndex.insert(s,i,o,a,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Cs),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,i){for(const n of t)for(const t of n){const n=t.x,r=t.y;if(n<0||n>=Is||r<0||r>=Is)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=i.vertexLength;Ys(this.layoutVertexArray,n,r,-1,-1),Ys(this.layoutVertexArray,n,r,1,-1),Ys(this.layoutVertexArray,n,r,1,1),Ys(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}function Qs(e,t){for(let n=0;n<e.length;n++)if(sl(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(sl(e,t[n]))return!0;return!!nl(e,t)}function Js(e,t,n){return!!sl(e,t)||!!il(t,e,n)}function el(e,t){if(1===e.length)return al(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(sl(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(al(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(nl(e,t[n]))return!0;return!1}function tl(e,t,n){if(e.length>1){if(nl(e,t))return!0;for(let r=0;r<t.length;r++)if(il(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(il(e[r],t,n))return!0;return!1}function nl(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(rl(r,i,t[e],t[e+1]))return!0}return!1}function rl(e,t,n,r){return pe(e,n,r)!==pe(t,n,r)&&pe(e,t,n)!==pe(e,t,r)}function il(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let n=1;n<t.length;n++)if(ol(e,t[n-1],t[n])<r)return!0;return!1}function ol(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function al(e,t){let n,r,i,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)r=n[e],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function sl(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ll(e,t,n,r,o){for(const i of e)if(t<=i.x&&n<=i.y&&r>=i.x&&o>=i.y)return!0;const a=[new i(t,n),new i(t,o),new i(r,o),new i(r,n)];if(e.length>2)for(const t of a)if(sl(e,t))return!0;for(let t=0;t<e.length-1;t++)if(cl(e[t],e[t+1],a))return!0;return!1}function cl(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=pe(e,t,n[0]);return o!==pe(e,t,n[1])||o!==pe(e,t,n[2])||o!==pe(e,t,n[3])}function ul(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function hl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function dl(e,t,n,r,o){if(!t[0]&&!t[1])return e;const a=i.convert(t)._mult(o);"viewport"===n&&a._rotate(-r);const s=[];for(let t=0;t<e.length;t++)s.push(e[t].sub(a));return s}function pl(e,t,n,r){const o=i.convert(e)._mult(r);return"viewport"===t&&o._rotate(-n),o}Wi("CircleBucket",Ks,{omit:["layers"]});const fl=new aa({"circle-sort-key":new na(vt.layout_circle["circle-sort-key"])});var ml={paint:new aa({"circle-radius":new na(vt.paint_circle["circle-radius"]),"circle-color":new na(vt.paint_circle["circle-color"]),"circle-blur":new na(vt.paint_circle["circle-blur"]),"circle-opacity":new na(vt.paint_circle["circle-opacity"]),"circle-translate":new ta(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new ta(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ta(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ta(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new na(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new na(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new na(vt.paint_circle["circle-stroke-opacity"])}),layout:fl};class gl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=L([],n,e),a=1/o[3]/t*i;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(o,o,[a,a,r?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=C([],I([],z([],o[e[0]],o[e[1]]),z([],o[e[2]],o[e[1]]))),n=-M(t,o[e[1]]);return t.concat(n)}));return new gl(o,a)}}class yl{constructor(e,t){this.min=e,this.max=t,this.center=S([],b([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=_(this.min),r=_(this.max);for(let e=0;e<t.length;e++)n[e]=t[e]?this.min[e]:this.center[e],r[e]=t[e]?this.center[e]:this.max[e];return r[2]=this.max[2],new yl(n,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let n=!0;for(let r=0;r<e.planes.length;r++){const i=e.planes[r];let o=0;for(let e=0;e<t.length;e++)o+=M(i,t[e])+i[3]>=0;if(0===o)return 0;o!==t.length&&(n=!1)}if(n)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][t]-this.min[t];n=Math.min(n,o),r=Math.max(r,o)}if(r<0||n>this.max[t]-this.min[t])return 0}return 1}}function _l(e,t,n,r,i,o,a,s,l){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(l*=e.pixelToTileUnitsFactor);for(const c of t)for(const t of c){const c=t.add(s),u=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(c.x,c.y,!0):0,h=o?c:vl(c,u,r),d=o?e.tilespaceRays.map((e=>wl(e,u))):e.queryGeometry.screenGeometry,p=L([],[t.x,t.y,u,1],r);if(!a&&o?l*=p[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/p[3]),Js(d,h,l))return!0}return!1}function vl(e,t,n){const r=L([],[e.x,e.y,t,1],n);return new i(r[0]/r[3],r[1]/r[3])}const xl=x(0,0,0),bl=x(0,0,1);function wl(e,t){const n=y();return xl[2]=t,e.intersectsPlane(xl,bl,n),new i(n[0],n[1])}class Tl extends Ks{}function El(e,{width:t,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*n*r);return e.width=t,e.height=n,e.data=i,e}function Sl(e,{width:t,height:n},r){if(t===e.width&&n===e.height)return;const i=El({},{width:t,height:n},r);kl(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,n)},r),e.width=t,e.height=n,e.data=i.data}function kl(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let l=0;l<i.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((r.y+l)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)s[u+e]=a[c+e]}return t}Wi("HeatmapBucket",Tl,{omit:["layers"]});class Cl{constructor(e,t){El(this,e,1,t)}resize(e){Sl(this,e,1)}clone(){return new Cl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){kl(e,t,n,r,i,1)}}class Ml{constructor(e,t){El(this,e,4,t)}resize(e){Sl(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){kl(e,t,n,r,i,4)}}Wi("AlphaImage",Cl),Wi("RGBAImage",Ml);var Il={paint:new aa({"heatmap-radius":new na(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new na(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ta(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oa(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ta(vt.paint_heatmap["heatmap-opacity"])})};function Pl(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Ml({width:n,height:r}),o=(n,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(let t=0,i=0;t<r;++t,i+=4*n)for(let r=0,a=0;r<n;r++,a+=4){const s=r/(n-1),{start:l,end:c}=e.clips[t];o(i,a,l*(1-s)+c*s)}else for(let e=0,t=0;e<n;e++,t+=4)o(0,t,e/(n-1));return i}var Al={paint:new aa({"hillshade-illumination-direction":new ta(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ta(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ta(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ta(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ta(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ta(vt.paint_hillshade["hillshade-accent-color"])})};const Dl=ha([{name:"a_pos",components:2,type:"Int16"}],4),{members:zl}=Dl;var Rl=Ll,Ol=Ll;function Ll(e,t,n){n=n||2;var r,i,o,a,s,l,c,u=t&&t.length,h=u?t[0]*n:e.length,d=Fl(e,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Fl(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Hl(a));for(s.sort(ql),i=0;i<s.length;i++)n=Bl(n=Gl(s[i],n),n.next);return n}(e,t,d,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var f=n;f<h;f+=n)(s=e[f])<r&&(r=s),(l=e[f+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return Nl(d,p,n,r,i,c),p}function Fl(e,t,n,r,i){var o,a;if(i===sc(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ic(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ic(o,e[o],e[o+1],a);return a&&Ql(a,a.next)&&(oc(a),a=a.next),a}function Bl(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Ql(r,r.next)&&0!==Kl(r.prev,r,r.next))r=r.next;else{if(oc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Nl(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Zl(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?jl(e,r,i,o):Ul(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),oc(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Nl(e=Vl(Bl(e),t,n),t,n,r,i,o,2):2===a&&$l(e,t,n,r,i,o):Nl(Bl(e),t,n,r,i,o,1);break}}}function Ul(e){var t=e.prev,n=e,r=e.next;if(Kl(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Xl(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Kl(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function jl(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Kl(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=Zl(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,t,n,r),u=Zl(s,l,t,n,r),h=e.prevZ,d=e.nextZ;h&&h.z>=c&&d&&d.z<=u;){if(h!==e.prev&&h!==e.next&&Xl(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Kl(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==e.prev&&d!==e.next&&Xl(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Kl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=c;){if(h!==e.prev&&h!==e.next&&Xl(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Kl(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=u;){if(d!==e.prev&&d!==e.next&&Xl(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Kl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Vl(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Ql(i,o)&&Jl(i,r,r.next,o)&&nc(i,o)&&nc(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),oc(r),oc(r.next),r=e=o),r=r.next}while(r!==e);return Bl(r)}function $l(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Yl(a,s)){var l=rc(a,s);return a=Bl(a,a.next),l=Bl(l,l.next),Nl(a,t,n,r,i,o),void Nl(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function ql(e,t){return e.x-t.x}function Gl(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var l,c=n,u=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&Xl(o<h?i:a,o,u,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),nc(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&Wl(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var r=rc(n,e),i=Bl(n,n.next);return Bl(r,r.next),t===n?i:t}function Wl(e,t){return Kl(e.prev,e,t.prev)<0&&Kl(t.next,e,e.next)<0}function Zl(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Hl(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Xl(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Yl(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Jl(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(nc(e,t)&&nc(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Kl(e.prev,e,t.prev)||Kl(e,t.prev,t))||Ql(e,t)&&Kl(e.prev,e,e.next)>0&&Kl(t.prev,t,t.next)>0)}function Kl(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ql(e,t){return e.x===t.x&&e.y===t.y}function Jl(e,t,n,r){var i=tc(Kl(e,t,n)),o=tc(Kl(e,t,r)),a=tc(Kl(n,r,e)),s=tc(Kl(n,r,t));return i!==o&&a!==s||!(0!==i||!ec(e,n,t))||!(0!==o||!ec(e,r,t))||!(0!==a||!ec(n,e,r))||!(0!==s||!ec(n,t,r))}function ec(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function tc(e){return e>0?1:e<0?-1:0}function nc(e,t){return Kl(e.prev,e,e.next)<0?Kl(e,t,e.next)>=0&&Kl(e,e.prev,t)>=0:Kl(e,t,e.prev)<0||Kl(e,e.next,t)<0}function rc(e,t){var n=new ac(e.i,e.x,e.y),r=new ac(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ic(e,t,n,r){var i=new ac(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function oc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ac(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sc(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function lc(e,t,n,r,i){cc(e,t,n||0,r||e.length-1,i||hc)}function cc(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);cc(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}var u=e[t],h=n,d=r;for(uc(e,n,t),i(e[r],u)>0&&uc(e,n,r);h<d;){for(uc(e,h,d),h++,d--;i(e[h],u)<0;)h++;for(;i(e[d],u)>0;)d--}0===i(e[n],u)?uc(e,n,d):uc(e,++d,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function uc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function hc(e,t){return e<t?-1:e>t?1:0}function dc(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,o;for(let t=0;t<n;t++){const n=fe(e[t]);0!==n&&(e[t].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(i&&r.push(i),i=[e[t]]):i.push(e[t]))}if(i&&r.push(i),t>1)for(let e=0;e<r.length;e++)r[e].length<=t||(lc(r[e],t,1,r[e].length-1,pc),r[e]=r[e].slice(0,t));return r}function pc(e,t){return t.area-e.area}function fc(e,t,n){const r=n.patternDependencies;let i=!1;for(const n of t){const t=n.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const o=t.constantOr(null);o&&(i=!0,r[o.to]=!0,r[o.from]=!0)}return i}function mc(e,t,n,r,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r-1},n,{},i.availableImages),s=t.evaluate({zoom:r},n,{},i.availableImages),l=t.evaluate({zoom:r+1},n,{},i.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:e,mid:s,max:l}}}return n}Ll.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(sc(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(sc(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Ll.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n},Rl.default=Ol;class gc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new pa,this.indexArray=new Sa,this.indexArray2=new Da,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Ms,this.segments2=new Ms,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){this.hasPattern=fc("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Xs(a,e);if(!this.layers[0]._featureFilter.filter(new Wo(this.zoom),u,n))continue;const h=i?i.evaluate(u,{},n,t.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Hs(a,n,r),patterns:{},sortKey:h};o.push(d)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of o){const{geometry:i,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const e=mc("fill",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,i,o,n,{},t.availableImages);t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zl),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i,o=[]){for(const e of dc(t,500)){let t=0;for(const n of e)t+=n.length;const n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),r=n.vertexLength,i=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(i.length/2);const n=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),r=n.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(r+t.length-1,r),i.push(t[0].x),i.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(r+e-1,r+e),i.push(t[e].x),i.push(t[e].y);n.vertexLength+=t.length,n.primitiveLength+=t.length}const a=Rl(i,o);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(r+a[e],r+a[e+1],r+a[e+2]);n.vertexLength+=t,n.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}Wi("FillBucket",gc,{omit:["layers","patternFeatures"]});const yc=new aa({"fill-sort-key":new na(vt.layout_fill["fill-sort-key"])});var _c={paint:new aa({"fill-antialias":new ta(vt.paint_fill["fill-antialias"]),"fill-opacity":new na(vt.paint_fill["fill-opacity"]),"fill-color":new na(vt.paint_fill["fill-color"]),"fill-outline-color":new na(vt.paint_fill["fill-outline-color"]),"fill-translate":new ta(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new ta(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ra(vt.paint_fill["fill-pattern"])}),layout:yc};const vc=ha([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),xc=ha([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:bc}=vc;var wc=Tc;function Tc(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Ec,this,t)}function Ec(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Sc(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}Tc.types=["Unknown","Point","LineString","Polygon"],Tc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,o=0,a=0,s=0,l=[];e.pos<n;){if(o<=0){var c=e.readVarint();r=7&c,o=c>>3}if(o--,1===r||2===r)a+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&l.push(t),t=[]),t.push(new i(a,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&l.push(t),l},Tc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},Tc.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=Tc.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Sc(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var kc=Cc;function Cc(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Mc,this,t),this.length=this._features.length}function Mc(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function Ic(e,t,n){if(3===e){var r=new kc(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}Cc.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new wc(this._pbf,t,this.extent,this._keys,this._values)};var Pc={VectorTile:function(e,t){this.layers=e.readFields(Ic,{},t)},VectorTileFeature:wc,VectorTileLayer:kc};const Ac=Pc.VectorTileFeature.types,Dc=Math.pow(2,13);function zc(e,t,n,r,i,o,a,s){e.emplaceBack((t<<1)+a,(n<<1)+o,(Math.floor(r*Dc)<<1)+i,Math.round(s))}class Rc{constructor(){this.acc=new i(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new i(e.x,e.y),this.max=new i(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);let n=!!this.borders;const r=this.min,i=this.max;e.x<r.x?(r.x=e.x,n=!0):e.x>i.x&&(i.x=e.x,n=!0),e.y<r.y?(r.y=e.y,n=!0):e.y>i.y&&(i.y=e.y,n=!0),((0===e.x||e.x===Is)&&e.x===t.x)!=((0===e.y||e.y===Is)&&e.y===t.y)&&this.processBorderOverlap(e,t),n&&this.checkBorderIntersection(e,t)}checkBorderIntersection(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,Bn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Is!=e.x>Is&&this.addBorderIntersection(1,Bn(t.y,e.y,(Is-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Bn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Is!=e.y>Is&&this.addBorderIntersection(3,Bn(t.x,e.x,(Is-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new i(0,0)}span(){return new i(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class Oc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new fa,this.centroidVertexArray=new Za,this.indexArray=new Sa,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Ms,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,n,r){this.features=[],this.hasPattern=fc("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Is/(1<<e.z)}(n);for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Xs(i,e);if(!this.layers[0]._featureFilter.filter(new Wo(this.zoom),l,n))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:e?l.geometry:Hs(i,n,r),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(mc("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,a,n,{},t.availableImages),t.featureIndex.insert(i,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(e,t,n,r){for(const e of this.features){const{geometry:i}=e;this.addFeature(e,i,e.index,t,n,r)}this.sortBorders()}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,bc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,xc.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,i,o){const a=this.enableTerrain?new Rc:null;for(const n of dc(t,500)){let t=0,r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===n.length||(s=n[0]).every((e=>e.x<=0))||s.every((e=>e.x>=Is))||s.every((e=>e.y<=0))||s.every((e=>e.y>=Is)))continue;for(let e=0;e<n.length;e++){const i=n[e];if(0===i.length)continue;t+=i.length;let o=0;a&&a.startRing(i[0]);for(let e=0;e<i.length;e++){const t=i[e];if(e>=1){const n=i[e-1];if(!Lc(t,n)){a&&a.append(t,n),r.vertexLength+4>Ms.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=t.sub(n)._perp(),i=e.x/(Math.abs(e.x)+Math.abs(e.y)),s=e.y>0?1:0,l=n.dist(t);o+l>32768&&(o=0),zc(this.layoutVertexArray,t.x,t.y,i,s,0,0,o),zc(this.layoutVertexArray,t.x,t.y,i,s,0,1,o),o+=l,zc(this.layoutVertexArray,n.x,n.y,i,s,0,0,o),zc(this.layoutVertexArray,n.x,n.y,i,s,0,1,o);const c=r.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),r.vertexLength+=4,r.primitiveLength+=2}}}}if(r.vertexLength+t>Ms.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==Ac[e.type])continue;const i=[],o=[],l=r.vertexLength;for(let e=0;e<n.length;e++){const t=n[e];if(0!==t.length){t!==n[0]&&o.push(i.length/2);for(let e=0;e<t.length;e++){const n=t[e];zc(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),i.push(n.x),i.push(n.y),a&&a.currentPolyCount.top++}}}const c=Rl(i,o);for(let e=0;e<c.length;e+=3)this.indexArray.emplaceBack(l+c[e],l+c[e+2],l+c[e+1]);r.primitiveLength+=c.length/3,r.vertexLength+=t}var s;if(a&&a.polyCount.length>0){if(a.borders){a.vertexArrayOffset=this.centroidVertexArray.length;const e=a.borders,t=this.featuresOnBorder.push(a)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(a.borders?void 0:a.centroid(),a)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0]))}encodeCentroid(e,t,n=!0){let r,i;if(e)if(0!==e.y){const n=t.span()._mult(this.tileToMeter);r=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7*(e.x+450)),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(o++,r,i)}}}function Lc(e,t){return e.x===t.x&&(e.x<0||e.x>Is)||e.y===t.y&&(e.y<0||e.y>Is)}Wi("FillExtrusionBucket",Oc,{omit:["layers","features"]}),Wi("PartMetadata",Rc);var Fc={paint:new aa({"fill-extrusion-opacity":new ta(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new na(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ta(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ta(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ra(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new na(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new na(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ta(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Bc(e,t){return e.x*t.x+e.y*t.y}function Nc(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=Bc(s,s),h=Bc(s,l),d=Bc(l,l),p=Bc(c,s),f=Bc(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,_=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function Uc(e){const t=new i(e[0],e[1]);return t.z=e[2],t}function jc(e,t,n,r,i,o,a,s){const l=a*i.getElevationAt(e,t,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(e,t,n){const r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),o=10*(t[0]-8*r),a=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),l=e.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=e.tileCoordToPixel(r,i),d=2*c+1,p=2*u+1,f=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,h.x-c,h.y-u,d,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),_=Math.min(.25,.5*l*(m+g)/d),v=Math.min(.25,.5*l*y/p);return s+Math.max(_*o,v*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+r,l+n+2):l+r}}const Vc=ha([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:$c}=Vc,qc=ha([{name:"a_packed",components:3,type:"Float32"}]),{members:Gc}=qc,Wc=Pc.VectorTileFeature.types,Zc=Math.cos(Math.PI/180*37.5);class Hc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new ma,this.layoutVertexArray2=new ga,this.indexArray=new Sa,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Ms,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){this.hasPattern=fc("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:t,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Xs(t,e);if(!this.layers[0]._featureFilter.filter(new Wo(this.zoom),c,n))continue;const u=i?i.evaluate(c,{},n):void 0,h={id:a,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Hs(t,n,r),patterns:{},sortKey:u};o.push(h)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:a,featureIndex:s}=t,l=this.addConstantDashes(a);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:c}=r;if(l&&this.addFeatureDashes(r,a),this.hasPattern){const e=mc("line",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,i,o,n,a.positions,t.availableImages);s.insert(e[o].feature,i,o,c,this.index)}}addConstantDashes(e){let t=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)t=!0;else{const t=i.value,n=r.value;if(!n)continue;e.addDash(n.from,t),e.addDash(n.to,t),n.other&&e.addDash(n.other,t)}}return t}addFeatureDashes(e,t){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s,l,c,u,h;if("constant"===i.kind){const e=i.value;if(!e)continue;a=e.other||e.to,s=e.to,l=e.from}else a=i.evaluate({zoom:n-1},e),s=i.evaluate({zoom:n},e),l=i.evaluate({zoom:n+1},e);"constant"===o.kind?c=u=h=o.value:(c=o.evaluate({zoom:n-1},e),u=o.evaluate({zoom:n},e),h=o.evaluate({zoom:n+1},e)),t.addDash(a,c),t.addDash(s,u),t.addDash(l,h);const d=t.getKey(a,c),p=t.getKey(s,u),f=t.getKey(l,h);e.patterns[r.id]={min:d,mid:p,max:f}}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Gc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$c),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(e,{}),l=a.get("line-cap").evaluate(e,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const n of t)this.addLine(n,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}addLine(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Wc[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let t=l;t<s;t++){if(p=t===s-1?a?e[l+1]:void 0:e[t+1],p&&e[t].equals(p))continue;m&&(f=m),h&&(d=h),h=e[t],m=p?p.sub(h)._unit()._perp():f,f=f||m;let g=f.add(m);0===g.x&&0===g.y||g._unit();const y=f.x*m.x+f.y*m.y,_=g.x*m.x+g.y*m.y,v=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),b=_<Zc&&d&&p,w=f.x*m.y-f.y*m.x>0;if(b&&t>l){const e=h.dist(d);if(e>2*c){const t=h.sub(h.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,f,0,0,u),d=t}}const T=d&&p;let E=T?n:a?"butt":r;if(T&&"round"===E&&(v<o?E="miter":v<=2&&(E="fakeround")),"miter"===E&&v>i&&(E="bevel"),"bevel"===E&&(v>2&&(E="flipbevel"),v<i&&(E="miter")),d&&this.updateDistance(d,h),"miter"===E)g._mult(v),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===E){if(v>100)g=m.mult(-1);else{const e=v*f.add(m).mag()/f.sub(m).mag();g._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===E||"fakeround"===E){const e=-Math.sqrt(v*v-1),t=w?e:0,n=w?0:e;if(d&&this.addCurrentVertex(h,f,t,n,u),"fakeround"===E){const e=Math.round(180*x/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-t,-n,u)}else if("butt"===E)this.addCurrentVertex(h,g,0,0,u);else if("square"===E){const e=d?1:-1;d||this.addCurrentVertex(h,g,e,e,u),this.addCurrentVertex(h,g,0,0,u),d&&this.addCurrentVertex(h,g,e,e,u)}else"round"===E&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(b&&t<s-1){const e=h.dist(p);if(e>2*c){const t=h.add(p.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,n,r,i,o=!1){const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i)}addHalfVertex({x:e,y:t},n,r,i,o,a,s){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Wi("LineBucket",Hc,{omit:["layers","patternFeatures"]});const Xc=new aa({"line-cap":new na(vt.layout_line["line-cap"]),"line-join":new na(vt.layout_line["line-join"]),"line-miter-limit":new ta(vt.layout_line["line-miter-limit"]),"line-round-limit":new ta(vt.layout_line["line-round-limit"]),"line-sort-key":new na(vt.layout_line["line-sort-key"])});var Yc={paint:new aa({"line-opacity":new na(vt.paint_line["line-opacity"]),"line-color":new na(vt.paint_line["line-color"]),"line-translate":new ta(vt.paint_line["line-translate"]),"line-translate-anchor":new ta(vt.paint_line["line-translate-anchor"]),"line-width":new na(vt.paint_line["line-width"]),"line-gap-width":new na(vt.paint_line["line-gap-width"]),"line-offset":new na(vt.paint_line["line-offset"]),"line-blur":new na(vt.paint_line["line-blur"]),"line-dasharray":new ra(vt.paint_line["line-dasharray"]),"line-pattern":new ra(vt.paint_line["line-pattern"]),"line-gradient":new oa(vt.paint_line["line-gradient"])}),layout:Xc};const Kc=new class extends na{possiblyEvaluate(e,t){return t=new Wo(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=ee({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}(Yc.paint.properties["line-width"].specification);function Qc(e,t){return t>0?t+2*e:e}Kc.useIntegerZoom=!0;const Jc=ha([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),eu=ha([{name:"a_projected_pos",components:3,type:"Float32"}],4);ha([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tu=ha([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),nu=ha([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ha([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ru=ha([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),iu=ha([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ha([{name:"triangle",components:3,type:"Uint16"}]),ha([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ha([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ha([{type:"Float32",name:"offsetX"}]),ha([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ou=24;const au=128;function su(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Wo(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new Wo(a)),maxSize:n.evaluate(new Wo(s)),interpolationType:r}}}function lu(e,{uSize:t,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===e.kind?r/au:"composite"===e.kind?Bn(r/au,i/au,n):t}function cu(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?X(rr.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?r=Bn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var uu=Object.freeze({__proto__:null,getSizeData:su,evaluateSizeForFeature:lu,evaluateSizeForZoom:cu,SIZE_PACK_FACTOR:au});function hu(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Go.applyArabicShaping&&(e=Go.applyArabicShaping(e)),e}(e.text,t,n)})),e}const du={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function pu(e){return"︶"===e||"﹈"===e||"︸"===e||"﹄"===e||"﹂"===e||"︾"===e||"︼"===e||"︺"===e||"︘"===e||"﹀"===e||"︐"===e||"︓"===e||"︔"===e||"｀"===e||"￣"===e||"︑"===e||"︒"===e}function fu(e){return"︵"===e||"﹇"===e||"︷"===e||"﹃"===e||"﹁"===e||"︽"===e||"︻"===e||"︹"===e||"︗"===e||"︿"===e}var mu=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},gu=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=f,a/=256,c-=8);e[n+p-f]|=128*m},yu=_u;function _u(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}_u.Varint=0,_u.Fixed64=1,_u.Bytes=2,_u.Fixed32=5;var vu=4294967296,xu=1/vu,bu="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function wu(e){return e.type===_u.Bytes?e.readVarint()+e.pos:e.pos+1}function Tu(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Eu(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Su(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function ku(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Cu(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Mu(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Iu(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Pu(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Au(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Du(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function zu(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Ru(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Ou(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Lu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Fu(e,t,n){t.glyphs=[],1===e&&n.readMessage(Bu,t)}function Bu(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(Nu,{});t.glyphs.push({id:e,bitmap:new Cl({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function Nu(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Uu(e){let t=0,n=0;for(const r of e)t+=r.w*r.h,n=Math.max(n,r.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const t of e)for(let e=r.length-1;e>=0;e--){const n=r[e];if(!(t.w>n.w||t.h>n.h)){if(t.x=n.x,t.y=n.y,o=Math.max(o,t.y+t.h),i=Math.max(i,t.x+t.w),t.w===n.w&&t.h===n.h){const t=r.pop();e<r.length&&(r[e]=t)}else t.h===n.h?(n.x+=t.w,n.w-=t.w):t.w===n.w?(n.y+=t.h,n.h-=t.h):(r.push({x:n.x+t.w,y:n.y,w:n.w-t.w,h:t.h}),n.y+=t.h,n.h-=t.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}_u.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Ru(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Lu(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Ru(this.buf,this.pos)+Ru(this.buf,this.pos+4)*vu;return this.pos+=8,e},readSFixed64:function(){var e=Ru(this.buf,this.pos)+Lu(this.buf,this.pos+4)*vu;return this.pos+=8,e},readFloat:function(){var e=mu(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=mu(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Tu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Tu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Tu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Tu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Tu(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Tu(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&bu?function(e,t,n){return bu.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==_u.Bytes)return e.push(this.readVarint(t));var n=wu(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==_u.Bytes)return e.push(this.readSVarint());var t=wu(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==_u.Bytes)return e.push(this.readBoolean());var t=wu(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==_u.Bytes)return e.push(this.readFloat());var t=wu(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==_u.Bytes)return e.push(this.readDouble());var t=wu(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==_u.Bytes)return e.push(this.readFixed32());var t=wu(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==_u.Bytes)return e.push(this.readSFixed32());var t=wu(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==_u.Bytes)return e.push(this.readFixed64());var t=wu(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==_u.Bytes)return e.push(this.readSFixed64());var t=wu(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===_u.Varint)for(;this.buf[this.pos++]>127;);else if(t===_u.Bytes)this.pos=this.readVarint()+this.pos;else if(t===_u.Fixed32)this.pos+=4;else{if(t!==_u.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Ou(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Ou(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Ou(this.buf,-1&e,this.pos),Ou(this.buf,Math.floor(e*xu),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Ou(this.buf,-1&e,this.pos),Ou(this.buf,Math.floor(e*xu),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Eu(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),gu(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),gu(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Eu(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,_u.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Su,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ku,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Iu,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Cu,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Mu,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Pu,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Au,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Du,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,zu,t)},writeBytesField:function(e,t){this.writeTag(e,_u.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,_u.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,_u.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,_u.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,_u.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,_u.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,_u.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,_u.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,_u.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,_u.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class ju{constructor(e,{pixelRatio:t,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Vu{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:a}=Uu(i),s=new Ml({width:o||1,height:a||1});for(const t in e){const r=e[t],i=n[t].paddedRect;Ml.copy(r.data,s,{x:0,y:0},{x:i.x+1,y:i.y+1},r.data)}for(const e in t){const n=t[e],i=r[e].paddedRect,o=i.x+1,a=i.y+1,l=n.data.width,c=n.data.height;Ml.copy(n.data,s,{x:0,y:0},{x:o,y:a},n.data),Ml.copy(n.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),Ml.copy(n.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),Ml.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),Ml.copy(n.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new ju(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}Wi("ImagePosition",ju),Wi("ImageAtlas",Vu);const $u={horizontal:1,vertical:2,horizontalOnly:3};class qu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new qu;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new qu;return t.imageName=e,t}}class Gu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Gu;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let n="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r+1)||null,o=e.charCodeAt(r-1)||null;n+=!t&&(i&&Po(i)&&!du[e[r+1]]||o&&Po(o)&&!du[e[r-1]])||!du[e[r]]?e[r]:du[e[r]]}return n}(this.text,e)}trim(){let e=0;for(let t=0;t<this.text.length&&Zu[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Zu[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Gu;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(qu.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void de("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(qu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):de("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Wu(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=Gu.fromFeature(e,i);let y;h===$u.vertical&&g.verticalizePunctuation(d);const{processBidirectionalText:_,processStyledBidirectionalText:v}=Go;if(_&&1===g.sections.length){y=[];const e=_(g.toString(),eh(g,c,o,t,r,p,f));for(const t of e){const e=new Gu;e.text=t,e.sections=g.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);y.push(e)}}else if(v){y=[];const e=v(g.text,g.sectionIndex,eh(g,c,o,t,r,p,f));for(const t of e){const e=new Gu;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,y.push(e)}}else y=function(e,t){const n=[],r=e.text;let i=0;for(const r of t)n.push(e.substring(i,r)),i=r;return i<r.length&&n.push(e.substring(i,r.length)),n}(g,eh(g,c,o,t,r,p,f));const x=[],b={positionedLines:x,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,o,a,s,l,c,u,h){let d=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const e of i){const n=e.getSections();for(const e of n){if(e.imageName)continue;const n=t[e.fontStack];if(n&&(g=void 0!==n.ascender&&void 0!==n.descender,!g))break}if(!g)break}let y=0;for(const a of i){a.trim();const i=a.getMaxScale(),s=(i-1)*ou,v={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=v;const x=v.positionedGlyphs;let b=0;if(!a.length()){p+=o,++y;continue}let w=0,T=0;for(let o=0;o<a.length();o++){const s=a.getSection(o),f=a.getSectionIndex(o),m=a.getCharCode(o);let y=s.scale,v=null,E=null,S=null,k=ou,C=0;const M=!(l===$u.horizontal||!u&&!Io(m)||u&&(Zu[m]||(_=m,Qi(_)||Ji(_)||eo(_)||xo(_)||Eo(_))));if(s.imageName){const t=r[s.imageName];if(!t)continue;S=s.imageName,e.iconsInText=e.iconsInText||!0,E=t.paddedRect;const n=t.displaySize;y=y*ou/h,v={width:n[0],height:n[1],left:1,top:-3,advance:M?n[1]:n[0],localGlyph:!1},C=g?-v.height*y:i*ou-17-n[1]*y,k=v.advance;const o=(M?n[0]:n[1])*y-ou*i;o>0&&o>b&&(b=o)}else{const e=n[s.fontStack];if(!e)continue;e[m]&&(E=e[m]);const r=t[s.fontStack];if(!r)continue;const o=r.glyphs[m];if(!o)continue;if(v=o.metrics,k=8203!==m?ou:0,g){const e=void 0!==r.ascender?Math.abs(r.ascender):0,t=void 0!==r.descender?Math.abs(r.descender):0,n=(e+t)*y;w<n&&(w=n,T=(e-t)/2*y),C=-e*y}else C=(i-y)*ou-17}M?(e.verticalizable=!0,x.push({glyph:m,imageName:S,x:d,y:p+C,vertical:M,scale:y,localGlyph:v.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:v,rect:E}),d+=k*y+c):(x.push({glyph:m,imageName:S,x:d,y:p+C,vertical:M,scale:y,localGlyph:v.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:v,rect:E}),d+=v.advance*y+c)}0!==x.length&&(f=Math.max(d-c,f),g?nh(x,m,b,T,o*i/2):nh(x,m,b,0,o/2)),d=0;const E=o*i+b;v.lineOffset=Math.max(b,s),p+=E,++y}var _;const v=p,{horizontalAlign:x,verticalAlign:b}=th(a);(function(e,t,n,r,i,o){const a=(t-n)*i,s=-o*r;for(const t of e)for(const e of t.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,m,x,b,f,v),e.top+=-b*v,e.bottom=e.top+v,e.left+=-x*f,e.right=e.left+f,e.hasBaseline=g}(b,t,n,r,y,a,s,l,h,c,d,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(x)&&b}const Zu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Xu(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*ou/o+i:0}{const r=n[t.fontStack],o=r&&r.glyphs[e];return o?o.metrics.advance*t.scale+i:0}}function Yu(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Ku(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Qu(e,t,n,r,i,o){let a=null,s=Yu(t,n,i,o);for(const e of r){const r=Yu(t-e.x,n,i,o)+e.badness;r<=s&&(a=e,s=r)}return{index:e,x:t,priorBreak:a,badness:s}}function Ju(e){return e?Ju(e.priorBreak).concat(e.index):[]}function eh(e,t,n,r,i,o,a){if("point"!==o)return[];if(!e)return[];const s=[],l=function(e,t,n,r,i,o){let a=0;for(let n=0;n<e.length();n++){const s=e.getSection(n);a+=Xu(e.getCharCode(n),s,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,a),c=e.text.indexOf("​")>=0;let u=0;for(let n=0;n<e.length();n++){const o=e.getSection(n),d=e.getCharCode(n);if(Zu[d]||(u+=Xu(d,o,r,i,t,a)),n<e.length()-1){const t=!((h=d)<11904||!(lo(h)||so(h)||wo(h)||vo(h)||po(h)||to(h)||co(h)||io(h)||fo(h)||mo(h)||ho(h)||So(h)||oo(h)||ro(h)||no(h)||uo(h)||ao(h)||bo(h)||yo(h)||go(h)));(Hu[d]||t||o.imageName)&&s.push(Qu(n+1,u,l,s,Ku(d,e.getCharCode(n+1),t&&c),!1))}}var h;return Ju(Qu(e.length(),u,l,s,0,!0))}function th(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function nh(e,t,n,r,i){if(!(t||n||r||i))return;const o=e.length-1,a=e[o],s=(a.x+a.metrics.advance*a.scale)*t;for(let t=0;t<=o;t++)e[t].x-=s,e[t].y+=n+r+i}function rh(e,t,n){const{horizontalAlign:r,verticalAlign:i}=th(n),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function ih(e,t,n,r,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+c+r[1]):(p=i[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=i[1]+f-r[0],d=i[1]+m+r[2]):(u=i[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}class oh extends i{constructor(e,t,n,r,i){super(e,t),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new oh(this.x,this.y,this.z,this.angle,this.segment)}}function ah(e,t,n,r,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=t.dist(n)}return!0}function sh(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function lh(e,t,n){return e?.6*t*n:0}function ch(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function uh(e,t,n,r,i,o){const a=lh(n,i,o),s=ch(n,r)*o;let l=0;const c=sh(e)/2;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1],o=r.dist(i);if(l+o>c){const u=(c-l)/o,h=Bn(r.x,i.x,u),d=Bn(r.y,i.y,u),p=new oh(h,d,0,i.angleTo(r),n);return!a||ah(e,p,s,a,t)?p:void 0}l+=o}}function hh(e,t,n,r,i,o,a,s,l){const c=lh(r,o,a),u=ch(r,i),h=u*a,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),dh(e,d?t/2*s%t:(u/2+2*o)*a*s%t,t,c,n,h,d,!1,l)}function dh(e,t,n,r,i,o,a,s,l){const c=o/2,u=sh(e);let h=0,d=t-n,p=[];for(let t=0;t<e.length-1;t++){const a=e[t],s=e[t+1],f=a.dist(s),m=s.angleTo(a);for(;d+n<h+f;){d+=n;const g=(d-h)/f,y=Bn(a.x,s.x,g),_=Bn(a.y,s.y,g);if(y>=0&&y<l&&_>=0&&_<l&&d-c>=0&&d+c<=u){const n=new oh(y,_,0,m,t);n._round(),r&&!ah(e,n,o,r,i)||p.push(n)}}h+=f}return s||p.length||a||(p=dh(e,h/2,n,r,i,o,a,!0,l)),p}function ph(e,t,n,r,o){const a=[];for(let s=0;s<e.length;s++){const l=e[s];let c;for(let e=0;e<l.length-1;e++){let s=l[e],u=l[e+1];s.x<t&&u.x<t||(s.x<t?s=new i(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new i(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<n&&u.y<n||(s.y<n?s=new i(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y<n&&(u=new i(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),s.x>=r&&u.x>=r||(s.x>=r?s=new i(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=r&&(u=new i(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=o&&u.y>=o||(s.y>=o?s=new i(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round():u.y>=o&&(u=new i(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}Wi("Anchor",oh);const fh=1e20;function mh(e,t,n,r,i,o,a,s,l){for(let c=t;c<t+r;c++)gh(e,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)gh(e,c*o+t,1,r,a,s,l)}function gh(e,t,n,r,i,o,a){o[0]=0,a[0]=-fh,a[1]=fh,i[0]=e[t];for(let s=1,l=0,c=0;s<r;s++){i[s]=e[t+s*n];const r=s*s;do{const e=o[l];c=(i[s]-i[e]+r-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=fh}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;e[t+s*n]=i[r]+c*c}}const yh={none:0,ideographs:1,all:2};class _h{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const t in e)for(const r of e[t])n.push({stack:t,id:r});Q(n,(({stack:e,id:t},n)=>{let r=this.entries[e];r||(r=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=r.glyphs[t];if(void 0!==i)return void n(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(r,e,t),i)return r.glyphs[t]=i,void n(null,{stack:e,id:t,glyph:i});const o=Math.floor(t/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:e,id:t,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],_h.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){r.ascender=t.ascender,r.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(r.glyphs[+e]=t.glyphs[+e]);r.ranges[o]=!0}for(const n of a)n(e,t);delete r.requests[o]}))),a.push(((r,i)=>{r?n(r):i&&n(null,{stack:e,id:t,glyph:i.glyphs[t]||null})}))}),((e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:r,glyph:i}of n)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==yh.none&&(this.localGlyphMode===yh.all?!!this.localFontFamily:!!this.localFontFamily&&(mo(e)||_o(e)||oo(e)||ao(e))||io(e))}_tinySDF(e,t,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=e.tinySDF;if(!i){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),i=e.tinySDF=new _h.TinySDF({fontFamily:r,fontWeight:n,fontSize:48,buffer:6,radius:16}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:d,glyphAdvance:p}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new Cl({width:s,height:l},a),metrics:{width:c/2,height:u/2,left:h/2,top:d/2-27,advance:p/2,localGlyph:!0}}}}function vh(e,t,n,r){const o=[],a=e.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2,u=e.right-e.left,h=e.bottom-e.top,d=a.stretchX||[[0,l]],p=a.stretchY||[[0,c]],f=(e,t)=>e+t[1]-t[0],m=d.reduce(f,0),g=p.reduce(f,0),y=l-m,_=c-g;let v=0,x=m,b=0,w=g,T=0,E=y,S=0,k=_;if(a.content&&r){const e=a.content;v=xh(d,0,e[0]),b=xh(p,0,e[1]),x=xh(d,e[0],e[2]),w=xh(p,e[1],e[3]),T=e[0]-v,S=e[1]-b,E=e[2]-e[0]-x,k=e[3]-e[1]-w}const C=(r,o,l,c)=>{const d=wh(r.stretch-v,x,u,e.left),p=Th(r.fixed-T,E,r.stretch,m),f=wh(o.stretch-b,w,h,e.top),y=Th(o.fixed-S,k,o.stretch,g),_=wh(l.stretch-v,x,u,e.left),C=Th(l.fixed-T,E,l.stretch,m),M=wh(c.stretch-b,w,h,e.top),I=Th(c.fixed-S,k,c.stretch,g),P=new i(d,f),A=new i(_,f),D=new i(_,M),z=new i(d,M),R=new i(p/s,y/s),O=new i(C/s,I/s),L=t*Math.PI/180;if(L){const e=Math.sin(L),t=Math.cos(L),n=[t,-e,e,t];P._matMult(n),A._matMult(n),z._matMult(n),D._matMult(n)}const F=r.stretch+r.fixed,B=o.stretch+o.fixed;return{tl:P,tr:A,bl:z,br:D,tex:{x:a.paddedRect.x+1+F,y:a.paddedRect.y+1+B,w:l.stretch+l.fixed-F,h:c.stretch+c.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:O,minFontScaleX:E/s/u,minFontScaleY:k/s/h,isSDF:n}};if(r&&(a.stretchX||a.stretchY)){const e=bh(d,y,m),t=bh(p,_,g);for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)o.push(C(r,t[e],i,t[e+1]))}}else o.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function xh(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function bh(e,t,n){const r=[{fixed:-1,stretch:0}];for(const[t,n]of e){const e=r[r.length-1];r.push({fixed:t-e.stretch,stretch:e.stretch}),r.push({fixed:t-e.stretch,stretch:e.stretch+(n-t)})}return r.push({fixed:t+1,stretch:n}),r}function wh(e,t,n,r){return e/t*n+r}function Th(e,t,n,r){return e-t*n/r}function Eh(e,t,n,r){const i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}_h.loadGlyphRange=function(e,t,n,r,i){const o=256*t,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${o}-${a}`),nt.Glyphs);at(s,((e,t)=>{if(e)i(e);else if(t){const e={},n=function(e){return new yu(e).readFields(Fu,{})}(t);for(const t of n.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:n.ascender,descender:n.descender})}}))},_h.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}){this.buffer=t,this.cutoff=r,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.floor(n),s=Math.min(this.size-this.buffer,Math.ceil(o-i)),l=Math.min(this.size-this.buffer,Math.ceil(n)+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=c*u,d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+a+1);const _=f.getImageData(m,m,s,l);y.fill(fh,0,h),g.fill(0,0,h);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const n=_.data[4*(e*s+t)+3]/255;if(0===n)continue;const r=(e+m)*c+t+m;if(1===n)y[r]=0,g[r]=fh;else{const e=.5-n;y[r]=e>0?e*e:0,g[r]=e<0?e*e:0}}mh(y,0,0,c,u,c,this.f,this.v,this.z),mh(g,m,m,s,l,c,this.f,this.v,this.z);for(let e=0;e<h;e++){const t=Math.sqrt(y[e])-Math.sqrt(g[e]);d[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return p}};class Sh{constructor(e=[],t=kh){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function kh(e,t){return e<t?-1:e>t?1:0}function Ch(e,t=1,n=!1){let r=1/0,o=1/0,a=-1/0,s=-1/0;const l=e[0];for(let e=0;e<l.length;e++){const t=l[e];(!e||t.x<r)&&(r=t.x),(!e||t.y<o)&&(o=t.y),(!e||t.x>a)&&(a=t.x),(!e||t.y>s)&&(s=t.y)}const c=Math.min(a-r,s-o);let u=c/2;const h=new Sh([],Mh);if(0===c)return new i(r,o);for(let t=r;t<a;t+=c)for(let n=o;n<s;n+=c)h.push(new Ih(t+u,n+u,u,e));let d=function(e){let t=0,n=0,r=0;const i=e[0];for(let e=0,o=i.length,a=o-1;e<o;a=e++){const o=i[e],s=i[a],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,r+=(o.y+s.y)*l,t+=3*l}return new Ih(n/t,r/t,0,e)}(e),p=h.length;for(;h.length;){const r=h.pop();(r.d>d.d||!d.d)&&(d=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-d.d<=t||(u=r.h/2,h.push(new Ih(r.p.x-u,r.p.y-u,u,e)),h.push(new Ih(r.p.x+u,r.p.y-u,u,e)),h.push(new Ih(r.p.x-u,r.p.y+u,u,e)),h.push(new Ih(r.p.x+u,r.p.y+u,u,e)),p+=4)}return n&&(console.log(`num probes: ${p}`),console.log(`best distance: ${d.d}`)),d.p}function Mh(e,t){return t.max-e.max}function Ih(e,t,n,r){this.p=new i(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,ol(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const Ph=Number.POSITIVE_INFINITY,Ah=Math.sqrt(2);function Dh(e,t){return t[1]!==Ph?function(e,t,n){let r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){let n=0,r=0;t<0&&(t=0);const i=t/Ah;switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function zh(e,t,n,r,i,o,a,s,l,c){e.createArrays(),e.tilePixelRatio=Is/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,d={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;d.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Wo(t),s),h["text-size"].possiblyEvaluate(new Wo(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;d.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Wo(t),s),h["icon-size"].possiblyEvaluate(new Wo(n),s)]}d.layoutTextSize=h["text-size"].possiblyEvaluate(new Wo(l+1),s),d.layoutIconSize=h["icon-size"].possiblyEvaluate(new Wo(l+1),s),d.textMaxSize=h["text-size"].possiblyEvaluate(new Wo(18),s);const p="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),f=u.get("text-size");for(const o of e.features){const l=u.get("text-font").evaluate(o,{},s).join(","),h=f.evaluate(o,{},s),m=d.layoutTextSize.evaluate(o,{},s),g=(d.layoutIconSize.evaluate(o,{},s),{horizontal:{},vertical:void 0}),y=o.text;let _,v=[0,0];if(y){const r=y.toString(),a=u.get("text-letter-spacing").evaluate(o,{},s)*ou,c=u.get("text-line-height").evaluate(o,{},s)*ou,d=Co(r)?a:0,f=u.get("text-anchor").evaluate(o,{},s),_=u.get("text-variable-anchor");if(!_){const e=u.get("text-radial-offset").evaluate(o,{},s);v=e?Dh(f,[e*ou,Ph]):u.get("text-offset").evaluate(o,{},s).map((e=>e*ou))}let x=p?"center":u.get("text-justify").evaluate(o,{},s);const b=u.get("symbol-placement"),w="point"===b,T="point"===b?u.get("text-max-width").evaluate(o,{},s)*ou:0,E=o=>{e.allowVerticalPlacement&&ko(r)&&(g.vertical=Wu(y,t,n,i,l,T,c,f,o,d,v,$u.vertical,!0,b,m,h))};if(!p&&_){const e="auto"===x?_.map((e=>Rh(e))):[x];let r=!1;for(let o=0;o<e.length;o++){const a=e[o];if(!g.horizontal[a])if(r)g.horizontal[a]=g.horizontal[0];else{const e=Wu(y,t,n,i,l,T,c,"center",a,d,v,$u.horizontal,!1,b,m,h);e&&(g.horizontal[a]=e,r=1===e.positionedLines.length)}}E("left")}else{if("auto"===x&&(x=Rh(f)),w||u.get("text-writing-mode").indexOf("horizontal")>=0||!ko(r)){const e=Wu(y,t,n,i,l,T,c,f,x,d,v,$u.horizontal,!1,b,m,h);e&&(g.horizontal[x]=e)}E("point"===b?"left":x)}}let x=!1;if(o.icon&&o.icon.name){const t=r[o.icon.name];t&&(_=rh(i[o.icon.name],u.get("icon-offset").evaluate(o,{},s),u.get("icon-anchor").evaluate(o,{},s)),x=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&de("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const b=Bh(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!b&&b.iconsInText),(b||_)&&Oh(e,o,g,_,r,d,m,0,v,x,a,s,c)}o&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Rh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Oh(e,t,n,r,i,o,a,s,l,c,u,h,d){let p=o.textMaxSize.evaluate(t,{},h);void 0===p&&(p=a);const f=e.layers[0].layout,m=f.get("icon-offset").evaluate(t,{},h),g=Bh(n.horizontal)||n.vertical,y=a/24,_=e.tilePixelRatio*p/24,v=e.tilePixelRatio*f.get("symbol-spacing"),x=f.get("text-padding")*e.tilePixelRatio,b=f.get("icon-padding")*e.tilePixelRatio,w=$(f.get("text-max-angle")),T="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),E="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),S=f.get("symbol-placement"),k=v/2,C=f.get("icon-text-fit");let M;r&&"none"!==C&&(e.allowVerticalPlacement&&n.vertical&&(M=ih(r,n.vertical,C,f.get("icon-text-fit-padding"),m,y)),g&&(r=ih(r,g,C,f.get("icon-text-fit-padding"),m,y)));const I=(a,s,p)=>{if(s.x<0||s.x>=Is||s.y<0||s.y>=Is)return;const{x:f,y:g,z:y}=d.projectTilePoint(s.x,s.y,p),_=new oh(f,g,y,0,void 0);!function(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,w,T,E){const S=e.addToLineVertexArray(t,r);let k,C,M,I,P,A,D,z=0,R=0,O=0,L=0,F=-1,B=-1;const N={};let U=Qa(""),j=0,V=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[j,V]=l.layout.get("text-offset").evaluate(x,{},E).map((e=>e*ou)):(j=l.layout.get("text-radial-offset").evaluate(x,{},E)*ou,V=Ph),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(f)A=Uh(e),s&&(D=Uh(s));else{const r=l.layout.get("text-rotate").evaluate(x,{},E)+90;M=Nh(c,n,t,u,h,d,e,p,r,m),s&&(I=Nh(c,n,t,u,h,d,s,y,r))}}if(o){const r=l.layout.get("icon-rotate").evaluate(x,{},E),i="none"!==l.layout.get("icon-text-fit"),a=vh(o,r,w,i),p=s?vh(s,r,w,i):void 0;C=Nh(c,n,t,u,h,d,o,y,r),z=4*a.length;const f=e.iconSizeData;let m=null;"source"===f.kind?(m=[au*l.layout.get("icon-size").evaluate(x,{},E)],m[0]>Lh&&de(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===f.kind&&(m=[au*b.compositeIconSizes[0].evaluate(x,{},E),au*b.compositeIconSizes[1].evaluate(x,{},E)],(m[0]>Lh||m[1]>Lh)&&de(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,m,v,_,x,!1,n,t,S.lineStartIndex,S.lineLength,-1,T,E),F=e.icon.placedSymbolArray.length-1,p&&(R=4*p.length,e.addSymbols(e.icon,p,m,v,_,x,$u.vertical,n,t,S.lineStartIndex,S.lineLength,-1,T,E),B=e.icon.placedSymbolArray.length-1)}for(const r in i.horizontal){const o=i.horizontal[r];k||(U=Qa(o.text),f?P=Uh(o):k=Nh(c,n,t,u,h,d,o,p,l.layout.get("text-rotate").evaluate(x,{},E),m));const s=1===o.positionedLines.length;if(O+=Fh(e,n,t,o,a,l,f,x,m,S,i.vertical?$u.horizontal:$u.horizontalOnly,s?Object.keys(i.horizontal):[r],N,F,b,T,E),s)break}i.vertical&&(L+=Fh(e,n,t,i.vertical,a,l,f,x,m,S,$u.vertical,["vertical"],N,B,b,T,E));let $=-1;const q=(e,t)=>e?Math.max(e,t):t;$=q(P,$),$=q(A,$),$=q(D,$);const G=$>-1?1:0;e.glyphOffsetArray.length>=Xh.MAX_GLYPHS&&de("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey),e.symbolInstances.emplaceBack(n.x,n.y,n.z,t.x,t.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical>=0?N.vertical:-1,F,B,U,void 0!==k?k:e.collisionBoxArray.length,void 0!==k?k+1:e.collisionBoxArray.length,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,I||e.collisionBoxArray.length,I?I+1:e.collisionBoxArray.length,u,O,L,z,R,G,0,j,V,$)}(e,s,_,a,n,r,i,M,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,x,T,l,0,b,E,m,t,o,c,u,h)};if("line"===S)for(const i of ph(t.geometry,0,0,Is,Is)){const t=hh(i,v,w,n.vertical||g,r,24,_,e.overscaling,Is);for(const n of t){const t=g;t&&jh(e,t.text,k,n)||I(i,n,h)}}else if("line-center"===S){for(const e of t.geometry)if(e.length>1){const t=uh(e,w,n.vertical||g,r,24,_);t&&I(e,t,h)}}else if("Polygon"===t.type)for(const e of dc(t.geometry,0)){const t=Ch(e,16);I(e[0],new oh(t.x,t.y,0,0,void 0),h)}else if("LineString"===t.type)for(const e of t.geometry)I(e,new oh(e[0].x,e[0].y,0,0,void 0),h);else if("Point"===t.type)for(const e of t.geometry)for(const t of e)I([t],new oh(t.x,t.y,0,0,void 0),h)}const Lh=32640;function Fh(e,t,n,r,o,a,s,l,c,u,h,d,p,f,m,g,y){const _=function(e,t,n,r,o,a,s,l){const c=[];if(0===t.positionedLines.length)return c;const u=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,h=function(e){const t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n);let d=Math.abs(t.top-t.bottom);for(const e of t.positionedLines)d-=e.lineOffset;const p=t.positionedLines.length,f=d/p;let m=t.top-n[1];for(let e=0;e<p;++e){const r=t.positionedLines[e];m=Eh(t,f,m,e);for(const e of r.positionedGlyphs){if(!e.rect)continue;const r=e.rect||{};let a=4,d=!0,p=1,f=0;if(e.imageName){const t=s[e.imageName];if(!t)continue;if(t.sdf){de("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,p=t.pixelRatio,a=1/p}const g=(o||l)&&e.vertical,y=e.metrics.advance*e.scale/2,_=e.metrics,v=e.rect;if(null===v)continue;l&&t.verticalizable&&(f=e.imageName?y-e.metrics.width*e.scale/2:0);const x=o?[e.x+y,e.y]:[0,0];let b=[0,0],w=[0,0],T=!1;o||(g?(w=[e.x+y+h[0],e.y+h[1]-f],T=!0):b=[e.x+y+n[0],e.y+n[1]-f]);const E=v.w*e.scale/(p*(e.localGlyph?2:1)),S=v.h*e.scale/(p*(e.localGlyph?2:1));let k,C,M,I;if(g){const t=e.y-m,n=new i(-y,y-t),r=-Math.PI/2,o=new i(...w);k=new i(-y+b[0],b[1]),k._rotateAround(r,n)._add(o),k.x+=-t+y,k.y-=(_.left-a)*e.scale;const s=e.imageName?_.advance*e.scale:ou*e.scale,l=String.fromCharCode(e.glyph);pu(l)?k.x+=(1-a)*e.scale:fu(l)?k.x+=s-_.height*e.scale+(-a-1)*e.scale:k.x+=e.imageName||_.width+2*a===v.w&&_.height+2*a===v.h?(s-S)/2:(s-(_.height+2*a)*e.scale)/2,C=new i(k.x,k.y-E),M=new i(k.x+S,k.y),I=new i(k.x+S,k.y-E)}else{const t=(_.left-a)*e.scale-y+b[0],n=(-_.top-a)*e.scale+b[1],r=t+E,o=n+S;k=new i(t,n),C=new i(r,n),M=new i(t,o),I=new i(r,o)}if(u){let e;e=o?new i(0,0):T?new i(h[0],h[1]):new i(n[0],n[1]),k._rotateAround(u,e),C._rotateAround(u,e),M._rotateAround(u,e),I._rotateAround(u,e)}const P=new i(0,0),A=new i(0,0);c.push({tl:k,tr:C,bl:M,br:I,tex:r,writingMode:t.writingMode,glyphOffset:x,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:P,pixelOffsetBR:A,minFontScaleX:0,minFontScaleY:0})}}return c}(0,r,c,a,s,l,o,e.allowVerticalPlacement),v=e.textSizeData;let x=null;"source"===v.kind?(x=[au*a.layout.get("text-size").evaluate(l,{},y)],x[0]>Lh&&de(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===v.kind&&(x=[au*m.compositeTextSizes[0].evaluate(l,{},y),au*m.compositeTextSizes[1].evaluate(l,{},y)],(x[0]>Lh||x[1]>Lh)&&de(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,_,x,c,s,l,h,t,n,u.lineStartIndex,u.lineLength,f,g,y);for(const t of d)p[t]=e.text.placedSymbolArray.length-1;return 4*_.length}function Bh(e){for(const t in e)return e[t];return null}function Nh(e,t,n,r,o,a,s,l,c,u){let h=s.top,d=s.bottom,p=s.left,f=s.right;const m=s.collisionPadding;if(m&&(p-=m[0],h-=m[1],f+=m[2],d+=m[3]),c){const e=new i(p,h),t=new i(f,h),n=new i(p,d),r=new i(f,d),o=$(c);let a=new i(0,0);u&&(a=new i(u[0],u[1])),e._rotateAround(o,a),t._rotateAround(o,a),n._rotateAround(o,a),r._rotateAround(o,a),p=Math.min(e.x,t.x,n.x,r.x),f=Math.max(e.x,t.x,n.x,r.x),h=Math.min(e.y,t.y,n.y,r.y),d=Math.max(e.y,t.y,n.y,r.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,p,h,f,d,l,r,o,a),e.length-1}function Uh(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function jh(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}const Vh=Pc.VectorTileFeature.types,$h=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qh(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=u?Math.min(Lh,Math.round(u[0])):0,y=u?Math.min(Lh,Math.round(u[1])):0;e.emplaceBack(t,n,Math.round(32*a),Math.round(32*s),l,c,(g<<1)+(h?1:0),y,16*d,16*p,256*f,256*m,r,i,o,0)}function Gh(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Wh(e){for(const t of e.sections)if(zo(t.text))return!0;return!1}class Zh{constructor(e){this.layoutVertexArray=new va,this.indexArray=new Sa,this.programConfigurations=e,this.segments=new Ms,this.dynamicLayoutVertexArray=new ga,this.opacityVertexArray=new xa,this.placedSymbolArray=new Na}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jc.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,eu.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,$h,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Wi("SymbolBuffers",Zh);class Hh{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new Ms,this.collisionVertexArray=new Ea,this.collisionVertexArrayExt=new ga}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,tu.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,nu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Wi("CollisionBuffers",Hh);class Xh{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=u([]),this.placementViewportMatrix=u([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=su(this.zoom,t["text-size"]),this.iconSizeData=su(this.zoom,t["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((e=>$u[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Zh(new _s(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Zh(new _s(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new Va,this.lineVertexArray=new $a,this.symbolInstances=new ja}calculateGlyphDependencies(e,t,n,r,i){for(let n=0;n<e.length;n++)if(t[e.charCodeAt(n)]=!0,r&&i){const r=du[e.charAt(n)];r&&(t[r.charCodeAt(0)]=!0)}}populate(e,t,n,r){const i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Ht&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=t.iconDependencies,p=t.glyphDependencies,f=t.availableImages,m=new Wo(this.zoom);for(const{feature:t,id:s,index:l,sourceLayerIndex:g}of e){const e=i._featureFilter.needGeometry,y=Xs(t,e);if(!i._featureFilter.filter(m,y,n))continue;let _,v;if(e||(y.geometry=Hs(t,n,r)),c){const e=i.getValueAndResolveTokens("text-field",y,n,f),t=Ht.factory(e);Wh(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===$o()||this.hasRTLText&&Go.isParsed())&&(_=hu(t,i,y))}if(u){const e=i.getValueAndResolveTokens("icon-image",y,n,f);v=e instanceof Xt?e:Xt.fromString(e)}if(!_&&!v)continue;const x=this.sortFeaturesByKey?h.evaluate(y,{},n):void 0;if(this.features.push({id:s,text:_,icon:v,index:l,sourceLayerIndex:g,geometry:y.geometry,properties:t.properties,type:Vh[t.type],sortKey:x}),v&&(d[v.name]=!0),_){const e=a.evaluate(y,{},n).join(","),t="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf($u.vertical)>=0;for(const n of _.sections)if(n.image)d[n.image.name]=!0;else{const r=ko(_.toString()),i=n.fontStack||e,o=p[i]=p[i]||{};this.calculateGlyphDependencies(n.text,o,t,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in t&&n[p]!==t[f]){const e=s(p,f,h),i=a(p,f,r[e].geometry);delete t[p],delete n[f],n[l(d,r[i].geometry,!0)]=i,r[e].geometry=null}else p in n?a(p,f,h):f in t?s(p,f,h):(o(c),t[p]=i-1,n[f]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment){let n=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]);const i={};for(let r=e.segment+1;r<t.length;r++)i[r]={x:t[r].x,y:t[r].y,tileUnitDistanceFromAnchor:n},r<t.length-1&&(n+=t[r+1].dist(t[r]));for(let n=e.segment||0;n>=0;n--)i[n]={x:t[n].x,y:t[n].y,tileUnitDistanceFromAnchor:r},n>0&&(r+=t[n-1].dist(t[n]));for(let e=0;e<t.length;e++){const t=i[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,r,i,o,a,s,l,c,u,h,d,p){const f=e.indexArray,m=e.layoutVertexArray,g=e.segments.prepareSegment(4*t.length,m,f,this.canOverlap?o.sortKey:void 0),y=this.glyphOffsetArray.length,_=g.vertexLength,v=this.allowVerticalPlacement&&a===$u.vertical?Math.PI/2:0,x=o.text&&o.text.sections;for(let r=0;r<t.length;r++){const{tl:i,tr:a,bl:c,br:u,tex:h,pixelOffsetTL:y,pixelOffsetBR:_,minFontScaleX:b,minFontScaleY:w,glyphOffset:T,isSDF:E,sectionIndex:S}=t[r],k=g.vertexLength,C=T[1];qh(m,s.x,s.y,s.z,l.x,l.y,i.x,C+i.y,h.x,h.y,n,E,y.x,y.y,b,w),qh(m,s.x,s.y,s.z,l.x,l.y,a.x,C+a.y,h.x+h.w,h.y,n,E,_.x,y.y,b,w),qh(m,s.x,s.y,s.z,l.x,l.y,c.x,C+c.y,h.x,h.y+h.h,n,E,y.x,_.y,b,w),qh(m,s.x,s.y,s.z,l.x,l.y,u.x,C+u.y,h.x+h.w,h.y+h.h,n,E,_.x,_.y,b,w),Gh(e.dynamicLayoutVertexArray,s,v),f.emplaceBack(k,k+1,k+2),f.emplaceBack(k+1,k+2,k+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(T[0]),r!==t.length-1&&S===t[r+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,o,o.index,{},d,p,x&&x[S])}e.placedSymbolArray.emplaceBack(s.x,s.y,s.z,l.x,l.y,y,this.glyphOffsetArray.length-y,_,c,u,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,h,0)}_commitLayoutVertex(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,n,r,o,a,s){const l=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),c=l.vertexLength,u=s.tileAnchorX,h=s.tileAnchorY;for(let e=0;e<4;e++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,o,a,u,h,new i(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,o,a,u,h,new i(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,o,a,u,h,new i(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,o,a,u,h,new i(e.x1,e.y2)),l.vertexLength+=4;const d=n.indexArray;d.emplaceBack(c,c+1),d.emplaceBack(c+1,c+2),d.emplaceBack(c+2,c+3),d.emplaceBack(c+3,c),l.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,a);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hh(wa,ru.members,Da),this.iconCollisionBox=new Hh(wa,ru.members,Da);const n=cu(this.iconSizeData,e),r=cu(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,n,r){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=lu(this.textSizeData,e,i)/ou;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,n){const r=this.icon.placedSymbolArray.get(n),i=lu(this.iconSizeData,e,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(e,t,n,r,i){for(let o=r;o<i;o++){const r=n.get(o),i=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=cu(this.iconSizeData,e),r=cu(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,a,s,l){const c={};for(let r=t;r<n;r++){const t=e.get(r);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,padding:t.padding,projectedAnchorX:t.projectedAnchorX,projectedAnchorY:t.projectedAnchorY,projectedAnchorZ:t.projectedAnchorZ,tileAnchorX:t.tileAnchorX,tileAnchorY:t.tileAnchorY},c.textFeatureIndex=t.featureIndex;break}for(let t=r;t<i;t++){const n=e.get(t);c.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.verticalTextFeatureIndex=n.featureIndex;break}for(let t=o;t<a;t++){const n=e.get(t);c.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.iconFeatureIndex=n.featureIndex;break}for(let t=s;t<l;t++){const n=e.get(t);c.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.verticalIconFeatureIndex=n.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let t=n.vertexStartIndex;t<r;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const a=this.symbolInstances.get(e);r.push(0|Math.round(t*a.tileAnchorX+n*a.tileAnchorY)),i.push(a.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Wi("SymbolBucket",Xh,{omit:["layers","collisionBoxArray","features","compareText"]}),Xh.MAX_GLYPHS=65535,Xh.addDynamicAttributes=Gh;const Yh=new aa({"symbol-placement":new ta(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new ta(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ta(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new na(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ta(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ta(vt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ta(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ta(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ta(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new na(vt.layout_symbol["icon-size"]),"icon-text-fit":new ta(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ta(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new na(vt.layout_symbol["icon-image"]),"icon-rotate":new na(vt.layout_symbol["icon-rotate"]),"icon-padding":new ta(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new ta(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new na(vt.layout_symbol["icon-offset"]),"icon-anchor":new na(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ta(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ta(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ta(vt.layout_symbol["text-rotation-alignment"]),"text-field":new na(vt.layout_symbol["text-field"]),"text-font":new na(vt.layout_symbol["text-font"]),"text-size":new na(vt.layout_symbol["text-size"]),"text-max-width":new na(vt.layout_symbol["text-max-width"]),"text-line-height":new na(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new na(vt.layout_symbol["text-letter-spacing"]),"text-justify":new na(vt.layout_symbol["text-justify"]),"text-radial-offset":new na(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ta(vt.layout_symbol["text-variable-anchor"]),"text-anchor":new na(vt.layout_symbol["text-anchor"]),"text-max-angle":new ta(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new ta(vt.layout_symbol["text-writing-mode"]),"text-rotate":new na(vt.layout_symbol["text-rotate"]),"text-padding":new ta(vt.layout_symbol["text-padding"]),"text-keep-upright":new ta(vt.layout_symbol["text-keep-upright"]),"text-transform":new na(vt.layout_symbol["text-transform"]),"text-offset":new na(vt.layout_symbol["text-offset"]),"text-allow-overlap":new ta(vt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ta(vt.layout_symbol["text-ignore-placement"]),"text-optional":new ta(vt.layout_symbol["text-optional"])});var Kh={paint:new aa({"icon-opacity":new na(vt.paint_symbol["icon-opacity"]),"icon-color":new na(vt.paint_symbol["icon-color"]),"icon-halo-color":new na(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new na(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new na(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new ta(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ta(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new na(vt.paint_symbol["text-opacity"]),"text-color":new na(vt.paint_symbol["text-color"],{runtimeType:At,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new na(vt.paint_symbol["text-halo-color"]),"text-halo-width":new na(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new na(vt.paint_symbol["text-halo-blur"]),"text-translate":new ta(vt.paint_symbol["text-translate"]),"text-translate-anchor":new ta(vt.paint_symbol["text-translate-anchor"])}),layout:Yh};class Qh{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ct,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Wi("FormatSectionOverride",Qh,{omit:["defaultValue"]});class Jh extends Ss{constructor(e){super(e,Kh)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const e=[];for(const t of n)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||qr(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new Xh(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Kh.paint.overridableProperties){if(!Jh.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new Qh(t),r=new $r(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new Wr("source",r):new Zr("composite",r,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new Jo(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&Jh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=Kh.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Ht)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof en&&Qt(t.value)===Ot?o(t.value.sections):t instanceof on?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new ys(this,e)}}var ed={paint:new aa({"background-color":new ta(vt.paint_background["background-color"]),"background-pattern":new ia(vt.paint_background["background-pattern"]),"background-opacity":new ta(vt.paint_background["background-opacity"])})},td={paint:new aa({"raster-opacity":new ta(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ta(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ta(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ta(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new ta(vt.paint_raster["raster-saturation"]),"raster-contrast":new ta(vt.paint_raster["raster-contrast"]),"raster-resampling":new ta(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new ta(vt.paint_raster["raster-fade-duration"])})};class nd extends Ss{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var rd={paint:new aa({"sky-type":new ta(vt.paint_sky["sky-type"]),"sky-atmosphere-sun":new ta(vt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ta(vt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ta(vt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ta(vt.paint_sky["sky-gradient-radius"]),"sky-gradient":new oa(vt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ta(vt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ta(vt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ta(vt.paint_sky["sky-opacity"])})};function id(e,t,n){const r=x(0,0,1),i=B(F());return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s}(i,i,n?-$(e)+Math.PI:$(e)),N(i,i,-$(t)),A(r,r,i),C(r,r)}const od={circle:class extends Ss{constructor(e){super(e,ml)}createBucket(e){return new Ks(e)}queryRadius(e){const t=e;return ul("circle-radius",this,t)+ul("circle-stroke-width",this,t)+hl(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=pl(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return _l(e,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new ys(this,e)}},heatmap:class extends Ss{createBucket(e){return new Tl(e)}constructor(e){super(e,Il),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Pl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return ul("heatmap-radius",this,e)}queryIntersectsFeature(e,t,n,r,o,a,s,l){const c=this.paint.get("heatmap-radius").evaluate(t,n);return _l(e,r,a,s,l,!0,!0,new i(0,0),c)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new ys(this,e)}},hillshade:class extends Ss{constructor(e){super(e,Al)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(e){return new ys(this,e)}},fill:class extends Ss{constructor(e){super(e,_c)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new ys(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new gc(e)}queryRadius(){return hl(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,o){return!e.queryGeometry.isAboveHorizon&&el(dl(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends Ss{constructor(e){super(e,Fc)}createBucket(e){return new Oc(e)}queryRadius(){return hl(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new ys(this,e)}queryIntersectsFeature(e,t,n,r,o,a,s,l,c){const u=pl(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),h=this.paint.get("fill-extrusion-height").evaluate(t,n),d=this.paint.get("fill-extrusion-base").evaluate(t,n),p=[0,0],f=l&&a.elevation,m=a.elevation?a.elevation.exaggeration():1;if(f){const t=e.tile.getBucket(this).centroidVertexArray,n=c+1;if(n<t.length){const e=t.get(n);p[0]=e.a_centroid_pos0,p[1]=e.a_centroid_pos1}}if(0===p[0]&&1===p[1])return!1;const g=function(e,t,n,r,o,a,s,l,c){return a?function(e,t,n,r,i,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of e){const e=[],p=[];for(const c of d){const u=c.x+r.x,d=c.y+r.y,f=jc(u,d,t,n,o,a,s,l);h[0]=u,h[1]=d,h[2]=f.base,h[3]=1,L(h,h,i),h[3]=Math.max(h[3],1e-5);const m=Uc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);h[0]=u,h[1]=d,h[2]=f.top,h[3]=1,L(h,h,i),h[3]=Math.max(h[3],1e-5);const g=Uc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);e.push(m),p.push(g)}c.push(e),u.push(p)}return[c,u]}(e,t,n,r,o,a,s,l,c):function(e,t,n,r,o){const a=[],s=[],l=o[8]*t,c=o[9]*t,u=o[10]*t,h=o[11]*t,d=o[8]*n,p=o[9]*n,f=o[10]*n,m=o[11]*n;for(const t of e){const e=[],n=[];for(const a of t){const t=a.x+r.x,s=a.y+r.y,g=o[0]*t+o[4]*s+o[12],y=o[1]*t+o[5]*s+o[13],_=o[2]*t+o[6]*s+o[14],v=o[3]*t+o[7]*s+o[15],x=g+l,b=y+c,w=_+u,T=Math.max(v+h,1e-5),E=g+d,S=y+p,k=_+f,C=Math.max(v+m,1e-5),M=new i(x/T,b/T);M.z=w/T,e.push(M);const I=new i(E/C,S/C);I.z=k/C,n.push(I)}a.push(e),s.push(n)}return[a,s]}(e,t,n,r,o)}(r,d,h,u,s,f?l:null,p,m,a.center.lat),y=e.queryGeometry;return function(e,t,n){let r=1/0;el(n,t)&&(r=Nc(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];Qs(n,i)&&(r=Math.min(r,Nc(n,i)))}}return r!==1/0&&r}(g[0],g[1],y.isPointQuery()?y.screenBounds:y.screenGeometry)}},line:class extends Ss{constructor(e){super(e,Yc),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Fn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Kc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Hc(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new ys(this,e)}queryRadius(e){const t=e,n=Qc(ul("line-width",this,t),ul("line-gap-width",this,t)),r=ul("line-offset",this,t);return n/2+Math.abs(r)+hl(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,r,o,a){if(e.queryGeometry.isAboveHorizon)return!1;const s=dl(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),l=e.pixelToTileUnitsFactor/2*Qc(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),c=this.paint.get("line-offset").evaluate(t,n);return c&&(r=function(e,t){const n=[],r=new i(0,0);for(let i=0;i<e.length;i++){const o=e[i],a=[];for(let e=0;e<o.length;e++){const n=o[e-1],i=o[e],s=o[e+1],l=0===e?r:i.sub(n)._unit()._perp(),c=e===o.length-1?r:s.sub(i)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),a.push(u._mult(t)._add(i))}n.push(a)}return n}(r,c*e.pixelToTileUnitsFactor)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(sl(e,i[t]))return!0;if(tl(e,i,n))return!0}return!1}(s,r,l)}isTileClipped(){return!0}},symbol:Jh,background:class extends Ss{constructor(e){super(e,ed)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ss{constructor(e){super(e,td)}getProgramIds(){return["raster"]}},sky:class extends Ss{constructor(e){super(e,rd),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Pl({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}getCenter(e,t){const n=this.paint.get("sky-type");if("atmosphere"===n){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&de("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?id(o.azimuthal,90-o.polar,t):id(n[0],90-n[1],t)}if("gradient"===n){const e=this.paint.get("sky-gradient-center");return id(e[0],90-e[1],t)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}},{HTMLImageElement:ad,HTMLCanvasElement:sd,HTMLVideoElement:ld,ImageData:cd,ImageBitmap:ud}=a;class hd{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,t,n){const{width:r,height:i}=e,{context:o}=this,{gl:a}=o;if(a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!t||!1!==t.premultiply)),n||this.size&&this.size[0]===r&&this.size[1]===i){const{x:t,y:o}=n||{x:0,y:0};e instanceof ad||e instanceof sd||e instanceof ld||e instanceof cd||ud&&e instanceof ud?a.texSubImage2D(a.TEXTURE_2D,0,t,o,a.RGBA,a.UNSIGNED_BYTE,e):a.texSubImage2D(a.TEXTURE_2D,0,t,o,r,i,a.RGBA,a.UNSIGNED_BYTE,e.data)}else this.size=[r,i],e instanceof ad||e instanceof sd||e instanceof ld||e instanceof cd||ud&&e instanceof ud?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,e):a.texImage2D(a.TEXTURE_2D,0,this.format,r,i,0,this.format,a.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&a.generateMipmap(a.TEXTURE_2D)}bind(e,t){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?e===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class dd{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new Cl({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const n=this.getKey(e,t);return this.positions[n]}trim(){const e=this.width,t=this.height=ie(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){a=!a;const l=e[t];i=s*n,s+=l,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===l})}return r}addRoundDash(e,t,n){const r=t/2;for(let t=-n;t<=n;t++){const i=this.width*(this.nextRow+n+t);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=t/n*(r+1);if(a.isDash){const e=r-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+d*d);this.image.data[i+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e,t){for(let t=e.length-1;t>=0;--t){const n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}const n=e[0],r=e[e.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=e[o];for(let n=0;n<this.width;n++){n/a.right>1&&(a=e[++o]);const r=Math.abs(n-a.left),s=Math.abs(n-a.right),l=Math.min(r,s);this.image.data[i+n]=Math.max(0,Math.min(255,(a.isDash?l:-l)+t+128))}}addDash(e,t){const n=this.getKey(e,t);if(this.positions[n])return this.positions[n];const r="round"===t,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return de("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let t=0;t<e.length;t++)e[t]<0&&(de("Negative value is found in line dasharray, replacing values with 0"),e[t]=0),a+=e[t];if(0!==a){const n=this.width/a,o=this.getDashRanges(e,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===t?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[n]=l,l}}Wi("LineAtlas",dd);class pd{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const fd=a.performance;function md(e){const t=e?e.url.toString():void 0;return fd.getEntriesByName(t)}class gd{constructor(){this.tasks={},this.taskQueue=[],ae(["process"],this),this.invoker=new pd(this.process),this.nextId=0}add(e,t){const n=this.nextId++,r=function({type:e,isSymbolTile:t,zoom:n}){return n=n||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-n:"maybePrepare"===e&&t?400-n:500:200-n:100-n}(t);if(0===r){me();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:t,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){me();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let n=0;n<this.taskQueue.length;n++){const r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}function yd(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class _d{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=bd(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=function(e,t,n){var r=yd(256*e,256*(t=Math.pow(2,n)-t-1),n),i=yd(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vd{constructor(e,t){this.wrap=e,this.canonical=t,this.key=bd(e,t.z,t.z,t.x,t.y)}}class xd{constructor(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new _d(n,+r,+i),this.key=0===t&&e===n?this.canonical.key:bd(t,e,n,r,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new xd(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xd(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return bd(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return bd(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new xd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new xd(t,this.wrap,t,n,r),new xd(t,this.wrap,t,n+1,r),new xd(t,this.wrap,t,n,r+1),new xd(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new xd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new xd(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function bd(e,t,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return e&&n<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*a+n)+(t-n)}Wi("CanonicalTileID",_d),Wi("OverscaledTileID",xd,{omit:["projMatrix"]});class wd{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}wd.ReadOnly=!1,wd.ReadWrite=!0,wd.disabled=new wd(519,wd.ReadOnly,[0,1]);const Td=7680;class Ed{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}Ed.disabled=new Ed({func:519,mask:0},0,0,Td,Td,Td);class Sd{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Sd.Replace=[1,0],Sd.disabled=new Sd(Sd.Replace,Gt.transparent,[!1,!1,!1,!1]),Sd.unblended=new Sd(Sd.Replace,Gt.transparent,[!0,!0,!0,!0]),Sd.alphaBlended=new Sd([1,771],Gt.transparent,[!0,!0,!0,!0]);const kd=1029,Cd=2305;class Md{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}Md.disabled=new Md(!1,kd,Cd),Md.backCCW=new Md(!0,kd,Cd),Md.backCW=new Md(!0,kd,2304),Md.frontCW=new Md(!0,1028,2304),Md.frontCCW=new Md(!0,1028,Cd);class Id{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class Pd{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class Ad{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},ee(this.stateChanges[e][r],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])n[t]||(this.deletedStates[e][r][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][t]&&delete this.deletedStates[e][r][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),r=ee({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const n in this.stateChanges[e])this.state[e][n]||(this.state[e][n]={}),ee(this.state[e][n],this.stateChanges[e][n]),t[n]=this.state[e][n];n[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const n in this.state[e])t[n]={},this.state[e][n]={};else for(const n in this.deletedStates[e]){if(null===this.deletedStates[e][n])this.state[e][n]={};else for(const t of Object.keys(this.deletedStates[e][n]))delete this.state[e][n][t];t[n]=this.state[e][n]}n[e]=n[e]||{},ee(n[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in e)e[r].setFeatureState(n,t)}}class Dd{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function zd(e,t,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<e[a]||n[a]>t[a])return null}else{const s=1/r[a];let l=(e[a]-n[a])*s,c=(t[a]-n[a])*s;if(l>c){const e=l;l=c,c=e}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function Rd(e,t,n,r,i,o,a,s,l,c,u){const h=r-e,d=i-t,p=o-n,f=a-e,m=s-t,g=l-n,y=u[1]*g-u[2]*m,_=u[2]*f-u[0]*g,v=u[0]*m-u[1]*f,x=h*y+d*_+p*v;if(Math.abs(x)<1e-15)return null;const b=1/x,w=c[0]-e,T=c[1]-t,E=c[2]-n,S=(w*y+T*_+E*v)*b;if(S<0||S>1)return null;const k=T*p-E*d,C=E*h-w*p,M=w*d-T*h,I=(u[0]*k+u[1]*C+u[2]*M)*b;return I<0||S+I>1?null:(f*k+m*C+g*M)*b}function Od(e,t,n){return(e-t)/(n-t)}function Ld(e,t,n,r,i,o,a,s,l){const c=1<<n,u=o-r,h=a-i,d=(e+1)/c*u+r,p=(t+0)/c*h+i,f=(t+1)/c*h+i;s[0]=(e+0)/c*u+r,s[1]=p,l[0]=d,l[1]=f}class Fd{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let r=Math.ceil(Math.pow(2,t));const i=1/r,o=(e,t,n,r,i)=>{const o=r?1:0,a=(e+1)*n-o,s=t*n,l=(t+1)*n-o;i[0]=e*n,i[1]=s,i[2]=a,i[3]=l};let a=new Dd(r);const s=[];for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),i,!1,s);const n=Nd(s[0],s[1],e),l=Nd(s[2],s[1],e),c=Nd(s[2],s[3],e),u=Nd(s[0],s[3],e);a.minimums.push(Math.min(n,l,c,u)),a.maximums.push(Math.max(n,l,c,u)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const e=n[n.length-1];a=new Dd(r);for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),2,!0,s);const n=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),h=e.isLeaf(s[2],s[1]),d=e.isLeaf(s[2],s[3]),p=e.isLeaf(s[0],s[3]),f=Math.min(n.min,i.min,l.min,c.min),m=Math.max(n.max,i.max,l.max,c.max),g=u&&h&&d&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=t.length-1,r=t[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,r,i,o,a=1){return zd([e,t,-100],[n,r,this.maximums[0]*a],i,o)}raycast(e,t,n,r,i,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,r,i,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=d.pop();if(this.leaves[s]){Ld(f,m,g,e,t,n,r,u,h);const s=1<<g,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,y=(m+1)/s,_=Nd(l,d,this.dem)*a,v=Nd(c,d,this.dem)*a,x=Nd(c,y,this.dem)*a,b=Nd(l,y,this.dem)*a,w=Rd(u[0],u[1],_,h[0],u[1],v,h[0],h[1],x,i,o),T=Rd(h[0],h[1],x,u[0],h[1],b,u[0],u[1],_,i,o),E=Math.min(null!==w?w:Number.MAX_VALUE,null!==T?T:Number.MAX_VALUE);if(E!==Number.MAX_VALUE)return E;{const e=k([],i,o,p);if(Bd(_,v,b,x,Od(e[0],u[0],h[0]),Od(e[1],u[1],h[1]))>=e[2])return p}continue}let y=0;for(let d=0;d<this._siblingOffset.length;d++){Ld((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,e,t,n,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const p=zd(u,h,i,o);if(null!=p){const e=p;l[d]=e;let t=!1;for(let n=0;n<y&&!t;n++)e>=l[c[n]]&&(c.splice(n,0,d),t=!0);t||(c[y]=d),y++}}for(let e=0;e<y;e++){const t=c[e];d.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(f<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,r,i){if(1===e[r].isLeaf(t,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=e[o];let s,l=0;for(let e=0;e<this._siblingOffset.length;e++){const r=2*t+this._siblingOffset[e][0],i=2*n+this._siblingOffset[e][1],o=a.getElevation(r,i),c=a.isLeaf(r,i),u=this._addNode(o.min,o.max,c);c&&(l|=1<<e),s||(s=u)}for(let r=0;r<this._siblingOffset.length;r++)l&1<<r||this._construct(e,2*t+this._siblingOffset[r][0],2*n+this._siblingOffset[r][1],o,s+r)}}function Bd(e,t,n,r,i,o){return Bn(Bn(e,n,o),Bn(t,r,o),i)}function Nd(e,t,n){const r=n.dim,i=X(e*r-.5,0,r-1),o=X(t*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return Bd(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),i-a,o-s)}const Ud={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class jd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n,r=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return de(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2;if(this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let e=0;e<o;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(o,e)]=this.data[this._idx(o-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,o)]=this.data[this._idx(e,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Fd(this)}get(e,t,n=!1){const r=new Uint8Array(this.data.buffer);n&&(e=X(e,-1,this.dim),t=X(t,-1,this.dim));const i=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[i],r[i+1],r[i+2])}static getUnpackVector(e){return Ud[e]}get unpackVector(){return Ud[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,n){return(256*e*256+256*t+n)/10-1e4}_unpackTerrarium(e,t,n){return 256*e+t+n/256-32768}static pack(e,t){const n=[0,0,0,0],r=jd.getUnpackVector(t);let i=Math.floor((e+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let t=o;t<a;t++)for(let n=r;n<i;n++)this.data[this._idx(n,t)]=e.data[this._idx(n+s,t+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}Wi("DEMData",jd),Wi("DemMinMaxQuadTree",Fd,{omit:["dem"]});class Vd{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const e of t)this.remove(e.value.tileID,e)}}class $d extends _t{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Vd(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=null,this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ad}onAdd(e){this.map=e,this._minTileCacheSize=e?e._minTileCacheSize:null,this._maxTileCacheSize=e?e._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return J(this._tiles).map((e=>e.tileID)).sort(qd).map((e=>e.key))}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort(((e,t)=>{const n=e.tileID,r=t.tileID,o=new i(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),a=new i(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||a.y-o.y||a.x-o.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(qd).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new yt(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Te.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new gt("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new xd(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=this._updateRetainedTiles(r);if(Gd(this._source.type)&&0!==r.length){const e={},t={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=Te.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-$d.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[r]=n}const o=r[r.length-1].overscaledZ;for(const e in this._tiles){const n=this._tiles[e];if(i[e]||!n.hasData())continue;let r=n.tileID;for(;r.overscaledZ>o;){r=r.scaledTo(r.overscaledZ-1);const o=this._tiles[r.key];if(o&&o.hasData()&&t[r.key]){i[e]=n.tileID;break}}}for(const t in e)i[t]||(this._coveredTiles[t]=!0,i[t]=e[t])}for(const e in i)this._tiles[e].clearFadeHold();const o=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n}(this._tiles,i);for(const e of o){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},r=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,o=Math.max(i-$d.maxOverzooming,this._source.minzoom),a=Math.max(i+$d.maxUnderzooming,this._source.minzoom),s={};for(const n of e){const e=this._addTile(n);t[n.key]=n,e.hasData()||r<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,r,a,t);for(const r of e){let e=this._tiles[r.key];if(e.hasData())continue;if(r.canonical.z>=this._source.maxzoom){const e=r.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=r.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let i=e.wasRequested();for(let a=r.overscaledZ-1;a>=o;--a){const o=r.scaledTo(a);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&i&&(e=this._addTile(o)),e&&(t[o.key]=o,i=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);if(!n){const n=this.map?this.map.painter:null,r="raster"===this._source.type||"raster-dem"===this._source.type;t=new ap(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,r),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new gt("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset()}tilesIn(e,t,n){const r=[],i=this.transform;if(!i)return r;for(const o in this._tiles){const a=this._tiles[o];if(n&&a.clearQueryDebugViz(),a.holdingForFade())continue;const s=e.containsTile(a,i,t);s&&r.push(s)}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.projMatrix=this.transform.calculateProjMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(Gd(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Te.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}_preloadTiles(e,t){const n=new Map,r=Array.isArray(e)?e:[e],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const e of r){const t=e.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)n.set(e.key,e);this.usedForTerrain&&e.updateElevation(!1)}const a=Array.from(n.values()),s="raster"===this._source.type||"raster-dem"===this._source.type;Q(a,((e,t)=>{const n=new ap(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,s);this._loadTile(n,(e=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),t(e,n)}))}),t)}}function qd(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Gd(e){return"raster"===e||"image"===e||"video"===e}$d.maxOverzooming=10,$d.maxUnderzooming=3;class Wd{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const r=n||e.findDEMTileFor(t);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<t.canonical.z-o.canonical.z;return new Wd(r,r.tileSize/Is/a,[(t.canonical.x/a-o.canonical.x)*i.dim,(t.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),o=Math.floor(n);return new i(r,o)}getElevationAt(e,t,n,r){const i=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?Bn(Bn(l.get(a,s,r),l.get(a,s+1,r),o-s),Bn(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Fs(1,e)*this._dem.stride}}class Zd{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new ji(Is,16,0),this.featureIndexArray=new Ga,this.promoteId=t}insert(e,t,n,r,i,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let e=0;e<t.length;e++){const n=t[e],r=[1/0,1/0,-1/0,-1/0];for(let e=0;e<n.length;e++){const t=n[e];r[0]=Math.min(r[0],t.x),r[1]=Math.min(r[1],t.y),r[2]=Math.max(r[2],t.x),r[3]=Math.max(r[3],t.y)}r[0]<Is&&r[1]<Is&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Pc.VectorTile(new yu(this.rawTileData)).layers,this.sourceLayerCoder=new Id(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,n,r){this.loadVTLayers();const i=e.params||{},o=oi(i.filter),a=e.tileResult,s=e.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,n,r)=>ll(a.bufferedTilespaceGeometry,e,t,n,r)));c.sort(Xd);let u=null;s.elevation&&c.length>0&&(u=Wd.create(s.elevation,this.tileID));const h={};let d;for(let s=0;s<c.length;s++){const l=c[s];if(l===d)continue;d=l;const p=this.featureIndexArray.get(l);let f=null;this.loadMatchingFeature(h,p,o,i.layers,i.availableImages,t,n,r,((t,n,r,i=0)=>(f||(f=Hs(t,this.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(a,t,r,f,this.z,e.transform,e.pixelPosMatrix,u,i))))}return h}loadMatchingFeature(e,t,n,r,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=t,p=this.bucketLayerIDs[u];if(r&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,p))return;const f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(c);if(n.needGeometry){const e=Xs(m,!0);if(!n.filter(new Wo(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new Wo(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let t=0;t<p.length;t++){const n=p[t];if(r&&r.indexOf(n)<0)continue;const u=o[n];if(!u)continue;let h={};void 0!==g&&s&&(h=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const f=ee({},a[n]);f.paint=Hd(f.paint,u.paint,m,h,i),f.layout=Hd(f.layout,u.layout,m,h,i);const y=!l||l(m,u,h,d);if(!y)continue;const _=new Pd(m,this.z,this.x,this.y,g);_.layer=f;let v=e[n];void 0===v&&(v=e[n]=[]),v.push({featureIndex:c,feature:_,intersectionZ:y})}}lookupSymbolFeatures(e,t,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=oi(i);for(const i of e)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:i,layoutVertexArrayOffset:0},c,o,a,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:n}=e;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];const o=this.vtLayers[r].feature(t);return i[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;return this.promoteId&&(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof n&&(n=Number(n))),n}}function Hd(e,t,n,r,i){return le(e,((e,o)=>{const a=t instanceof ea?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function Xd(e,t){return t-e}Wi("FeatureIndex",Zd,{omit:["rawTileData","sourceLayerCoder"]});var Yd=ha([{name:"a_pos",type:"Int16",components:2}]);const Kd=32,Qd=33,Jd=new Uint16Array(8184);for(let e=0;e<2046;e++){let t=e+2,n=0,r=0,i=0,o=0,a=0,s=0;for(1&t?i=o=a=Kd:n=r=s=Kd;(t>>=1)>1;){const e=n+i>>1,l=r+o>>1;1&t?(i=n,o=r,n=a,r=s):(n=i,r=o,i=a,o=s),a=e,s=l}const l=4*e;Jd[l+0]=n,Jd[l+1]=r,Jd[l+2]=i,Jd[l+3]=o}const ep=new Uint16Array(2178),tp=new Uint8Array(1089),np=new Uint16Array(1089);function rp(e){return 0===e?-.03125:32===e?.03125:0}var ip=ha([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const op={type:2,extent:Is,loadGeometry:()=>[[new i(0,0),new i(8193,0),new i(8193,8193),new i(0,8193),new i(0,0)]]};class ap{constructor(e,t,n,r,i){this.tileID=e,this.uid=ne(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Te.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Tp(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Xh){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Xh&&t.hasRTLText){this.hasRTLText=!0,Go.isLoading()||Go.isLoaded()||"deferred"!==$o()||qo();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Fa}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this.globeGridBuffer&&(this.globeGridBuffer.destroy(),this.globeGridBuffer=null),this.globePoleBuffer&&(this.globePoleBuffer.destroy(),this.globePoleBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const n=this.buckets[t];n.uploadPending()&&n.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hd(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hd(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new hd(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=oi(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let t=0;t<o.length;t++){const r=o.feature(t);if(a.needGeometry){const e=Xs(r,!0);if(!a.filter(new Wo(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new Wo(this.tileID.overscaledZ),r))continue;const h=n.getId(r,i),d=new Pd(r,s,l,c,h);d.tile=u,e.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=ge(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const r=this.expirationTime-t;r?this.expirationTime=e+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=e[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Hc||o instanceof gc){const e=t.style._getSourceCache(o.layers[0].source);t._terrain&&t._terrain.enabled&&e&&o.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Te.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Te.now()+e}setDependencies(e,t){const n={};for(const e of t)n[e]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const n=Hs(op,this.tileID.canonical,this.tileTransform)[0],r=new pa,i=new za;for(let e=0;e<n.length;e++){const{x:t,y:o}=n[e];r.emplaceBack(t,o),i.emplaceBack(e)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,ip.members),this._tileDebugSegments=Ms.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const n=Hs(op,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const e=function(e,t){const n=Tp(e,t),r=Math.pow(2,e.z);for(let i=0;i<Qd;i++)for(let o=0;o<Qd;o++){const a=Bs((e.x+(o+rp(o))/Kd)/r),s=Ns((e.y+(i+rp(i))/Kd)/r),l=t.project(a,s),c=i*Qd+o;ep[2*c+0]=Math.round((l.x*n.scale-n.x)*Is),ep[2*c+1]=Math.round((l.y*n.scale-n.y)*Is)}tp.fill(0),np.fill(0);for(let e=2045;e>=0;e--){const t=4*e,n=Jd[t+0],r=Jd[t+1],i=Jd[t+2],o=Jd[t+3],a=n+i>>1,s=r+o>>1,l=a+s-r,c=s+n-a,u=r*Qd+n,h=o*Qd+i,d=s*Qd+a,p=Math.hypot((ep[2*u+0]+ep[2*h+0])/2-ep[2*d+0],(ep[2*u+1]+ep[2*h+1])/2-ep[2*d+1])>=16;if(tp[d]=tp[d]||(p?1:0),e<1022){const e=(r+c>>1)*Qd+(n+l>>1),t=(o+c>>1)*Qd+(i+l>>1);tp[d]=tp[d]||tp[e]||tp[t]}}const i=new fa,o=new Sa;let a=0;function s(e,t){const n=t*Qd+e;return 0===np[n]&&(i.emplaceBack(ep[2*n+0],ep[2*n+1],e*Is/Kd,t*Is/Kd),np[n]=++a),np[n]-1}function l(e,t,n,r,i,a){const c=e+n>>1,u=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&tp[u*Qd+c])l(i,a,e,t,c,u),l(n,r,i,a,c,u);else{const l=s(e,t),c=s(n,r),u=s(i,a);o.emplaceBack(l,c,u)}}return l(0,0,Kd,Kd,Kd,0),l(Kd,Kd,0,0,0,Kd),{vertices:i,indices:o}}(this.tileID.canonical,t);r=e.vertices,i=e.indices}else{r=new fa,i=new Sa;for(const{x:e,y:t}of n)r.emplaceBack(e,t,0,0);const e=Rl(r.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(r,ip.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=Ms.simpleSegment(0,0,r.length,i.length)}}const sp=ha([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),lp=ha([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:cp}=sp;function up(e,t){const n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),a=Math.sin(e._pitch)*o+i;return Math.min(1.01*a,i*(1/e._horizonShift))}const hp=Is/Math.PI/2,dp=-hp,pp=hp,fp=[new yl([dp,dp,dp],[pp,pp,pp]),new yl([dp,dp,dp],[0,0,pp]),new yl([0,dp,dp],[pp,0,pp]),new yl([dp,0,dp],[0,pp,pp]),new yl([0,0,dp],[pp,pp,pp])];function mp(e){if(e.z<=1)return fp[e.z+2*e.y+e.x];const[t,n]=gp(e),r=[_p(t[0],t[1]),_p(t[0],n[1]),_p(n[0],t[1]),_p(n[0],n[1])],i=[pp,pp,pp],o=[dp,dp,dp];for(const e of r)i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.min(i[2],e[2]),o[0]=Math.max(o[0],e[0]),o[1]=Math.max(o[1],e[1]),o[2]=Math.max(o[2],e[2]);return new yl(i,o)}function gp(e){const t=Math.pow(2,e.z),n=e.x/t,r=(e.x+1)/t,i=(e.y+1)/t;return[[Ns(e.y/t),Bs(n)],[Ns(i),Bs(r)]]}function yp(e,t,n,r){return n=$(n),r||(r=hp),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function _p(e,t,n){return yp(Math.cos($(e)),Math.sin($(e)),t,n)}function vp(e){return 16383/Math.max(...z([],e.max,e.min))}function xp(e){const t=u(new Float64Array(16)),n=1/vp(e);return d(t,t,e.min),p(t,t,[n,n,n]),t}function bp(e,t,n){const r=t/(2*Math.PI),i=function(e){const t=Is/(2*Math.PI);return e/(2*Math.PI)/t}(t);if(!n){const r=X(e.center.lat,-85.051129,js);n=[Os(e.center.lng)*t,Ls(r)*t]}const o=u(new Float64Array(16));return d(o,o,[n[0],n[1],-r]),p(o,o,[i,i,i]),f(o,o,$(-e._center.lat)),m(o,o,$(-e._center.lng)),o}class wp{constructor(e){const t=this._createGridIndices();this.gridIndexBuffer=e.createIndexBuffer(t,!0),this.gridSegments=Ms.simpleSegment(0,0,4225,8192);const n=this._createPoleTriangleIndices();this.poleIndexBuffer=e.createIndexBuffer(n,!0),this.poleSegments=Ms.simpleSegment(0,0,66,64);const r=new Pa;r.emplaceBack(-1,1,1,0,0,0,0),r.emplaceBack(1,1,1,0,0,1,0),r.emplaceBack(1,-1,1,0,0,1,1),r.emplaceBack(-1,-1,1,0,0,0,1);const i=new Sa;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.atmosphereVertexBuffer=e.createVertexBuffer(r,lp.members),this.atmosphereIndexBuffer=e.createIndexBuffer(i),this.atmosphereSegments=Ms.simpleSegment(0,0,4,2)}destroy(){this.poleIndexBuffer.destroy(),this.gridIndexBuffer.destroy(),this.poleSegments.destroy(),this.gridSegments.destroy(),this.atmosphereVertexBuffer.destroy(),this.atmosphereIndexBuffer.destroy(),this.atmosphereSegments.destroy(),this.wireframeIndexBuffer&&(this.wireframeIndexBuffer.destroy(),this.wireframeSegments.destroy())}static createPoleTriangleVertices(e,t,n){const r=new Pa,i=t/Math.PI/2;r.emplaceBack(0,-i,0,0,0,.5,n?0:1);const o=360/e,a=Math.cos($(85)),s=Math.sin($(85));for(let e=0;e<=64;e++){const t=e/64,c=yp(a,s,0*(1-(l=t))+o*l,i);r.emplaceBack(c[0],c[1],c[2],0,0,t,n?0:1)}var l;return r}_createPoleTriangleIndices(){const e=new Sa;for(let t=0;t<=64;t++)e.emplaceBack(0,t+1,t+2);return e}static createGridVertices(e){const t=Math.pow(2,e.z),n=(e,t,n)=>e*(1-n)+t*n,[r,i]=gp(e),o=new Pa,a=function(e){const t=u(new Float64Array(16)),n=vp(e);var r,i;return p(t,t,[n,n,n]),d(t,t,((r=[])[0]=-(i=e.min)[0],r[1]=-i[1],r[2]=-i[2],r)),t}(mp(e));o.reserve(4096);for(let s=0;s<65;s++){const l=n(r[0],i[0],s/64),c=Ls(l),u=c*t-e.y,h=Math.sin($(l)),d=Math.cos($(l));for(let e=0;e<65;e++){const t=e/64,s=n(r[1],i[1],t),l=yp(d,h,s);P(l,l,a);const p=Os(s);o.emplaceBack(l[0],l[1],l[2],p,c,t,u)}}return o}_createGridIndices(){const e=new Sa,t=(t,n)=>{const r=65*n+t;e.emplaceBack(r+1,r,r+65),e.emplaceBack(r+65,r+65+1,r+1)};for(let e=0;e<64;e++)for(let n=0;n<64;n++)t(n,e);return e}getWirefameBuffer(e){if(!this.wireframeSegments){const t=this._createWireframeGrid();this.wireframeIndexBuffer=e.createIndexBuffer(t),this.wireframeSegments=Ms.simpleSegment(0,0,4096,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}_createWireframeGrid(){const e=new Da,t=(t,n)=>{const r=65*n+t;e.emplaceBack(r,r+1),e.emplaceBack(r,r+65),e.emplaceBack(r,r+65+1)};for(let e=0;e<64;e++)for(let n=0;n<64;n++)t(n,e);return e}}function Tp(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,o=e.y*n,a=(e.y+1)*n,s=Bs(r),l=Bs(i),c=Ns(o),u=Ns(a),h=t.project(s,c),d=t.project(l,c),p=t.project(l,u),f=t.project(s,u);let m=Math.min(h.x,d.x,p.x,f.x),g=Math.min(h.y,d.y,p.y,f.y),y=Math.max(h.x,d.x,p.x,f.x),_=Math.max(h.y,d.y,p.y,f.y);const v=n/16;function x(e,n,r,i,o,a){const s=(r+o)/2,l=(i+a)/2,c=t.project(Bs(s),Ns(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-_);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),_=Math.max(_,c.y),u>v&&(x(e,c,r,i,s,l),x(c,n,s,l,o,a))}x(h,d,r,o,i,o),x(d,p,i,o,i,a),x(p,f,i,a,r,a),x(f,h,r,a,r,o),m-=v,g-=v,y+=v,_+=v;const b=1/Math.max(y-m,_-g);return{scale:b,x:m*b,y:g*b,x2:y*b,y2:_*b,projection:t}}class Ep{constructor(e){const t={},n=[];for(const r in e){const i=e[r],o=t[r]={};for(const e in i.glyphs){const t=i.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const r=t.metrics.localGlyph?2:1,a={x:0,y:0,w:t.bitmap.width+2*r,h:t.bitmap.height+2*r};n.push(a),o[e]=a}}const{w:r,h:i}=Uu(n),o=new Cl({width:r||1,height:i||1});for(const n in e){const r=e[n];for(const e in r.glyphs){const i=r.glyphs[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=t[n][e],s=i.metrics.localGlyph?2:1;Cl.copy(i.bitmap,o,{x:0,y:0},{x:a.x+s,y:a.y+s},i.bitmap)}}this.image=o,this.positions=t}}Wi("GlyphAtlas",Ep);class Sp{constructor(e){this.tileID=new xd(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Tp(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,n,r,i){this.status="parsing",this.data=e,this.collisionBoxArray=new Fa;const o=new Id(Object.keys(e.layers).sort()),a=new Zd(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new dd(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=t.familiesBySource[this.source];for(const t in u){const r=e.layers[t];if(!r)continue;let i=!1,l=!1;for(const e of u[t])"symbol"===e[0].type?i=!0:l=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!l)continue;1===r.version&&de(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=o.encode(t),d=[];for(let e=0;e<r.length;e++){const n=r.feature(e),i=a.getId(n,t);d.push({feature:n,id:i,index:e,sourceLayerIndex:h})}for(const e of u[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(kp(e,this.zoom,n),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain,availableImages:n})).populate(d,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let h,d,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=le(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(g).length?r.send("getGlyphs",{uid:this.uid,stacks:g},((e,t)=>{h||(h=e,d=t,v.call(this))}),void 0,!1,m):d={};const y=Object.keys(c.iconDependencies);y.length?r.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{h||(h=e,p=t,v.call(this))}),void 0,!1,m):p={};const _=Object.keys(c.patternDependencies);function v(){if(h)return i(h);if(d&&p&&f){const e=new Ep(d),t=new Vu(p,f);for(const r in s){const i=s[r];i instanceof Xh?(kp(i.layers,this.zoom,n),zh(i,d,e.positions,p,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection),i.projection=this.projection.name):i.hasPattern&&(i instanceof Hc||i instanceof gc||i instanceof Oc)&&(kp(i.layers,this.zoom,n),i.addFeatures(c,this.tileID.canonical,t.patternPositions,n))}this.status="done",i(null,{buckets:J(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}_.length?r.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{h||(h=e,f=t,v.call(this))}),void 0,!1,m):f={},v.call(this)}}function kp(e,t,n){const r=new Wo(t);for(const t of e)t.recalculate(r,n)}class Cp{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,r){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(e,n)}),t):r(e,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(n,r)}),t):e(n,r);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==r)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function Mp(e,t,n){const r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const r=at(e.request,((e,r,i,o)=>{e?t(e):r&&t(null,{vectorTile:n?void 0:new Pc.VectorTile(new yu(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),t()}}),t)}const Ip=u(new Float64Array(16));class Pp{constructor(e,t){this._tr=e,this._worldSize=t}createInversionMatrix(){return Ip}createTileMatrix(e){let t,n,r;const i=e.canonical,o=u(new Float64Array(16)),a=this._tr.projection;if(a.isReprojectedInTileSpace){const s=Tp(i,a);t=1,n=s.x+e.wrap*s.scale,r=s.y,p(o,o,[t/s.scale,t/s.scale,this._tr.pixelsPerMeter/this._worldSize])}else t=this._worldSize/this._tr.zoomScale(i.z),n=(i.x+Math.pow(2,i.z)*e.wrap)*t,r=i.y*t;return d(o,o,[n,r,0]),p(o,o,[t/Is,t/Is,1]),o}pointCoordinate(e,t,n){const r=this._tr.horizonLineFromTop(!1),o=new i(e,Math.max(r,t));return this._tr.rayIntersectionCoordinate(this._tr.pointRayIntersection(o,n))}upVector(){return[0,0,1]}upVectorScale(){return 1}}var Ap={name:"albers",range:[4,7],center:[-96,37.5],parallels:[29.5,45.5],zAxisUnit:"meters",conic:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],initializeConstants(){if(this.constants&&U(this.parallels,this.constants.parallels))return;const e=Math.sin($(this.parallels[0])),t=(e+Math.sin($(this.parallels[1])))/2,n=1+e*(2*t-e),r=Math.sqrt(n)/t;this.constants={n:t,c:n,r0:r,parallels:this.parallels}},project(e,t){this.initializeConstants();const n=$(e-this.center[0]),r=$(t),{n:i,c:o,r0:a}=this.constants,s=Math.sqrt(o-2*i*Math.sin(r))/i;return{x:s*Math.sin(n*i),y:s*Math.cos(n*i)-a,z:0}},unproject(e,t){this.initializeConstants();const{n:n,c:r,r0:i}=this.constants,o=i+t;let a=Math.atan2(e,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(o));const s=$(this.center[0])*n;a=K(a,-Math.PI-s,Math.PI-s);const l=q(a/n)+this.center[0],c=Math.asin(X((r-(e*e+o*o)*n*n)/(2*n),-1,1)),u=X(q(c),-85.051129,js);return new Ds(l,u)},projectTilePoint:(e,t)=>({x:e,y:t,z:0}),locationPoint:(e,t)=>e._coordinatePoint(e.locationCoordinate(t),!1),pixelsPerMeter:(e,t)=>Fs(1,e)*t,farthestPixelDistance(e){return up(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:(e,t)=>new Pp(e,t)};const Dp=1.340264,zp=-.081106,Rp=893e-6,Op=.003796,Lp=Math.sqrt(3)/2;var Fp={name:"equalEarth",center:[0,0],range:[3.5,7],zAxisUnit:"meters",isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(Lp*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(Lp*(Dp+3*zp*r+i*(7*Rp+9*Op*r)))/Math.PI+.5),y:1-.5*(n*(Dp+zp*r+i*(Rp+Op*r))/Math.PI+1),z:0}},unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=n*n,i=r*r*r;for(let e,o,a,s=0;s<12&&(o=n*(Dp+zp*r+i*(Rp+Op*r))-t,a=Dp+3*zp*r+i*(7*Rp+9*Op*r),e=o/a,n=X(n-e,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(e)<1e-12));++s);const o=Lp*e*(Dp+3*zp*r+i*(7*Rp+9*Op*r))/Math.cos(n),a=Math.asin(Math.sin(n)/Lp),s=X(180*o/Math.PI,-180,180),l=X(180*a/Math.PI,-85.051129,js);return new Ds(s,l)},projectTilePoint:(e,t)=>({x:e,y:t,z:0}),locationPoint:(e,t)=>e._coordinatePoint(e.locationCoordinate(t),!1),pixelsPerMeter:(e,t)=>Fs(1,e)*t,farthestPixelDistance(e){return up(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:(e,t)=>new Pp(e,t)},Bp={name:"equirectangular",supportsWorldCopies:!0,center:[0,0],range:[3.5,7],zAxisUnit:"meters",wrap:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project:(e,t)=>({x:.5+e/360,y:.5-t/360,z:0}),unproject(e,t){const n=360*(e-.5),r=X(360*(.5-t),-85.051129,js);return new Ds(n,r)},projectTilePoint:(e,t)=>({x:e,y:t,z:0}),locationPoint:(e,t)=>e._coordinatePoint(e.locationCoordinate(t),!1),pixelsPerMeter:(e,t)=>Fs(1,e)*t,farthestPixelDistance(e){return up(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:(e,t)=>new Pp(e,t)};const Np=Math.PI/2;function Up(e){return Math.tan((Np+e)/2)}var jp={name:"lambertConformalConic",range:[3.5,7],zAxisUnit:"meters",center:[0,30],parallels:[30,30],conic:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],initializeConstants(){if(this.constants&&U(this.parallels,this.constants.parallels))return;const e=$(this.parallels[0]),t=$(this.parallels[1]),n=Math.cos(e),r=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(Up(t)/Up(e)),i=n*Math.pow(Up(e),r)/r;this.constants={n:r,f:i,parallels:this.parallels}},project(e,t){this.initializeConstants(),t=$(t),e=$(e-this.center[0]);const n=1e-6,{n:r,f:i}=this.constants;i>0?t<-Np+n&&(t=-Np+n):t>Np-n&&(t=Np-n);const o=i/Math.pow(Up(t),r),a=o*Math.sin(r*e),s=i-o*Math.cos(r*e);return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+.5),z:0}},unproject(e,t){this.initializeConstants(),e=(2*e-.5)*Math.PI,t=(2*(1-t)-.5)*Math.PI;const{n:n,f:r}=this.constants,i=r-t,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(e*e+i*i);let s=Math.atan2(e,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(e)*o);const l=X(q(s/n)+this.center[0],-180,180),c=X(q(2*Math.atan(Math.pow(r/a,1/n))-Np),-85.051129,js);return new Ds(l,c)},projectTilePoint:(e,t)=>({x:e,y:t,z:0}),locationPoint:(e,t)=>e._coordinatePoint(e.locationCoordinate(t),!1),pixelsPerMeter:(e,t)=>Fs(1,e)*t,farthestPixelDistance(e){return up(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:(e,t)=>new Pp(e,t)},Vp={name:"mercator",wrap:!0,requiresDraping:!1,supportsWorldCopies:!0,supportsTerrain:!0,supportsFog:!0,supportsFreeCamera:!0,zAxisUnit:"meters",center:[0,0],project:(e,t)=>({x:Os(e),y:Ls(t),z:0}),unproject(e,t){const n=Bs(e),r=Ns(t);return new Ds(n,r)},projectTilePoint:(e,t)=>({x:e,y:t,z:0}),locationPoint:(e,t)=>e._coordinatePoint(e.locationCoordinate(t),!1),pixelsPerMeter:(e,t)=>Fs(1,e)*t,farthestPixelDistance(e){return up(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:(e,t)=>new Pp(e,t)};const $p=$(js);var qp={name:"naturalEarth",center:[0,0],range:[3.5,7],isReprojectedInTileSpace:!0,zAxisUnit:"meters",unsupportedLayers:["custom"],project(e,t){const n=(t=$(t))*t,r=n*n;return{x:.5*((e=$(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}},unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const e=o*o;i=(n*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),n=X(n-i,-$p,$p)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=X(q(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=q(n);return new Ds(a,s)},projectTilePoint:(e,t)=>({x:e,y:t,z:0}),locationPoint:(e,t)=>e._coordinatePoint(e.locationCoordinate(t),!1),pixelsPerMeter:(e,t)=>Fs(1,e)*t,farthestPixelDistance(e){return up(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:(e,t)=>new Pp(e,t)};const Gp=$(js),Wp={albers:Ap,equalEarth:Fp,equirectangular:Bp,lambertConformalConic:jp,mercator:Vp,naturalEarth:qp,winkelTripel:{name:"winkelTripel",center:[0,0],range:[3.5,7],zAxisUnit:"meters",isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project(e,t){t=$(t),e=$(e);const n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),o=Math.sin(i)/i,a=.5*(e*r+2*n*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}},unproject(e,t){let n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),l=2*o*i,c=o*o,u=i*i,h=Math.cos(n/2),d=Math.sin(n/2),p=2*h*d,f=d*d,m=1-u*h*h,g=m?1/m:0,y=m?Math.acos(i*h)*Math.sqrt(1/m):0,_=.5*(2*y*i*d+2*n/Math.PI)-e,v=.5*(y*o+r)-t,x=.5*g*(u*f+y*i*h*c)+1/Math.PI,b=g*(p*l/4-y*o*d),w=.125*g*(l*d-y*o*u*p),T=.5*g*(c*h+y*f*i)+.5,E=b*w-T*x;a=(v*b-_*T)/E,s=(_*w-v*x)/E,n=X(n-a,-Math.PI,Math.PI),r=X(r-s,-Gp,Gp)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new Ds(q(n),q(r))},projectTilePoint:(e,t)=>({x:e,y:t,z:0}),locationPoint:(e,t)=>e._coordinatePoint(e.locationCoordinate(t),!1),pixelsPerMeter:(e,t)=>Fs(1,e)*t,farthestPixelDistance(e){return up(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:(e,t)=>new Pp(e,t)}};e.ARRAY_TYPE=l,e.AUTH_ERR_MSG=ze,e.Aabb=yl,e.Actor=class{constructor(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.cancelCallbacks={},ae(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=me()?e:a,this.scheduler=new gd}send(e,t,n,r,i=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=be(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Xi(t,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(t.mustQueue||me()){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,t)),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(Yi(t.error)):n(null,Yi(t.data)))}else{const n=be(this.globalScope)?void 0:[],r=t.hasCallback?(t,r)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Xi(t):null,data:Xi(r,n)},n)}:e=>{},i=Yi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,r);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,r)}else r(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=_d,e.Color=Gt,e.ColorMode=Sd,e.CullFaceMode=Md,e.DEMData=jd,e.DataConstantProperty=ta,e.DedupedRequest=Cp,e.DepthMode=wd,e.EXTENT=Is,e.Elevation=class{getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,n=!0){null==t&&(t=null);const r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(e.x),s=e.x-a,l=new xd(i,a,i,Math.floor(s*o),Math.floor(e.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,p=(e.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(p);return(n?this.exaggeration():1)*Bn(Bn(u.get(f,m),u.get(f,m+1),p-m),Bn(u.get(f+1,m),u.get(f+1,m+1),p-m),d-f)}getAtTileOffset(e,t,n){const r=1<<e.canonical.z;return this.getAtPointOrZero(new Vs(e.wrap+(e.canonical.x+t/Is)/r,(e.canonical.y+n/Is)/r))}getAtTileOffsetFunc(e,t){return n=>{const r=this.getAtTileOffset(e,n.x,n.y),i=t.upVector(e.canonical,n.x,n.y);return S(i,i,r*t.upVectorScale(e.canonical)),i}}getForTilePoints(e,t,n,r){const i=Wd.create(this,e,r);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],n)})),!0)}getMinMaxForTile(e){const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z;let o=e.canonical.x/i-r.canonical.x,a=e.canonical.y/i-r.canonical.y,s=0;for(let t=0;t<e.canonical.z-r.canonical.z&&!n.leaves[s];t++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=yt,e.EvaluationParameters=Wo,e.Event=gt,e.Evented=_t,e.Frustum=gl,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GlobeSharedBuffers=wp,e.GlyphManager=_h,e.ImagePosition=ju,e.LineAtlas=dd,e.LngLat=Ds,e.LngLatBounds=Ps,e.LocalGlyphMode=yh,e.MAX_MERCATOR_LATITUDE=js,e.MercatorCoordinate=Vs,e.ONE_EM=ou,e.OverscaledTileID=xd,e.Properties=aa,e.RGBAImage=Ml,e.Ray=class{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const r=M(t,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],l=t[2];return Math.abs(n-o)<=s*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-l)<=s*Math.max(1,Math.abs(i),Math.abs(l))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,a=this.pos[0]-e[0],l=this.pos[1]-e[1],c=this.pos[2]-e[2],u=r*r+i*i+o*o,h=2*(a*r+l*i+c*o),d=h*h-4*u*(a*a+l*l+c*c-t*t);if(d<0){const e=Math.max(-h/2,0),s=a+r*e,u=l+i*e,d=c+o*e,p=Math.hypot(s,u,d);return n[0]=s*t/p,n[1]=u*t/p,n[2]=d*t/p,!1}{const e=(-h-Math.sqrt(d))/(2*u);if(e<0){const e=Math.hypot(a,l,c);return n[0]=a*t/e,n[1]=l*t/e,n[2]=c*t/e,!1}return n[0]=a+r*e,n[1]=l+i*e,n[2]=c+o*e,!0}}},e.RequestManager=class{constructor(e,t,n){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",De,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!Re(e))return e;const n=Fe(e);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!Re(e))return e;const n=Fe(e);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t){if(!Re(e))return e;const n=Fe(e);return n.path=`/v4/${n.authority}.json`,n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,r){const i=Fe(e);return Re(e)?(i.path=`/styles/v1${i.path}/sprite${t}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${t}${n}`,Be(i))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Re(e))return e;const r=Fe(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&"raster"!==r.authority&&512===n?"@2x":""}${ke.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${Se.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${Se.TILE_URL_VERSION}${r.path}`);const i=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(r.params)||Se.ACCESS_TOKEN;return Se.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,i)}canonicalizeTileURL(e,t){const n=Fe(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+=`raster/${n.path.replace(`/${Se.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${n.path.replace(`/${Se.TILE_URL_VERSION}/`,"")}`;let i=n.params;return t&&(i=i.filter((e=>!e.match(/^access_token=/)))),i.length&&(r+=`?${i.join("&")}`),r}canonicalizeTileset(e,t){const n=!!t&&Re(t),r=[];for(const t of e.tiles||[])Oe(t)?r.push(this.canonicalizeTileURL(t,n)):r.push(t);return r}_makeAPIURL(e,t){const n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=Fe(Se.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==r.path&&(e.path=`${r.path}${e.path}`),!Se.REQUIRE_ACCESS_TOKEN)return Be(e);if(t=t||Se.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),Be(e)}},e.ResourceType=nt,e.SegmentVector=Ms,e.SourceCache=$d,e.StencilMode=Ed,e.StructArrayLayout1ui2=za,e.StructArrayLayout2f1f2i16=Ta,e.StructArrayLayout2i4=pa,e.StructArrayLayout2ui4=Da,e.StructArrayLayout3f12=ga,e.StructArrayLayout3ui6=Sa,e.StructArrayLayout4i8=fa,e.Texture=hd,e.Tile=ap,e.Transitionable=Xo,e.Uniform1f=os,e.Uniform1i=class extends is{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.Uniform2f=class extends is{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.Uniform3f=class extends is{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.Uniform4f=as,e.UniformColor=ss,e.UniformMatrix2f=class extends is{constructor(e,t){super(e,t),this.current=us}set(e){for(let t=0;t<4;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix2fv(this.location,!1,e);break}}},e.UniformMatrix3f=class extends is{constructor(e,t){super(e,t),this.current=cs}set(e){for(let t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}},e.UniformMatrix4f=class extends is{constructor(e,t){super(e,t),this.current=ls}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.UnwrappedTileID=vd,e.ValidationError=xt,e.VectorTileWorkerSource=class extends _t{constructor(e,t,n,r,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=i||Mp,this.loading={},this.loaded={},this.deduped=new Cp(e.scheduler),this.isSpriteLoaded=r,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,r=e&&e.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new Sp(e);o.abort=this.loadVectorData(e,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),t(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new Pc.VectorTile(new yu(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return t(e);const o={};if(i){const e=md(r);e.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,ee({rawTileData:c.slice(0)},n,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(e,t){const n=this.loaded,r=e.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection;const a=(e,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}},e.WritingMode=$u,e.ZoomHistory=Ki,e.add=b,e.addDynamicAttributes=Gh,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-r*u,e[2]=r*s-i*a,e[3]=s*l-o*u,e[4]=n*u-i*l,e[5]=i*o-n*s,e[6]=o*c-a*l,e[7]=r*l-n*c,e[8]=n*a-r*o,e},e.asyncAll=Q,e.bezier=Z,e.bindAll=ae,e.boundsAttributes=ip,e.bufferConvexPolygon=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=K(r-1,-1,e.length-1),o=K(r+1,-1,e.length-1),a=e[r],s=e[o],l=e[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*t/Math.sin(u/2));n.push(a.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){tt++,tt>Qe&&(e.getActor().send("enforceCacheSizeLimit",Ke),tt=0)},e.calculateGlobeMatrix=bp,e.calculateGlobeMercatorMatrix=function(e){const t=e.worldSize,n=X(e.center.lat,-85.051129,js),r=new i(Os(e.center.lng)*t,Ls(n)*t),o=Fs(1,e.center.lat)*t,a=e.pixelsPerMeter,s=t/(o/e.pixelsPerMeter),l=u(new Float64Array(16));return d(l,l,[r.x,r.y,0]),p(l,l,[s,s,a]),l},e.clamp=X,e.clearTileCache=function(e){const t=a.caches.delete(He);e&&t.catch(e).then((()=>e()))},e.clipLine=ph,e.clone=function(e){var t=new l(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=ue,e.collisionCircleLayout=iu,e.config=Se,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new l(16);return l!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=c,e.createExpression=Gr,e.createLayout=ha,e.createStyleLayer=function(e){return"custom"===e.type?new nd(e):new od[e.type](e)},e.cross=I,e.degToRad=$,e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=M,e.ease=H,e.easeCubicInOut=W,e.emitValidationErrors=Ui,e.endsWith=se,e.enforceCacheSizeLimit=function(e){Je(),Xe&&Xe.then((t=>{t.keys().then((n=>{for(let r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=lu,e.evaluateSizeForZoom=cu,e.evaluateVariableOffset=Dh,e.evented=Vo,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Te,e.exported$1=ke,e.extend=ee,e.extend$1=wt,e.filterObject=ce,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,p=i*s,f=i*l,m=o*a,g=o*s,y=o*l;return e[0]=1-h-f,e[1]=u+y,e[2]=d-g,e[3]=0,e[4]=u-y,e[5]=1-c-f,e[6]=p+m,e[7]=0,e[8]=d+g,e[9]=p-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return G[t]},e.getAABBPointSquareDist=function(e,t,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;e[i]>o&&(r+=(e[i]-o)*(e[i]-o)),t[i]<o&&(r+=(o-t[i])*(o-t[i]))}return r},e.getAnchorAlignment=th,e.getAnchorJustification=Rh,e.getBounds=function(e){let t=1/0,n=1/0,r=-1/0,o=-1/0;for(const i of e)t=Math.min(t,i.x),n=Math.min(n,i.y),r=Math.max(r,i.x),o=Math.max(o,i.y);return{min:new i(t,n),max:new i(r,o)}},e.getColumn=function(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]},e.getImage=pt,e.getJSON=function(e,t){return ot(ee(e,{type:"json"}),t)},e.getMapSessionAPI=We,e.getPerformanceMeasurement=md,e.getProjection=function(e){const t=Wp[e.name];if(!t)throw new Error(`Invalid projection name: ${e.name}`);return t.conic?function(e,t){if(t.parallels&&Math.abs(t.parallels[0]+t.parallels[1])<.01){let n=function(e){const t=Math.max(.01,Math.cos($(e))),n=1/(2*Math.max(Math.PI*t,1/t));return{wrap:!0,supportsWorldCopies:!0,unsupportedLayers:["custom"],project(e,r){const i=$(e)*t,o=Math.sin($(r))/t;return{x:i*n+.5,y:-o*n+.5,z:0}},unproject(e,r){const i=-(r-.5)/n,o=X(q((e-.5)/n)/t,-180,180),a=Math.asin(X(i*t,-1,1)),s=X(q(a),-85.051129,js);return new Ds(o,s)}}}(t.parallels[0]);if("lambertConformalConic"===t.name){const{project:e,unproject:t}=Wp.mercator;n={wrap:!0,supportsWorldCopies:!0,project:e,unproject:t}}return ee({},e,t,n)}return ee({},e,t)}(t,e):t},e.getRTLTextPluginStatus=$o,e.getReferrer=it,e.getTilePoint=function(e,{x:t,y:n},r=0){return new i(((t-r)*e.scale-e.x)*Is,(n*e.scale-e.y)*Is)},e.getTileVec3=function(e,t,n=0){return x(((t.x-n)*e.scale-e.x)*Is,(t.y*e.scale-e.y)*Is,Us(t.z,t.y))},e.getVideo=function(e,t){const n=a.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(let t=0;t<e.length;t++){const r=a.document.createElement("source");ct(e[t])||(n.crossOrigin="Anonymous"),r.src=e[t],n.appendChild(r)}return{cancel:()=>{}}},e.globeBuffersForTileMesh=function(e,t,n,r){const i=e.context,o=e.transform;let a=t.globeGridBuffer,s=t.globePoleBuffer;if(!a){const e=wp.createGridVertices(n.canonical);a=t.globeGridBuffer=i.createVertexBuffer(e,cp,!1)}if(!s){const e=wp.createPoleTriangleVertices(r,o.tileSize*r,0===n.canonical.y);s=t.globePoleBuffer=i.createVertexBuffer(e,cp,!1)}return[a,s]},e.globeDenormalizeECEF=xp,e.globeMatrixForTile=function(e,t){const n=xp(mp(e)),r=((i=new Float64Array(16))[0]=(o=t)[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i);var i,o;return g(r,r,n),r},e.globePoleMatrixForTile=function(e,t,n){const r=u(new Float64Array(16)),i=Math.pow(2,e.z),o=(e.x-i/2)/i*Math.PI*2,a=n.point,s=n.worldSize/(n.tileSize*i);return d(r,r,[a.x,a.y,-n.worldSize/Math.PI/2]),p(r,r,[s,s,s]),f(r,r,$(-n._center.lat)),m(r,r,$(-n._center.lng)),m(r,r,o),t&&p(r,r,[1,-1,1]),r},e.globeTileBounds=mp,e.globeToMercatorTransition=function(e){return Y(5,6,e)},e.identity=u,e.identity$1=B,e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],_=n*s-r*a,v=n*l-i*a,x=n*c-o*a,b=r*l-i*s,w=r*c-o*s,T=i*c-o*l,E=u*m-h*f,S=u*g-d*f,k=u*y-p*f,C=h*g-d*m,M=h*y-p*m,I=d*y-p*g,P=_*I-v*M+x*C+b*k-w*S+T*E;return P?(e[0]=(s*I-l*M+c*C)*(P=1/P),e[1]=(i*M-r*I-o*C)*P,e[2]=(m*T-g*w+y*b)*P,e[3]=(d*w-h*T-p*b)*P,e[4]=(l*k-a*I-c*S)*P,e[5]=(n*I-i*k+o*S)*P,e[6]=(g*x-f*T-y*v)*P,e[7]=(u*T-d*x+p*v)*P,e[8]=(a*M-s*k+c*E)*P,e[9]=(r*k-n*M-o*E)*P,e[10]=(f*w-m*x+y*_)*P,e[11]=(h*x-u*w-p*_)*P,e[12]=(s*S-a*C-l*E)*P,e[13]=(n*C-r*S+i*E)*P,e[14]=(m*v-f*b-g*_)*P,e[15]=(u*b-h*v+d*_)*P,e):null},e.isMapAuthenticated=function(e){return Ze.has(e)},e.isMapboxURL=Re,e.latFromMercatorY=Ns,e.len=O,e.length=v,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=Mp,e.makeRequest=ot,e.mercatorXfromLng=Os,e.mercatorYfromLat=Ls,e.mercatorZfromAltitude=Fs,e.mul=g,e.mul$1=R,e.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],p=n[1],f=n[2],m=n[3],g=n[4],y=n[5],_=n[6],v=n[7],x=n[8];return e[0]=d*r+p*a+f*c,e[1]=d*i+p*s+f*u,e[2]=d*o+p*l+f*h,e[3]=m*r+g*a+y*c,e[4]=m*i+g*s+y*u,e[5]=m*o+g*l+y*h,e[6]=_*r+v*a+x*c,e[7]=_*i+v*s+x*u,e[8]=_*o+v*l+x*h,e},e.multiply$1=h,e.multiply$2=T,e.nextPowerOfTwo=ie,e.normalize=C,e.normalize$1=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e},e.number=Bn,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e},e.pbf=yu,e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=Go,e.pointGeometry=i,e.polygonIntersectsBox=ll,e.polygonIntersectsPolygon=Qs,e.polygonizeBounds=function(e,t,n=0,r=!0){const o=new i(n,n),a=e.sub(o),s=t.add(o),l=[a,new i(s.x,a.y),s,new i(a.x,s.y)];return r&&l.push(a),l},e.posAttributes=Yd,e.postMapLoadEvent=qe,e.postTurnstileEvent=Ve,e.potpack=Uu,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=q,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Bo,pluginURL:No}),Vo.on("pluginStateChange",e),e},e.removeAuthState=function(e){Ze.delete(e)},e.renderColorRamp=Pl,e.rotateX=f,e.rotateX$1=N,e.rotateY=m,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+h*r,e[3]=l*i+d*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=h*i-s*r,e[7]=d*i-l*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},e.scale=p,e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=S,e.scaleAndAdd=k,e.setCacheLimits=function(e,t){Ke=e,Qe=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t,n=!1){if(Bo===Ro||Bo===Oo||Bo===Lo)throw new Error("setRTLTextPlugin cannot be called multiple times.");No=Te.resolveURL(e),Bo=Ro,Fo=t,jo(),n||qo()},e.smoothstep=Y,e.spec=vt,e.storeAuthState=function(e,t){t?Ze.add(e):Ze.delete(e)},e.sub=z,e.subtract=w,e.symbolSize=uu,e.tileAABB=function(e,t,n,r,i,o,a,s,l){if("globe"===l.name){const a=mp(new vd(o,new _d(n,r,i)).canonical).getCorners(),s=Number.MAX_VALUE,l=[-s,-s,-s],d=[s,s,s],p=bp(e,t);for(let e=0;e<a.length;e++)P(a[e],a[e],p),u=d,h=a[e],(c=d)[0]=Math.min(u[0],h[0]),c[1]=Math.min(u[1],h[1]),c[2]=Math.min(u[2],h[2]),E(l,l,a[e]);return new yl(d,l)}var c,u,h;const d=Tp({z:n,x:r,y:i},l);return new yl([(o+d.x/d.scale)*t,t*(d.y/d.scale),a],[(o+d.x2/d.scale)*t,t*(d.y2/d.scale),s])},e.tileTransform=Tp,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=P,e.transformMat4$1=L,e.transformQuat=A,e.translate=d,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Uo,e.uniqueId=ne,e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFog=Fi,e.validateLight=Li,e.validateStyle=Oi,e.values=J,e.vectorTile=Pc,e.version=t,e.warnOnce=de,e.window=a,e.wrap=K})),r(0,(function(e){function t(e){const n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const r of e)n+=`${t(r)},`;return`${n}]`}const r=Object.keys(e).sort();let i="{";for(let n=0;n<r.length;n++)i+=`${JSON.stringify(r[n])}:${t(e[r[n]])},`;return`${i}}`}function n(n){let r="";for(const i of e.refProperties)r+=`/${t(n[i])}`;return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t)this._layerConfigs[n.id]=n,(this._layers[n.id]=e.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const r={};for(let i=0;i<e.length;i++){const o=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=o);let a=r[o];a||(a=r[o]=[]),a.push(e[i])}const i=[];for(const e in r)i.push(r[e]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}const{ImageBitmap:i}=e.window;class o{loadTile(t,n){const{uid:r,encoding:o,rawImageData:a,padding:s,buildQuadTree:l}=t,c=i&&a instanceof i?this.getImageData(a,s):a;n(null,new e.DEMData(r,c,o,s<1,l))}getImageData(t,n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const r=this.offscreenCanvasContext.getImageData(-n,-n,t.width+2*n,t.height+2*n);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:r.width,height:r.height},r.data)}}var a=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)s(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)s(t.coordinates[r],n);return t};function s(e,t){if(0!==e.length){l(e[0],t);for(var n=1;n<e.length;n++)l(e[n],!t)}}function l(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}const c=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;class u{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.pointGeometry(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.pointGeometry(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return c.call(this,e,t,n)}}class h{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new u(this._features[e])}}var d=e.vectorTile.VectorTileFeature,p=f;function f(e,t){this.options=t||{},this.features=e,this.length=e.length}function m(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}f.prototype.feature=function(e){return new m(this.features[e],this.options.extent)},m.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<r.length;o++)i.push(new e.pointGeometry(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var g=_,y=p;function _(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,v,e.layers[n])}(t,n),n.finish()}function v(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,x,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,S,o[n])}function x(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,b,e),t.writeVarintField(3,n.type),t.writeMessage(4,E,n)}function b(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(i.push(l),a[h]=d=i.length-1),t.writeVarint(d)}}}function w(e,t){return(t<<3)+(7&e)}function T(e){return e<<1^e>>31}function E(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),t.writeVarint(w(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&t.writeVarint(w(2,u-1));var d=l[h].x-i,p=l[h].y-o;t.writeVarint(T(d)),t.writeVarint(T(p)),i+=d,o+=p}3===r&&t.writeVarint(w(7,1))}}function S(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function k(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;C(e,t,a,r,i,o%2),k(e,t,n,r,a-1,o+1),k(e,t,n,a+1,i,o+1)}function C(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);C(e,t,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}const a=t[2*n+o];let s=r,l=i;for(M(e,t,r,n),t[2*i+o]>a&&M(e,t,r,i);s<l;){for(M(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*r+o]===a?M(e,t,r,l):(l++,M(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function M(e,t,n,r){I(e,n,r),I(t,2*n,2*r),I(t,2*n+1,2*r+1)}function I(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function P(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}g.fromVectorTileJs=_,g.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new p(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return _({layers:n})},g.GeoJSONWrapper=y;const A=e=>e[0],D=e=>e[1];class z{constructor(e,t=A,n=D,r=64,i=Float64Array){this.nodeSize=r,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length);for(let r=0;r<e.length;r++)a[r]=r,s[2*r]=t(e[r]),s[2*r+1]=n(e[r]);k(a,s,r,0,a.length-1,0)}range(e,t,n,r){return function(e,t,n,r,i,o,a){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=a){for(let a=p;a<=d;a++)c=t[2*a],u=t[2*a+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[a]);continue}const f=Math.floor((p+d)/2);c=t[2*f],u=t[2*f+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[f]);const m=(h+1)%2;(0===h?n<=c:r<=u)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?i>=c:o>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,e,t,n,r,this.nodeSize)}within(e,t,n){return function(e,t,n,r,i,o){const a=[0,e.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let i=h;i<=u;i++)P(t[2*i],t[2*i+1],n,r)<=l&&s.push(e[i]);continue}const d=Math.floor((h+u)/2),p=t[2*d],f=t[2*d+1];P(p,f,n,r)<=l&&s.push(e[d]);const m=(c+1)%2;(0===c?n-i<=p:r-i<=f)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?n+i>=p:r+i>=f)&&(a.push(d+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}const R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},O=Math.fround||(L=new Float32Array(1),e=>(L[0]=+e,L[0]));var L;class F{constructor(e){this.options=G(Object.create(R),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:n,maxZoom:r,nodeSize:i}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let a=[];for(let t=0;t<e.length;t++)e[t].geometry&&a.push(N(e[t],t));this.trees[r+1]=new z(a,W,Z,i,Float32Array),t&&console.timeEnd(o);for(let e=r;e>=n;e--){const n=+Date.now();a=this._cluster(a,e),this.trees[e]=new z(a,W,Z,i,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,a.length,+Date.now()-n)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),a=this.getClusters([-180,r,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(V(n),$(o),V(i),$(r)),l=[];for(const e of s){const t=a.points[e];l.push(t.numPoints?U(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[t];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const t of s){const n=i.points[t];n.parentId===e&&l.push(n.numPoints?U(n):this.points[n.index])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,c),r.points,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.points,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.points,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?i+o.point_count<=r?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,n,r,i):i<r?i++:e.push(t),e.length===n)break}return i}_addTileFeatures(e,t,n,r,i,o){for(const a of e){const e=t[a],s=e.numPoints;let l,c,u;if(s)l=j(e),c=e.x,u=e.y;else{const t=this.points[e.index];l=t.properties,c=V(t.geometry.coordinates[0]),u=$(t.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let d;s?d=e.id:this.options.generateId?d=e.index:this.points[e.index].id&&(d=this.points[e.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}_cluster(e,t){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,t));for(let r=0;r<e.length;r++){const i=e[r];if(i.zoom<=t)continue;i.zoom=t;const l=this.trees[t+1],c=l.within(i.x,i.y,s),u=i.numPoints||1;let h=u;for(const e of c){const n=l.points[e];n.zoom>t&&(h+=n.numPoints||1)}if(h>u&&h>=a){let e=i.x*u,a=i.y*u,s=o&&u>1?this._map(i,!0):null;const d=(r<<5)+(t+1)+this.points.length;for(const n of c){const r=l.points[n];if(r.zoom<=t)continue;r.zoom=t;const c=r.numPoints||1;e+=r.x*c,a+=r.y*c,r.parentId=d,o&&(s||(s=this._map(i,!0)),o(s,this._map(r)))}i.parentId=d,n.push(B(e/h,a/h,d,h,s))}else if(n.push(i),h>1)for(const e of c){const r=l.points[e];r.zoom<=t||(r.zoom=t,n.push(r))}}return n}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?G({},e.properties):e.properties;const n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?G({},r):r}}function B(e,t,n,r,i){return{x:O(e),y:O(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function N(e,t){const[n,r]=e.geometry.coordinates;return{x:O(V(n)),y:O($(r)),zoom:1/0,index:t,parentId:-1}}function U(e){return{type:"Feature",id:e.id,properties:j(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),q(e.y)]}};var t}function j(e){const t=e.numPoints,n=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return G(G({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function V(e){return e/360+.5}function $(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function q(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function G(e,t){for(const n in t)e[n]=t[n];return e}function W(e){return e.x}function Z(e){return e.y}function H(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,l=e[t],c=e[t+1],u=e[n],h=e[n+1],d=t+3;d<n;d+=3){var p=X(e[d],e[d+1],l,c,u,h);if(p>o)i=d,o=p;else if(p===o){var f=Math.abs(d-a);f<s&&(i=d,s=f)}}o>r&&(i-t>3&&H(e,t,i,r),e[i+2]=o,n-i>3&&H(e,i,n,r))}function X(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((e-n)*a+(t-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=e-n)*a+(s=t-r)*s}function Y(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)K(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)K(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)K(e,t[r][i])}(i),i}function K(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function Q(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)J(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)J(i[c],s);else if("LineString"===o)ee(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)ee(i[c],s=[],a,!1),e.push(Y(l,"LineString",s,t.properties));return}te(i,s,a,!1)}else if("Polygon"===o)te(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)Q(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];te(i[c],u,a,!0),s.push(u)}}e.push(Y(l,o,s,t.properties))}}function J(e,t){t.push(ne(e[0])),t.push(re(e[1])),t.push(0)}function ee(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=ne(e[s][0]),c=re(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,H(t,0,u,n),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function te(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];ee(e[i],o,n,r),t.push(o)}}function ne(e){return e/360+.5}function re(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ie(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=n&&f<r)l.push(u);else if(!(f<n||p>=r)){var m=[];if("Point"===d||"MultiPoint"===d)oe(h,m,n,r,i);else if("LineString"===d)ae(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)le(h,m,n,r,i,!1);else if("Polygon"===d)le(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];le(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(Y(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(Y(u.id,d,m,u.tags))}}}return l.length?l:null}function oe(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function ae(e,t,n,r,i,o,a){for(var s,l,c=se(e),u=0===i?ue:he,h=e.start,d=0;d<e.length-3;d+=3){var p=e[d],f=e[d+1],m=e[d+2],g=e[d+3],y=e[d+4],_=0===i?p:f,v=0===i?g:y,x=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),_<n?v>n&&(l=u(c,p,f,g,y,n),a&&(c.start=h+s*l)):_>r?v<r&&(l=u(c,p,f,g,y,r),a&&(c.start=h+s*l)):ce(c,p,f,m),v<n&&_>=n&&(l=u(c,p,f,g,y,n),x=!0),v>r&&_<=r&&(l=u(c,p,f,g,y,r),x=!0),!o&&x&&(a&&(c.end=h+s*l),t.push(c),c=se(e)),a&&(h+=s)}var b=e.length-3;p=e[b],f=e[b+1],m=e[b+2],(_=0===i?p:f)>=n&&_<=r&&ce(c,p,f,m),b=c.length-3,o&&b>=3&&(c[b]!==c[0]||c[b+1]!==c[1])&&ce(c,c[0],c[1],c[2]),c.length&&t.push(c)}function se(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function le(e,t,n,r,i,o){for(var a=0;a<e.length;a++)ae(e[a],t,n,r,i,o,!1)}function ce(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ue(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function he(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function de(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=pe(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(pe(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(pe(o.geometry[s][c],t));i.push(l)}n.push(Y(o.id,a,i,o.tags))}return n}function pe(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function fe(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(me(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(me(c[r][i],c[r][i+1],t,o,a,s));l.geometry.push(h)}}return e.transformed=!0,e}function me(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function ge(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,ye(a,e[s],o,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function ye(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)_e(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)_e(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)_e(a,c[s],e,n,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function _e(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function ve(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)Q(n,e.features[r],t,r);else Q(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=ie(e,1,-1-n,n,0,-1,2,t),o=ie(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=ie(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=de(i,1).concat(r)),o&&(r=r.concat(de(o,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xe(e,t,n){return 32*((1<<e)*n+t)+e}function be(e,t){const n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);const i=new h(r.features);let o=g(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}ve.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ve.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=xe(t,n,r),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=ge(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=e,i){if(t===l.maxZoom||t===i)continue;var f=1<<i-t;if(n!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,_,v,x,b=.5*l.buffer/l.extent,w=.5-b,T=.5+b,E=1+b;m=g=y=_=null,v=ie(e,u,n-b,n+T,0,d.minX,d.maxX,l),x=ie(e,u,n+w,n+E,0,d.minX,d.maxX,l),e=null,v&&(m=ie(v,u,r-b,r+T,1,d.minY,d.maxY,l),g=ie(v,u,r+w,r+E,1,d.minY,d.maxY,l),v=null),x&&(y=ie(x,u,r-b,r+T,1,d.minY,d.maxY,l),_=ie(x,u,r+w,r+E,1,d.minY,d.maxY,l),x=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(_||[],t+1,2*n+1,2*r+1)}}},ve.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=xe(e,t=(t%a+a)%a,n);if(this.tiles[s])return fe(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[xe(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?fe(this.tiles[s],i):null):null};class we extends e.VectorTileWorkerSource{constructor(e,t,n,r,i){super(e,t,n,r,be),i&&(this.loadGeoJSON=i)}loadData(t,n){const r=t&&t.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(t,((o,s)=>{if(o||!s)return n(o);if("object"!=typeof s)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{a(s,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const r=s.features.filter((e=>n.value.evaluate({zoom:0},e)));s={type:"FeatureCollection",features:r}}this._geoJSONIndex=t.cluster?new F(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const t of s){const[o,a]=n[t],s=e.createExpression(a),l=e.createExpression("string"==typeof o?[o,["accumulated"],["get",t]]:o);r[t]=s.value,i[t]=l.value}return t.map=e=>{a.properties=e;const t={};for(const e of s)t[e]=r[e].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const t of s)o.accumulated=e[t],e[t]=i[t].evaluate(o,a)},t}(t)).load(s.features):function(e,t){return new ve(e,t)}(s,t.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(i){const n=e.getPerformanceMeasurement(r);n&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class Te{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:we},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded[t]=n;for(const r in this.workerSources[t]){const i=this.workerSources[t][r];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=n,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const n in this.workerSources[e]){const r=this.workerSources[e][n];for(const e in r)r[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setProjection(t,n){this.projections[t]=e.getProjection(n)}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}loadDEMTile(t,n,r){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}reloadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,r){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),n)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,n){return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:(t,n,r,i,o,a)=>{this.actor.send(t,n,r,e,o,a)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])),this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new o),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Te(self)),Te})),r(0,(function(e){var t=n;function n(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),r[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var r={};function i(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(e[0]=o*(a=1/a),e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function o(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!o(e[n],t[n]))return!1;return!0}return e===t}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const a={create:function(t,n,r){const i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createSVG:function(t,n,r){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(n))i.setAttributeNS(null,e,n[e]);return r&&r.appendChild(i),i}},s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;a.disableDrag=function(){s&&l&&(c=s[l],s[l]="none")},a.enableDrag=function(){s&&l&&(s[l]=c)};const u=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",u,!0)};function h(t,n,r){const i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.pointGeometry((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function d(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}a.suppressClick=function(){e.window.addEventListener("click",u,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",u,!0)}),0)},a.mousePos=function(e,t){const n=e.getBoundingClientRect();return h(e,n,t)},a.touchPos=function(e,t){const n=e.getBoundingClientRect(),r=[];for(let i=0;i<t.length;i++)r.push(h(e,n,t[i]));return r},a.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button};class p extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const r={};for(const n of t){this.images[n]||this.fire(new e.Event("styleimagemissing",{id:n}));const t=this.images[n];t?r[n]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:r}=e.potpack(t),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const t in this.patterns){const{bin:n}=this.patterns[t],r=n.x+1,o=n.y+1,a=this.images[t].data,s=a.width,l=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o},{width:s,height:l}),e.RGBAImage.copy(a,i,{x:0,y:l-1},{x:r,y:o-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o+l},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:r-1,y:o},{width:1,height:l}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:r+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];d(e)&&this.updateImage(t,e)}}}const f=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return function([t,n,r]){const i=e.degToRad(n+90),o=e.degToRad(r);return{x:t*Math.cos(i)*Math.sin(o),y:t*Math.sin(i)*Math.sin(o),z:t*Math.cos(o),azimuthal:n,polar:r}}(t.expression.evaluate(n))}interpolate(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),m="-transition";class g extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(f),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const n in t){const r=t[n];e.endsWith(n,m)?this._transitionable.setTransition(n.slice(0,-m.length),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const y=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),_="-transition";class v extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(y),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(t){for(const n in t){const r=t[n];e.endsWith(n,_)?this._transitionable.setTransition(n.slice(0,-_.length),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}function x(t,n,r,i){const o=e.smoothstep(45,65,r),[a,s]=b(t,i),l=e.length(n);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*t.alpha}function b(e,t){const n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}const w=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"])}),T="-transition";class E extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(w),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,n={}){if(!this._validate(e.validateFog,t,n))for(const n in t){const r=t[n];e.endsWith(n,T)?this._transitionable.setTransition(n.slice(0,-T.length),r):this._transitionable.setValue(n,r)}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return e.smoothstep(45,65,t)*n.a}getOpacityAtLatLng(t,n){return this._transform.projection.supportsFog?function(t,n,r){const i=e.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return e.transformMat4(a,a,r.mercatorFogMatrix),x(t,a,r.pitch,r._fov)}(this.state,t,n):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?b(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class S{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new S.Actor(r[e],n,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,n,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function k(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}S.Actor=e.Actor;class C{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const M={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class I{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[M[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class P{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class A extends P{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class D extends P{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class z extends P{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class R extends P{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class O extends P{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class L extends P{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class F extends P{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class B extends P{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class N extends P{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class U extends P{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class j extends P{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class V extends P{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class $ extends P{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class q extends P{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class G extends P{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class W extends P{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Z extends P{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class H extends P{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class X extends P{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Y extends P{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class K extends P{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Q extends P{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class J extends P{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class ee extends P{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class te extends P{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class ne extends P{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class re extends P{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ie extends P{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class oe extends P{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ae extends P{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class se extends P{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class le extends P{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class ce extends le{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class ue extends le{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class he extends ue{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class de{constructor(e,t,n,r){this.context=e,this.width=t,this.height=n;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new ce(e,i),r&&(this.depthAttachment=new ue(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class pe{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new A(this),this.clearDepth=new D(this),this.clearStencil=new z(this),this.colorMask=new R(this),this.depthMask=new O(this),this.stencilMask=new L(this),this.stencilFunc=new F(this),this.stencilOp=new B(this),this.stencilTest=new N(this),this.depthRange=new U(this),this.depthTest=new j(this),this.depthFunc=new V(this),this.blend=new $(this),this.blendFunc=new q(this),this.blendColor=new G(this),this.blendEquation=new W(this),this.cullFace=new Z(this),this.cullFaceSide=new H(this),this.frontFace=new X(this),this.program=new Y(this),this.activeTexture=new K(this),this.viewport=new Q(this),this.bindFramebuffer=new J(this),this.bindRenderbuffer=new ee(this),this.bindTexture=new te(this),this.bindVertexBuffer=new ne(this),this.bindElementBuffer=new re(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ie(this),this.pixelStoreUnpack=new oe(this),this.pixelStoreUnpackPremultiplyAlpha=new ae(this),this.pixelStoreUnpackFlipY=new se(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new C(this,e,t)}createVertexBuffer(e,t,n){return new I(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n){return new de(this,e,t,n)}clear({color:e,depth:t,stencil:n}){const r=this.gl;let i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(t){o(t.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class fe{constructor(e,t,n,r){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((e=>r.pointCoordinate3D(e))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(t,n){let r,i;if(t instanceof e.pointGeometry||"number"==typeof t[0]){const o=e.pointGeometry.convert(t);r=[e.pointGeometry.convert(t)],i=n.isPointAboveHorizon(o)}else{const o=e.pointGeometry.convert(t[0]),a=e.pointGeometry.convert(t[1]);r=[o,a],i=e.polygonizeBounds(o,a).every((e=>n.isPointAboveHorizon(e)))}return new fe(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}containsTile(t,n,r){const i=t.queryPadding+1,o=t.tileID.wrap,a=r?this._bufferedCameraMercator(i,n).map((n=>e.getTilePoint(t.tileTransform,n,o))):this._bufferedScreenMercator(i,n).map((n=>e.getTilePoint(t.tileTransform,n,o))),s=this.screenGeometryMercator.map((n=>e.getTileVec3(t.tileTransform,n,o))),l=s.map((t=>new e.pointGeometry(t[0],t[1]))),c=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),u=e.getTileVec3(t.tileTransform,c,o),h=s.map((t=>{const n=e.sub(t,t,u);return e.normalize(n,n),new e.Ray(u,n)})),d=k(t,1,n.zoom);if(e.polygonIntersectsBox(a,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:l,tilespaceRays:h,bufferedTilespaceGeometry:a,bufferedTilespaceBounds:(p=e.getBounds(a),p.min.x=e.clamp(p.min.x,0,e.EXTENT),p.min.y=e.clamp(p.min.y,0,e.EXTENT),p.max.x=e.clamp(p.max.x,0,e.EXTENT),p.max.y=e.clamp(p.max.y,0,e.EXTENT),p),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:d};var p}_bufferedScreenMercator(e,t){const n=me(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{const r=this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e)));return this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(e,t){const n=me(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{const r=this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e)));return this._cameraRaycastCache[n]=r,r}}}function me(e){return 100*e|0}function ge(t,n,r){const i=function(i,o){if(i)return r(i);if(o){const i=e.pick(e.extend(o,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(i.vectorLayers=o.vector_layers,i.vectorLayerIds=i.vectorLayers.map((e=>e.id))),i.tiles=n.canonicalizeTileset(i,t.url),r(null,i)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),i):e.exported.frame((()=>i(null,t)))}class ye{constructor(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}class _e extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ge(this._options,this.map._requestManager,((t,n)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new ye(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const r=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((r,i,o,a)=>{if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:a});const r=this.map.painter.context,s=r.gl;t.texture=this.map.painter.getTileTexture(i.width),t.texture?t.texture.update(i,{useMipmap:!0}):(t.texture=new e.Texture(r,i,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),r.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}let ve;function xe(t,n,r,i,o,a,s,l){const c=[t,r,o,n,i,a,1,1,1],u=[s,l,1],h=e.adjoint([],c),[d,p,f]=e.transformMat3(u,u,e.transpose(h,h));return e.multiply(c,[d,0,0,0,p,0,0,0,f],c)}class be extends e.Evented{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t}load(t,n){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((r,i)=>{this._loaded=!0,r?this.fire(new e.ErrorEvent(r)):i&&(this.image=e.exported.getImageData(i),this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}setCoordinates(t){this.coordinates=t,delete this._boundsArray;const n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){delete this._boundsArray}_makeBoundsArray(){const t=e.tileTransform(this.tileID,this.map.transform.projection),[n,r,i,o]=this.coordinates.map((n=>{const r=t.projection.project(n[0],n[1]);return e.getTilePoint(t,r)._round()}));return this.perspectiveTransform=function(t,n,r,i,o,a,s,l,c,u){const h=xe(0,0,t,0,0,n,t,n),d=xe(r,i,o,a,s,l,c,u);return e.multiply(d,e.adjoint(h,h),d),[d[6]/d[8]*t/e.EXTENT,d[7]/d[8]*n/e.EXTENT]}(this.width,this.height,n.x,n.y,r.x,r.y,o.x,o.y,i.x,i.y),this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(n.x,n.y,0,0),this._boundsArray.emplaceBack(r.x,r.y,e.EXTENT,0),this._boundsArray.emplaceBack(o.x,o.y,0,e.EXTENT),this._boundsArray.emplaceBack(i.x,i.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,e.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const we={vector:class extends e.Evented{constructor(t,n,r,i){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ge(this._options,this.map._requestManager,((t,n)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new ye(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();const t=this.map.style._getSourceCaches(this.id);for(const e of t)e.clearTiles();this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=e.loadVectorTile.call({deduped:this._deduped},i,((e,n)=>{e||!n?o.call(this,e):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);t.request={cancel:n}}function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:_e,"raster-dem":class extends _e{constructor(t,n,r,i){super(t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o,a,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const n=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&(null==ve&&(ve=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),ve),r=1-(o.width-e.prevPowerOfTwo(o.width))/2;r<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=n?o:e.exported.getImageData(o,r),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:r};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,n)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(t.resourceTiming=n.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,n){const r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends be{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,((t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,e.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:be,canvas:class extends be{constructor(t,n,r,i){super(t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,e.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,r.RGBA,{premultiply:!0});for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}},Te=function(t,n,r,i){const o=new we[n.type](t,n,r,i);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Ee(t,n){const r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply$1(r,r,t.calculateProjMatrix(n.toUnwrapped()))}function Se(e,t,n,r,i,o,a,s=!1){const l=e.tilesIn(r,a,s);l.sort(Ce);const c=[];for(const r of l)c.push({wrappedTileID:r.tile.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(t,n,e._state,r,i,o,Ee(e.transform,r.tile.tileID),s)});const u=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const t in u)u[t].forEach((t=>{const n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return u}function ke(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let e=0;e<n.length;e++){const o=n[e],a=o.tileID.canonical.key;i[a]||(i[a]=!0,o.querySourceFeatures(r,t))}return r}function Ce(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Me(){return null!=Yi.workerClass?new Yi.workerClass:new e.window.Worker(Yi.workerUrl)}const Ie="mapboxgl_preloaded_worker_pool";class Pe{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Pe.workerCount;)this.workers.push(new Me);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ie]}numActive(){return Object.keys(this.active).length}}let Ae;function De(){return Ae||(Ae=new Pe),Ae}function ze(t,n){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in n&&(r[e]=n[e])})),r}function Re(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=ze(e[n],t[e[n].ref]));return e}Pe.workerCount=2;const Oe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Le(e,t,n){n.push({command:Oe.addSource,args:[e,t[e]]})}function Fe(e,t,n){t.push({command:Oe.removeSource,args:[e]}),n[e]=!0}function Be(e,t,n,r){Fe(e,n,r),Le(e,t,n)}function Ne(e,t,n){let r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!o(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!o(e[n][r],t[n][r]))return!1;return!0}function Ue(e,t,n,r,i,a){let s;for(s in t=t||{},e=e||{})e.hasOwnProperty(s)&&(o(e[s],t[s])||n.push({command:a,args:[r,s,t[s],i]}));for(s in t)t.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(o(e[s],t[s])||n.push({command:a,args:[r,s,t[s],i]}))}function je(e){return e.id}function Ve(e,t){return e[t.id]=t,e}class $e{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,r=this._distances[n];const i=t*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class qe{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let e=0;e<this.xCellCount*this.yCellCount;e++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(e,t,n,r,i){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}hitTest(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}hitTestCircle(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}_queryCell(e,t,n,r,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=i[c+2]&&t<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],e,t,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const e=i[u],t=i[u+1],n=i[u+2];o.push({key:this.circleKeys[c],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,r,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const a=r-e,s=i-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(t-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}const Ge=Math.tan(85*Math.PI/180);function We(t,n,r,o,a,s){let l=e.create();if(r){if("globe"===a.projection.name)l=e.calculateGlobeMatrix(a,a.worldSize/a._projectionScaler,[0,0]),e.multiply$1(l,l,e.globeDenormalizeECEF(e.globeTileBounds(n)));else{const e=i([],s);l[0]=e[0],l[1]=e[1],l[4]=e[2],l[5]=e[3]}o||e.rotateZ(l,l,a.angle)}else e.multiply$1(l,a.labelPlaneMatrix,t);return l}function Ze(t,n,r,i,o,a){if(r){if("globe"===o.projection.name){const s=We(t,n,r,i,o,a);return e.invert(s,s),e.multiply$1(s,t,s),s}{const n=e.clone(t),r=e.identity([]);return r[0]=a[0],r[1]=a[1],r[4]=a[2],r[5]=a[3],e.multiply$1(n,n,r),i||e.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function He(t,n,r=0){const i=[t.x,t.y,r,1];r?e.transformMat4$1(i,i,n):at(i,i,n);const o=i[3];return{point:new e.pointGeometry(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function Xe(e,t){return Math.min(.5+e/t*.5,1.5)}function Ye(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function Ke(t,n,r,i,o,a,s,l,c,u){const h=r.transform,d=i?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(d,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],m=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();const g=t.lineVertexArray,y=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,_=r.transform.width/r.transform.height;let v=!1;for(let i=0;i<y.length;i++){const x=y.get(i);if(x.writingMode!==e.WritingMode.vertical||v||0!==i&&y.get(i-1).writingMode===e.WritingMode.horizontal||(v=!0),x.hidden||x.writingMode===e.WritingMode.vertical&&!v){ot(x.numGlyphs,m);continue}v=!1;const b=new e.pointGeometry(x.tileAnchorX,x.tileAnchorY),w=c?c(b):[0,0,0],T=h.projection.projectTilePoint(b.x,b.y,u.canonical),E=[T.x+w[0],T.y+w[1],T.z+w[2]],S=[...E,1];if(e.transformMat4$1(S,S,n),!Ye(S,f)){ot(x.numGlyphs,m);continue}const k=Xe(r.transform.cameraToCenterDistance,S[3]),C=e.evaluateSizeForFeature(d,p,x),M=s?C/k:C*k,I=He(new e.pointGeometry(E[0],E[1]),o,E[2]);if(I.signedDistanceFromCamera<=0){ot(x.numGlyphs,m);continue}let P={};const A=s?null:c,D=et(x,M,!1,l,n,o,a,t.glyphOffsetArray,g,m,I.point,b,P,_,A,h.projection,u);v=D.useVertical,A&&D.needsFlipping&&(P={}),(D.notEnoughRoom||v||D.needsFlipping&&et(x,M,!0,l,n,o,a,t.glyphOffsetArray,g,m,I.point,b,P,_,A,h.projection,u).notEnoughRoom)&&ot(x.numGlyphs,m)}i?t.text.dynamicLayoutVertexBuffer.updateData(m):t.icon.dynamicLayoutVertexBuffer.updateData(m)}function Qe(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f){const m=s.glyphStartIndex+s.numGlyphs,g=s.lineStartIndex,y=s.lineStartIndex+s.lineLength,_=t.getoffsetX(s.glyphStartIndex),v=t.getoffsetX(m-1),x=rt(e*_,n,r,i,o,a,s.segment,g,y,l,c,u,h,d,!0,p,f);if(!x)return null;const b=rt(e*v,n,r,i,o,a,s.segment,g,y,l,c,u,h,d,!0,p,f);return b?{first:x,last:b}:null}function Je(t,n,r,i){return t.writingMode===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:t.writingMode===e.WritingMode.vertical?n.y<r.y?{needsFlipping:!0}:null:0!==t.flipState&&function(e,t,n){const r=(t.x-e.x)*n;return 0===r||Math.abs((t.y-e.y)/r)>Ge}(n,r,i)?1===t.flipState?{needsFlipping:!0}:null:n.x>r.x?{needsFlipping:!0}:null}function et(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y){const _=n/24,v=t.lineOffsetX*_,x=t.lineOffsetY*_;let b;if(t.numGlyphs>1){const e=t.glyphStartIndex+t.numGlyphs,n=t.lineStartIndex,o=t.lineStartIndex+t.lineLength,u=Qe(_,l,v,x,r,h,d,t,c,a,p,m,!1,g,y);if(!u)return{notEnoughRoom:!0};const w=He(u.first.point,s).point,T=He(u.last.point,s).point;if(i&&!r){const e=Je(t,w,T,f);if(t.flipState=e&&e.needsFlipping?1:2,e)return e}b=[u.first];for(let i=t.glyphStartIndex+1;i<e-1;i++)b.push(rt(_*l.getoffsetX(i),v,x,r,h,d,t.segment,n,o,c,a,p,m,!1,!1,g,y));b.push(u.last)}else{if(i&&!r){const n=He(d,o).point,r=t.lineStartIndex+t.segment+1,i=new e.pointGeometry(c.getx(r),c.gety(r)),a=He(i,o),s=Je(t,n,a.signedDistanceFromCamera>0?a.point:nt(d,i,n,1,o,void 0,g,y.canonical),f);if(t.flipState=s&&s.needsFlipping?1:2,s)return s}const n=rt(_*l.getoffsetX(t.glyphStartIndex),v,x,r,h,d,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,a,p,m,!1,!1,g,y);if(!n)return{notEnoughRoom:!0};b=[n]}for(const t of b)e.addDynamicAttributes(u,t.point,t.angle);return{}}function tt(t,n,r,i,o){const a=i.projectTilePoint(t.x,t.y,n);if(!o)return He(a,r,a.z);const s=o(t);return He(new e.pointGeometry(a.x+s[0],a.y+s[1]),r,a.z+s[2])}function nt(e,t,n,r,i,o,a,s){const l=tt(e.add(e.sub(t)._unit()),s,i,a,o).point,c=n.sub(l);return n.add(c._mult(r/c.mag()))}function rt(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y){const _=i?t-n:t+n;let v=_>0?1:-1,x=0;i&&(v*=-1,x=Math.PI),v<0&&(x+=Math.PI);let b=v>0?l+s:l+s+1,w=o,T=o,E=0,S=0;const k=Math.abs(_),C=[],M=[];let I=a;const P=()=>{const t=b-v;return 0===E?a:new e.pointGeometry(u.getx(t),u.gety(t))},A=()=>nt(P(),I,T,k-E+1,h,p,g,y.canonical);for(;E+S<=k;){if(b+=v,b<l||b>=c)return null;if(T=w,C.push(w),f&&M.push(I||P()),w=d[b],void 0===w){I=new e.pointGeometry(u.getx(b),u.gety(b));const t=tt(I,y.canonical,h,g,p);w=t.signedDistanceFromCamera>0?d[b]=t.point:A()}else I=null;E+=S,S=T.dist(w)}m&&p&&(I=I||new e.pointGeometry(u.getx(b),u.gety(b)),d[b]=w=void 0===d[b]?w:A(),S=T.dist(w));const D=(k-E)/S,z=w.sub(T),R=z.mult(D)._add(T);r&&R._add(z._unit()._perp()._mult(r*v));const O=x+Math.atan2(w.y-T.y,w.x-T.x);return C.push(R),f&&(I=I||new e.pointGeometry(u.getx(b),u.gety(b)),M.push(function(t,n,r){const i=1-r;return new e.pointGeometry(t.x*i+n.x*r,t.y*i+n.y*r)}(M.length>0?M[M.length-1]:I,I,D))),{point:R,angle:O,path:C,tilePath:M}}const it=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ot(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set(it,3*e)}}function at(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const st=100;class lt{constructor(e,t,n=new qe(e.width+200,e.height+200,25),r=new qe(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+st,this.screenBottomBoundary=e.height+st,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,n,r,i,o,a){let s=t.projectedAnchorX,l=t.projectedAnchorY,c=t.projectedAnchorZ;const u=t.elevation,h=t.tileID;if(u&&h){const e=this.transform.projection.createTileTransform(this.transform,this.transform.worldSize),n=e.upVector(h.canonical,t.tileAnchorX,t.tileAnchorY),r=e.upVectorScale(h.canonical);s+=n[0]*u*r,l+=n[1]*u*r,c+=n[2]*u*r}const d=this.projectAndGetPerspectiveRatio(o,s,l,c,t.tileID),p=i*d.perspectiveRatio,f=(t.x1*e+n.x-t.padding)*p+d.point.x,m=(t.y1*e+n.y-t.padding)*p+d.point.y,g=(t.x2*e+n.x+t.padding)*p+d.point.x,y=(t.y2*e+n.y+t.padding)*p+d.point.y,_=d.perspectiveRatio<=.55||d.aboveHorizon;return!this.isInsideGrid(f,m,g,y)||!r&&this.grid.hitTest(f,m,g,y,a)||_?{box:[],offscreen:!1}:{box:[f,m,g,y],offscreen:this.isOffscreen(f,m,g,y)}}placeCollisionCircles(t,n,r,i,o,a,s,l,c,u,h,d,p,f){const m=[],g=this.transform.elevation,y=this.transform.projection.createTileTransform(this.transform,this.transform.worldSize),_=g?g.getAtTileOffsetFunc(f,y):e=>[0,0,0],v=new e.pointGeometry(n.tileAnchorX,n.tileAnchorY),x=this.transform.projection.projectTilePoint(n.tileAnchorX,n.tileAnchorY,f.canonical),b=_(v),w=[x.x+b[0],x.y+b[1],x.z+b[2]],T=this.projectAndGetPerspectiveRatio(a,w[0],w[1],w[2],f),{perspectiveRatio:E}=T,S=(u?o/E:o*E)/e.ONE_EM,k=He(new e.pointGeometry(w[0],w[1]),s,w[2]).point,C=T.signedDistanceFromCamera>0?Qe(S,i,n.lineOffsetX*S,n.lineOffsetY*S,!1,k,v,n,r,s,{},g&&!u?_:null,u&&!!g,this.transform.projection,f):null;let M=!1,I=!1,P=!0;if(C&&!T.aboveHorizon){const n=.5*d*E+p,r=new e.pointGeometry(-100,-100),i=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new $e,a=C.first,s=C.last;let u=[];for(let e=a.path.length-1;e>=1;e--)u.push(a.path[e]);for(let e=1;e<s.path.length;e++)u.push(s.path[e]);const f=2.5*n;if(l){const e=u.map(g?(e,t)=>{const n=_(t<a.path.length-1?a.tilePath[a.path.length-1-t]:s.tilePath[t-a.path.length+2]);return He(e,l,n[2])}:e=>He(e,l));u=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let y=[];if(u.length>0){const t=u[0].clone(),n=u[0].clone();for(let e=1;e<u.length;e++)t.x=Math.min(t.x,u[e].x),t.y=Math.min(t.y,u[e].y),n.x=Math.max(n.x,u[e].x),n.y=Math.max(n.y,u[e].y);y=t.x>=r.x&&n.x<=i.x&&t.y>=r.y&&n.y<=i.y?[u]:n.x<r.x||t.x>i.x||n.y<r.y||t.y>i.y?[]:e.clipLine([u],r.x,r.y,i.x,i.y)}for(const e of y){o.reset(e,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/f)+1;for(let e=0;e<r;e++){const i=e/Math.max(r-1,1),a=o.lerp(i),s=a.x+st,l=a.y+st;m.push(s,l,n,0);const u=s-n,d=l-n,p=s+n,f=l+n;if(P=P&&this.isOffscreen(u,d,p,f),I=I||this.isInsideGrid(u,d,p,f),!t&&this.grid.hitTestCircle(s,l,n,h)&&(M=!0,!c))return{circles:[],offscreen:!1,collisionDetected:M}}}}return{circles:!c&&M||!I?[]:m,offscreen:P,collisionDetected:M}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const s of t){const t=new e.pointGeometry(s.x+st,s.y+st);r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),n.push(t)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const t of s){const r=t.key;if(void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]={}),l[r.bucketInstanceId][r.featureIndex])continue;const i=[new e.pointGeometry(t.x1,t.y1),new e.pointGeometry(t.x2,t.y1),new e.pointGeometry(t.x2,t.y2),new e.pointGeometry(t.x1,t.y2)];e.polygonIntersectsPolygon(n,i)&&(l[r.bucketInstanceId][r.featureIndex]=!0,void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]=[]),c[r.bucketInstanceId].push(r.featureIndex))}return c}insertCollisionBox(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let t=0;t<e.length;t+=4)o.insertCircle(a,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,n,r,i,o){const a=[n,r,i||0,1];let s=!1;if(i||this.transform.pitch>0){e.transformMat4$1(a,a,t);let l=!1;this.fogState&&o&&(l=function(t,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),l=[n,r,i];return e.transformMat4(l,l,s),x(t,l,a.pitch,a._fov)}(this.fogState,n,r,i||0,o.toUnwrapped(),this.transform)>.9),s=a[2]>a[3]||l}else at(a,a,t);return{point:new e.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+st,(-a[1]/a[3]+1)/2*this.transform.height+st),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5),signedDistanceFromCamera:a[3],aboveHorizon:s}}isOffscreen(e,t,n,r){return n<st||e>=this.screenRightBoundary||r<st||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}class ct{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class ut{constructor(e,t,n,r,i,o=!1){this.text=new ct(e?e.text:null,t,n,i),this.icon=new ct(e?e.icon:null,t,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ht{constructor(e,t,n,r=!1){this.text=e,this.icon=t,this.skipFade=n,this.clipped=r}}class dt{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class pt{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class ft{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function mt(t,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*n,c=-(s-.5)*r,u=e.evaluateVariableOffset(t,i);return new e.pointGeometry(l+u[0]*o,c+u[1]*o)}function gt(t,n,r,i,o){const a=new e.pointGeometry(t,n);return r&&a._rotate(i?o:-o),a}class yt{constructor(e,t,n,r,i){this.transform=e.clone(),this.collisionIndex=new lt(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new ft(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=r.collisionBoxArray,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/e.EXTENT,h=r.tileID.toUnwrapped(),d=this.transform.calculateProjMatrix(h),p="map"===s.get("text-pitch-alignment"),f="map"===s.get("text-rotation-alignment");n.compileFilter();const m=n.dynamicFilter(),g=n.dynamicFilterNeedsFeature(),y=this.transform.calculatePixelsToTileUnitsMatrix(r),_=We(d,r.tileID.canonical,p,f,this.transform,y);let v=null;if(p){const t=Ze(d,r.tileID.canonical,p,f,this.transform,y);v=e.multiply$1([],this.transform.labelPlaneMatrix,t)}let x=null;m&&r.latestFeatureIndex&&(x={unwrappedTileID:h,dynamicFilter:m,dynamicFilterNeedsFeature:g,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new pt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const b={bucket:o,layout:s,posMatrix:d,textLabelPlaneMatrix:_,labelToScreenMatrix:v,clippingData:x,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=e;t.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:b})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:b})}attemptAnchorPlacement(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y){const _=[h.textOffset0,h.textOffset1],v=mt(e,n,r,_,i),x=this.collisionIndex.placeCollisionBox(i,t,gt(v.x,v.y,o,a,this.transform.angle),u,s,l,c.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(y,this.transform.zoom,d),m,gt(v.x,v.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)&&x.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(t=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:n,height:r,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(p,e,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[h.crossTileID]=f),{shift:v,placedGlyphBoxes:x}}}placeLayerBucketPart(t,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:h,holdingForFade:d,collisionBoxArray:p,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=t.parameters,y=a.get("text-optional"),_=a.get("icon-optional"),v=a.get("text-allow-overlap"),x=a.get("icon-allow-overlap"),b="map"===a.get("text-rotation-alignment"),w="map"===a.get("text-pitch-alignment"),T="none"!==a.get("icon-text-fit"),E="viewport-y"===a.get("symbol-z-order"),S=v&&(x||!o.hasIconData()||_),k=x&&(v||!o.hasTextData()||y);!o.collisionArrays&&p&&o.deserializeCollisionBoxes(p),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,p);const C=(t,i,p)=>{if(u){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[t.crossTileID]=new ht(!1,!1,!1,!0),void(n[t.crossTileID]=!0)}if(n[t.crossTileID])return;if(d)return void(this.placements[t.crossTileID]=new ht(!1,!1,!1));let E=!1,C=!1,M=!0,I=null,P={box:null,offscreen:null},A={box:null,offscreen:null},D=null,z=null,R=null,O=0,L=0,F=0;p.textFeatureIndex?O=p.textFeatureIndex:t.useRuntimeCollisionCircles&&(O=t.featureIndex),p.verticalTextFeatureIndex&&(L=p.verticalTextFeatureIndex);const B=e=>{e.tileID=this.retainedQueryData[o.bucketInstanceId].tileID,(this.transform.elevation||e.elevation)&&(e.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[o.bucketInstanceId].tileID,e.tileAnchorX,e.tileAnchorY):0)},N=p.textBox;if(N){B(N);const n=n=>{let r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,r=e,this.markUsedOrientation(o,r,t))}return r},r=(n,r)=>{if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&p.verticalTextBox){for(const t of o.writingModes)if(t===e.WritingMode.vertical?(P=r(),A=P):P=n(),P&&P.box&&P.box.length)break}else P=n()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const c=(e,n,r)=>{const a=o.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),c=(e.x2-e.x1)*a+2*e.padding,u=(e.y2-e.y1)*a+2*e.padding,d=T&&!x?n:null;d&&B(d);let p={box:[],offscreen:!1};const y=v?2*l.length:l.length;for(let n=0;n<y;++n){const y=this.attemptAnchorPlacement(l[n%l.length],e,c,u,a,b,w,h,s,g,n>=l.length,t,i,o,r,d,f,m);if(y&&(p=y.placedGlyphBoxes,p&&p.box&&p.box.length)){E=!0,I=y.shift;break}}return p};r((()=>c(N,p.iconBox,e.WritingMode.horizontal)),(()=>{const n=p.verticalTextBox;return n&&B(n),o.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&t.numVerticalGlyphVertices>0&&n?c(n,p.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),P&&(E=P.box,M=P.offscreen);const u=n(P&&P.box);if(!E&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(o,e.anchor,t,u))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(a,n,new e.pointGeometry(0,0),v,h,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,r,t),this.placedOrientations[t.crossTileID]=r),l};r((()=>a(N,e.WritingMode.horizontal)),(()=>{const n=p.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?(B(n),a(n,e.WritingMode.vertical)):{box:null,offscreen:null}})),n(P&&P.box&&P.box.length)}}if(D=P,E=D&&D.box&&D.box.length>0,M=D&&D.offscreen,t.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(o.textSizeData,f,n),u=a.get("text-padding");z=this.collisionIndex.placeCollisionCircles(v,n,o.lineVertexArray,o.glyphOffsetArray,i,s,l,c,r,w,g.predicate,t.collisionCircleDiameter*i/e.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),E=v||z.circles.length>0&&!z.collisionDetected,M=M&&z.offscreen}if(p.iconFeatureIndex&&(F=p.iconFeatureIndex),p.iconBox){const t=t=>{B(t);const n=T&&I?gt(I.x,I.y,b,w,this.transform.angle):new e.pointGeometry(0,0),r=o.getSymbolInstanceIconSize(m,this.transform.zoom,i);return this.collisionIndex.placeCollisionBox(r,t,n,x,h,s,g.predicate)};A&&A.box&&A.box.length&&p.verticalIconBox?(R=t(p.verticalIconBox),C=R.box.length>0):(R=t(p.iconBox),C=R.box.length>0),M=M&&R.offscreen}const U=y||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,j=_||0===t.numIconVertices;if(U||j?j?U||(C=C&&E):E=C&&E:C=E=C&&E,E&&D&&D.box&&this.collisionIndex.insertCollisionBox(D.box,a.get("text-ignore-placement"),o.bucketInstanceId,A&&A.box&&L?L:O,g.ID),C&&R&&this.collisionIndex.insertCollisionBox(R.box,a.get("icon-ignore-placement"),o.bucketInstanceId,F,g.ID),z&&(E&&this.collisionIndex.insertCollisionCircles(z.circles,a.get("text-ignore-placement"),o.bucketInstanceId,O,g.ID),r)){const e=o.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new dt);for(let e=0;e<z.circles.length;e+=4)t.circles.push(z.circles[e+0]),t.circles.push(z.circles[e+1]),t.circles.push(z.circles[e+2]),t.circles.push(z.collisionDetected?1:0)}this.placements[t.crossTileID]=new ht(E||S,C||k,M||o.justReloaded),n[t.crossTileID]=!0};if(E){const e=o.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];C(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)C(o.symbolInstances.get(e),e,o.collisionArrays[e]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[o.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(t,n,r,i){let o;o=i===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const e of a)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:r.crossTileID)}markUsedOrientation(t,n,r){const i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const e of a)t.text.placedSymbolArray.get(e).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=i[e];o?(this.opacities[e]=new ut(o,r,t.text,t.icon,null,t.clipped),n=n||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new ut(null,r,t.text,t.icon,t.skipFade,t.clipped),n=n||t.text||t.icon)}for(const e in i){const t=i[e];if(!this.opacities[e]){const i=new ut(t,r,!1,!1);i.isHidden()||(this.opacities[e]=i,n=n||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),a=new ut(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),d="none"!==i.get("icon-text-fit"),p=new ut(null,0,s&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const f=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)};let m=0;for(let r=0;r<t.symbolInstances.length;r++){const i=t.symbolInstances.get(r),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:l,crossTileID:g}=i;let y=this.opacities[g];n[g]?y=a:y||(y=p,this.opacities[g]=y),n[g]=!0;const _=s>0||l>0,v=i.numIconVertices>0,x=this.placedOrientations[i.crossTileID],b=x===e.WritingMode.vertical,w=x===e.WritingMode.horizontal||x===e.WritingMode.horizontalOnly;if(!_&&!v||y.isHidden()||m++,_){const e=kt(y.text);f(t.text,s,b?Ct:e),f(t.text,l,w?Ct:e);const n=y.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=n||b?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=n||w?1:0);const r=this.variableOffsets[i.crossTileID];r&&this.markUsedJustification(t,r.anchor,i,x);const o=this.placedOrientations[i.crossTileID];o&&(this.markUsedJustification(t,"left",i,o),this.markUsedOrientation(t,o,i))}if(v){const e=kt(y.icon);i.placedIconSymbolIndex>=0&&(f(t.icon,i.numIconVertices,b?Ct:e),t.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=y.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(f(t.icon,i.numVerticalIconVertices,w?Ct:e),t.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[r];if(n){let r=new e.pointGeometry(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(c){const e=this.variableOffsets[g];e?(r=mt(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!y.clipped),n.textBox&&_t(t.textCollisionBox.collisionVertexArray,y.text.placed,!i||b,r.x,r.y),n.verticalTextBox&&_t(t.textCollisionBox.collisionVertexArray,y.text.placed,!i||w,r.x,r.y)}const a=i&&Boolean(!w&&n.verticalIconBox);n.iconBox&&_t(t.iconCollisionBox.collisionVertexArray,y.icon.placed,a,d?r.x:0,d?r.y:0),n.verticalIconBox&&_t(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!a,d?r.x:0,d?r.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function _t(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const vt=Math.pow(2,25),xt=Math.pow(2,24),bt=Math.pow(2,17),wt=Math.pow(2,16),Tt=Math.pow(2,9),Et=Math.pow(2,8),St=Math.pow(2,1);function kt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*vt+t*xt+n*bt+t*wt+n*Tt+t*Et+n*St+t}const Ct=0;class Mt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;){const e=o[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,n,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class It{constructor(e,t,n,r,i,o,a,s){this.placement=new yt(e,i,o,a,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,n,r){const i=e.exported.now(),o=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Mt(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Pt=512/e.EXTENT/2;class At{constructor(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let n=0;n<t.length;n++){const r=t.get(n),i=r.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,e)})}}getScaledCoordinates(t,n){const r=Pt/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.tileAnchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.tileAnchorY)*r)}}findMatches(e,t,n){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);for(const e of a)if(Math.abs(e.coord.x-s.x)<=r&&Math.abs(e.coord.y-s.y)<=r&&!n[e.crossTileID]){n[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class Dt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class zt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const n=this.indexes[e],r={};for(const e in n){const i=n[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[e]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>e.overscaledZ)for(const n in i){const o=i[n];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=i[e.scaledTo(Number(n)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let e=0;e<t.symbolInstances.length;e++){const i=t.symbolInstances.get(e);i.crossTileID||(i.crossTileID=n.generate(),r[i.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new At(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n in t.indexedSymbolInstances)for(const r of t.indexedSymbolInstances[n])delete this.usedCrossTileIDs[e][r.crossTileID]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class Rt{constructor(){this.layerIndexes={},this.crossTileIDs=new Dt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n,r){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new zt);let o=!1;const a={};"globe"!==r.name&&i.handleWrapJump(n);for(const n of t){const t=n.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(n.tileID,t,this.crossTileIDs)&&(o=!0),a[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Ot=(t,n)=>e.emitValidationErrors(t,n&&n.filter((e=>"source.canvas"!==e.identifier))),Lt=e.pick(Oe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ft=e.pick(Oe,["setCenter","setZoom","setBearing","setPitch"]),Bt=function(){const t={},n=e.spec.$version;for(const r in e.spec.$root){const i=e.spec.$root[r];if(i.required){let e=null;e="version"===r?n:"array"===i.type?[]:{},null!=e&&(t[r]=e)}}return t}(),Nt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ut extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new S(De(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.lineAtlas=new e.LineAtlas(256,512),this.crossTileSymbolIndex=new Rt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=Ut.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every((e=>e)))for(const e in r._sourceCaches){const t=r._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const n=this._layers[e];n.source===t.id&&this._validateLayer(n)}}))}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,r)}))}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==n.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Bt,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&Ot(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t,this.updateProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const r=Re(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let t of r)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new g(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this.updateProjection()}updateProjection(){const e=this.map.transform.projection,t=this.map.transform.setProjection(this.map._runtimeProjection||(this.stylesheet?this.stylesheet.projection:void 0)),n=this.map.transform.projection;if(this._loaded&&(n.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null)),this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),t){if(n.isReprojectedInTileSpace||e.isReprojectedInTileSpace){this.map.painter.clearBackgroundTiles();for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles()}else this._forceSymbolLayerUpdate();this.map._update(!0)}}_loadSprite(t){this._spriteRequest=function(t,n,r){let i,o,a;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,a||(a=e,i=t,u())})),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,a||(a=e,o=t,u())}));function u(){if(a)r(a);else if(i&&o){const t=e.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=i[r],f=new e.RGBAImage({width:o,height:a});e.RGBAImage.copy(t,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&Nt[e.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const r=this.map.painter;if(r){const e=n.getProgramIds();if(!e)continue;const i=n.getProgramConfiguration(t.zoom);for(const t of e)r.useProgram(t,i)}}for(const t in r){const n=this._sourceCaches[t];r[t]!==n.used&&n.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Ot(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=Re(t.layers);const n=function(e,t){if(!e)return[{command:Oe.setStyle,args:[t]}];let n=[];try{if(!o(e.version,t.version))return[{command:Oe.setStyle,args:[t]}];o(e.center,t.center)||n.push({command:Oe.setCenter,args:[t.center]}),o(e.zoom,t.zoom)||n.push({command:Oe.setZoom,args:[t.zoom]}),o(e.bearing,t.bearing)||n.push({command:Oe.setBearing,args:[t.bearing]}),o(e.pitch,t.pitch)||n.push({command:Oe.setPitch,args:[t.pitch]}),o(e.sprite,t.sprite)||n.push({command:Oe.setSprite,args:[t.sprite]}),o(e.glyphs,t.glyphs)||n.push({command:Oe.setGlyphs,args:[t.glyphs]}),o(e.transition,t.transition)||n.push({command:Oe.setTransition,args:[t.transition]}),o(e.light,t.light)||n.push({command:Oe.setLight,args:[t.light]}),o(e.fog,t.fog)||n.push({command:Oe.setFog,args:[t.fog]}),o(e.projection,t.projection)||n.push({command:Oe.setProjection,args:[t.projection]});const r={},i=[];!function(e,t,n,r){let i;for(i in t=t||{},e=e||{})e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||Fe(i,n,r));for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?o(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&Ne(e,t,i)?n.push({command:Oe.setGeoJSONSourceData,args:[i,t[i].data]}):Be(i,t,n,r)):Le(i,t,n))}(e.sources,t.sources,i,r);const a=[];e.layers&&e.layers.forEach((e=>{r[e.source]?n.push({command:Oe.removeLayer,args:[e.id]}):a.push(e)}));let s=e.terrain;s&&r[s.source]&&(n.push({command:Oe.setTerrain,args:[void 0]}),s=void 0),n=n.concat(i),o(s,t.terrain)||n.push({command:Oe.setTerrain,args:[t.terrain]}),function(e,t,n){t=t||[];const r=(e=e||[]).map(je),i=t.map(je),a=e.reduce(Ve,{}),s=t.reduce(Ve,{}),l=r.slice(),c=Object.create(null);let u,h,d,p,f,m,g;for(u=0,h=0;u<r.length;u++)d=r[u],s.hasOwnProperty(d)?h++:(n.push({command:Oe.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<i.length;u++)d=i[i.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(n.push({command:Oe.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],n.push({command:Oe.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<i.length;u++)if(d=i[u],p=a[d],f=s[d],!c[d]&&!o(p,f))if(o(p.source,f.source)&&o(p["source-layer"],f["source-layer"])&&o(p.type,f.type)){for(g in Ue(p.layout,f.layout,n,d,null,Oe.setLayoutProperty),Ue(p.paint,f.paint,n,d,null,Oe.setPaintProperty),o(p.filter,f.filter)||n.push({command:Oe.setFilter,args:[d,f.filter]}),o(p.minzoom,f.minzoom)&&o(p.maxzoom,f.maxzoom)||n.push({command:Oe.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ue(p[g],f[g],n,d,g.slice(6),Oe.setPaintProperty):o(p[g],f[g])||n.push({command:Oe.setLayerProperty,args:[d,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ue(p[g],f[g],n,d,g.slice(6),Oe.setPaintProperty):o(p[g],f[g])||n.push({command:Oe.setLayerProperty,args:[d,g,f[g]]}))}else n.push({command:Oe.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],n.push({command:Oe.addLayer,args:[f,m]})}(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:Oe.setStyle,args:[t]}]}return n}(this.serialize(),t).filter((e=>!(e.command in Ft)));if(0===n.length)return!1;const r=n.filter((e=>!(e.command in Lt)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((e=>e.command)).join(", ")}.`);return n.forEach((e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=t,this.updateProjection(),!0}addImage(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this._afterImageUpdated(t)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,n,r={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,`sources.${t}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Te(t,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:i.serialize(),sourceId:t})));const o=n=>{const r=(n?"symbol:":"other:")+t,o=this._sourceCaches[r]=new e.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(void 0===n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(t);for(const t of r)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}addLayer(t,n,r={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===t.type){if(Ot(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateStyle.layer,`layers.${i}`,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const r=this._order.indexOf(t);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,r){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,n,r={}){this._checkLoaded();const i=this.getLayer(t);if(i){if(!o(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(e.validateStyle.filter,`layers.${i.id}.filter`,n,{layerType:i.type},r)||(i.filter=e.clone$1(n),this._updateLayer(i)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){return e.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,n,r,i={}){this._checkLoaded();const a=this.getLayer(t);a?o(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,i),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,n){const r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,n,r,i={}){this._checkLoaded();const a=this.getLayer(t);a?o(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,i)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const r=t.source,i=t.sourceLayer,o=this.getSource(r);if(void 0===o)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const e of s)e.setFeatureState(i,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const r=t.source,i=this.getSource(r);if(void 0===i)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const e of s)e.removeFeatureState(a,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,r=t.sourceLayer,i=this.getSource(n);if(void 0!==i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(t(o)){n[o]=i;for(const t of e){const e=t[o];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=fe.createFromScreenPoints(t,r);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!i[t]||o.push(Se(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const e of Object.keys(l).map(Number))c.push(a[e]);c.sort(Ce);for(const n of c){const r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in r){const t=s[e]=s[e]||[],i=r[e];i.sort(((e,t)=>{const r=n.featureSortOrder;if(r){const n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const t in s)s[t].forEach((r=>{const i=r.feature,o=n(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(t);let i=[];for(const e of r)i=i.concat(ke(e,n));return i}addSourceType(e,t,n){return Ut.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(Ut.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t,n={}){this._checkLoaded();const r=this.light.getLight();let i=!1;for(const e in t)if(!o(t[e],r[e])){i=!0;break}if(!i)return;const a={now:e.exported.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(a)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(t,n=1){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===n){if("object"==typeof t.source){const n="terrain-dem-src";this.addSource(n,t.source),t=e.clone$1(t),t=e.extend(t,{source:n})}if(this._validate(e.validateStyle.terrain,"terrain",t))return}if(!this.terrain||this.terrain&&n!==this.terrain.drapeRenderMode)this._createTerrain(t,n);else{const n=this.terrain,r=n.get();for(const i in t)if(!o(t[i],r[i])){n.set(t),this.stylesheet.terrain=t;const r={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const n=this.fog=new E(t,this.map.transform);this.stylesheet.fog=t;const r={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();for(const i in t)if(!o(t[i],r[i])){n.set(t),this.stylesheet.fog=t;const r={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r);break}}else this._createFog(t);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(t,n){const r=this.terrain=new v(t,n);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const i={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(i)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,n,r,i,o={}){return(!o||!1!==o.validate)&&Ot(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,r,i,o=!1){let a=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;l[n.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng,t.projection);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new It(t,this._order,o,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const r=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,r){return e.makeRequest(n,r)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ut.getSourceType=function(e){return we[e]},Ut.setSourceType=function(e,t){we[e]=t},Ut.registerForPluginStateChange=e.registerForPluginStateChange;var jt="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",Vt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let $t={},qt={};$t=Ht("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),qt=Ht("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const Gt=Ht("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef TERRAIN\nhighp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#endif","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#if defined(PROJECTION_GLOBE_VIEW) && !defined(PROJECTED_POS_ON_VIEWPORT)\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {\n#if defined(PROJECTION_GLOBE_VIEW) && !defined(PROJECTED_POS_ON_VIEWPORT)\nreturn mix(globe,mercator,t);\n#else\nreturn globe;\n#endif\n}\n#ifdef PROJECTION_GLOBE_VIEW\nmat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Wt=jt;var Zt={background:Ht("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Ht("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Ht("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec2 scaled_extrude=extrude*a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=scaled_extrude.x*surface_vectors[0]+scaled_extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\n#if defined(SCALE_WITH_MAP) && defined(PROJECTION_GLOBE_VIEW)\nview_scale*=a_scale;\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Ht("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ht("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nextrude*=a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Ht("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ht("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ht("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ht("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Ht("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Ht("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Ht("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Ht("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Ht("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Ht("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Ht("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ht("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Ht("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nvec4 out_color=texture2D(u_gradient_image,v_uv);\n#else\nvec4 out_color=color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#ifdef RENDER_LINE_GRADIENT\nattribute vec3 a_packed;\n#else\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Ht("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Ht("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Ht("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Ht("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_tile_id;uniform float u_zoom_transition;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Ht("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Ht("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:Ht("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Ht("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Vt),skyboxGradient:Ht("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Vt),skyboxCapture:Ht("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Ht("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;varying vec2 v_pos0;const float wireframeOffset=1e3;void main() {v_pos0=a_uv;vec2 uv=a_uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nvec4 globe=u_globe_matrix*vec4(a_globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(a_merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}"),globeAtmosphere:Ht("uniform vec2 u_center;uniform float u_radius;uniform vec2 u_screen_size;uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform float u_pixel_ratio;void main() {highp vec2 fragCoord=gl_FragCoord.xy/u_pixel_ratio;fragCoord.y=u_screen_size.y-fragCoord.y;float distFromCenter=length(fragCoord-u_center);float normDistFromCenter=length(fragCoord-u_center)/u_radius;if (normDistFromCenter < 1.0)\ndiscard;float t=clamp(1.0-sqrt(normDistFromCenter-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}","attribute vec3 a_pos;void main() {gl_Position=vec4(a_pos,1.0);}")};function Ht(e,t,n){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,o=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=e.match(i),s=t.match(i),l=jt.match(i);let c=s?s.concat(a):a;n||($t.staticUniforms&&(c=$t.staticUniforms.concat(c)),qt.staticUniforms&&(c=qt.staticUniforms.concat(c))),c&&(c=c.concat(l));const u={};return{fragmentSource:e=e.replace(r,((e,t,n,r,i)=>(u[i]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,n,r,i)=>{const o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return u[i]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`})),staticAttributes:o,staticUniforms:c}}class Xt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,r,i,o,a,s){this.context=e;let l=this.boundPaintVertexBuffers.length!==r.length;for(let e=0;!l&&e<r.length;e++)this.boundPaintVertexBuffers[e]!==r[e]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(t,n,r,i,o,a,s)}freshBind(e,t,n,r,i,o,a){let s;const l=e.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(let e=l;e<s;e++)u.disableVertexAttribArray(e)}t.enableAttributes(u,e);for(const t of n)t.enableAttributes(u,e);o&&o.enableAttributes(u,e),a&&a.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);for(const t of n)t.bind(),t.setVertexAttribPointers(u,e,i);o&&(o.bind(),o.setVertexAttribPointers(u,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,e,i)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Yt(t,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function Kt(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=r.fbo;if(!u)return;t.prepareDrawTile(n);const h=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Yt(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,h,n.toUnwrapped());const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=t.getTileBoundsBuffers(r);h.draw(l,c.TRIANGLES,o,a,s,e.CullFaceMode.disabled,d,i.id,p,f,m)}function Qt(t,n,r){if(!n.needsDEMTextureUpload)return;const i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function Jt(t,n,r,i,o,a){const s=t.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),Qt(t,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(t.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:d,tileBoundsIndexBuffer:p,tileBoundsSegments:f}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,e.CullFaceMode.disabled,((t,n)=>{const r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,d,p,f),n.needsHillshadePrepare=!1}const en=(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image0:new e.Uniform1i(t,n.u_image0),u_skirt_height:new e.Uniform1f(t,n.u_skirt_height)}),tn=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),nn=(e,t,n,r,i)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_merc_matrix:n,u_zoom_transition:r,u_merc_center:i,u_image0:0});function rn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const on=new class{constructor(){this.operations={}}newMorphing(e,t,n,r,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},an={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function sn(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const ln=e=>({u_matrix:e});function cn(t,n,r,i,o){if(o>0){const a=e.exported.now(),s=(a-t.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=r.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),d=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class un extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},n=new S(De(),null),r=Te("mock-dem",t,n,e.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class hn extends e.SourceCache{constructor(e){const t=Te("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new S(De(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,r){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new e.Tile(r,this._source.tileSize*r.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class dn extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=n}}class pn extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(t){const n=new e.StructArrayLayout4i8,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=e.EXTENT/128,a=e.EXTENT+o/2,s=a+o;for(let t=-o;t<s;t+=o)for(let r=-o;r<s;r+=o){const i=r<0||r>a||t<0||t>a?24575:0,o=e.clamp(Math.round(r),0,e.EXTENT),s=e.clamp(Math.round(t),0,e.EXTENT);n.emplaceBack(o+i,s,o,s)}const l=(e,t)=>{const n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[n,r,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(r,e.boundsAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new hn(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new un(n.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}update(t,n,r){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(n,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((e=>{const t=n.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.pointGeometry(r.x,r.y);t.sort(((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const r=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const e in a){const n=a[e];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,t[e],o),n.usedForTerrain)continue;const r=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((e=>new dn(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in s||(this._visibleDemTiles.push(t),s[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Qt(this.painter,r,i))}}_prepareDemTileUniforms(e,t,n,r){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=r||"";return n[`u_dem_tl${a}`]=[i.x*o%1,i.y*o%1],n[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){const r={width:1,height:1,data:new Uint8Array([255,255,255,255])};this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,n)=>{if(!n.dem)return t;const r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i={width:1,height:1,data:new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(t,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();const l=this.painter.transform,c=l.projection.createTileTransform(l,l.worldSize),u=t.tileID.canonical;a.u_tile_tl_up=c.upVector(u,0,0),a.u_tile_tr_up=c.upVector(u,e.EXTENT,0),a.u_tile_br_up=c.upVector(u,e.EXTENT,e.EXTENT),a.u_tile_bl_up=c.upVector(u,0,e.EXTENT),a.u_tile_up_scale=c.upVectorScale(u);let h=null,d=null,p=1;if(r&&r.morphing&&this._useVertexMorphing){const e=r.morphing.srcDemTile,n=r.morphing.dstDemTile;p=r.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(d=e),this._prepareDemTileUniforms(t,n,a)&&(h=n))}if(d&&h?(i.activeTexture.set(o.TEXTURE2),h.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),d.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=p):(h=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,h,a)?h.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&h){const t=(1<<h.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a)}renderToBackBuffer(t){const n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),this.renderingToTexture=!1,function(t,n,r,i,o){if("globe"===t.transform.projection.name)!function(t,n,r,i,o){const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,h=(e,n)=>{if(c===e)return;const r=[];n&&r.push(an[u]),r.push(an[e]),r.push("PROJECTION_GLOBE_VIEW"),l=t.useProgram("globeRaster",null,r),c=e},d=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);on.update(o);const f=t.transform,m=e.calculateGlobeMatrix(f,f.worldSize),g=e.calculateGlobeMercatorMatrix(f),y=[e.mercatorXfromLng(f.center.lng),e.mercatorYfromLat(f.center.lat)],_=t.globeSharedBuffers;(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const v=u?s.LINES:s.TRIANGLES;for(const c of i){const i=r.getTile(c),x=Math.pow(2,c.canonical.z),[b,w]=e.globeBuffersForTileMesh(t,i,c,x),T=e.StencilMode.disabled,E=n.prevTerrainTileForTile[c.key],S=n.terrainTileForTile[c.key];rn(E,S)&&on.newMorphing(c.key,E,S,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const k=on.getMorphValuesForProxy(c.key),C=k?1:0,M={};k&&e.extend$1(M,{morphing:{srcDemTile:k.from,dstDemTile:k.to,phase:e.easeCubicInOut(k.phase)}});const I=e.globeMatrixForTile(c.canonical,m),P=nn(f.projMatrix,I,g,e.globeToMercatorTransition(f.zoom),y);if(h(C,u),n.setupElevationDraw(i,l,M),t.prepareDrawProgram(a,l,c.toUnwrapped()),_){const[n,r]=u?_.getWirefameBuffer(t.context):[_.gridIndexBuffer,_.gridSegments];l.draw(a,v,p,T,d,e.CullFaceMode.backCCW,P,"globe_raster",b,n,r)}if(!u){const t=[0===c.canonical.y?e.globePoleMatrixForTile(c.canonical,!1,f):null,c.canonical.y===x-1?e.globePoleMatrixForTile(c.canonical,!0,f):null];for(const n of t){if(!n)continue;const t=nn(f.projMatrix,n,n,0,y);_&&l.draw(a,v,p,T,d,e.CullFaceMode.disabled,t,"globe_pole_raster",w,_.poleIndexBuffer,_.poleSegments)}}}}))}(t,n,r,i,o);else{const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,h=(e,n)=>{if(c===e)return;const r=[an[e]];n&&r.push(an[u]),l=t.useProgram("terrainRaster",null,r),c=e},d=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);on.update(o);const f=t.transform,m=6*Math.pow(1.5,22-f.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,_]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of i){const i=r.getTile(c),v=e.StencilMode.disabled,x=n.prevTerrainTileForTile[c.key],b=n.terrainTileForTile[c.key];rn(x,b)&&on.newMorphing(c.key,x,b,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const w=on.getMorphValuesForProxy(c.key),T=w?1:0;let E;w&&(E={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:e.easeCubicInOut(w.phase)}});const S=tn(c.projMatrix,sn(c.canonical,f.renderWorldCopies)?m/10:m);h(T,u),n.setupElevationDraw(i,l,E),t.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,v,d,e.CullFaceMode.backCCW,S,"terrain_raster",n.gridBuffer,y,_)}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),h=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][t]:void 0,d=void 0!==h?i.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=d.tex,p&&!d.dirty){s.push(o.tileID);continue}let f;r.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(r.clear({color:e.Color.transparent,stencil:0}),d.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=n.style._layers[l[e]];if(t.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(t),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(i?i.id:null)&&(this._setupStencil(d,o,t,i),f=i?i.id:null),n.renderLayer(n,i,t,a)}this.renderedToTile?(d.dirty=!0,s.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(o&&++r,++i):o||(o=!0,n=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((e=>e.dem)).map((r=>{const i=r.tileID,o=Math.pow(2,i.overscaledZ),{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:r.dem.tree.raycastRoot(l,u,c,h,e,t,n),tile:r}}));r.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,n);if(null!=r)return r}return null}_createFBO(){const t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=t.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new he(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],n=t.isHidden(this.painter.transform.zoom),r=t.getCrossfadeParameters(),i=!!r&&1!==r.t,o=t.hasTransition();return"custom"!==t.type&&!n&&(i||o)}))}_clearRasterFadeFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof _e){e=!0;break}if(e)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],n=t.isHidden(this.painter.transform.zoom),r=this._style._getLayerSourceCache(t);if("raster"!==t.type||n||!r)continue;const i=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][r.id];if(t)for(const e of t){const t=cn(r.getTile(e),r.findLoadedParent(e,0),r,this.painter.transform,i);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(r.id,e)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let r,i=0,o=this._style._layers[e[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<t;)o=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const r=Object.values(e[n]);t.renderCachePool.push(...r)}}return}this._clearRasterFadeFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let i=n.length-1;i>=0;i--){const o=n[i];if(t.getTileByID(o.key),void 0!==t.proxyCachedFBO[o.key]){const n=e[o.key],i=this.proxyToSource[o.key];let a=0;for(const e in i){const t=i[e],o=n[e];if(!o||o.length!==t.length||t.some(((t,n)=>t!==o[n]||r[e]&&r[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[o.key])t.renderCache[t.proxyCachedFBO[o.key][e]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const e of i)for(const r of n){if(t.proxyCachedFBO[r.key])continue;let n=t.renderCachePool.pop();void 0===n&&t.renderCache.length<50&&(n=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==n&&(t.proxyCachedFBO[r.key]={},t.proxyCachedFBO[r.key][e.start]=n,t.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of t){const t=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,ln(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],r.slice(0,3),a);e.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const t=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(t.TEXTURE0);const a=new e.Texture(n,{width:i,height:o,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(t,n,r,i){if("globe"===t.transform.projection.name)return;const o=t.context,a=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of i){const i=r.getTile(t),c=tn(t.projMatrix,0);n.setupElevationDraw(i,s),s.draw(o,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof be)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let t=0;t<i.length;t++){const o=i[t],a=this._findTileCoveringTileID(o,e);if(a){const t=this._createProxiedId(o,a,n[o.key]&&n[o.key][e.id]);r.push(t),this.proxyToSource[o.key][e.id]=[t]}}let o=!1;for(let i=0;i<t.length;i++){const a=e.getTile(t[i]);if(!a||!a.hasData())continue;const s=this._findTileCoveringTileID(a.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==a.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],i=this._createProxiedId(s.tileID,a,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,i):this.proxyToSource[s.tileID.key][e.id]=[i],r.push(i),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,n,r){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,n)=>{const r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<n.length;e++){const o=t.getTile(n[e]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,n,r){let i=this.orthoMatrix;if(r){const e=r.find((e=>e.key===n.tileID.key));if(e)return e}if(n.tileID.key!==t.key){const r=t.canonical.z-n.tileID.canonical.z;let o,a,s;i=e.create();const l=n.tileID.wrap-t.wrap<<t.overscaledZ;r>0?(o=e.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-t.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-t.canonical.y)):(o=e.EXTENT<<-r,a=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+l<<-r)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-r))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[a,s,0])}return new dn(n.tileID,t.key,i)}_findTileCoveringTileID(t,n){let r=n.getTile(t);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[t.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:t,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(t.canonical.z>=i){const r=t.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r)):0!==r&&(s=i,a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r))}a.key!==t.key&&(c.push(a.key),r=n.getTile(a))}const u=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const e=a.calculateScaledKey(s);if(r=n.getTileByID(e),r&&r.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):r=n.getTileByID(t)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(e){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let n,r,i;const o=new e.StructArrayLayout2ui4,a=131;for(r=1;r<129;r++){for(n=1;n<129;n++)i=r*a+n,o.emplaceBack(i,i+1),o.emplaceBack(i,i+a),o.emplaceBack(i+1,i+a),128===r&&o.emplaceBack(i+a,i+a+1);o.emplaceBack(i+1,i+1+a)}return o}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function fn(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}class mn{static cacheKey(e,t,n){let r=`${e}${n?n.cacheKey:""}`;for(const e of t)r+=`/${e}`;return r}constructor(t,n,r,i,o,a){const s=t.gl;this.program=s.createProgram();const l=fn(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c),h=r.staticUniforms?fn(r.staticUniforms):[],d=i?i.getBinderUniforms():[],p=h.concat(d),f=[];for(const e of p)f.indexOf(e)<0&&f.push(e);let m=i?i.defines():[];m=m.concat(a.map((e=>`#define ${e}`)));const g=m.concat("\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Wt,Gt.fragmentSource,qt.fragmentSource,r.fragmentSource).join("\n"),y=m.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Wt,Gt.vertexSource,qt.vertexSource,$t.vertexSource,r.vertexSource).join("\n"),_=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(_,g),s.compileShader(_),s.attachShader(this.program,_);const v=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(v,y),s.compileShader(v),s.attachShader(this.program,v),this.attributes={};const x={};this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(v),s.deleteShader(_);for(let e=0;e<f.length;e++){const t=f[e];if(t&&!x[t]){const e=s.getUniformLocation(this.program,t);e&&(x[t]=e)}}this.fixedUniforms=o(t,x),this.binderUniforms=i?i.getUniforms(t,x):[],-1!==a.indexOf("TERRAIN")&&(this.terrainUniforms=((t,n)=>({u_dem:new e.Uniform1i(t,n.u_dem),u_dem_prev:new e.Uniform1i(t,n.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,n.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,n.u_dem_tl),u_dem_scale:new e.Uniform1f(t,n.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,n.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,n.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,n.u_dem_size),u_dem_lerp:new e.Uniform1f(t,n.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,n.u_exaggeration),u_depth:new e.Uniform1i(t,n.u_depth),u_depth_size_inv:new e.Uniform2f(t,n.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,n.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,n.u_label_plane_matrix_inv),u_tile_tl_up:new e.Uniform3f(t,n.u_tile_tl_up),u_tile_tr_up:new e.Uniform3f(t,n.u_tile_tr_up),u_tile_br_up:new e.Uniform3f(t,n.u_tile_br_up),u_tile_bl_up:new e.Uniform3f(t,n.u_tile_bl_up),u_tile_up_scale:new e.Uniform1f(t,n.u_tile_up_scale)}))(t,x)),-1!==a.indexOf("FOG")&&(this.fogUniforms=((t,n)=>({u_fog_matrix:new e.UniformMatrix4f(t,n.u_fog_matrix),u_fog_range:new e.Uniform2f(t,n.u_fog_range),u_fog_color:new e.Uniform4f(t,n.u_fog_color),u_fog_horizon_blend:new e.Uniform1f(t,n.u_fog_horizon_blend),u_fog_temporal_offset:new e.Uniform1f(t,n.u_fog_temporal_offset)}))(t,x))}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].location&&n[e].set(t[e])}}draw(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o);for(const e of Object.keys(this.fixedUniforms))this.fixedUniforms[e].set(a[e]);p&&p.setUniforms(e,this.binderUniforms,h,{zoom:d});const y={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[t];for(const n of u.get()){const r=n.vaos||(n.vaos={});(r[s]||(r[s]=new Xt)).bind(e,this,l,p?p.getPaintVertexBuffers():[],c,n.vertexOffset,f,m),g.drawElements(t,n.primitiveLength*y,g.UNSIGNED_SHORT,n.primitiveOffset*y*2)}}}function gn(e,t,n){const r=1/k(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const yn=(t,n,r,i)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=e.create$1();"viewport"===o.properties.get("anchor")&&(e.fromRotation(l,-n.transform.angle),e.transformMat3(s,s,l));const c=o.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},_n=(t,n,r,i,o,a,s)=>e.extend(yn(t,n,r,i),gn(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),vn=e=>({u_matrix:e}),xn=(t,n,r,i)=>e.extend(vn(t),gn(r,n,i)),bn=(e,t)=>({u_matrix:e,u_world:t}),wn=(t,n,r,i,o)=>e.extend(xn(t,n,r,i),{u_world:o}),Tn=(t,n,r,i)=>{const o=t.transform;let a;return a="map"===i.paint.get("circle-pitch-alignment")?o.calculatePixelsToTileUnitsMatrix(r):new Float32Array([o.pixelsToGLUnits[0],0,0,o.pixelsToGLUnits[1]]),{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:a}},En=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Sn=(t,n,r)=>{const i=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/i,n.pixelsToGLUnits[1]/i]}},kn=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),Cn=(e,t,n,r)=>({u_matrix:e,u_extrude_scale:k(t,1,n),u_intensity:r}),Mn=(t,n,r,i,o,a)=>{const s=t.transform,l=s.calculatePixelsToTileUnitsMatrix(n),c={u_matrix:An(t,n,r,o),u_pixels_to_tile_units:l,u_device_pixel_ratio:e.exported.devicePixelRatio,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0};if(Dn(r)){const e=Pn(n,t.transform);c.u_texsize=n.lineAtlasTexture.size,c.u_scale=[e,i.fromScale,i.toScale],c.u_mix=i.t}return c},In=(t,n,r,i,o)=>{const a=t.transform,s=Pn(n,a);return{u_matrix:An(t,n,r,o),u_texsize:n.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(n),u_device_pixel_ratio:e.exported.devicePixelRatio,u_image:0,u_scale:[s,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Pn(e,t){return 1/k(e,1,t.tileZoom)}function An(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function Dn(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const zn=(e,t,n,r,i,o)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Rn(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function Rn(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const On=(e,t,n,r,i,o,a,s,l,c,u,h,d,p)=>{const f=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:f.width/f.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_tile_id:u,u_zoom_transition:h,u_inv_rot_matrix:d,u_merc_center:p,u_texture:0}},Ln=(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m)=>{const{cameraToCenterDistance:g,_pitch:y}=o.transform;return e.extend(On(t,n,r,i,o,a,s,l,c,u,d,p,f,m),{u_gamma_scale:i?g*Math.cos(o.terrain?0:y):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h})},Fn=(t,n,r,i,o,a,s,l,c,u,h,d,p,f)=>e.extend(Ln(t,n,r,i,o,a,s,l,!0,c,!0,h,d,p,f),{u_texsize_icon:u,u_texture_icon:1}),Bn=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),Nn=(t,n,r,i,o,a)=>e.extend(function(e,t,n,r){const i=n.imageManager.getPattern(e.from.toString()),o=n.imageManager.getPattern(e.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/k(r,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(i,a,r,o),{u_matrix:t,u_opacity:n}),Un={fillExtrusion:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}),fillExtrusionPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}),fill:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),fillPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),fillOutline:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}),fillOutlinePattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),circle:(t,n)=>({u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.UniformMatrix2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),collisionBox:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale)}),collisionCircle:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}),debug:(t,n)=>({u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}),clippingMask:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),heatmap:(t,n)=>({u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),heatmapTexture:(t,n)=>({u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}),hillshade:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}),hillshadePrepare:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}),line:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_pixels_to_tile_units:new e.UniformMatrix2f(t,n.u_pixels_to_tile_units),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_dash_image:new e.Uniform1i(t,n.u_dash_image),u_gradient_image:new e.Uniform1i(t,n.u_gradient_image),u_image_height:new e.Uniform1f(t,n.u_image_height),u_texsize:new e.Uniform2f(t,n.u_texsize),u_scale:new e.Uniform3f(t,n.u_scale),u_mix:new e.Uniform1f(t,n.u_mix),u_alpha_discard_threshold:new e.Uniform1f(t,n.u_alpha_discard_threshold)}),linePattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixels_to_tile_units:new e.UniformMatrix2f(t,n.u_pixels_to_tile_units),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_alpha_discard_threshold:new e.Uniform1f(t,n.u_alpha_discard_threshold)}),raster:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights),u_perspective_transform:new e.Uniform2f(t,n.u_perspective_transform)}),symbolIcon:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_texture:new e.Uniform1i(t,n.u_texture)}),symbolSDF:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}),symbolTextAndIcon:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}),background:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}),backgroundPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}),terrainRaster:en,terrainDepth:en,skybox:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_cubemap:new e.Uniform1i(t,n.u_cubemap),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}),skyboxGradient:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_center_direction:new e.Uniform3f(t,n.u_center_direction),u_radius:new e.Uniform1f(t,n.u_radius),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}),skyboxCapture:(t,n)=>({u_matrix_3f:new e.UniformMatrix3f(t,n.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,n.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,n.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,n.u_color_tint_m),u_luminance:new e.Uniform1f(t,n.u_luminance)}),globeRaster:(t,n)=>({u_proj_matrix:new e.UniformMatrix4f(t,n.u_proj_matrix),u_globe_matrix:new e.UniformMatrix4f(t,n.u_globe_matrix),u_merc_matrix:new e.UniformMatrix4f(t,n.u_merc_matrix),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_image0:new e.Uniform1i(t,n.u_image0)}),globeAtmosphere:(t,n)=>({u_center:new e.Uniform2f(t,n.u_center),u_radius:new e.Uniform1f(t,n.u_radius),u_screen_size:new e.Uniform2f(t,n.u_screen_size),u_pixel_ratio:new e.Uniform1f(t,n.u_pixel_ratio),u_opacity:new e.Uniform1f(t,n.u_opacity),u_fadeout_range:new e.Uniform1f(t,n.u_fadeout_range),u_start_color:new e.Uniform3f(t,n.u_start_color),u_end_color:new e.Uniform3f(t,n.u_end_color)})};let jn;function Vn(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.useProgram("collisionBox"),h=[];let d=0,p=0;for(let f=0;f<i.length;f++){const m=i[f],g=n.getTile(m),y=g.getBucket(r);if(!y)continue;let _=m.projMatrix;0===o[0]&&0===o[1]||(_=t.translatePosMatrix(m.projMatrix,g,o,a));const v=s?y.textCollisionBox:y.iconCollisionBox,x=y.collisionCircleArray;if(x.length>0){const n=e.create(),r=_;e.mul(n,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(n,n,y.placementViewportMatrix),h.push({circleArray:x,circleOffset:p,transform:r,invTransform:n}),d+=x.length/4,p=d}v&&(t.terrain&&t.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Sn(_,t.transform,g),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,t.transform.zoom,null,v.collisionVertexBuffer,v.collisionVertexBufferExt))}if(!s||!h.length)return;const f=t.useProgram("collisionCircle"),m=new e.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let g=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,r=e.circleArray[n+0],i=e.circleArray[n+1],o=e.circleArray[n+2],a=e.circleArray[n+3];m.emplace(g++,r,i,o,a,0),m.emplace(g++,r,i,o,a,1),m.emplace(g++,r,i,o,a,2),m.emplace(g++,r,i,o,a,3)}(!jn||jn.length<2*d)&&(jn=function(t){const n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(let e=0;e<n;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(d));const y=l.createIndexBuffer(jn,!0),_=l.createVertexBuffer(m,e.collisionCircleLayout.members,!0);for(const n of h){const i={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(v=t.transform).cameraToCenterDistance,u_viewport_size:[v.width,v.height]};f.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,i,r.id,_,y,e.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,t.transform.zoom,null,null,null)}var v;_.destroy(),y.destroy()}const $n=e.identity(new Float32Array(16));function qn(t,n,r,i,o,a){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(t),c=-(s-.5)*n,u=-(l-.5)*r,h=e.evaluateVariableOffset(t,i);return new e.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function Gn(t,n,r,i,o,a,s,l,c,u,h,d){const p=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,g={},y=l.projMatrix,_=a.elevation,v=_?_.getAtTileOffsetFunc(l,d):e=>[0,0,0];f.clear();for(let l=0;l<p.length;l++){const d=p.get(l),m=t.allowVerticalPlacement&&!d.placedOrientation,_=d.hidden||!d.crossTileID||m?null:i[d.crossTileID];if(_){const i=new e.pointGeometry(d.tileAnchorX,d.tileAnchorY),l=v(i),p=He(i,r?y:s,l[2]),m=Xe(a.cameraToCenterDistance,p.signedDistanceFromCamera);let x=o.evaluateSizeForFeature(t.textSizeData,u,d)*m/e.ONE_EM;r&&(x*=t.tilePixelRatio/c);const{width:b,height:w,anchor:T,textOffset:E,textScale:S}=_,k=qn(T,b,w,E,S,x),C=r?He(i.add(k),s,l[2]).point:p.point.add(n?k.rotate(-a.angle):k),M=t.allowVerticalPlacement&&d.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<d.numGlyphs;t++)e.addDynamicAttributes(f,C,M);h&&d.associatedIconIndex>=0&&(g[d.associatedIconIndex]={shiftedAnchor:C,angle:M})}else ot(d.numGlyphs,f)}if(h){m.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const r=n.get(t);if(r.hidden)ot(r.numGlyphs,m);else{const n=g[t];if(n)for(let t=0;t<r.numGlyphs;t++)e.addDynamicAttributes(m,n.shiftedAnchor,n.angle);else ot(r.numGlyphs,m)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function Wn(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Zn(t,n,r,i,o,a,s,l,c,u,h,d){const p=t.context,f=p.gl,m=t.transform,g=m.projection.createTileTransform(m,m.worldSize),y="map"===l,_="map"===c,v=y&&"point"!==r.layout.get("symbol-placement"),x=y&&!_&&!v,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let w=!1;const T=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),E=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],S=r.layout.get("text-variable-anchor"),k="globe"===m.projection.name,C=k?e.globeToMercatorTransition(m.zoom):0,M=[],I=[];t.terrain&&_&&I.push("PITCH_WITH_MAP_TERRAIN"),k&&I.push("PROJECTION_GLOBE_VIEW"),v&&I.push("PROJECTED_POS_ON_VIEWPORT");for(const l of i){const i=n.getTile(l),c=i.getBucket(r);if(!c||c.projection!==m.projection.name)continue;const h=o?c.text:c.icon;if(!h||c.fullyClipped||!h.segments.get().length)continue;const d=h.programConfigurations.get(r.id),p=o||c.sdfIcons,T=o?c.textSizeData:c.iconSizeData,k=_||0!==m.pitch,P=t.useProgram(Wn(p,o,c),d,I),A=e.evaluateSizeForZoom(T,m.zoom),D=[l.canonical.x,l.canonical.y,1<<l.canonical.z];let z,R,O,L,F=[0,0],B=null;if(o){if(R=i.glyphAtlasTexture,O=f.LINEAR,z=i.glyphAtlasTexture.size,c.iconsInText){F=i.imageAtlasTexture.size,B=i.imageAtlasTexture;const e="composite"===T.kind||"camera"===T.kind;L=k||t.options.rotating||t.options.zooming||e?f.LINEAR:f.NEAREST}}else{const e=1!==r.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;R=i.imageAtlasTexture,O=p||t.options.rotating||t.options.zooming||e||k?f.LINEAR:f.NEAREST,z=i.imageAtlasTexture.size}const N=t.transform.calculatePixelsToTileUnitsMatrix(i),U=We(l.projMatrix,i.tileID.canonical,_,y,t.transform,N),j=t.terrain&&_&&v?e.invert(new Float32Array(16),U):$n,V=Ze(l.projMatrix,i.tileID.canonical,_,y,t.transform,N),$=S&&c.hasTextData(),q="none"!==r.layout.get("icon-text-fit")&&$&&c.hasIconData();if(v){const e=m.elevation,n=e?e.getAtTileOffsetFunc(l,g):e=>[0,0,0];Ke(c,l.projMatrix,t,o,U,V,_,u,n,l)}const G=t.translatePosMatrix(l.projMatrix,i,a,s),W=v||o&&S||q?$n:U,Z=t.translatePosMatrix(V,i,a,s,!0),H=p&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let X;const Y=g.createInversionMatrix(l.toUnwrapped());X=p?c.iconsInText?Fn(T.kind,A,x,_,t,G,W,Z,z,F,D,C,Y,E):Ln(T.kind,A,x,_,t,G,W,Z,o,z,!0,D,C,Y,E):On(T.kind,A,x,_,t,G,W,Z,o,z,D,C,Y,E);const K={program:P,buffers:h,uniformValues:X,atlasTexture:R,atlasTextureIcon:B,atlasInterpolation:O,atlasInterpolationIcon:L,isSDF:p,hasHalo:H,tile:i,labelPlaneMatrixInv:j};if(b&&c.canOverlap){w=!0;const t=h.segments.get();for(const n of t)M.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:K})}else M.push({segments:h.segments,sortKey:0,state:K})}w&&M.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of M){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!k,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,Hn(n.buffers,e.segments,r,t,n.program,T,h,d,i)),i.u_is_halo=0}Hn(n.buffers,e.segments,r,t,n.program,T,h,d,n.uniformValues)}}function Hn(t,n,r,i,o,a,s,l,c){const u=i.context;o.draw(u,u.gl.TRIANGLES,a,s,l,e.CullFaceMode.disabled,c,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Xn(t,n,r,i,o,a,s){const l=t.context.gl,c=r.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=r.getCrossfadeParameters();let d,p,f,m,g;s?(p=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=u?"fillPattern":"fill",d=l.TRIANGLES);for(const y of i){const i=n.getTile(y);if(u&&!i.patternsLoaded())continue;const _=i.getBucket(r);if(!_)continue;t.prepareDrawTile(y);const v=_.programConfigurations.get(r.id),x=t.useProgram(p,v);u&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));const b=c.constantOr(null);if(b&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[b.to.toString()],n=e.patternPositions[b.from.toString()];t&&n&&v.setConstantPatternPositions(t,n)}const w=t.translatePosMatrix(y.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){m=_.indexBuffer2,g=_.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===p&&u?wn(w,t,h,i,e):bn(w,e)}else m=_.indexBuffer,g=_.segments,f=u?xn(w,t,h,i):vn(w);t.prepareDrawProgram(t.context,x,y.toUnwrapped()),x.draw(t.context,d,o,t.stencilModeForClipping(y),a,e.CullFaceMode.disabled,f,r.id,_.layoutVertexBuffer,m,g,r.paint,t.transform.zoom,v)}}function Yn(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=r.paint.get("fill-extrusion-pattern"),h=u.constantOr(1),d=r.getCrossfadeParameters(),p=r.paint.get("fill-extrusion-opacity");for(const f of i){const i=n.getTile(f),m=i.getBucket(r);if(!m)continue;const g=m.programConfigurations.get(r.id),y=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g);if(t.terrain){const e=t.terrain;if(!m.enableTerrain)continue;if(e.setupElevationDraw(i,y,{useMeterToDem:!0}),Kn(l,n,f,m,r,e),!m.centroidVertexBuffer){const e=y.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}h&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers(d));const _=u.constantOr(null);if(_&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[_.to.toString()],n=e.patternPositions[_.from.toString()];t&&n&&g.setConstantPatternPositions(t,n)}const v=t.translatePosMatrix(f.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),x=r.paint.get("fill-extrusion-vertical-gradient"),b=h?_n(v,t,x,p,f,d,i):yn(v,t,x,p);t.prepareDrawProgram(l,y,f.toUnwrapped()),y.draw(l,l.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,b,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,t.transform.zoom,g,t.terrain?m.centroidVertexBuffer:null)}}function Kn(t,n,r,i,o,a){const s=[t=>{let n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=n.getSource().maxzoom,r=e=>{const t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)};let i,a,s;return(e.overscaledZ===e.canonical.z||e.overscaledZ>=t)&&(i=r(e.key)),e.overscaledZ>=t&&(a=r(e.calculateScaledKey(e.overscaledZ+1))),e.overscaledZ>t&&(s=r(e.calculateScaledKey(e.overscaledZ-1))),i||a||s},c=[0,0,0],u=(t,n)=>(c[0]=Math.min(t.min.y,n.min.y),c[1]=Math.max(t.max.y,n.max.y),c[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,c),h=(t,n)=>(c[0]=Math.min(t.min.x,n.min.x),c[1]=Math.max(t.max.x,n.max.x),c[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,c),d=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>h(e,t),(e,t)=>h(t,e)],p=new e.pointGeometry(0,0);let f,m,g;const y=(t,n,i,o,s)=>{const l=[[o?i:t,o?t:i,0],[o?i:n,o?n:i,0]],c=s<0?e.EXTENT+s:s,u=[o?c:(t+n)/2,o?(t+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(r,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let t=0;t<4;t++){const n=i.borders[t];if(0===n.length&&(i.borderDone[t]=!0),i.borderDone[t])continue;const o=g=s[t](r),c=l(o);if(!c||!c.enableTerrain)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!f){const e=a.findDEMTileFor(r);if(!e||!e.dem)return;f=e}const u=(t<2?1:5)-t,h=c.borders[u];let _=0;for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[t];let s;for(;_<h.length&&(s=c.featuresOnBorder[h[_]],!(s.borders[u][1]>a[0]+3));)c.borderDone[u]||c.encodeCentroid(void 0,s,!1),_++;if(s&&_<h.length){const n=_;let r=0;for(;!(s.borders[u][0]>a[1]-3)&&(r++,++_!==h.length);)s=c.featuresOnBorder[h[_]];if(s=c.featuresOnBorder[h[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(_=n),i.encodeCentroid(void 0,o,!1),c.borderDone[u]||c.encodeCentroid(void 0,s,!1);continue}const l=d[t](o,s),f=t%2?e.EXTENT-1:0;p.x=y(l[0],Math.min(e.EXTENT-1,l[1]),f,t<2,l[2]),p.y=0,i.encodeCentroid(p,o,!1),c.borderDone[u]||c.encodeCentroid(p,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDone[t]=i.needsCentroidUpdate=!0,c.borderDone[u]||(c.borderDone[u]=c.needsCentroidUpdate=!0)}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const Qn=new e.Color(1,0,0,1),Jn=new e.Color(0,1,0,1),er=new e.Color(0,0,1,1),tr=new e.Color(1,0,1,1),nr=new e.Color(0,1,1,1);function rr(e,t,n,r){or(e,0,t+n/2,e.transform.width,n,r)}function ir(e,t,n,r){or(e,t-n/2,0,n,e.transform.height,r)}function or(t,n,r,i,o,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function ar(t,n,r){const i=t.context,o=i.gl,a=r.projMatrix,s=t.useProgram("debug"),l=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(l,s);const c=e.DepthMode.disabled,u=e.StencilMode.disabled,h=t.colorModeForRenderPass(),d="$debug";i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),l._makeDebugTileBoundsBuffers(t.context,t.transform.projection);const p=l._tileDebugBuffer||t.debugBuffer,f=l._tileDebugIndexBuffer||t.debugIndexBuffer,m=l._tileDebugSegments||t.debugSegments;s.draw(i,o.LINE_STRIP,c,u,h,e.CullFaceMode.disabled,kn(a,e.Color.red),d,p,f,m);const g=l.latestRawTileData,y=Math.floor((g&&g.byteLength||0)/1024),_=n.getTile(r).tileSize,v=512/Math.min(_,512)*(r.overscaledZ/t.transform.zoom)*.5;let x=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(x+=` => ${r.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,`${x} ${y}kb`),s.draw(i,o.TRIANGLES,c,u,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,kn(a,e.Color.transparent,v),d,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}const sr=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:lr}=sr;function cr(e,t,n,r){e.emplaceBack(t,n,r)}class ur{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,cr(this.vertexArray,-1,-1,1),cr(this.vertexArray,1,-1,1),cr(this.vertexArray,-1,1,1),cr(this.vertexArray,1,1,1),cr(this.vertexArray,-1,-1,-1),cr(this.vertexArray,1,-1,-1),cr(this.vertexArray,-1,1,-1),cr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,lr),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function hr(t,n,r,i,o,a){const s=t.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((e,t,n,r,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4([],i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const dr={symbol:function(t,n,r,i,o){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a,h=l.projection.createTileTransform(l,l.worldSize);for(const o of t){const t=i.getTile(o),a=t.getBucket(r);if(!a||a.projection!==l.projection.name||!a.text||!a.text.segments.get().length)continue;const d=e.evaluateSizeForZoom(a.textSizeData,l.zoom),p=n.transform.calculatePixelsToTileUnitsMatrix(t),f=We(o.projMatrix,t.tileID.canonical,u,c,n.transform,p),m="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(d){const n=Math.pow(2,l.zoom-t.tileID.overscaledZ);Gn(a,c,u,s,e.symbolSize,l,f,o,n,d,m,h)}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&Zn(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&Zn(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Vn(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Vn(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),d=e.StencilMode.disabled,p=t.colorModeForRenderPass(),f=[];for(let o=0;o<i.length;o++){const a=i[o],s=n.getTile(a),c=s.getBucket(r);if(!c)continue;const u=c.programConfigurations.get(r.id),h=En(r),d={programConfiguration:u,program:t.useProgram("circle",u,h),layoutVertexBuffer:c.layoutVertexBuffer,indexBuffer:c.indexBuffer,uniformValues:Tn(t,a,s,r),tile:s};if(l){const t=c.segments.get();for(const n of t)f.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:d})}else f.push({segments:c.segments,sortKey:0,state:d})}l&&f.sort(((e,t)=>e.sortKey-t.sortKey));const m={useDepthForOcclusion:!("globe"===t.transform.projection.name)};for(const n of f){const{programConfiguration:i,program:o,layoutVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:f}=n.state,g=n.segments;t.terrain&&t.terrain.setupElevationDraw(f,o,m),t.prepareDrawProgram(c,o,f.tileID.toUnwrapped()),o.draw(c,u.TRIANGLES,h,d,p,e.CullFaceMode.disabled,l,r.id,a,s,g,r.paint,t.transform.zoom,i)}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=e.StencilMode.disabled,l=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){const i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,t,o,i)}}(o,t,r),o.clear({color:e.Color.transparent});for(let c=0;c<i.length;c++){const u=i[c];if(n.hasRenderableParent(u))continue;const h=n.getTile(u),d=h.getBucket(r);if(!d)continue;const p=d.programConfigurations.get(r.id),f=t.useProgram("heatmap",p),{zoom:m}=t.transform;t.terrain&&t.terrain.setupElevationDraw(h,f),t.prepareDrawProgram(o,f,u.toUnwrapped()),f.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,l,e.CullFaceMode.disabled,Cn(u.projMatrix,h,m,r.paint.get("heatmap-intensity")),r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,t.transform.zoom,p)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const r=t.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,r))},line:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),u=c.constantOr(1),h=r.layout.get("line-cap"),d=r.paint.get("line-pattern"),p=d.constantOr(1),f=r.paint.get("line-gradient"),m=r.getCrossfadeParameters(),g=p?"linePattern":"line",y=t.context,_=y.gl,v=(e=>{const t=[];Dn(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const n=e.paint.get("line-pattern").constantOr(1),r=1!==e.paint.get("line-opacity").constantOr(1);return!n&&r&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(r);let x=v.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(x=!1);for(const o of i){const i=n.getTile(o);if(p&&!i.patternsLoaded())continue;const a=i.getBucket(r);if(!a)continue;t.prepareDrawTile(o);const b=a.programConfigurations.get(r.id),w=t.useProgram(g,b,v),T=d.constantOr(null);if(T&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[T.to.toString()],n=e.patternPositions[T.from.toString()];t&&n&&b.setConstantPatternPositions(t,n)}const E=c.constantOr(null),S=h.constantOr(null);if(!p&&E&&S&&i.lineAtlas){const e=i.lineAtlas,t=e.getDash(E.to,S),n=e.getDash(E.from,S);t&&n&&b.setConstantPatternPositions(t,n)}const k=t.terrain?o.projMatrix:null,C=p?In(t,i,r,m,k):Mn(t,i,r,m,k,a.lineClipsArray.length);if(f){const i=a.gradients[r.id];let s=i.texture;if(r.gradientVersion!==i.version){let l=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=o.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(a.maxLineLength/e.EXTENT*1024*i),256,y.maxTextureSize)}i.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(y,i.gradient,_.RGBA),i.version=r.gradientVersion,s=i.texture}y.activeTexture.set(_.TEXTURE1),s.bind(r.stepInterpolant?_.NEAREST:_.LINEAR,_.CLAMP_TO_EDGE)}u&&(y.activeTexture.set(_.TEXTURE0),i.lineAtlasTexture.bind(_.LINEAR,_.REPEAT),b.updatePaintBuffers(m)),p&&(y.activeTexture.set(_.TEXTURE0),i.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),b.updatePaintBuffers(m)),t.prepareDrawProgram(y,w,o.toUnwrapped());const M=n=>{w.draw(y,_.TRIANGLES,s,n,l,e.CullFaceMode.disabled,C,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,t.transform.zoom,b,a.layoutVertexBuffer2)};if(x){const n=t.stencilModeForClipping(o).ref;0===n&&t.terrain&&y.clear({stencil:0});const r={func:_.EQUAL,mask:255};C.u_alpha_discard_threshold=.8,M(new e.StencilMode(r,n,255,_.KEEP,_.KEEP,_.INVERT)),C.u_alpha_discard_threshold=0,M(new e.StencilMode(r,n,255,_.KEEP,_.KEEP,_.KEEP))}else M(t.stencilModeForClipping(o))}x&&(t.resetStencilClippingMasks(),t.terrain&&y.clear({stencil:0}))},fill:function(t,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Xn(t,n,r,i,o,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const o=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Xn(t,n,r,i,o,s,!0)}},"fill-extrusion":function(t,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))Yn(t,n,r,i,a,e.StencilMode.disabled,e.ColorMode.disabled),Yn(t,n,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const o=t.colorModeForRenderPass();Yn(t,n,r,i,a,e.StencilMode.disabled,o)}}},hillshade:function(t,n,r,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const i of u){const o=n.getTile(i);if(o.needsHillshadePrepare&&"offscreen"===t.renderPass)Jt(t,o,r,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(i):c[i.overscaledZ];Kt(t,i,o,r,a,e,s)}}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,n,r,i,o,a){if("translucent"!==t.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,l=s.gl,c=n.getSource(),u=t.useProgram("raster"),h=t.colorModeForRenderPass(),d=t.terrain&&t.terrain.renderingToTexture,[p,f]=c instanceof be||d?[{},i]:t.stencilConfigForOverlap(i),m=f[f.length-1].overscaledZ,g=!t.options.moving;for(const i of f){const o=d?e.DepthMode.disabled:t.depthModeForSublayer(i.overscaledZ-m,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),f=i.toUnwrapped(),y=n.getTile(i);if(d&&(!y||!y.hasData()))continue;const _=d?i.projMatrix:t.transform.calculateProjMatrix(f,g),v=t.terrain&&d?t.terrain.stencilModeForRTTOverlap(i):p[i.overscaledZ],x=a?0:r.paint.get("raster-fade-duration");y.registerFadeDuration(x);const b=n.findLoadedParent(i,0),w=cn(y,b,n,t.transform,x);let T,E;t.terrain&&t.terrain.prepareDrawTile(i);const S="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),y.texture.bind(S,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),b?(b.texture.bind(S,l.CLAMP_TO_EDGE),T=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),E=[y.tileID.canonical.x*T%1,y.tileID.canonical.y*T%1]):y.texture.bind(S,l.CLAMP_TO_EDGE);const k=zn(_,E||[0,0],T||1,w,r,c instanceof be?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,f),c instanceof be)u.draw(s,l.TRIANGLES,o,e.StencilMode.disabled,h,e.CullFaceMode.disabled,k,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:i,tileBoundsSegments:a}=t.getTileBoundsBuffers(y);u.draw(s,l.TRIANGLES,o,v,h,e.CullFaceMode.disabled,k,r.id,n,i,a)}}t.resetStencilClippingMasks()},background:function(t,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,h=r.paint.get("background-pattern");if(t.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==d)return;const p=e.StencilMode.disabled,f=t.depthModeForSublayer(0,"opaque"===d?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(h?"backgroundPattern":"background");let y,_=i;_||(y=t.getBackgroundTiles(),_=Object.values(y).map((e=>e.tileID))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));const v=r.getCrossfadeParameters();for(const d of _){const _=d.toUnwrapped(),x=i?d.projMatrix:t.transform.calculateProjMatrix(_);t.prepareDrawTile(d);const b=n?n.getTile(d):y?y[d.key]:new e.Tile(d,u,c.zoom,t),w=h?Nn(x,a,t,h,{tileID:d,tileSize:u},v):Bn(x,a,o);t.prepareDrawProgram(s,g,_);const{tileBoundsBuffer:T,tileBoundsIndexBuffer:E,tileBoundsSegments:S}=t.getTileBoundsBuffers(b);g.draw(s,l.TRIANGLES,f,p,m,e.CullFaceMode.disabled,w,r.id,T,E,S)}},sky:function(t,n,r){const i=t.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=t.context,l=r.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){const o=t.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new ur(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let e=0;e<6;++e)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),hr(o,n,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),hr(o,n,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),hr(o,n,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),hr(o,n,c,u,l,3),e.identity(u),hr(o,n,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),hr(o,n,c,u,l,5),o.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((e,t,n,r,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(t,!1),0,i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,u):"gradient"===l&&"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new ur(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new e.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((t,n,r,i,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,u)},debug:function(e,t,n){for(let r=0;r<n.length;r++)ar(e,t,n[r])},custom:function(t,n,r){const i=t.context,o=r.implementation;if(t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes("custom"))e.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===t.renderPass){const e=o.prerender;e&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),e.call(o,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(e.StencilMode.disabled);const n="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);i.setDepthMode(n),o.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}};class pr{constructor(t,n){this.context=new pe(t),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rt,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new pn(this,e));const r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=t.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,ln(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,n,r){if(!n||this.currentStencilSource===n.id||!t.isTileClipped()||!r||0===r.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of r)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of r){const r=n.getTile(t),s=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(r);a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},s,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,ln(t.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,r=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let r=0;r<o;r++)t[r+i]=new e.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[t,r]}return[{[i]:e.StencilMode.disabled},r]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const o={},a={},s={};for(const e in i){const t=i[e];o[e]=t.getVisibleCoordinates(),a[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of r){const n=this.style._layers[e],r=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let l=e.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(l=this.style.fog.properties.get("color")),this.context.clear({color:n.showOverdrawInspector?e.Color.black:l,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(e,n,i),this.renderLayer(this,n,e,i)}if(this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?a[n.id]:void 0)}for("globe"===this.transform.projection.name&&function(t){const n=t.context,r=n.gl,i=t.transform,o=new e.DepthMode(r.LEQUAL,e.DepthMode.ReadOnly,[0,1]),a=t.useProgram("globeAtmosphere"),s=i._camera.getWorldToCamera(i.worldSize,1),l=i._camera.getCameraToClipPerspective(i._fov,i.width/i.height,i._nearZ,i._farZ),c=e.mul([],s,e.calculateGlobeMatrix(i,i.worldSize)),u=e.mul([],i.labelPlaneMatrix,l),h=e.transformMat4([],[0,0,0],c),d=e.add([],h,[i.worldSize/Math.PI/2,0,0]),p=e.transformMat4([],h,u),f=e.transformMat4([],d,u),m=e.length(e.sub([],f,p)),g=1-e.globeToMercatorTransition(i.zoom),y={u_center:p,u_radius:m,u_screen_size:[i.width,i.height],u_pixel_ratio:e.exported.devicePixelRatio,u_opacity:g,u_fadeout_range:2,u_start_color:[1,1,1],u_end_color:[.0118,.7451,.9882]};t.prepareDrawProgram(n,a);const _=t.globeSharedBuffers;_&&a.draw(n,r.TRIANGLES,o,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,y,"skybox",_.atmosphereVertexBuffer,_.atmosphereIndexBuffer,_.atmosphereSegments)}(this),this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===e.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?o[n.id]:void 0),this.renderLayer(this,n,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let n=null;e.values(this.style._layers).forEach((e=>{const r=t._getLayerSourceCache(e);r&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&dr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;rr(e,e.transform.height-(t.top||0),3,Qn),rr(e,t.bottom||0,3,Jn),ir(e,t.left||0,3,er),ir(e,e.transform.width-(t.right||0),3,tr);const n=e.transform.centerPoint;!function(e,t,n,r){or(e,t-1,n-10,2,20,r),or(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,nr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(n.type)||dr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){const t={};for(const n in e){const r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}translatePosMatrix(t,n,r,i,o){if(!r[0]&&!r[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:k(n,r[0],this.transform.zoom),o?r[1]:k(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.style&&this.style.fog,n=[];return this.terrain&&!this.terrain.renderingToTexture&&n.push("TERRAIN"),t&&!e&&0!==t.getOpacity(this.transform.pitch)&&n.push("FOG"),e&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}useProgram(e,t,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=mn.cacheKey(e,i,t);return this.cache[o]||(this.cache[o]=new mn(this.context,e,Zt[e],t,Un[e],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(e){this.terrain&&this.terrain.prepareDrawTile(e)}prepareDrawProgram(e,t,n){if(this.terrain&&this.terrain.renderingToTexture)return;const r=this.style.fog;if(r){const i=r.getOpacity(this.transform.pitch);0!==i&&t.setFogUniformValues(e,((e,t,n,r)=>{const i=t.properties.get("color"),o=e.frameCounter/1e3%1,a=[i.r/i.a,i.g/i.a,i.b/i.a,r];return{u_fog_matrix:n?e.transform.calculateFogTileMatrix(n):e.identityMat,u_fog_range:t.getFovAdjustedRange(e.transform._fov),u_fog_color:a,u_fog_horizon_blend:t.properties.get("horizon-blend"),u_fog_temporal_offset:o}})(this,r,n,i))}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class fr{constructor(e=0,t=0,n=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}getCenter(t,n){const r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new fr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function mr(t,n){const r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function gr(t,n){e.setColumn(t,3,[n[0],n[1],n[2],1])}function yr(t,n){const r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function _r(t,n){const r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){const t=e.normalize([],r);e.scale$2(i,t,e.dot(i,t)),n[0]=i[0],n[1]=i[1]}const o=e.cross([],n,t);if(e.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return yr(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class vr{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){this._position=this._renderWorldCopies?function(t){if(!t)return;const n=Array.isArray(t)?new e.MercatorCoordinate(t[0],t[1],t[2]):t;return n.x=e.wrap(n.x,0,1),n}(t):t}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const r=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,o=e.MercatorCoordinate.fromLngLat(t,r),a=[o.x-i.x,o.y-i.y,o.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=_r(a,n)}setPitchBearing(t,n){this.orientation=yr(e.degToRad(t),e.degToRad(-n))}}class xr{constructor(t,n){this._transform=e.identity([]),this._orientation=e.identity$1([]),n&&(this._orientation=n,mr(this._transform,this._orientation)),t&&gr(this._transform,t)}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(e){gr(this._transform,e)}get orientation(){return this._orientation}set orientation(e){this._orientation=e,mr(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=yr(e,t),mr(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,n){const r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}getWorldToCameraPosition(t,n,r){const i=this.position;e.scale$2(i,i,-t);const o=new Float64Array(16);return e.fromScaling(o,[r,r,r]),e.translate(o,o,i),o[10]*=n,o}getWorldToCamera(t,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(r,i),e.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(t,n,r,i){const o=new Float64Array(16);return e.perspective(o,t,n,r,i),o}getDistanceToElevation(t){const n=0===t?0:e.mercatorZfromAltitude(t,this.position[1]),r=this.forward();return(n-this.position[2])/r[2]}clone(){return new xr([...this.position],[...this.orientation])}}function br(t,n){const r=Tr(t),i=function(t,n,r,i,o){const a=new e.LngLat(r.lng-180*Er,r.lat),s=new e.LngLat(r.lng+180*Er,r.lat),l=t.project(a.lng,a.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),h=e.MercatorCoordinate.fromLngLat(r);h.y=e.clamp(h.y,-.999975,.999975);const d=h.toLngLat(),p=t.project(d.lng,d.lat),f=e.MercatorCoordinate.fromLngLat(d);f.x+=Er;const m=f.toLngLat(),g=t.project(m.lng,m.lat),y=kr(g.x-p.x,g.y-p.y,u),_=e.MercatorCoordinate.fromLngLat(d);_.y+=Er;const v=_.toLngLat(),x=t.project(v.lng,v.lat),b=kr(x.x-p.x,x.y-p.y,u),w=Math.abs(y.x)/Math.abs(b.y),T=e.identity([]);e.rotateZ(T,T,-u*(1-(o?0:i)));const E=e.identity([]);return e.scale(E,E,[1,1-(1-w)*i,1]),E[4]=-b.x/b.y*i,e.rotateZ(E,E,u),e.multiply$1(E,T,E),E}(t.projection,0,t.center,r,n),o=wr(t);return e.scale(i,i,[o,o,1]),i}function wr(t){const n=t.projection,r=Tr(t),i=Sr(n,t.center),o=Sr(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function Tr(t){const n=t.projection.range;if(!n)return 0;const r=Math.max(t.width,t.height),i=Math.log(r/1024)/Math.LN2;return e.smoothstep(n[0]+i,n[1]+i,t.zoom)}const Er=1/4e4;function Sr(t,n){const r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*Er,r),o=new e.LngLat(n.lng+180*Er,r),a=t.project(i.lng,r),s=t.project(o.lng,r),l=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(o),u=s.x-a.x,h=s.y-a.y,d=c.x-l.x,p=c.y-l.y,f=Math.sqrt((d*d+p*p)/(u*u+h*h));return Math.log(f)/Math.LN2}function kr(e,t,n){const r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}class Cr{constructor(t,n,r,i,o){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(),this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new fr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new xr,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this._horizonShift=.1}clone(){const e=new Cr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.setProjection(this.getProjection()),e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e.tileSize=this.tileSize,e.setMaxBounds(this.getMaxBounds()),e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._cameraZoom=this._cameraZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(t){null==t&&(t={name:"mercator"}),this.projectionOptions=t;const n=this.projection?this.getProjection():void 0;return this.projection=e.getProjection(t),!o(n,this.getProjection())&&(this._calcMatrices(),!0)}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const n=-t*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}_updateCameraOnTerrain(){this._cameraZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize)}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new e.pointGeometry(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const e=this._cameraZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let r;r=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,r));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new vr;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;const i=_r(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const r=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),o=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let r=s-c;r<=l+c;r++)0!==r&&n.push(new e.UnwrappedTileID(r,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const r=n,i=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const a=this.locationCoordinate(this.center),s=1<<n,l=[s*a.x,s*a.y,0],c=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,"globe"!==this.projection.name),u=this.pointCoordinate(this.getCameraPoint()),h=s*e.mercatorZfromAltitude(1,this.center.lat),d=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),p=[s*u.x,s*u.y,d],f=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),m=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,g=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,y=t.isTerrainDEM?-g:this._elevation?this._elevation.getMinElevationBelowMSL():0,_=this.projection.isReprojectedInTileSpace?wr(this):1,v=t=>{const n=1/4e4,r=new e.MercatorCoordinate(t.x+n,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),h=Math.hypot(c.x-l.x,c.y-l.y),d=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(h*d)*_/n},x=t=>{const n=g,r=y;return{aabb:e.tileAABB(this,s,0,0,0,t,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:t,fullyVisible:!1}},b=[];let w=[];const T=n,E=t.reparseOverscaled?r:n,S=e=>e*e,k=S((d-this._centerAltitude)*h),C=e=>{if(!this._elevation||!e.tileID||!o)return;const t=this._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=M(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},M=t=>{if(t.zoom<m)return!0;if(t.zoom===T)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const n=t.aabb.distanceX(p),o=t.aabb.distanceY(p);let a=k;i&&(a=S(t.aabb.distanceZ(p)*h));let s=1;if(this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,t.zoom),r=v(new e.MercatorCoordinate((t.x+.5)/n,(t.y+.5)/n));s=r>.85?1:r}const l=n*n+o*o+a;return l<S((1<<T-t.zoom)*f*s*((e,t)=>{if(t*S(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,k),l))};if(this.renderWorldCopies)for(let e=1;e<=3;e++)b.push(x(-e)),b.push(x(e));for(b.push(x(0));b.length>0;){const r=b.pop(),a=r.x,u=r.y;let h=r.fullyVisible;if(!h){const e=r.aabb.intersects(c);if(0===e)continue;h=2===e}if(r.zoom!==T&&M(r))for(let t=0;t<4;t++){const n=(a<<1)+t%2,l=(u<<1)+(t>>1),c={aabb:o?r.aabb.quadrant(t):e.tileAABB(this,s,r.zoom+1,n,l,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:l,wrap:r.wrap,fullyVisible:h,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&(c.tileID=new e.OverscaledTileID(r.zoom+1===T?E:r.zoom+1,r.wrap,r.zoom+1,n,l),C(c)),b.push(c)}else{const i=r.zoom===T?E:r.zoom;if(t.minzoom&&t.minzoom>i)continue;const o=l[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),s=l[1]-.5-u,c=r.tileID?r.tileID:new e.OverscaledTileID(i,r.wrap,r.zoom,a,u);w.push({tileID:c,distanceSq:o*o+s*s})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();w=w.filter((i=>{const o=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(o,o,s),e.transformMat4$1(a,a,s);const l=e.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:y,max:g});const a=e.furthestTileCorner(this.rotation),s=[a[0]*e.EXTENT,a[1]*e.EXTENT,o.max];e.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<r}return l<n||c}))}return w.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.pointGeometry(r.x*this.worldSize,r.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(t,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y)))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,n){const r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,n){const r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:r,t:i}=t,o=e.mercatorZfromAltitude(n[2],this._center.lat),a=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(o,a,i))}pointCoordinate(e,t=this._centerAltitude){return this.projection.createTileTransform(this,this.worldSize).pointCoordinate(e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);const n=this.elevation;let r=this.elevation.pointCoordinate(t);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);let i=0,o=this.horizonLineFromTop();if(t.y>o)return this.pointCoordinate(t);const a=.02*o,s=t.clone();for(let t=0;t<10&&o-i>a;t++){s.y=e.number(i,o,.66);const t=n.pointCoordinate(s);t?(o=s.y,r=t):i=s.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){if(this.elevation)return!this.elevation.pointCoordinate(e);{const t=this.horizonLineFromTop();return e.y<t}}_coordinatePoint(t,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(t,n){const r=new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),i=new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),o=new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),a=new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let s=this.pointCoordinate(r,t),l=this.pointCoordinate(i,t);const c=this.pointCoordinate(o,n),u=this.pointCoordinate(a,n),h=(e,t)=>(t.y-e.y)/(t.x-e.x);return s.y>1&&l.y>=0?s=new e.MercatorCoordinate((1-u.y)/h(u,s)+u.x,1):s.y<0&&l.y<=1&&(s=new e.MercatorCoordinate(-u.y/h(u,s)+u.x,0)),l.y>1&&s.y>=0?l=new e.MercatorCoordinate((1-c.y)/h(c,l)+c.x,1):l.y<0&&s.y<=1&&(l=new e.MercatorCoordinate(-c.y/h(c,l)+c.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(u)).extend(this.coordinateLocation(c))}_getBounds3D(){const e=this.elevation;if(!e.visibleDemTiles.length)return this._getBounds(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBounds(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileTransform(this,t).createTileMatrix(e)}calculateDistanceTileData(t){const n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=t.canonical,o=1/this.height,a=this.cameraWorldSize/this.zoomScale(i.z),s=(i.x+Math.pow(2,i.z)*t.wrap)*a,l=i.y*a,c=this.point,u=this.angle,h=Math.sin(-u),d=-Math.cos(-u);return r[n]={bearing:[h,d],center:[(c.x-s)*o,(c.y-l)*o],scale:a/e.EXTENT*o},r[n]}calculateFogTileMatrix(t){const n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.calculatePosMatrix(t,this.cameraWorldSize);return e.multiply$1(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(t,n=!1){const r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(t,this.worldSize);return e.multiply$1(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(t){const n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(t,n){const{scale:r}=t.tileTransform,i=r*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return o=new Float32Array(4),l=(a=n.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],d=(s=[i,i])[1],o[0]=a[0]*(h=s[0]),o[1]=l*h,o[2]=c*d,o[3]=u*d,o;var o,a,s,l,c,u,h,d}(t,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,e.normalize(i,i);const a=t.raycast(r,i,t.exaggeration());if(a){const t=e.scaleAndAdd([],r,i,a),n=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(n.z+e.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._projectionScaler;this._cameraZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=t.getAtPointOrZero(new e.MercatorCoordinate(...r)),o=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),a=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*i;if(a<o){const t=this.locationCoordinate(this._center,this._centerAltitude),n=[t.x-r[0],t.y-r[1],t.z-r[2]],i=e.length(n);n[2]-=(o-a)/this._projectionScaler;const s=e.length(n);if(0===s)return;e.scale$2(n,n,i/s*this._projectionScaler),this._camera.position=[t.x-n[0],t.y-n[1],t.z*this._projectionScaler-n[2]],this._camera.orientation=_r(n,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const t=this.center;return t.lat=e.clamp(t.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(t.lng=e.clamp(t.lng,this.minLng,this.maxLng)),this.center=t,void(this._constraining=!1)}const t=this._unmodified,{x:n,y:r}=this.point;let i=0,o=n,a=r;const s=this.width/2,l=this.height/2,c=this.worldMinY*this.scale,u=this.worldMaxY*this.scale;if(r-l<c&&(a=c+l),r+l>u&&(a=u-l),u-c<this.height&&(i=Math.max(i,this.height/(u-c)),a=(u+c)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,r=this.worldSize/2-(e+t)/2;o=(n+r+this.worldSize)%this.worldSize-r,o-s<e&&(o=e+s),o+s>t&&(o=t-s),t-e<this.width&&(i=Math.max(i,this.width/(t-e)),o=(t+e)/2)}o===n&&a===r||(this.center=this.unproject(new e.pointGeometry(o,a))),i&&(this.zoom+=this.scaleZoom(i)),this._constrainCameraAltitude(),this._unmodified=t,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this._fov/2,n=this.centerOffset,r=this.pixelsPerMeter;this._projectionScaler=r/(e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize),this.cameraToCenterDistance=.5/Math.tan(t)*this.height*this._projectionScaler,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const o=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?r:1),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-n.x/this.width,a[9]=2*n.y/this.height;let s=e.mul([],a,o);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),n=e.identity([]);e.translate(n,n,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply$1(n,n,br(this)),e.translate(n,n,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply$1(s,s,n),this.inverseAdjustmentMatrix=function(e){const t=br(e,!0);return i([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/r,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=new Float32Array(16);e.identity(l),e.scale(l,l,[1,-1,1]),e.rotateX(l,l,this._pitch),e.rotateZ(l,l,this.angle);const c=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),u=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;c[8]=2*-n.x/this.width,c[9]=2*(n.y+u)/this.height,this.skyboxMatrix=e.multiply$1(l,c,l);const h=this.point,d=h.x,p=h.y,f=this.width%2/2,m=this.height%2/2,g=Math.cos(this.angle),y=Math.sin(this.angle),_=d-Math.round(d)+g*f+y*m,v=p-Math.round(p)+g*m+y*f,x=new Float64Array(s);if(e.translate(x,x,[_>.5?_-1:_,v>.5?v-1:v,0]),this.alignedProjMatrix=x,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply$1(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSize,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height,o=[t,t,n];e.scale$2(o,o,i),e.scale$2(r,r,-1),e.multiply$2(r,r,o);const a=e.create();e.translate(a,a,r),e.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=t[2];let i=1;r>0&&(i=Math.min((n-this._camera.position[2])/r,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,i),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}anyCornerOffEdge(t,n){const r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.pointGeometry(r,o),new e.pointGeometry(i,a),new e.pointGeometry(r,a),new e.pointGeometry(i,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,n){const r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}function Mr(e,t){let n=!1,r=null;const i=()=>{r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return()=>(n=!0,r||i(),r)}class Ir{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Mr(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=t?`/${a}/${s}/${r}`:`${r}/${s}/${a}`,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),this._hashName){const t=this._hashName;let n=!1;const r=e.window.location.hash.slice(1).split("&").map((e=>{const r=e.split("=")[0];return r===t?(n=!0,`${r}=${u}`):e})).filter((e=>e));return n||r.push(`${t}=${u}`),`#${r.join("&")}`}return`#${u}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}const Pr={linearity:.3,easing:e.bezier(0,0,.3,1)},Ar=e.extend({deceleration:2500,maxSpeed:1400},Pr),Dr=e.extend({deceleration:20,maxSpeed:1400},Pr),zr=e.extend({deceleration:1e3,maxSpeed:360},Pr),Rr=e.extend({deceleration:1e3,maxSpeed:90},Pr);class Or{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=Fr(n.pan.mag(),r,e.extend({},Ar,t||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,Lr(i,o)}if(n.zoom){const e=Fr(n.zoom,r,Dr);i.zoom=this._map.transform.zoom+e.amount,Lr(i,e)}if(n.bearing){const t=Fr(n.bearing,r,zr);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),Lr(i,t)}if(n.pitch){const e=Fr(n.pitch,r,Rr);i.pitch=this._map.transform.pitch+e.amount,Lr(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),e.extend(i,{noMoveStart:!0})}}function Lr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Fr(t,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class Br extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r,i={}){const o=a.mousePos(n.getCanvasContainer(),r),s=n.unproject(o);super(t,e.extend({point:o,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class Nr extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r){const i="touchend"===t?r.changedTouches:r.touches,o=a.touchPos(n.getCanvasContainer(),i),s=o.map((e=>n.unproject(e))),l=o.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new e.pointGeometry(0,0));super(t,{points:o,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class Ur extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class jr{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Ur(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Br(e.type,this._map,e))}mouseup(e){this._map.fire(new Br(e.type,this._map,e))}preclick(t){const n=e.extend({},t);n.type="preclick",this._map.fire(new Br(n.type,this._map,n))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new Br(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new Br(e.type,this._map,e))}mouseover(e){this._map.fire(new Br(e.type,this._map,e))}mouseout(e){this._map.fire(new Br(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Nr(e.type,this._map,e))}touchmove(e){this._map.fire(new Nr(e.type,this._map,e))}touchend(e){this._map.fire(new Nr(e.type,this._map,e))}touchcancel(e){this._map.fire(new Nr(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vr{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Br(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Br("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Br(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $r{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(a.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${i}px,${s}px)`,this._box.style.width=o-i+"px",this._box.style.height=l-s+"px")}))}mouseupWindow(t,n){if(!this._active)return;if(0!==t.button)return;const r=this._startPos,i=n;if(this.reset(),a.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function qr(e,t){const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class Gr{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const n=new e.pointGeometry(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=qr(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=qr(n,t);for(const e in this.touches){const t=this.touches[e],n=r[e];(!n||n.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Wr{constructor(e){this.singleTap=new Gr(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class Zr{constructor(){this._zoomIn=new Wr({numTouches:1,numTaps:2}),this._zoomOut=new Wr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Hr={0:1,2:2};class Xr{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=a.mouseButton(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),function(e,t){const n=Hr[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&a.mouseButton(e)===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yr extends Xr{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class Kr extends Xr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class Qr extends Xr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class Jr{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length)return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.preventDefault(),this._calculateTransform(e,t,n)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,r){r.length>0&&(this._active=!0);const i=qr(r,n),o=new e.pointGeometry(0,0),a=new e.pointGeometry(0,0);let s=0;for(const e in i){const t=i[e],n=this._touches[e];n&&(o._add(t),a._add(t.sub(n)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=a.create("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")}),500)}}class ei{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){if(!this._firstTwoTouches)return;e.preventDefault();const[r,i]=this._firstTwoTouches,o=ti(n,t,r),a=ti(n,t,i);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=ti(n,t,r),s=ti(n,t,i);o&&s||(this._active&&a.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ti(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function ni(e,t){return Math.log(e/t)/Math.LN2}class ri extends ei{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(ni(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ni(this._distance,n),pinchAround:t}}}function ii(e,t){return 180*e.angleWith(t)/Math.PI}class oi extends ei{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ii(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=ii(e,this._startVector);return Math.abs(n)<t}}function ai(e){return Math.abs(e.y)>Math.abs(e.x)}class si extends ei{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(e){this._lastPoints=e,ai(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){const r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);if(!(this._map._cooperativeGestures&&n.touches.length<3)&&(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid))return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return ai(e)&&ai(t)&&o}}const li={panStep:100,bearingStep:15,pitchStep:10};class ci{constructor(){const e=li;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:ui,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ui(e){return e*(2-e)}const hi=4.000244140625;class di{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%hi==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=a.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform,n=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>hi?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),n=o(t);a=e.number(i,r,n),t<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.exported.now()-t.start)/t.duration,i=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=a.create("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!e.window.document.fullscreenElement}_showBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")}),200)}}class pi{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mi{constructor(){this._tap=new Wr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gi{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class yi{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _i{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const vi=e=>e.zoom||e.drag||e.pitch||e.rotate;class xi extends e.Event{}class bi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),r=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),i=e.add([],n,e.scale$2([],e.sub([],e.add([],r,t),n),2));n[0]=i[0],n[1]=i[1]}return n}}function wi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Ti{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Or(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new bi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,n,r]of this._listeners)t.addEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(const[t,n,r]of this._listeners)t.removeEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new jr(t,e));const r=t.boxZoom=new $r(t,e);this._add("boxZoom",r);const i=new Zr,o=new fi;t.doubleClickZoom=new pi(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new mi;this._add("tapDragZoom",a);const s=t.touchPitch=new si(t);this._add("touchPitch",s);const l=new Kr(e),c=new Qr(e);t.dragRotate=new yi(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Yr(e),h=new Jr(t,e);t.dragPan=new gi(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new oi,p=new ri;t.touchZoomRotate=new _i(n,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Vr(t));const f=t.scrollZoom=new di(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new ci;this._add("keyboard",m);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[n]&&t[n].enable(e[n])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(vi(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){this._updatingCamera=!0;const n="renderFrame"===e.type,r=n?void 0:e,i={needsRenderFrame:!1},o={},s={},l=e.touches?this._getMapTouches(e.touches):void 0,c=l?a.touchPos(this._el,l):n?void 0:a.mousePos(this._el,e);for(const{handlerName:n,handler:a,allowed:u}of this._handlers){if(!a.isEnabled())continue;let h;this._blockedByActive(s,u,n)?a.reset():a[t||e.type]&&(h=a[t||e.type](e,c,l),this.mergeHandlerResult(i,o,h,n,r),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||a.isActive())&&(s[n]=a)}const u={};for(const e in this._previousActiveHandlers)s[e]||(u[e]=r);this._previousActiveHandlers=s,(Object.keys(u).length||wi(i))&&(this._changes.push([i,o,u]),this._triggerRenderFrame()),(Object.keys(s).length||wi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=i;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(t,n,r,i,o){if(!r)return;e.extend(t,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const t={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(n,o),e.extend(r,a);this._updateMapTransform(t,n,r),this._changes=[]}_updateMapTransform(t,n,r){const i=this._map,o=i.transform,a=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!wi(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(!wi(t))return this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:p}=t;void 0!==p&&(h=p),(e=>n.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s){const e=o.pointCoordinate(h),t=o.pointCoordinate(h.sub(s));e&&t&&(f[0]=t.x-e.x,f[1]=t.y-e.y)}const m=o.zoom,g=[0,0,0];if(l){const t=a(d||o.pointCoordinate3D(h)),n={dir:e.normalize([],e.sub([],t,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(t,l);e.scale$2(g,n.dir,r)}}const y=e.add(f,f,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}_fireEvents(t,n,r){const i=vi(this._eventsInProgress),o=vi(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=n),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||r,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=vi(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new xi("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ei="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Si extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}panTo(t,n,r){return this.easeTo(e.extend({center:t},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_cameraForBoxAndBearing(t,n,r,i){const o=this._extendCameraOptions(i),a=this.transform,s=a.padding,l=a.project(e.LngLat.convert(t)),c=a.project(e.LngLat.convert(n)),u=l.rotate(-e.degToRad(r)),h=c.rotate(-e.degToRad(r)),d=new e.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),p=new e.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),f=d.sub(p),m=(a.width-(s.left+s.right+o.padding.left+o.padding.right))/f.x,g=(a.height-(s.top+s.bottom+o.padding.top+o.padding.bottom))/f.y;if(g<0||m<0)return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),o.maxZoom),_="number"==typeof o.offset.x?new e.pointGeometry(o.offset.x,o.offset.y):e.pointGeometry.convert(o.offset),v=new e.pointGeometry((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(r*Math.PI/180),x=_.add(v).mult(a.scale/a.zoomScale(y));return{center:a.unproject(l.add(c).div(2).sub(x)),zoom:y,bearing:r}}_cameraForBox(t,n,r,i,o){const a=this._extendCameraOptions(o);r=r||0,i=i||0,t=e.LngLat.convert(t),n=e.LngLat.convert(n);const s=this.transform.clone();s.padding=a.padding;const l=this.getFreeCameraOptions(),c=new e.LngLat(.5*(t.lng+n.lng),.5*(t.lat+n.lat)),u=.5*(r+i);if(s._camera.position[2]<e.mercatorZfromAltitude(u,c.lat))return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),s.setFreeCameraOptions(l);const h=e.MercatorCoordinate.fromLngLat(t),d=e.MercatorCoordinate.fromLngLat(n),p=s.pointRayIntersection(s.centerPoint,u),f=[(m=s.rayIntersectionCoordinate(p)).x,m.y,m.z];var m;const g=s.screenPointToMercatorRay(s.centerPoint),y="globe"!==s.projection.name;let _,v=0;do{const n=Math.floor(s.zoom),o=1<<n,a=Math.min(o*h.x,o*d.x),l=Math.min(o*h.y,o*d.y),c=Math.max(o*h.x,o*d.x),u=Math.max(o*h.y,o*d.y),p=new e.Aabb([a,l,r],[c,u,i]),m=e.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,n,y);if(2!==p.intersects(m)){_&&(s._camera.position=e.scaleAndAdd([],s._camera.position,g.dir,-_),s._updateStateFromCamera());break}const v=e.sub([],s._camera.position,f);_=.5*e.length(v),s._camera.position=e.scaleAndAdd([],s._camera.position,g.dir,_);try{s._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++v<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}_raycastElevationBox(t,n){const r=this.transform.elevation;if(!r)return;const i=new e.pointGeometry(t.x,n.y),o=new e.pointGeometry(n.x,t.y),a=r.pointCoordinate(t);if(!a)return;const s=r.pointCoordinate(n);if(!s)return;const l=r.pointCoordinate(i);if(!l)return;const c=r.pointCoordinate(o);if(!c)return;const u=new e.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new e.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),p=new e.MercatorCoordinate(c[0],c[1]).toLngLat(),f=Math.min(u.lng,Math.min(h.lng,Math.min(d.lng,p.lng))),m=Math.min(u.lat,Math.min(h.lat,Math.min(d.lat,p.lat))),g=Math.max(u.lng,Math.max(h.lng,Math.max(d.lng,p.lng))),y=Math.max(u.lat,Math.max(h.lat,Math.max(d.lat,p.lat))),_=Math.min(a[3],Math.min(s[3],Math.min(l[3],c[3]))),v=Math.max(a[3],Math.max(s[3],Math.max(l[3],c[3])));return{minLngLat:new e.LngLat(f,m),maxLngLat:new e.LngLat(g,y),minAltitude:_,maxAltitude:v}}fitScreenCoordinates(t,n,r,i,o){let a,s,l,c;const u=e.pointGeometry.convert(t),h=e.pointGeometry.convert(n),d=this._raycastElevationBox(u,h);if(d)a=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,c=d.maxAltitude;else{if(this.transform.anyCornerOffEdge(u,h))return this;a=this.transform.pointLocation(u),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(n)),r,i):this._cameraForBox(a,s,l,c,i),i,o)}_fitInternal(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(t,n){this.stop();const r=t.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Ei),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return void e.warnOnce(Ei);this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);const s=i!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),c&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,d=e.pointGeometry.convert(t.offset);let p=r.centerPoint.add(d);const f="globe"===r.projection.name?r.pointCoordinate(p).toLngLat():r.pointLocation(p),m=e.LngLat.convert(t.center||f);this._normalizeCenter(m);const g=r.project(f),y=r.project(m).sub(g),_=r.zoomScale(l-i);let v,x;t.around&&(v=e.LngLat.convert(t.around),x=r.locationPoint(v));const b=this._zooming||l!==i,w=this._rotating||o!==c,T=this._pitching||u!==a,E=!r.isPaddingEqual(h),S=r=>f=>{if(b&&(r.zoom=e.number(i,l,f)),w&&(r.bearing=e.number(o,c,f)),T&&(r.pitch=e.number(a,u,f)),E&&(r.interpolatePadding(s,h,f),p=r.centerPoint.add(d)),v)r.setLocationAtPoint(v,x);else{const e=r.zoomScale(r.zoom-i),t=l>i?Math.min(2,_):Math.max(.5,_),n=Math.pow(t,1-f),o=r.unproject(g.add(y.mult(f*n)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,p)}return t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(S,t.duration,r);return this._preloadTiles(e),this}const k={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=b,this._rotating=w,this._pitching=T,this._padding=E,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,k),this._ease(S(r),(e=>{r.recenterOnTerrain(),this._afterEase(n,e)}),t),this}_prepareEase(t,n,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(!t.essential&&e.exported.prefersReducedMotion){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,d=r.zoomScale(l-i),p=e.pointGeometry.convert(t.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=r.project(m),_=r.project(g).sub(y);let v=t.curve;const x=Math.max(r.width,r.height),b=x/d,w=_.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,i,l),r.minZoom,r.maxZoom),o=x/r.zoomScale(n-i);v=Math.sqrt(o/w*2)}const T=v*v;function E(e){const t=(b*b-x*x+(e?-1:1)*T*T*w*w)/(2*(e?b:x)*T*w);return Math.log(Math.sqrt(t*t+1)-t)}function S(e){return(Math.exp(e)-Math.exp(-e))/2}function k(e){return(Math.exp(e)+Math.exp(-e))/2}const C=E(0);let M=function(e){return k(C)/k(C+v*e)},I=function(e){return x*((k(C)*(S(t=C+v*e)/k(t))-S(C))/T)/w;var t},P=(E(1)-C)/v;if(Math.abs(w)<1e-6||!isFinite(P)){if(Math.abs(x-b)<1e-6)return this.easeTo(t,n);const e=b<x?-1:1;P=Math.abs(Math.log(b/x))/v,I=function(){return 0},M=function(t){return Math.exp(e*v*t)}}t.duration="duration"in t?+t.duration:1e3*P/("screenSpeed"in t?+t.screenSpeed/v:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const A=o!==c,D=u!==a,z=!r.isPaddingEqual(h),R=r=>d=>{const m=d*P,v=1/M(m);r.zoom=1===d?l:i+r.scaleZoom(v),A&&(r.bearing=e.number(o,c,d)),D&&(r.pitch=e.number(a,u,d)),z&&(r.interpolatePadding(s,h,d),f=r.centerPoint.add(p));const x=1===d?g:r.unproject(y.add(_.mult(I(m))).mult(v));return r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,f),r._updateCenterElevation(),t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(R,t.duration,r);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=A,this._pitching=D,this._padding=z,this._prepareEase(n,!1),this._ease(R(r),(()=>this._afterEase(n)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}_emulate(e,t,n){const r=Math.ceil(15*t/1e3),i=[],o=e(n.clone());for(let e=0;e<=r;e++){const t=o(e/r);i.push(t.clone())}return i}}class ki{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=a.create("button","mapboxgl-ctrl-attrib-button",this._container),a.create("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden",!0),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const r=n.reduce(((e,t,r)=>(t.value&&(e+=`${t.key}=${t.value}${r<n.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${r}${this._map._hash?this._map._hash.getHashString(!0):""}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const n in t){const r=t[n];if(r.used){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ci{constructor(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)}onAdd(e){this._map=e,this._container=a.create("div","mapboxgl-ctrl");const t=a.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Mi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const t of n)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ii(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?t=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const Pi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ai extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,this._updateMoving=()=>this._update(!0),t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div");const n=41,r=27,i=a.createSVG("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:`0 0 ${r} ${n}`},this._element),o=a.createSVG("radialGradient",{id:"shadowGradient"},a.createSVG("defs",{},i));a.createSVG("stop",{offset:"10%","stop-opacity":.4},o),a.createSVG("stop",{offset:"100%","stop-opacity":.05},o),a.createSVG("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a.createSVG("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a.createSVG("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a.createSVG("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const r=this._element.classList;for(const e in Pi)r.remove(`mapboxgl-marker-anchor-${e}`);r.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick)),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._updateMoving),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_evaluateOpacity(){const e=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(e))return void this._clearFadeTimer();const t=this._map.unproject(e);let n=!1;if(this._map.transform._terrainEnabled()&&this._map.getTerrain()){const e=this._map.getFreeCameraOptions();if(e.position){const r=e.position.toLngLat();n=r.distanceTo(t)<.9*r.distanceTo(this._lngLat)}}const r=(1-this._map._queryFogOpacity(t))*(n?.2:1);this._element.style.opacity=`${r}`,this._popup&&this._popup._setOpacity(`${r}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(e){const t=this._map.transform;return!!e&&e.x>=0&&e.x<t.width&&e.y>=0&&e.y<t.height}_updateDOM(){const t=this._pos||new e.pointGeometry(0,0),n=this._calculatePitch(),r=this._calculateRotation();this._element.style.transform=`${Pi[this._anchor]} translate(${t.x}px, ${t.y}px) rotateX(${n}deg) rotateZ(${r}deg)`}_calculatePitch(){return"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?0:"map"===this._pitchAlignment?this._map.getPitch():0}_calculateRotation(){return"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?this._rotation:"map"===this._rotationAlignment?this._rotation-this._map.getBearing():0}_update(t){e.window.cancelAnimationFrame(this._updateFrameId),this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Ii(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),this._map._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}_transformedOffset(){if(!this._defaultMarker)return this._offset;const e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Di{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}const zi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},{HTMLImageElement:Ri,HTMLElement:Oi,ImageBitmap:Li}=e.window,Fi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Bi(e){e.parentNode&&e.parentNode.removeChild(e)}const Ni={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ui{constructor(t,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new Kr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new Qr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),a.disableDrag()}move(e,t){const n=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){a.enableDrag(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),a.mousePos(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,a.mousePos(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ji={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Vi,$i=0,qi=!1;const Gi={maxWidth:100,unit:"metric"};function Wi(e,t,n){const r=n&&n.maxWidth||100,i=e._containerHeight/2,o=e.unproject([0,i]),a=e.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?Zi(t,r,n/5280,e._getUIString("ScaleControl.Miles"),e):Zi(t,r,n,e._getUIString("ScaleControl.Feet"),e)}else n&&"nautical"===n.unit?Zi(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles"),e):s>=1e3?Zi(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers"),e):Zi(t,r,s,e._getUIString("ScaleControl.Meters"),e)}function Zi(e,t,n,r,i){const o=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n),a=o/n;i._requestDomTask((()=>{e.style.width=t*a+"px",e.innerHTML=`${o}&nbsp;${r}`}))}const Hi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Xi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Yi={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Si{constructor(t){if(null!=(t=e.extend({},Fi,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Cr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._renderTaskQueue=new Mi,this._domRenderTaskQueue=new Mi,this._controls=[],this._markers=[],this._mapId=e.uniqueId(),this._locale=e.extend({},zi,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Di(0),this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof Oi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Ti(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Ir("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new ki({customAttribution:t.customAttribution})),this._logoControl=new Ci,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}getProjection(){return this.transform.getProjection()}setProjection(e){return this._lazyInitEmptyStyle(),"string"==typeof e&&(e={name:e}),this._runtimeProjection=e,this.style.updateProjection(),this._transitionFromGlobe=!1,this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new Br(e,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new Br(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new Br(e,this,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=t.filter((e=>this.getLayer(e))),i=r.length?this.queryRenderedFeatures(e.point,{layers:r}):[];i.length&&(e.features=i,n.call(this,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const e in r.delegates)this.on(e,r.delegates[e]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);for(const e in r.delegates)this.once(e,r.delegates[e]);return this}off(e,t,n){if(void 0===n)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const r=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.listener===n&&r(o.layers,t)){for(const e in o.delegates)this.off(e,o.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}queryTerrainElevation(t,n){const r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new Ut(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ut(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const r=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(i,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(t){const n=this.style&&this.style._getSourceCaches(t);if(0!==n.length)return n.every((e=>e.loaded()));this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`)))}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof Ri||Li&&n instanceof Li){const{width:l,height:c,data:u}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=n,h=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t)}}}updateImage(t,n){const r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof Ri||Li&&n instanceof Li?e.exported.getImageData(n):n,{width:o,height:a,data:s}=i;return void 0===o||void 0===a?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof Ri||Li&&n instanceof Li)),void this.style.updateImage(t,r))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,r)=>{n(t,r instanceof Ri?e.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,r={}){return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,r={}){return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}_updateProjection(){"globe"===this.transform.projection.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX&&!this._transitionFromGlobe&&(this.setProjection({name:"mercator"}),this._transitionFromGlobe=!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i=this._container;for(;i&&!r;){const t=e.window.getComputedStyle(i).transform;t&&"none"!==t&&(r=t.match(/matrix.*\((.+)\)/)[1].split(", ")),i=i.parentElement}r?(this._containerWidth=r[0]&&"0"!==r[0]?Math.abs(t/r[0]):t,this._containerHeight=r[3]&&"0"!==r[3]?Math.abs(n/r[3]):n):(this._containerWidth=t,this._containerHeight=n)}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=a.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=a.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=a.create("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{r[e]=a.create("div",`mapboxgl-ctrl-${e}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${n}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_setupPainter(){const n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(e.storeAuthState(r,!0),this.painter=new pr(r,this.transform),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let n;const r=this.painter.context.extTimerQuery,i=e.exported.now();this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n));let o=this._updateAverageElevation(i);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjection();let a=!1;const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=this.transform.pitch,r=e.exported.now();this.style.zoomHistory.update(t,r);const i=new e.EvaluationParameters(t,{now:r,fadeDuration:s,pitch:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(a=!0,this._crossFadingFactor=o),this.style.update(i)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform),this._forceMarkerUpdate()),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const t=e.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const i=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:i}))}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const l=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(l||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(o=this._updateAverageElevation(i,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||l||(this._fullyLoaded=!0,this._authenticate()),this}_forceMarkerUpdate(){for(const e of this._markers)e._update()}_updateAverageElevation(e,t=!1){const n=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let r=this.transform.sampleAverageElevation();isNaN(r)?r=0:this._averageElevationLastSampledAt=e;const i=Math.abs(t-r);if(i>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,e,300)}else if(i>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Ci&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,n){let r=n[1]-n[0];const i=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),Bi(this._canvasContainer),Bi(this._controlContainer),Bi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const n=this.style&&Object.values(this.style._sourceCaches)||[];return e.asyncAll(n,((e,n)=>e._preloadTiles(t,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},Ni,t),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=e)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ui(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){this._container.remove(),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const n=a.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){const n=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({},ji,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=Mr(this._updateMarkerRotation,20)}onAdd(t){var n;return this._map=t,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Vi?n(Vi):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>{Vi="denied"!==e.state,n(Vi)})):(Vi=!!e.window.navigator.geolocation,n(Vi)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,$i=0,qi=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map._containerHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([100,e]),r=t.distanceTo(n)/100,i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&qi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location"),this._dotElement.appendChild(a.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(a.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ai({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ai({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$i--,qi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$i++,$i>1?(t={maximumAge:6e5,timeout:0},qi=!0):(t=this.options.positionOptions,qi=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ki,ScaleControl:class{constructor(t){this.options=e.extend({},Gi,t),e.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Wi(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,Wi(this._map,this._container,this.options)}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(Hi),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("preclick",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&this._content.remove(),this._container&&(this._container.remove(),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");let i;for(r.innerHTML=t;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=a.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._container&&this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._container&&this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._container&&this._updateClassList(),t}_createCloseButton(){this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.setAttribute("aria-hidden","true"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._pos,n=this._container.offsetWidth,r=this._container.offsetHeight;let i;return i=t.y+e.bottom.y<r?["top"]:t.y>this._map.transform.height-r?["bottom"]:[],t.x<n/2?i.push("left"):t.x>this._map.transform.width-n/2&&i.push("right"),0===i.length?"bottom":i.join("-")}_updateClassList(){const e=[...this._classList];e.push("mapboxgl-popup"),this._anchor&&e.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),this._container.className=e.join(" ")}_update(t){if(this._map&&(this._lngLat||this._trackPointer)&&this._content){if(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ii(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t){const n=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),r=function(t){if(t||(t=new e.pointGeometry(0,0)),"number"==typeof t){const n=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new e.pointGeometry(0,0),top:new e.pointGeometry(0,t),"top-left":new e.pointGeometry(n,n),"top-right":new e.pointGeometry(-n,n),bottom:new e.pointGeometry(0,-t),"bottom-left":new e.pointGeometry(n,-n),"bottom-right":new e.pointGeometry(-n,-n),left:new e.pointGeometry(t,0),right:new e.pointGeometry(-t,0)}}if(t instanceof e.pointGeometry||Array.isArray(t)){const n=e.pointGeometry.convert(t);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:e.pointGeometry.convert(t.center||[0,0]),top:e.pointGeometry.convert(t.top||[0,0]),"top-left":e.pointGeometry.convert(t["top-left"]||[0,0]),"top-right":e.pointGeometry.convert(t["top-right"]||[0,0]),bottom:e.pointGeometry.convert(t.bottom||[0,0]),"bottom-left":e.pointGeometry.convert(t["bottom-left"]||[0,0]),"bottom-right":e.pointGeometry.convert(t["bottom-right"]||[0,0]),left:e.pointGeometry.convert(t.left||[0,0]),right:e.pointGeometry.convert(t.right||[0,0])}}(this.options.offset),i=this._anchor=this._getAnchor(r),o=n.add(r[i]).round();this._map._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${Pi[i]} translate(${o.x}px,${o.y}px)`)}))}this._updateClassList()}}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(Xi);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._content&&(this._content.style.opacity=e),this._tip&&(this._tip.style.opacity=e)}},Marker:Ai,Style:Ut,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:vr,Evented:e.Evented,config:e.config,prewarm:function(){De().acquire(Ie)},clearPrewarmedResources:function(){const e=Ae;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Ie),Ae=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Pe.workerCount},set workerCount(e){Pe.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return Yi})),n}()},418:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(l[u]=a[u]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},40:function(e,t,n){"use strict";var r=function(){},i=n(414),o={},a=n(130);function s(e,t,n,s,l){for(var c in e)if(a(e,c)){var u;try{if("function"!=typeof e[c]){var h=Error((s||"React class")+": "+n+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw h.name="Invariant Violation",h}u=e[c](t,c,s,n,null,i)}catch(e){u=e}if(!u||u instanceof Error||r((s||"React class")+": type specification of "+n+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof u+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),u instanceof Error&&!(u.message in o)){o[u.message]=!0;var d=l?l():"";r("Failed "+n+" type: "+u.message+(null!=d?d:""))}}}r=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},s.resetWarningCache=function(){o={}},e.exports=s},805:function(e,t,n){"use strict";var r,i=n(864),o=n(418),a=n(414),s=n(130),l=n(40);function c(){return null}r=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,u="<<anonymous>>",h={array:m("array"),bigint:m("bigint"),bool:m("boolean"),func:m("function"),number:m("number"),object:m("object"),string:m("string"),symbol:m("symbol"),any:f(c),arrayOf:function(e){return f((function(t,n,r,i,o){if("function"!=typeof e)return new p("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new p("Invalid "+i+" `"+o+"` of type `"+_(s)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<s.length;l++){var c=e(s,l,r,i,o+"["+l+"]",a);if(c instanceof Error)return c}return null}))},element:f((function(t,n,r,i,o){var a=t[n];return e(a)?null:new p("Invalid "+i+" `"+o+"` of type `"+_(a)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:f((function(e,t,n,r,o){var a=e[t];return i.isValidElementType(a)?null:new p("Invalid "+r+" `"+o+"` of type `"+_(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return f((function(t,n,r,i,o){if(!(t[n]instanceof e)){var a=e.name||u;return new p("Invalid "+i+" `"+o+"` of type `"+((s=t[n]).constructor&&s.constructor.name?s.constructor.name:u)+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}var s;return null}))},node:f((function(e,t,n,r,i){return y(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return f((function(t,n,r,i,o){if("function"!=typeof e)return new p("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var l=t[n],c=_(l);if("object"!==c)return new p("Invalid "+i+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var u in l)if(s(l,u)){var h=e(l,u,r,i,o+"."+u,a);if(h instanceof Error)return h}return null}))},oneOf:function(e){if(!Array.isArray(e))return r(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),c;function t(t,n,r,i,o){for(var a=t[n],s=0;s<e.length;s++)if(d(a,e[s]))return null;var l=JSON.stringify(e,(function(e,t){return"symbol"===v(t)?String(t):t}));return new p("Invalid "+i+" `"+o+"` of value `"+String(a)+"` supplied to `"+r+"`, expected one of "+l+".")}return f(t)},oneOfType:function(e){if(!Array.isArray(e))return r("Invalid argument supplied to oneOfType, expected an instance of array."),c;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return r("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+x(n)+" at index "+t+"."),c}return f((function(t,n,r,i,o){for(var l=[],c=0;c<e.length;c++){var u=(0,e[c])(t,n,r,i,o,a);if(null==u)return null;u.data&&s(u.data,"expectedType")&&l.push(u.data.expectedType)}return new p("Invalid "+i+" `"+o+"` supplied to `"+r+"`"+(l.length>0?", expected one of type ["+l.join(", ")+"]":"")+".")}))},shape:function(e){return f((function(t,n,r,i,o){var s=t[n],l=_(s);if("object"!==l)return new p("Invalid "+i+" `"+o+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if("function"!=typeof u)return g(r,i,o,c,v(u));var h=u(s,c,r,i,o+"."+c,a);if(h)return h}return null}))},exact:function(e){return f((function(t,n,r,i,l){var c=t[n],u=_(c);if("object"!==u)return new p("Invalid "+i+" `"+l+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var h=o({},t[n],e);for(var d in h){var f=e[d];if(s(e,d)&&"function"!=typeof f)return g(r,i,l,d,v(f));if(!f)return new p("Invalid "+i+" `"+l+"` key `"+d+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=f(c,d,r,i,l+"."+d,a);if(m)return m}return null}))}};function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function f(e){var n={},i=0;function o(o,s,l,c,h,d,f){if(c=c||u,d=d||l,f!==a){if(t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}if("undefined"!=typeof console){var g=c+":"+l;!n[g]&&i<3&&(r("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+c+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[g]=!0,i++)}}return null==s[l]?o?null===s[l]?new p("The "+h+" `"+d+"` is marked as required in `"+c+"`, but its value is `null`."):new p("The "+h+" `"+d+"` is marked as required in `"+c+"`, but its value is `undefined`."):null:e(s,l,c,h,d)}var s=o.bind(null,!1);return s.isRequired=o.bind(null,!0),s}function m(e){return f((function(t,n,r,i,o,a){var s=t[n];return _(s)!==e?new p("Invalid "+i+" `"+o+"` of type `"+v(s)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}))}function g(e,t,n,r,i){return new p((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!y(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!y(a[1]))return!1}return!0;default:return!1}}function _(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function v(e){if(null==e)return""+e;var t=_(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function x(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,h.checkPropTypes=l,h.resetWarningCache=l.resetWarningCache,h.PropTypes=h,h}},697:function(e,t,n){var r=n(864);e.exports=n(805)(r.isElement,!0)},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},130:function(e){e.exports=Function.call.bind(Object.prototype.hasOwnProperty)},116:function(e,t,n){"use strict";!function(){"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=n(294),r=n(840),i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,o=!1;function a(e){if(!o){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l("warn",e,n)}}function s(e){if(!o){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l("error",e,n)}}function l(e,t,n){var r=i.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var o=n.map((function(e){return String(e)}));o.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,o)}var c=10,u=11,h=12,d=13,p=14,f=15,m=17,g=18,y=19,_=22,v=23,x=!1,b=new Set,w={},T={};function E(e,t){S(e,t),S(e+"Capture",t)}function S(e,t){w[e]&&s("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",e),w[e]=t;var n=e.toLowerCase();T[n]=e,"onDoubleClick"===e&&(T.ondblclick=e);for(var r=0;r<t.length;r++)b.add(t[r])}var k=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),C=Object.prototype.hasOwnProperty;function M(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}function I(e){try{return P(e),!1}catch(e){return!0}}function P(e){return""+e}function A(e,t){if(I(e))return s("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",t,M(e)),P(e)}function D(e){if(I(e))return s("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",M(e)),P(e)}function z(e){if(I(e))return s("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",M(e)),P(e)}var R=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",O=R+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",L=new RegExp("^["+R+"]["+O+"]*$"),F={},B={};function N(e){return!!C.call(B,e)||!C.call(F,e)&&(L.test(e)?(B[e]=!0,!0):(F[e]=!0,s("Invalid attribute name: `%s`",e),!1))}function U(e,t,n){return null!==t?0===t.type:!n&&e.length>2&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])}function j(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;var i=e.toLowerCase().slice(0,5);return"data-"!==i&&"aria-"!==i;default:return!1}}function V(e,t,n,r){if(null==t)return!0;if(j(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}function $(e){return G.hasOwnProperty(e)?G[e]:null}function q(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var G={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach((function(e){G[e]=new q(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0],n=e[1];G[t]=new q(t,1,!1,n,null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new q(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new q(e,2,!1,e,null,!1,!1)})),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach((function(e){G[e]=new q(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new q(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){G[e]=new q(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new q(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new q(e,5,!1,e.toLowerCase(),null,!1,!1)}));var W=/[\-\:]([a-z])/g,Z=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach((function(e){var t=e.replace(W,Z);G[t]=new q(t,1,!1,e,null,!1,!1)})),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach((function(e){var t=e.replace(W,Z);G[t]=new q(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(W,Z);G[t]=new q(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new q(e,1,!1,e.toLowerCase(),null,!1,!1)})),G.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){G[e]=new q(e,1,!1,e.toLowerCase(),null,!0,!0)}));var H=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,X=!1;function Y(e){!X&&H.test(e)&&(X=!0,s("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(e)))}function K(e,t,n,r){if(r.mustUseProperty)return e[r.propertyName];A(n,t),r.sanitizeURL&&Y(""+n);var i=r.attributeName,o=null;if(4===r.type){if(e.hasAttribute(i)){var a=e.getAttribute(i);return""===a||(V(t,n,r,!1)?a:a===""+n?n:a)}}else if(e.hasAttribute(i)){if(V(t,n,r,!1))return e.getAttribute(i);if(3===r.type)return n;o=e.getAttribute(i)}return V(t,n,r,!1)?null===o?n:o:o===""+n?n:o}function Q(e,t,n){if(N(t)){if(!e.hasAttribute(t))return void 0===n?void 0:null;var r=e.getAttribute(t);return A(n,t),r===""+n?n:r}}function J(e,t,n,r){var i=$(t);if(!U(t,i,r))if(V(t,n,i,r)&&(n=null),r||null===i){if(N(t)){var o=t;null===n?e.removeAttribute(o):(A(n,t),e.setAttribute(o,""+n))}}else if(i.mustUseProperty){var a=i.propertyName;if(null===n){var s=i.type;e[a]=3!==s&&""}else e[a]=n}else{var l=i.attributeName,c=i.attributeNamespace;if(null===n)e.removeAttribute(l);else{var u,h=i.type;3===h||4===h&&!0===n?u="":(A(n,l),u=""+n,i.sanitizeURL&&Y(u.toString())),c?e.setAttributeNS(c,l,u):e.setAttribute(l,u)}}}var ee=Symbol.for("react.element"),te=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),ae=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),de=(Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode"),Symbol.for("react.offscreen")),pe=(Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker"),Symbol.iterator);function fe(e){if(null===e||"object"!=typeof e)return null;var t=pe&&e[pe]||e["@@iterator"];return"function"==typeof t?t:null}var me,ge,ye,_e,ve,xe,be,we=Object.assign,Te=0;function Ee(){}Ee.__reactDisabledLog=!0;var Se,ke=i.ReactCurrentDispatcher;function Ce(e,t,n){if(void 0===Se)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);Se=r&&r[1]||""}return"\n"+Se+e}var Me,Ie=!1,Pe="function"==typeof WeakMap?WeakMap:Map;function Ae(e,t){if(!e||Ie)return"";var n,r=Me.get(e);if(void 0!==r)return r;Ie=!0;var i,o=Error.prepareStackTrace;Error.prepareStackTrace=void 0,i=ke.current,ke.current=null,function(){if(0===Te){me=console.log,ge=console.info,ye=console.warn,_e=console.error,ve=console.group,xe=console.groupCollapsed,be=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Ee,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Te++}();try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(e){n=e}Reflect.construct(e,[],a)}else{try{a.call()}catch(e){n=e}e.call(a.prototype)}}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var l=t.stack.split("\n"),c=n.stack.split("\n"),u=l.length-1,h=c.length-1;u>=1&&h>=0&&l[u]!==c[h];)h--;for(;u>=1&&h>=0;u--,h--)if(l[u]!==c[h]){if(1!==u||1!==h)do{if(u--,--h<0||l[u]!==c[h]){var d="\n"+l[u].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),"function"==typeof e&&Me.set(e,d),d}}while(u>=1&&h>=0);break}}}finally{Ie=!1,ke.current=i,function(){if(0==--Te){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:we({},e,{value:me}),info:we({},e,{value:ge}),warn:we({},e,{value:ye}),error:we({},e,{value:_e}),group:we({},e,{value:ve}),groupCollapsed:we({},e,{value:xe}),groupEnd:we({},e,{value:be})})}Te<0&&s("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=o}var p=e?e.displayName||e.name:"",f=p?Ce(p):"";return"function"==typeof e&&Me.set(e,f),f}function De(e,t,n){return Ae(e,!1)}function ze(e,t,n){if(null==e)return"";if("function"==typeof e)return Ae(e,!(!(r=e.prototype)||!r.isReactComponent));var r;if("string"==typeof e)return Ce(e);switch(e){case le:return Ce("Suspense");case ce:return Ce("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case se:return De(e.render);case ue:return ze(e.type,t,n);case he:var i=e,o=i._payload,a=i._init;try{return ze(a(o),t,n)}catch(e){}}return""}function Re(e){switch(e._debugOwner&&e._debugOwner.type,e._debugSource,e.tag){case 5:return Ce(e.type);case 16:return Ce("Lazy");case d:return Ce("Suspense");case y:return Ce("SuspenseList");case 0:case 2:case f:return De(e.type);case u:return De(e.type.render);case 1:return Ae(e.type,!0);default:return""}}function Oe(e){try{var t="",n=e;do{t+=Re(n),n=n.return}while(n);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function Le(e){return e.displayName||"Context"}function Fe(e){if(null==e)return null;if("number"==typeof e.tag&&s("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ae:return Le(e)+".Consumer";case oe:return Le(e._context)+".Provider";case se:return function(e,t,n){var r=e.displayName;if(r)return r;var i=t.displayName||t.name||"";return""!==i?"ForwardRef("+i+")":n}(e,e.render,"ForwardRef");case ue:var t=e.displayName||null;return null!==t?t:Fe(e.type)||"Memo";case he:var n=e,r=n._payload,i=n._init;try{return Fe(i(r))}catch(e){return null}}return null}function Be(e){return e.displayName||"Context"}function Ne(e){var t,n,r,i,o=e.tag,a=e.type;switch(o){case 24:return"Cache";case 9:return Be(a)+".Consumer";case c:return Be(a._context)+".Provider";case g:return"DehydratedFragment";case u:return t=a,r="ForwardRef",i=(n=a.render).displayName||n.name||"",t.displayName||(""!==i?"ForwardRef("+i+")":r);case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(a);case 8:return a===re?"StrictMode":"Mode";case _:return"Offscreen";case h:return"Profiler";case 21:return"Scope";case d:return"Suspense";case y:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case m:case 2:case p:case f:if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a}return null}Me=new Pe;var Ue=i.ReactDebugCurrentFrame,je=null,Ve=!1;function $e(){if(null===je)return null;var e=je._debugOwner;return null!=e?Ne(e):null}function qe(){return null===je?"":Oe(je)}function Ge(){Ue.getCurrentStack=null,je=null,Ve=!1}function We(e){Ue.getCurrentStack=qe,je=e,Ve=!1}function Ze(e){Ve=e}function He(e){return""+e}function Xe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return z(e),e;default:return""}}var Ye={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function Ke(e,t){Ye[t.type]||t.onChange||t.onInput||t.readOnly||t.disabled||null==t.value||s("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),t.onChange||t.readOnly||t.disabled||null==t.checked||s("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Qe(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function Je(e){return e._valueTracker}function et(e){Je(e)||(e._valueTracker=function(e){var t=Qe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);z(e[t]);var r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){z(e),r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable});var a={getValue:function(){return r},setValue:function(e){z(e),r=""+e},stopTracking:function(){!function(e){e._valueTracker=null}(e),delete e[t]}};return a}}(e))}function tt(e){if(!e)return!1;var t=Je(e);if(!t)return!0;var n=t.getValue(),r=function(e){var t="";return e?t=Qe(e)?e.checked?"true":"false":e.value:t}(e);return r!==n&&(t.setValue(r),!0)}function nt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var rt=!1,it=!1,ot=!1,at=!1;function st(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function lt(e,t){var n=e,r=t.checked;return we({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:n._wrapperState.initialChecked})}function ct(e,t){Ke(0,t),void 0===t.checked||void 0===t.defaultChecked||it||(s("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",$e()||"A component",t.type),it=!0),void 0===t.value||void 0===t.defaultValue||rt||(s("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",$e()||"A component",t.type),rt=!0);var n=e,r=null==t.defaultValue?"":t.defaultValue;n._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:Xe(null!=t.value?t.value:r),controlled:st(t)}}function ut(e,t){var n=e,r=t.checked;null!=r&&J(n,"checked",r,!1)}function ht(e,t){var n=e,r=st(t);n._wrapperState.controlled||!r||at||(s("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),at=!0),!n._wrapperState.controlled||r||ot||(s("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),ot=!0),ut(e,t);var i=Xe(t.value),o=t.type;if(null!=i)"number"===o?(0===i&&""===n.value||n.value!=i)&&(n.value=He(i)):n.value!==He(i)&&(n.value=He(i));else if("submit"===o||"reset"===o)return void n.removeAttribute("value");t.hasOwnProperty("value")?pt(n,t.type,i):t.hasOwnProperty("defaultValue")&&pt(n,t.type,Xe(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(n.defaultChecked=!!t.defaultChecked)}function dt(e,t,n){var r=e;if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;var o=He(r._wrapperState.initialValue);n||o!==r.value&&(r.value=o),r.defaultValue=o}var a=r.name;""!==a&&(r.name=""),r.defaultChecked=!r.defaultChecked,r.defaultChecked=!!r._wrapperState.initialChecked,""!==a&&(r.name=a)}function pt(e,t,n){"number"===t&&nt(e.ownerDocument)===e||(null==n?e.defaultValue=He(e._wrapperState.initialValue):e.defaultValue!==He(n)&&(e.defaultValue=He(n)))}var ft=!1,mt=!1,gt=!1;function yt(t,n){null==n.value&&("object"==typeof n.children&&null!==n.children?e.Children.forEach(n.children,(function(e){null!=e&&"string"!=typeof e&&"number"!=typeof e&&(mt||(mt=!0,s("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))})):null!=n.dangerouslySetInnerHTML&&(gt||(gt=!0,s("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),null==n.selected||ft||(s("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),ft=!0)}var _t,vt=Array.isArray;function xt(e){return vt(e)}function bt(){var e=$e();return e?"\n\nCheck the render method of `"+e+"`.":""}_t=!1;var wt=["value","defaultValue"];function Tt(e,t,n,r){var i=e.options;if(t){for(var o=n,a={},s=0;s<o.length;s++)a["$"+o[s]]=!0;for(var l=0;l<i.length;l++){var c=a.hasOwnProperty("$"+i[l].value);i[l].selected!==c&&(i[l].selected=c),c&&r&&(i[l].defaultSelected=!0)}}else{for(var u=He(Xe(n)),h=null,d=0;d<i.length;d++){if(i[d].value===u)return i[d].selected=!0,void(r&&(i[d].defaultSelected=!0));null!==h||i[d].disabled||(h=i[d])}null!==h&&(h.selected=!0)}}function Et(e,t){return we({},t,{value:void 0})}function St(e,t){var n=e;!function(e){Ke(0,e);for(var t=0;t<wt.length;t++){var n=wt[t];if(null!=e[n]){var r=xt(e[n]);e.multiple&&!r?s("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",n,bt()):!e.multiple&&r&&s("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",n,bt())}}}(t),n._wrapperState={wasMultiple:!!t.multiple},void 0===t.value||void 0===t.defaultValue||_t||(s("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),_t=!0)}var kt=!1;function Ct(e,t){var n=e;if(null!=t.dangerouslySetInnerHTML)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");return we({},t,{value:void 0,defaultValue:void 0,children:He(n._wrapperState.initialValue)})}function Mt(e,t){var n=e;Ke(0,t),void 0===t.value||void 0===t.defaultValue||kt||(s("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",$e()||"A component"),kt=!0);var r=t.value;if(null==r){var i=t.children,o=t.defaultValue;if(null!=i){if(s("Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=o)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(xt(i)){if(i.length>1)throw new Error("<textarea> can only have at most one child.");i=i[0]}o=i}null==o&&(o=""),r=o}n._wrapperState={initialValue:Xe(r)}}function It(e,t){var n=e,r=Xe(t.value),i=Xe(t.defaultValue);if(null!=r){var o=He(r);o!==n.value&&(n.value=o),null==t.defaultValue&&n.defaultValue!==o&&(n.defaultValue=o)}null!=i&&(n.defaultValue=He(i))}function Pt(e,t){var n=e,r=n.textContent;r===n._wrapperState.initialValue&&""!==r&&null!==r&&(n.value=r)}var At="http://www.w3.org/1999/xhtml",Dt="http://www.w3.org/2000/svg";function zt(e){switch(e){case"svg":return Dt;case"math":return"http://www.w3.org/1998/Math/MathML";default:return At}}function Rt(e,t){return null==e||e===At?zt(t):e===Dt&&"foreignObject"===t?At:e}var Ot,Lt,Ft=(Lt=function(e,t){if(e.namespaceURI!==Dt||"innerHTML"in e)e.innerHTML=t;else{(Ot=Ot||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>";for(var n=Ot.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Lt(e,t)}))}:Lt),Bt=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t},Nt={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},Ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jt=["Webkit","ms","Moz","O"];function Vt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Ut.hasOwnProperty(e)&&Ut[e]?(function(e,t){I(e)&&(s("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",t,M(e)),P(e))}(t,e),(""+t).trim()):t+"px"}Object.keys(Ut).forEach((function(e){jt.forEach((function(t){Ut[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=Ut[e]}))}));var $t=/([A-Z])/g,qt=/^ms-/,Gt=/^(?:webkit|moz|o)[A-Z]/,Wt=/^-ms-/,Zt=/-(.)/g,Ht=/;\s*$/,Xt={},Yt={},Kt=!1,Qt=!1,Jt=function(e,t){e.indexOf("-")>-1?function(e){Xt.hasOwnProperty(e)&&Xt[e]||(Xt[e]=!0,s("Unsupported style property %s. Did you mean %s?",e,e.replace(Wt,"ms-").replace(Zt,(function(e,t){return t.toUpperCase()}))))}(e):Gt.test(e)?function(e){Xt.hasOwnProperty(e)&&Xt[e]||(Xt[e]=!0,s("Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))}(e):Ht.test(t)&&function(e,t){Yt.hasOwnProperty(t)&&Yt[t]||(Yt[t]=!0,s('Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,t.replace(Ht,"")))}(e,t),"number"==typeof t&&(isNaN(t)?function(e,t){Kt||(Kt=!0,s("`NaN` is an invalid value for the `%s` css style property.",e))}(e):isFinite(t)||function(e,t){Qt||(Qt=!0,s("`Infinity` is an invalid value for the `%s` css style property.",e))}(e))};function en(e){var t="",n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i){var o=0===r.indexOf("--");t+=n+(o?r:r.replace($t,"-$1").toLowerCase().replace(qt,"-ms-"))+":",t+=Vt(r,i,o),n=";"}}return t||null}function tn(e,t){var n=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--");i||Jt(r,t[r]);var o=Vt(r,t[r],i);"float"===r&&(r="cssFloat"),i?n.setProperty(r,o):n[r]=o}}function nn(e){var t={};for(var n in e)for(var r=Nt[n]||[n],i=0;i<r.length;i++)t[r[i]]=n;return t}var rn=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw new Error(e+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!t.suppressContentEditableWarning&&t.contentEditable&&null!=t.children&&s("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),null!=t.style&&"object"!=typeof t.style)throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function an(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},ln={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},cn={},un=new RegExp("^(aria)-["+O+"]*$"),hn=new RegExp("^(aria)[A-Z]["+O+"]*$");function dn(e,t){if(C.call(cn,t)&&cn[t])return!0;if(hn.test(t)){var n="aria-"+t.slice(4).toLowerCase(),r=ln.hasOwnProperty(n)?n:null;if(null==r)return s("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",t),cn[t]=!0,!0;if(t!==r)return s("Invalid ARIA attribute `%s`. Did you mean `%s`?",t,r),cn[t]=!0,!0}if(un.test(t)){var i=t.toLowerCase(),o=ln.hasOwnProperty(i)?i:null;if(null==o)return cn[t]=!0,!1;if(t!==o)return s("Unknown ARIA attribute `%s`. Did you mean `%s`?",t,o),cn[t]=!0,!0}return!0}var pn,fn=!1,mn={},gn=/^on./,yn=/^on[^A-Z]/,_n=new RegExp("^(aria)-["+O+"]*$"),vn=new RegExp("^(aria)[A-Z]["+O+"]*$");pn=function(e,t,n,r){if(C.call(mn,t)&&mn[t])return!0;var i=t.toLowerCase();if("onfocusin"===i||"onfocusout"===i)return s("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),mn[t]=!0,!0;if(null!=r){var o=r.registrationNameDependencies,a=r.possibleRegistrationNames;if(o.hasOwnProperty(t))return!0;var l=a.hasOwnProperty(i)?a[i]:null;if(null!=l)return s("Invalid event handler property `%s`. Did you mean `%s`?",t,l),mn[t]=!0,!0;if(gn.test(t))return s("Unknown event handler property `%s`. It will be ignored.",t),mn[t]=!0,!0}else if(gn.test(t))return yn.test(t)&&s("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",t),mn[t]=!0,!0;if(_n.test(t)||vn.test(t))return!0;if("innerhtml"===i)return s("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),mn[t]=!0,!0;if("aria"===i)return s("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),mn[t]=!0,!0;if("is"===i&&null!=n&&"string"!=typeof n)return s("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof n),mn[t]=!0,!0;if("number"==typeof n&&isNaN(n))return s("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",t),mn[t]=!0,!0;var c=$(t),u=null!==c&&0===c.type;if(sn.hasOwnProperty(i)){var h=sn[i];if(h!==t)return s("Invalid DOM property `%s`. Did you mean `%s`?",t,h),mn[t]=!0,!0}else if(!u&&t!==i)return s("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",t,i),mn[t]=!0,!0;return"boolean"==typeof n&&j(t,n,c,!1)?(n?s('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',n,t,t,n,t):s('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',n,t,t,n,t,t,t),mn[t]=!0,!0):!!u||(j(t,n,c,!1)?(mn[t]=!0,!1):("false"!==n&&"true"!==n||null===c||3!==c.type||(s("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",n,t,"false"===n?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',t,n),mn[t]=!0),!0))};var xn=null;function bn(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wn=null,Tn=null,En=null;function Sn(e){var t=nc(e);if(t){if("function"!=typeof wn)throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var n=t.stateNode;if(n){var r=ic(n);wn(t.stateNode,t.type,r)}}}function kn(e){Tn?En?En.push(e):En=[e]:Tn=e}function Cn(){if(Tn){var e=Tn,t=En;if(Tn=null,En=null,Sn(e),t)for(var n=0;n<t.length;n++)Sn(t[n])}}var Mn=function(e,t){return e(t)},In=function(){},Pn=!1;function An(e,t,n){if(Pn)return e(t,n);Pn=!0;try{return Mn(e,t,n)}finally{Pn=!1,(null!==Tn||null!==En)&&(In(),Cn())}}function Dn(e,t){var n=e.stateNode;if(null===n)return null;var r=ic(n);if(null===r)return null;var i=r[t];if(function(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!(!n.disabled||(r=t,"button"!==r&&"input"!==r&&"select"!==r&&"textarea"!==r));default:return!1}var r}(t,e.type,r))return null;if(i&&"function"!=typeof i)throw new Error("Expected `"+t+"` listener to be a function, instead got a value of `"+typeof i+"` type.");return i}var zn=!1;if(k)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){zn=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch(e){zn=!1}function On(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Ln=On;if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var Fn=document.createElement("react");Ln=function(e,t,n,r,i,o,a,s,l){if("undefined"==typeof document||null===document)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var c=document.createEvent("Event"),u=!1,h=!0,d=window.event,p=Object.getOwnPropertyDescriptor(window,"event");function f(){Fn.removeEventListener(b,y,!1),void 0!==window.event&&window.hasOwnProperty("event")&&(window.event=d)}var m,g=Array.prototype.slice.call(arguments,3);function y(){u=!0,f(),t.apply(n,g),h=!1}var _=!1,v=!1;function x(e){if(m=e.error,_=!0,null===m&&0===e.colno&&0===e.lineno&&(v=!0),e.defaultPrevented&&null!=m&&"object"==typeof m)try{m._suppressLogging=!0}catch(e){}}var b="react-"+(e||"invokeguardedcallback");if(window.addEventListener("error",x),Fn.addEventListener(b,y,!1),c.initEvent(b,!1,!1),Fn.dispatchEvent(c),p&&Object.defineProperty(window,"event",p),u&&h&&(_?v&&(m=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):m=new Error("An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the \"Pause on exceptions\" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue."),this.onError(m)),window.removeEventListener("error",x),!u)return f(),On.apply(this,arguments)}}var Bn=Ln,Nn=!1,Un=null,jn=!1,Vn=null,$n={onError:function(e){Nn=!0,Un=e}};function qn(e,t,n,r,i,o,a,s,l){Nn=!1,Un=null,Bn.apply($n,arguments)}function Gn(){if(Nn){var e=Un;return Nn=!1,Un=null,e}throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Wn(e){return e._reactInternals}var Zn=128,Hn=256,Xn=512,Yn=1024,Kn=2048,Qn=4096,Jn=8192,er=16384,tr=32768,nr=65536,rr=131072,ir=1048576,or=2097152,ar=4194304,sr=16777216,lr=33554432,cr=8772,ur=2064,hr=14680064,dr=i.ReactCurrentOwner;function pr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{var r=t;do{0!=(4098&(t=r).flags)&&(n=t.return),r=t.return}while(r)}return 3===t.tag?n:null}function fr(e){if(e.tag===d){var t=e.memoizedState;if(null===t){var n=e.alternate;null!==n&&(t=n.memoizedState)}if(null!==t)return t.dehydrated}return null}function mr(e){return 3===e.tag?e.stateNode.containerInfo:null}function gr(e){if(pr(e)!==e)throw new Error("Unable to find node on an unmounted component.")}function yr(e){var t=e.alternate;if(!t){var n=pr(e);if(null===n)throw new Error("Unable to find node on an unmounted component.");return n!==e?null:e}for(var r=e,i=t;;){var o=r.return;if(null===o)break;var a=o.alternate;if(null===a){var s=o.return;if(null!==s){r=i=s;continue}break}if(o.child===a.child){for(var l=o.child;l;){if(l===r)return gr(o),e;if(l===i)return gr(o),t;l=l.sibling}throw new Error("Unable to find node on an unmounted component.")}if(r.return!==i.return)r=o,i=a;else{for(var c=!1,u=o.child;u;){if(u===r){c=!0,r=o,i=a;break}if(u===i){c=!0,i=o,r=a;break}u=u.sibling}if(!c){for(u=a.child;u;){if(u===r){c=!0,r=a,i=o;break}if(u===i){c=!0,i=a,r=o;break}u=u.sibling}if(!c)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(r.alternate!==i)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(3!==r.tag)throw new Error("Unable to find node on an unmounted component.");return r.stateNode.current===r?e:t}function _r(e){var t=yr(e);return null!==t?vr(t):null}function vr(e){if(5===e.tag||6===e.tag)return e;for(var t=e.child;null!==t;){var n=vr(t);if(null!==n)return n;t=t.sibling}return null}function xr(e){var t=yr(e);return null!==t?br(t):null}function br(e){if(5===e.tag||6===e.tag)return e;for(var t=e.child;null!==t;){if(4!==t.tag){var n=br(t);if(null!==n)return n}t=t.sibling}return null}var wr=r.unstable_scheduleCallback,Tr=r.unstable_cancelCallback,Er=r.unstable_shouldYield,Sr=r.unstable_requestPaint,kr=r.unstable_now,Cr=r.unstable_getCurrentPriorityLevel,Mr=r.unstable_ImmediatePriority,Ir=r.unstable_UserBlockingPriority,Pr=r.unstable_NormalPriority,Ar=r.unstable_LowPriority,Dr=r.unstable_IdlePriority,zr=r.unstable_yieldValue,Rr=r.unstable_setDisableYieldValue,Or=null,Lr=null,Fr=null,Br=!1,Nr="undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__;function Ur(e){if("function"==typeof zr&&(Rr(e),o=e),Lr&&"function"==typeof Lr.setStrictMode)try{Lr.setStrictMode(Or,e)}catch(e){Br||(Br=!0,s("React instrumentation encountered an error: %s",e))}}function jr(e){Fr=e}function Vr(){for(var e=new Map,t=1,n=0;n<ri;n++){var r=Pi(t);e.set(t,r),t*=2}return e}function $r(){null!==Fr&&"function"==typeof Fr.markCommitStopped&&Fr.markCommitStopped()}function qr(e){null!==Fr&&"function"==typeof Fr.markComponentRenderStarted&&Fr.markComponentRenderStarted(e)}function Gr(){null!==Fr&&"function"==typeof Fr.markComponentRenderStopped&&Fr.markComponentRenderStopped()}function Wr(e){null!==Fr&&"function"==typeof Fr.markComponentLayoutEffectMountStarted&&Fr.markComponentLayoutEffectMountStarted(e)}function Zr(e){null!==Fr&&"function"==typeof Fr.markComponentLayoutEffectUnmountStarted&&Fr.markComponentLayoutEffectUnmountStarted(e)}function Hr(){null!==Fr&&"function"==typeof Fr.markComponentLayoutEffectUnmountStopped&&Fr.markComponentLayoutEffectUnmountStopped()}function Xr(e,t,n){null!==Fr&&"function"==typeof Fr.markComponentErrored&&Fr.markComponentErrored(e,t,n)}function Yr(e){null!==Fr&&"function"==typeof Fr.markRenderStarted&&Fr.markRenderStarted(e)}function Kr(){null!==Fr&&"function"==typeof Fr.markRenderStopped&&Fr.markRenderStopped()}function Qr(e,t){null!==Fr&&"function"==typeof Fr.markStateUpdateScheduled&&Fr.markStateUpdateScheduled(e,t)}var Jr=16,ei=Math.clz32?Math.clz32:function(e){var t=e>>>0;return 0===t?32:31-(ti(t)/ni|0)|0},ti=Math.log,ni=Math.LN2,ri=31,ii=16,oi=4194240,ai=1024,si=2048,li=4096,ci=8192,ui=16384,hi=32768,di=65536,pi=131072,fi=262144,mi=524288,gi=1048576,yi=2097152,_i=130023424,vi=4194304,xi=8388608,bi=16777216,wi=33554432,Ti=67108864,Ei=vi,Si=134217728,ki=268435455,Ci=268435456,Mi=536870912,Ii=1073741824;function Pi(e){return 1&e?"Sync":2&e?"InputContinuousHydration":4&e?"InputContinuous":8&e?"DefaultHydration":e&ii?"Default":32&e?"TransitionHydration":e&oi?"Transition":e&_i?"Retry":e&Si?"SelectiveHydration":e&Ci?"IdleHydration":e&Mi?"Idle":e&Ii?"Offscreen":void 0}var Ai=-1,Di=64,zi=vi;function Ri(e){switch(Vi(e)){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case ii:return ii;case 32:return 32;case 64:case 128:case 256:case 512:case ai:case si:case li:case ci:case ui:case hi:case di:case pi:case fi:case mi:case gi:case yi:return e&oi;case vi:case xi:case bi:case wi:case Ti:return e&_i;case Si:return Si;case Ci:return Ci;case Mi:return Mi;case Ii:return Ii;default:return s("Should have found matching lanes. This is a bug in React."),e}}function Oi(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&ki;if(0!==a){var s=a&~i;if(0!==s)r=Ri(s);else{var l=a&o;0!==l&&(r=Ri(l))}}else{var c=n&~i;0!==c?r=Ri(c):0!==o&&(r=Ri(o))}if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)){var u=Vi(r),h=Vi(t);if(u>=h||u===ii&&0!=(h&oi))return t}0!=(4&r)&&(r|=n&ii);var d=e.entangledLanes;if(0!==d)for(var p=e.entanglements,f=r&d;f>0;){var m=qi(f),g=1<<m;r|=p[m],f&=~g}return r}function Li(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case ii:case 32:case 64:case 128:case 256:case 512:case ai:case si:case li:case ci:case ui:case hi:case di:case pi:case fi:case mi:case gi:case yi:return t+5e3;case vi:case xi:case bi:case wi:case Ti:case Si:case Ci:case Mi:case Ii:return Ai;default:return s("Should have found matching lanes. This is a bug in React."),Ai}}function Fi(e){var t=-1073741825&e.pendingLanes;return 0!==t?t:t&Ii?Ii:0}function Bi(e){return 0!=(e&ki)}function Ni(e){return(e&_i)===e}function Ui(e,t){return 0!=(30&t)}function ji(e){return 0!=(e&oi)}function Vi(e){return e&-e}function $i(e){return Vi(e)}function qi(e){return 31-ei(e)}function Gi(e){return qi(e)}function Wi(e,t){return 0!=(e&t)}function Zi(e,t){return(e&t)===t}function Hi(e,t){return e|t}function Xi(e,t){return e&~t}function Yi(e,t){return e&t}function Ki(e){for(var t=[],n=0;n<ri;n++)t.push(e);return t}function Qi(e,t,n){e.pendingLanes|=t,t!==Mi&&(e.suspendedLanes=0,e.pingedLanes=0),e.eventTimes[Gi(t)]=n}function Ji(e,t,n){e.pingedLanes|=e.suspendedLanes&t}function eo(e,t){for(var n=e.entangledLanes|=t,r=e.entanglements,i=n;i;){var o=qi(i),a=1<<o;a&t|r[o]&t&&(r[o]|=t),i&=~a}}function to(e,t,n){if(Nr)for(var r=e.pendingUpdatersLaneMap;n>0;){var i=Gi(n),o=1<<i;r[i].add(t),n&=~o}}function no(e,t){if(Nr)for(var n=e.pendingUpdatersLaneMap,r=e.memoizedUpdaters;t>0;){var i=Gi(t),o=1<<i,a=n[i];a.size>0&&(a.forEach((function(e){var t=e.alternate;null!==t&&r.has(t)||r.add(e)})),a.clear()),t&=~o}}var ro,io,oo,ao,so,lo=ii,co=Mi,uo=0;function ho(){return uo}function po(e){uo=e}function fo(e,t){return 0!==e&&e<t}function mo(e){var t=Vi(e);return fo(1,t)?fo(4,t)?Bi(t)?lo:co:4:1}function go(e){return e.current.memoizedState.isDehydrated}function yo(e){ro(e)}var _o=!1,vo=[],xo=null,bo=null,wo=null,To=new Map,Eo=new Map,So=[],ko=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function Co(e,t){switch(e){case"focusin":case"focusout":xo=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":var n=t.pointerId;To.delete(n);break;case"gotpointercapture":case"lostpointercapture":var r=t.pointerId;Eo.delete(r)}}function Mo(e,t,n,r,i,o){if(null===e||e.nativeEvent!==o){var a=function(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]}}(t,n,r,i,o);if(null!==t){var s=nc(t);null!==s&&io(s)}return a}e.eventSystemFlags|=r;var l=e.targetContainers;return null!==i&&-1===l.indexOf(i)&&l.push(i),e}function Io(e){var t=tc(e.target);if(null!==t){var n=pr(t);if(null!==n){var r=n.tag;if(r===d){var i=fr(n);if(null!==i)return e.blockedOn=i,void so(e.priority,(function(){oo(n)}))}else if(3===r&&go(n.stateNode))return void(e.blockedOn=mr(n))}}e.blockedOn=null}function Po(e){if(null!==e.blockedOn)return!1;for(var t,n=e.targetContainers;n.length>0;){n[0];var r=Uo(e.domEventName,e.eventSystemFlags,0,e.nativeEvent);if(null!==r){var i=nc(r);return null!==i&&io(i),e.blockedOn=r,!1}var o=e.nativeEvent,a=new o.constructor(o.type,o);t=a,null!==xn&&s("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),xn=t,o.target.dispatchEvent(a),null===xn&&s("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),xn=null,n.shift()}return!0}function Ao(e,t,n){Po(e)&&n.delete(t)}function Do(){_o=!1,null!==xo&&Po(xo)&&(xo=null),null!==bo&&Po(bo)&&(bo=null),null!==wo&&Po(wo)&&(wo=null),To.forEach(Ao),Eo.forEach(Ao)}function zo(e,t){e.blockedOn===t&&(e.blockedOn=null,_o||(_o=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Do)))}function Ro(e){if(vo.length>0){zo(vo[0],e);for(var t=1;t<vo.length;t++){var n=vo[t];n.blockedOn===e&&(n.blockedOn=null)}}null!==xo&&zo(xo,e),null!==bo&&zo(bo,e),null!==wo&&zo(wo,e);var r=function(t){return zo(t,e)};To.forEach(r),Eo.forEach(r);for(var i=0;i<So.length;i++){var o=So[i];o.blockedOn===e&&(o.blockedOn=null)}for(;So.length>0;){var a=So[0];if(null!==a.blockedOn)break;Io(a),null===a.blockedOn&&So.shift()}}var Oo=i.ReactCurrentBatchConfig;function Lo(e,t,n,r){var i=ho(),o=Oo.transition;Oo.transition=null;try{po(1),Bo(e,t,n,r)}finally{po(i),Oo.transition=o}}function Fo(e,t,n,r){var i=ho(),o=Oo.transition;Oo.transition=null;try{po(4),Bo(e,t,n,r)}finally{po(i),Oo.transition=o}}function Bo(e,t,n,r){var i=Uo(0,0,0,r);if(null===i)return Fs(e,t,r,No,n),void Co(e,r);if(function(e,t,n,r,i){switch(t){case"focusin":return xo=Mo(xo,e,t,n,r,i),!0;case"dragenter":return bo=Mo(bo,e,t,n,r,i),!0;case"mouseover":return wo=Mo(wo,e,t,n,r,i),!0;case"pointerover":var o=i,a=o.pointerId;return To.set(a,Mo(To.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":var s=i,l=s.pointerId;return Eo.set(l,Mo(Eo.get(l)||null,e,t,n,r,s)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Co(e,r),4&t&&(s=e,ko.indexOf(s)>-1)){for(;null!==i;){var o=nc(i);null!==o&&yo(o);var a=Uo(0,0,0,r);if(null===a&&Fs(e,t,r,No,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else{var s;Fs(e,t,r,null,n)}}var No=null;function Uo(e,t,n,r){No=null;var i=tc(bn(r));if(null!==i){var o=pr(i);if(null===o)i=null;else{var a=o.tag;if(a===d){var s=fr(o);if(null!==s)return s;i=null}else if(3===a){if(go(o.stateNode))return mr(o);i=null}else o!==i&&(i=null)}}return No=i,null}function jo(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cr()){case Mr:return 1;case Ir:return 4;case Pr:case Ar:return lo;case Dr:return co;default:return lo}default:return lo}}var Vo=null,$o=null,qo=null;function Go(){if(qo)return qo;var e,t,n=$o,r=n.length,i=Wo(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return qo=i.slice(e,s)}function Wo(){return"value"in Vo?Vo.value:Vo.textContent}function Zo(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,10===t&&(t=13),t>=32||13===t?t:0}function Ho(){return!0}function Xo(){return!1}function Yo(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)if(e.hasOwnProperty(a)){var s=e[a];this[a]=s?s(i):i[a]}var l=null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue;return this.isDefaultPrevented=l?Ho:Xo,this.isPropagationStopped=Xo,this}return we(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),t}var Ko,Qo,Jo,ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ta=Yo(ea),na=we({},ea,{view:0,detail:0}),ra=Yo(na),ia=we({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(function(e){e!==Jo&&(Jo&&"mousemove"===e.type?(Ko=e.screenX-Jo.screenX,Qo=e.screenY-Jo.screenY):(Ko=0,Qo=0),Jo=e)}(e),Ko)},movementY:function(e){return"movementY"in e?e.movementY:Qo}}),oa=Yo(ia),aa=Yo(we({},ia,{dataTransfer:0})),sa=Yo(we({},na,{relatedTarget:0})),la=Yo(we({},ea,{animationName:0,elapsedTime:0,pseudoElement:0})),ca=Yo(we({},ea,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ua=Yo(we({},ea,{data:0})),ha=ua,da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ma(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var n=fa[e];return!!n&&!!t[n]}function ga(e){return ma}var ya=Yo(we({},na,{key:function(e){if(e.key){var t=da[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=Zo(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?pa[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(e){return"keypress"===e.type?Zo(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zo(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_a=Yo(we({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),va=Yo(we({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga})),xa=Yo(we({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0})),ba=Yo(we({},ia,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wa=[9,13,27,32],Ta=k&&"CompositionEvent"in window,Ea=null;k&&"documentMode"in document&&(Ea=document.documentMode);var Sa=k&&"TextEvent"in window&&!Ea,ka=k&&(!Ta||Ea&&Ea>8&&Ea<=11),Ca=String.fromCharCode(32),Ma=!1;function Ia(e,t){switch(e){case"keyup":return-1!==wa.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pa(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function Aa(e){return"ko"===e.locale}var Da=!1;function za(e,t,n,r,i){var o;if(!(o=Sa?function(e,t){switch(e){case"compositionend":return Pa(t);case"keypress":return 32!==t.which?null:(Ma=!0,Ca);case"textInput":var n=t.data;return n===Ca&&Ma?null:n;default:return null}}(t,r):function(e,t){if(Da){if("compositionend"===e||!Ta&&Ia(e,t)){var n=Go();return Vo=null,$o=null,qo=null,Da=!1,n}return null}switch(e){case"paste":default:return null;case"keypress":if(!function(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}(t)){if(t.char&&t.char.length>1)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ka&&!Aa(t)?null:t.data}}(t,r)))return null;var a=Ns(n,"onBeforeInput");if(a.length>0){var s=new ha("onBeforeInput","beforeinput",null,r,i);e.push({event:s,listeners:a}),s.data=o}}var Ra={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ra[e.type]:"textarea"===t}function La(e,t,n,r){kn(r);var i=Ns(t,"onChange");if(i.length>0){var o=new ta("onChange","change",null,n,r);e.push({event:o,listeners:i})}}var Fa=null,Ba=null;function Na(e){Ps(e,0)}function Ua(e){if(tt(rc(e)))return e}function ja(e,t){if("change"===e)return t}var Va=!1;function $a(){Fa&&(Fa.detachEvent("onpropertychange",qa),Fa=null,Ba=null)}function qa(e){"value"===e.propertyName&&Ua(Ba)&&function(e){var t=[];La(t,Ba,e,bn(e)),An(Na,t)}(e)}function Ga(e,t,n){"focusin"===e?($a(),function(e,t){Ba=t,(Fa=e).attachEvent("onpropertychange",qa)}(t,n)):"focusout"===e&&$a()}function Wa(e,t){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ua(Ba)}function Za(e,t){if("click"===e)return Ua(t)}function Ha(e,t){if("input"===e||"change"===e)return Ua(t)}k&&(Va=function(e){if(!k)return!1;var t="oninput",n=t in document;if(!n){var r=document.createElement("div");r.setAttribute(t,"return;"),n="function"==typeof r.oninput}return n}()&&(!document.documentMode||document.documentMode>9));var Xa="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Ya(e,t){if(Xa(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!C.call(t,o)||!Xa(e[o],t[o]))return!1}return!0}function Ka(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qa(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function Ja(e,t){for(var n=Ka(e),r=0,i=0;n;){if(3===n.nodeType){if(i=r+n.textContent.length,r<=t&&i>=t)return{node:n,offset:t-r};r=i}n=Ka(Qa(n))}}function es(e){return e&&3===e.nodeType}function ts(e,t){return!(!e||!t)&&(e===t||!es(e)&&(es(t)?ts(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ns(e){return e&&e.ownerDocument&&ts(e.ownerDocument.documentElement,e)}function rs(e){try{return"string"==typeof e.contentWindow.location.href}catch(e){return!1}}function is(){for(var e=window,t=nt();t instanceof e.HTMLIFrameElement;){if(!rs(t))return t;t=nt((e=t.contentWindow).document)}return t}function os(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function as(e){return("selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:function(e){var t=e.ownerDocument,n=t&&t.defaultView||window,r=n.getSelection&&n.getSelection();if(!r||0===r.rangeCount)return null;var i=r.anchorNode,o=r.anchorOffset,a=r.focusNode,s=r.focusOffset;try{i.nodeType,a.nodeType}catch(e){return null}return function(e,t,n,r,i){var o=0,a=-1,s=-1,l=0,c=0,u=e,h=null;e:for(;;){for(var d=null;u!==t||0!==n&&3!==u.nodeType||(a=o+n),u!==r||0!==i&&3!==u.nodeType||(s=o+i),3===u.nodeType&&(o+=u.nodeValue.length),null!==(d=u.firstChild);)h=u,u=d;for(;;){if(u===e)break e;if(h===t&&++l===n&&(a=o),h===r&&++c===i&&(s=o),null!==(d=u.nextSibling))break;h=(u=h).parentNode}u=d}return-1===a||-1===s?null:{start:a,end:s}}(e,i,o,a,s)}(e))||{start:0,end:0}}var ss=k&&"documentMode"in document&&document.documentMode<=11,ls=null,cs=null,us=null,hs=!1;function ds(e,t,n){var r,i=(r=n).window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!hs&&null!=ls&&ls===nt(i)){var o=function(e){if("selectionStart"in e&&os(e))return{start:e.selectionStart,end:e.selectionEnd};var t=(e.ownerDocument&&e.ownerDocument.defaultView||window).getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}(ls);if(!us||!Ya(us,o)){us=o;var a=Ns(cs,"onSelect");if(a.length>0){var s=new ta("onSelect","select",null,t,n);e.push({event:s,listeners:a}),s.target=ls}}}}function ps(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fs={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},ms={},gs={};function ys(e){if(ms[e])return ms[e];if(!fs[e])return e;var t=fs[e];for(var n in t)if(t.hasOwnProperty(n)&&n in gs)return ms[e]=t[n];return e}k&&(gs=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);var _s=ys("animationend"),vs=ys("animationiteration"),xs=ys("animationstart"),bs=ys("transitionend"),ws=new Map,Ts=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Es(e,t){ws.set(e,t),E(t,[e])}function Ss(e,t,n,r,i,o,a){(function(e,t,n,r,i,o,a){var s=ws.get(t);if(void 0!==s){var l=ta,c=t;switch(t){case"keypress":if(0===Zo(r))return;case"keydown":case"keyup":l=ya;break;case"focusin":c="focus",l=sa;break;case"focusout":c="blur",l=sa;break;case"beforeblur":case"afterblur":l=sa;break;case"click":if(2===r.button)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=aa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=va;break;case _s:case vs:case xs:l=la;break;case bs:l=xa;break;case"scroll":l=ra;break;case"wheel":l=ba;break;case"copy":case"cut":case"paste":l=ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_a}var u=0!=(4&o),h=!u&&"scroll"===t,d=function(e,t,n,r,i,o){for(var a=r?null!==t?t+"Capture":null:t,s=[],l=e,c=null;null!==l;){var u=l,h=u.stateNode;if(5===u.tag&&null!==h&&(c=h,null!==a)){var d=Dn(l,a);null!=d&&s.push(Bs(l,d,c))}if(i)break;l=l.return}return s}(n,s,r.type,u,h);if(d.length>0){var p=new l(s,c,null,r,i);e.push({event:p,listeners:d})}}})(e,t,n,r,i,o),0==(7&o)&&(function(e,t,n,r,i,o,a){var s="mouseover"===t||"pointerover"===t,l="mouseout"===t||"pointerout"===t;if(s&&r!==xn){var c=r.relatedTarget||r.fromElement;if(c&&(tc(c)||ec(c)))return}if(l||s){var u,h,d;if(i.window===i)u=i;else{var p=i.ownerDocument;u=p?p.defaultView||p.parentWindow:window}if(l){var f=r.relatedTarget||r.toElement;h=n,null!==(d=f?tc(f):null)&&(d!==pr(d)||5!==d.tag&&6!==d.tag)&&(d=null)}else h=null,d=n;if(h!==d){var m=oa,g="onMouseLeave",y="onMouseEnter",_="mouse";"pointerout"!==t&&"pointerover"!==t||(m=_a,g="onPointerLeave",y="onPointerEnter",_="pointer");var v=null==h?u:rc(h),x=null==d?u:rc(d),b=new m(g,_+"leave",h,r,i);b.target=v,b.relatedTarget=x;var w=null;if(tc(i)===n){var T=new m(y,_+"enter",d,r,i);T.target=x,T.relatedTarget=v,w=T}!function(e,t,n,r,i){var o=r&&i?function(e,t){for(var n=e,r=t,i=0,o=n;o;o=Us(o))i++;for(var a=0,s=r;s;s=Us(s))a++;for(;i-a>0;)n=Us(n),i--;for(;a-i>0;)r=Us(r),a--;for(var l=i;l--;){if(n===r||null!==r&&n===r.alternate)return n;n=Us(n),r=Us(r)}return null}(r,i):null;null!==r&&js(e,t,r,o,!1),null!==i&&null!==n&&js(e,n,i,o,!0)}(e,b,w,h,d)}}}(e,t,n,r,i),function(e,t,n,r,i,o,a){var s,l,c,u,h,d,p=n?rc(n):window;if("select"===(u=(c=p).nodeName&&c.nodeName.toLowerCase())||"input"===u&&"file"===c.type?s=ja:Oa(p)?Va?s=Ha:(s=Wa,l=Ga):function(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}(p)&&(s=Za),s){var f=s(t,n);if(f)return void La(e,f,r,i)}l&&l(t,p,n),"focusout"===t&&(d=(h=p)._wrapperState)&&d.controlled&&"number"===h.type&&pt(h,"number",h.value)}(e,t,n,r,i),function(e,t,n,r,i,o,a){var s=n?rc(n):window;switch(t){case"focusin":(Oa(s)||"true"===s.contentEditable)&&(ls=s,cs=n,us=null);break;case"focusout":ls=null,cs=null,us=null;break;case"mousedown":hs=!0;break;case"contextmenu":case"mouseup":case"dragend":hs=!1,ds(e,r,i);break;case"selectionchange":if(ss)break;case"keydown":case"keyup":ds(e,r,i)}}(e,t,n,r,i),function(e,t,n,r,i,o,a){(function(e,t,n,r,i){var o,a;if(Ta?o=function(e){switch(e){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}(t):Da?Ia(t,r)&&(o="onCompositionEnd"):function(e,t){return"keydown"===e&&229===t.keyCode}(t,r)&&(o="onCompositionStart"),!o)return null;ka&&!Aa(r)&&(Da||"onCompositionStart"!==o?"onCompositionEnd"===o&&Da&&(a=Go()):Da=function(e){return Vo=e,$o=Wo(),!0}(i));var s=Ns(n,o);if(s.length>0){var l=new ua(o,t,null,r,i);if(e.push({event:l,listeners:s}),a)l.data=a;else{var c=Pa(r);null!==c&&(l.data=c)}}})(e,t,n,r,i),za(e,t,n,r,i)}(e,t,n,r,i))}!function(){for(var e=0;e<Ts.length;e++){var t=Ts[e];Es(t.toLowerCase(),"on"+(t[0].toUpperCase()+t.slice(1)))}Es(_s,"onAnimationEnd"),Es(vs,"onAnimationIteration"),Es(xs,"onAnimationStart"),Es("dblclick","onDoubleClick"),Es("focusin","onFocus"),Es("focusout","onBlur"),Es(bs,"onTransitionEnd")}(),S("onMouseEnter",["mouseout","mouseover"]),S("onMouseLeave",["mouseout","mouseover"]),S("onPointerEnter",["pointerout","pointerover"]),S("onPointerLeave",["pointerout","pointerover"]),E("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"]),E("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"]),E("onBeforeInput",["compositionend","keypress","textInput","paste"]),E("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),E("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),E("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"]);var ks=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],Cs=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(ks));function Ms(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,l){if(qn.apply(this,arguments),Nn){var c=Gn();jn||(jn=!0,Vn=c)}}(r,t,void 0,e),e.currentTarget=null}function Is(e,t,n){var r;if(n)for(var i=t.length-1;i>=0;i--){var o=t[i],a=o.instance,s=o.currentTarget,l=o.listener;if(a!==r&&e.isPropagationStopped())return;Ms(e,l,s),r=a}else for(var c=0;c<t.length;c++){var u=t[c],h=u.instance,d=u.currentTarget,p=u.listener;if(h!==r&&e.isPropagationStopped())return;Ms(e,p,d),r=h}}function Ps(e,t){for(var n=0!=(4&t),r=0;r<e.length;r++){var i=e[r];Is(i.event,i.listeners,n)}!function(){if(jn){var e=Vn;throw jn=!1,Vn=null,e}}()}function As(e,t){Cs.has(e)||s('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',e);var n,r,i=(void 0===(r=(n=t)[Hl])&&(r=n[Hl]=new Set),r),o=function(e,t){return e+"__bubble"}(e);i.has(o)||(Os(t,e,2,!1),i.add(o))}function Ds(e,t,n){Cs.has(e)&&!t&&s('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',e);var r=0;t&&(r|=4),Os(n,e,r,t)}var zs="_reactListening"+Math.random().toString(36).slice(2);function Rs(e){if(!e[zs]){e[zs]=!0,b.forEach((function(t){"selectionchange"!==t&&(Cs.has(t)||Ds(t,!1,e),Ds(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null!==t&&(t[zs]||(t[zs]=!0,Ds("selectionchange",!1,t)))}}function Os(e,t,n,r,i){var o=function(e,t,n){var r;switch(jo(t)){case 1:r=Lo;break;case 4:r=Fo;break;default:r=Bo}return r.bind(null,t,n,e)}(e,t,n),a=void 0;zn&&("touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0)),e=e,r?void 0!==a?function(e,t,n,r){e.addEventListener(t,n,{capture:!0,passive:r})}(e,t,o,a):function(e,t,n){e.addEventListener(t,n,!0)}(e,t,o):void 0!==a?function(e,t,n,r){e.addEventListener(t,n,{passive:r})}(e,t,o,a):function(e,t,n){e.addEventListener(t,n,!1)}(e,t,o)}function Ls(e,t){return e===t||8===e.nodeType&&e.parentNode===t}function Fs(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)){var a=i;if(null!==r){var s=r;e:for(;;){if(null===s)return;var l=s.tag;if(3===l||4===l){var c=s.stateNode.containerInfo;if(Ls(c,a))break;if(4===l)for(var u=s.return;null!==u;){var h=u.tag;if((3===h||4===h)&&Ls(u.stateNode.containerInfo,a))return;u=u.return}for(;null!==c;){var d=tc(c);if(null===d)return;var p=d.tag;if(5===p||6===p){s=o=d;continue e}c=c.parentNode}}s=s.return}}}An((function(){return function(e,t,n,r,i){var o=[];Ss(o,e,r,n,bn(n),t),Ps(o,t)}(e,t,n,o)}))}function Bs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ns(e,t){for(var n=t+"Capture",r=[],i=e;null!==i;){var o=i,a=o.stateNode;if(5===o.tag&&null!==a){var s=a,l=Dn(i,n);null!=l&&r.unshift(Bs(i,l,s));var c=Dn(i,t);null!=c&&r.push(Bs(i,c,s))}i=i.return}return r}function Us(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function js(e,t,n,r,i){for(var o=t._reactName,a=[],s=n;null!==s&&s!==r;){var l=s,c=l.alternate,u=l.stateNode,h=l.tag;if(null!==c&&c===r)break;if(5===h&&null!==u){var d=u;if(i){var p=Dn(s,o);null!=p&&a.unshift(Bs(s,p,d))}else if(!i){var f=Dn(s,o);null!=f&&a.push(Bs(s,f,d))}}s=s.return}0!==a.length&&e.push({event:t,listeners:a})}var Vs,$s,qs,Gs,Ws,Zs,Hs,Xs,Ys=!1,Ks="dangerouslySetInnerHTML",Qs="suppressContentEditableWarning",Js="suppressHydrationWarning",el="autoFocus",tl="children",nl="style";Vs={dialog:!0,webview:!0},qs=function(e,t){(function(e,t){an(e,t)||function(e,t){var n=[];for(var r in t)dn(0,r)||n.push(r);var i=n.map((function(e){return"`"+e+"`"})).join(", ");1===n.length?s("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",i,e):n.length>1&&s("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",i,e)}(e,t)})(e,t),function(e,t){"input"!==e&&"textarea"!==e&&"select"!==e||null==t||null!==t.value||fn||(fn=!0,"select"===e&&t.multiple?s("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):s("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e))}(e,t),function(e,t,n){an(e,t)||function(e,t,n){var r=[];for(var i in t)pn(0,i,t[i],n)||r.push(i);var o=r.map((function(e){return"`"+e+"`"})).join(", ");1===r.length?s("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",o,e):r.length>1&&s("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",o,e)}(e,t,n)}(e,t,{registrationNameDependencies:w,possibleRegistrationNames:T})},Hs=k&&!document.documentMode,Gs=function(e,t,n){if(!Ys){var r=ol(n),i=ol(t);i!==r&&(Ys=!0,s("Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(i),JSON.stringify(r)))}},Ws=function(e){if(!Ys){Ys=!0;var t=[];e.forEach((function(e){t.push(e)})),s("Extra attributes from the server: %s",t)}},Zs=function(e,t){!1===t?s("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):s("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof t)},Xs=function(e,t){var n=e.namespaceURI===At?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return n.innerHTML=t,n.innerHTML};var rl=/\r\n?/g,il=/\u0000|\uFFFD/g;function ol(e){return I(t=e)&&(s("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",M(t)),P(t)),("string"==typeof e?e:""+e).replace(rl,"\n").replace(il,"");var t}function al(e,t,n,r){var i=ol(t),o=ol(e);if(o!==i&&(r&&(Ys||(Ys=!0,s('Text content did not match. Server: "%s" Client: "%s"',o,i))),n))throw new Error("Text content does not match server-rendered HTML.")}function sl(e){return 9===e.nodeType?e:e.ownerDocument}function ll(){}function cl(e){e.onclick=ll}function ul(e,t){Ys||(Ys=!0,s("Did not expect server HTML to contain a <%s> in <%s>.",t.nodeName.toLowerCase(),e.nodeName.toLowerCase()))}function hl(e,t){Ys||(Ys=!0,s('Did not expect server HTML to contain the text node "%s" in <%s>.',t.nodeValue,e.nodeName.toLowerCase()))}function dl(e,t,n){Ys||(Ys=!0,s("Expected server HTML to contain a matching <%s> in <%s>.",t,e.nodeName.toLowerCase()))}function pl(e,t){""!==t&&(Ys||(Ys=!0,s('Expected server HTML to contain a matching text node for "%s" in <%s>.',t,e.nodeName.toLowerCase())))}var fl,ml,gl=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],yl=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],_l=yl.concat(["button"]),vl=["dd","dt","li","option","optgroup","p","rp","rt"],xl={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};ml=function(e,t){var n=we({},e||xl),r={tag:t};return-1!==yl.indexOf(t)&&(n.aTagInScope=null,n.buttonTagInScope=null,n.nobrTagInScope=null),-1!==_l.indexOf(t)&&(n.pTagInButtonScope=null),-1!==gl.indexOf(t)&&"address"!==t&&"div"!==t&&"p"!==t&&(n.listItemTagAutoclosing=null,n.dlItemTagAutoclosing=null),n.current=r,"form"===t&&(n.formTag=r),"a"===t&&(n.aTagInScope=r),"button"===t&&(n.buttonTagInScope=r),"nobr"===t&&(n.nobrTagInScope=r),"p"===t&&(n.pTagInButtonScope=r),"li"===t&&(n.listItemTagAutoclosing=r),"dd"!==t&&"dt"!==t||(n.dlItemTagAutoclosing=r),n};var bl={};fl=function(e,t,n){var r=(n=n||xl).current,i=r&&r.tag;null!=t&&(null!=e&&s("validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var o=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e||"frameset"===e;case"frameset":return"frame"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return-1===vl.indexOf(t);case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0}(e,i)?null:r,a=o?null:function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}(e,n),l=o||a;if(l){var c=l.tag,u=!!o+"|"+e+"|"+c;if(!bl[u]){bl[u]=!0;var h=e,d="";if("#text"===e?/\S/.test(t)?h="Text nodes":(h="Whitespace text nodes",d=" Make sure you don't have any extra whitespace between tags on each line of your source code."):h="<"+e+">",o){var p="";"table"===c&&"tr"===e&&(p+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),s("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",h,c,d,p)}else s("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",h,c)}}};var wl="$",Tl="/$",El="$?",Sl="$!",kl=null;function Cl(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ml="function"==typeof setTimeout?setTimeout:void 0,Il="function"==typeof clearTimeout?clearTimeout:void 0,Pl="function"==typeof Promise?Promise:void 0,Al="function"==typeof queueMicrotask?queueMicrotask:void 0!==Pl?function(e){return Pl.resolve(null).then(e).catch(Dl)}:Ml;function Dl(e){setTimeout((function(){throw e}))}function zl(e){Bt(e,"")}function Rl(e,t){e.removeChild(t)}function Ol(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType){var o=i.data;if(o===Tl){if(0===r)return e.removeChild(i),void Ro(t);r--}else o!==wl&&o!==El&&o!==Sl||r++}n=i}while(n);Ro(t)}function Ll(e,t){8===e.nodeType?Ol(e.parentNode,t):1===e.nodeType&&Ol(e,t),Ro(e)}function Fl(e){var t=(e=e).style;"function"==typeof t.setProperty?t.setProperty("display","none","important"):t.display="none"}function Bl(e,t){e=e;var n=t.style,r=null!=n&&n.hasOwnProperty("display")?n.display:null;e.style.display=Vt("display",r)}function Nl(e){return e.data===El}function Ul(e){return e.data===Sl}function jl(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){var n=e.data;if(n===wl||n===Sl||n===El)break;if(n===Tl)return null}}return e}function Vl(e){return jl(e.nextSibling)}function $l(e){for(var t=e.previousSibling,n=0;t;){if(8===t.nodeType){var r=t.data;if(r===wl||r===Sl||r===El){if(0===n)return t;n--}else r===Tl&&n++}t=t.previousSibling}return null}var ql=Math.random().toString(36).slice(2),Gl="__reactFiber$"+ql,Wl="__reactProps$"+ql,Zl="__reactContainer$"+ql,Hl="__reactEvents$"+ql,Xl="__reactListeners$"+ql,Yl="__reactHandles$"+ql;function Kl(e,t){t[Gl]=e}function Ql(e,t){t[Zl]=e}function Jl(e){e[Zl]=null}function ec(e){return!!e[Zl]}function tc(e){var t=e[Gl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zl]||n[Gl]){var r=t.alternate;if(null!==t.child||null!==r&&null!==r.child)for(var i=$l(e);null!==i;){var o=i[Gl];if(o)return o;i=$l(i)}return t}n=(e=n).parentNode}return null}function nc(e){var t=e[Gl]||e[Zl];return!t||5!==t.tag&&6!==t.tag&&t.tag!==d&&3!==t.tag?null:t}function rc(e){if(5===e.tag||6===e.tag)return e.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function ic(e){return e[Wl]||null}function oc(e,t){e[Wl]=t}var ac={},sc=i.ReactDebugCurrentFrame;function lc(e){if(e){var t=e._owner,n=ze(e.type,e._source,t?t.type:null);sc.setExtraStackFrame(n)}else sc.setExtraStackFrame(null)}function cc(e,t,n,r,i){var o=Function.call.bind(C);for(var a in e)if(o(e,a)){var l=void 0;try{if("function"!=typeof e[a]){var c=Error((r||"React class")+": "+n+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}l=e[a](t,a,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){l=e}!l||l instanceof Error||(lc(i),s("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,a,typeof l),lc(null)),l instanceof Error&&!(l.message in ac)&&(ac[l.message]=!0,lc(i),s("Failed %s type: %s",n,l.message),lc(null))}}var uc,hc=[];uc=[];var dc,pc=-1;function fc(e){return{current:e}}function mc(e,t){pc<0?s("Unexpected pop."):(t!==uc[pc]&&s("Unexpected Fiber popped."),e.current=hc[pc],hc[pc]=null,uc[pc]=null,pc--)}function gc(e,t,n){pc++,hc[pc]=e.current,uc[pc]=n,e.current=t}dc={};var yc={};Object.freeze(yc);var _c=fc(yc),vc=fc(!1),xc=yc;function bc(e,t,n){return n&&Sc(t)?xc:_c.current}function wc(e,t,n){var r=e.stateNode;r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n}function Tc(e,t){var n=e.type.contextTypes;if(!n)return yc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={};for(var o in n)i[o]=t[o];return cc(n,i,"context",Ne(e)||"Unknown"),r&&wc(e,t,i),i}function Ec(){return vc.current}function Sc(e){return null!=e.childContextTypes}function kc(e){mc(vc,e),mc(_c,e)}function Cc(e){mc(vc,e),mc(_c,e)}function Mc(e,t,n){if(_c.current!==yc)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");gc(_c,t,e),gc(vc,n,e)}function Ic(e,t,n){var r=e.stateNode,i=t.childContextTypes;if("function"!=typeof r.getChildContext){var o=Ne(e)||"Unknown";return dc[o]||(dc[o]=!0,s("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",o,o)),n}var a=r.getChildContext();for(var l in a)if(!(l in i))throw new Error((Ne(e)||"Unknown")+'.getChildContext(): key "'+l+'" is not defined in childContextTypes.');return cc(i,a,"child context",Ne(e)||"Unknown"),we({},n,a)}function Pc(e){var t=e.stateNode,n=t&&t.__reactInternalMemoizedMergedChildContext||yc;return xc=_c.current,gc(_c,n,e),gc(vc,vc.current,e),!0}function Ac(e,t,n){var r=e.stateNode;if(!r)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(n){var i=Ic(e,t,xc);r.__reactInternalMemoizedMergedChildContext=i,mc(vc,e),mc(_c,e),gc(_c,i,e),gc(vc,n,e)}else mc(vc,e),gc(vc,n,e)}var Dc=null,zc=!1,Rc=!1;function Oc(e){null===Dc?Dc=[e]:Dc.push(e)}function Lc(){zc&&Fc()}function Fc(){if(!Rc&&null!==Dc){Rc=!0;var e=0,t=ho();try{var n=Dc;for(po(1);e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Dc=null,zc=!1}catch(t){throw null!==Dc&&(Dc=Dc.slice(e+1)),wr(Mr,Fc),t}finally{po(t),Rc=!1}}return null}var Bc=i.ReactCurrentBatchConfig,Nc={recordUnsafeLifecycleWarnings:function(e,t){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(e,t){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}},Uc=function(e){var t=[];return e.forEach((function(e){t.push(e)})),t.sort().join(", ")},jc=[],Vc=[],$c=[],qc=[],Gc=[],Wc=[],Zc=new Set;Nc.recordUnsafeLifecycleWarnings=function(e,t){Zc.has(e.type)||("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning&&jc.push(e),8&e.mode&&"function"==typeof t.UNSAFE_componentWillMount&&Vc.push(e),"function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning&&$c.push(e),8&e.mode&&"function"==typeof t.UNSAFE_componentWillReceiveProps&&qc.push(e),"function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning&&Gc.push(e),8&e.mode&&"function"==typeof t.UNSAFE_componentWillUpdate&&Wc.push(e))},Nc.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;jc.length>0&&(jc.forEach((function(t){e.add(Ne(t)||"Component"),Zc.add(t.type)})),jc=[]);var t=new Set;Vc.length>0&&(Vc.forEach((function(e){t.add(Ne(e)||"Component"),Zc.add(e.type)})),Vc=[]);var n=new Set;$c.length>0&&($c.forEach((function(e){n.add(Ne(e)||"Component"),Zc.add(e.type)})),$c=[]);var r=new Set;qc.length>0&&(qc.forEach((function(e){r.add(Ne(e)||"Component"),Zc.add(e.type)})),qc=[]);var i=new Set;Gc.length>0&&(Gc.forEach((function(e){i.add(Ne(e)||"Component"),Zc.add(e.type)})),Gc=[]);var o=new Set;Wc.length>0&&(Wc.forEach((function(e){o.add(Ne(e)||"Component"),Zc.add(e.type)})),Wc=[]),t.size>0&&s("Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n\nPlease update the following components: %s",Uc(t)),r.size>0&&s("Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state\n\nPlease update the following components: %s",Uc(r)),o.size>0&&s("Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n\nPlease update the following components: %s",Uc(o)),e.size>0&&a("componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Uc(e)),n.size>0&&a("componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state\n* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Uc(n)),i.size>0&&a("componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Uc(i))};var Hc=new Map,Xc=new Set;function Yc(e,t){if(e&&e.defaultProps){var n=we({},t),r=e.defaultProps;for(var i in r)void 0===n[i]&&(n[i]=r[i]);return n}return t}Nc.recordLegacyContextWarning=function(e,t){var n=function(e){for(var t=null,n=e;null!==n;)8&n.mode&&(t=n),n=n.return;return t}(e);if(null!==n){if(!Xc.has(e.type)){var r=Hc.get(n);(null!=e.type.contextTypes||null!=e.type.childContextTypes||null!==t&&"function"==typeof t.getChildContext)&&(void 0===r&&(r=[],Hc.set(n,r)),r.push(e))}}else s("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.")},Nc.flushLegacyContextWarning=function(){Hc.forEach((function(e,t){if(0!==e.length){var n=e[0],r=new Set;e.forEach((function(e){r.add(Ne(e)||"Component"),Xc.add(e.type)}));var i=Uc(r);try{We(n),s("Legacy context API has been detected within a strict-mode tree.\n\nThe old API will be supported in all 16.x releases, but applications using it should migrate to the new version.\n\nPlease update the following components: %s\n\nLearn more about this warning here: https://reactjs.org/link/legacy-context",i)}finally{Ge()}}}))},Nc.discardPendingWarnings=function(){jc=[],Vc=[],$c=[],qc=[],Gc=[],Wc=[],Hc=new Map};var Kc,Qc=fc(null);Kc={};var Jc=null,eu=null,tu=null,nu=!1;function ru(){Jc=null,eu=null,tu=null,nu=!1}function iu(){nu=!0}function ou(){nu=!1}function au(e,t,n){gc(Qc,t._currentValue,e),t._currentValue=n,void 0!==t._currentRenderer&&null!==t._currentRenderer&&t._currentRenderer!==Kc&&s("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),t._currentRenderer=Kc}function su(e,t){var n=Qc.current;mc(Qc,t),e._currentValue=n}function lu(e,t,n){for(var r=e;null!==r;){var i=r.alternate;if(Zi(r.childLanes,t)?null===i||Zi(i.childLanes,t)||(i.childLanes=Hi(i.childLanes,t)):(r.childLanes=Hi(r.childLanes,t),null!==i&&(i.childLanes=Hi(i.childLanes,t))),r===n)break;r=r.return}r!==n&&s("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function cu(e,t){Jc=e,eu=null,tu=null;var n=e.dependencies;null!==n&&null!==n.firstContext&&(Wi(n.lanes,t)&&fm(),n.firstContext=null)}function uu(e){nu&&s("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var t=e._currentValue;if(tu===e);else{var n={context:e,memoizedValue:t,next:null};if(null===eu){if(null===Jc)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");eu=n,Jc.dependencies={lanes:0,firstContext:n}}else eu=eu.next=n}return t}var hu=null;function du(e){null===hu?hu=[e]:hu.push(e)}var pu,fu,mu=2,gu=!1;function yu(e){var t={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null};e.updateQueue=t}function _u(e,t){var n=t.updateQueue,r=e.updateQueue;if(n===r){var i={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects};t.updateQueue=i}}function vu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xu(e,t,n){var r=e.updateQueue;if(null!==r){var i=r.shared;if(dy(e)){var o=i.interleaved;null===o?(t.next=t,du(i)):(t.next=o.next,o.next=t),i.interleaved=t}else{var a=i.pending;null===a?t.next=t:(t.next=a.next,a.next=t),i.pending=t}fu!==i||pu||(s("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),pu=!0)}}function bu(e,t,n){var r=t.updateQueue;if(null!==r){var i=r.shared;if(ji(n)){var o=i.lanes,a=Hi(o=Yi(o,e.pendingLanes),n);i.lanes=a,eo(e,a)}}}function wu(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r){var i=r.updateQueue;if(n===i){var o=null,a=null,s=n.firstBaseUpdate;if(null!==s){var l=s;do{var c={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};null===a?o=a=c:(a.next=c,a=c),l=l.next}while(null!==l);null===a?o=a=t:(a.next=t,a=t)}else o=a=t;return n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}}var u=n.lastBaseUpdate;null===u?n.firstBaseUpdate=t:u.next=t,n.lastBaseUpdate=t}function Tu(e,t,n,r,i,o){switch(n.tag){case 1:var a=n.payload;if("function"==typeof a){iu();var s=a.call(o,r,i);if(8&e.mode){Ur(!0);try{a.call(o,r,i)}finally{Ur(!1)}}return ou(),s}return a;case 3:e.flags=-65537&e.flags|Zn;case 0:var l,c=n.payload;if("function"==typeof c){if(iu(),l=c.call(o,r,i),8&e.mode){Ur(!0);try{c.call(o,r,i)}finally{Ur(!1)}}ou()}else l=c;return null==l?r:we({},r,l);case mu:return gu=!0,r}return r}function Eu(e,t,n,r){var i=e.updateQueue;gu=!1,fu=i.shared;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;if(null!==u){var h=u.updateQueue,d=h.lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=l)}}if(null!==o){for(var p=i.baseState,f=0,m=null,g=null,y=null,_=o;;){var v=_.lane,x=_.eventTime;if(Zi(r,v)){if(null!==y){var b={eventTime:x,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null};y=y.next=b}if(p=Tu(e,0,_,p,t,n),null!==_.callback&&0!==_.lane){e.flags|=64;var w=i.effects;null===w?i.effects=[_]:w.push(_)}}else{var T={eventTime:x,lane:v,tag:_.tag,payload:_.payload,callback:_.callback,next:null};null===y?(g=y=T,m=p):y=y.next=T,f=Hi(f,v)}if(null===(_=_.next)){if(null===(s=i.shared.pending))break;var E=s,S=E.next;E.next=null,_=S,i.lastBaseUpdate=E,i.shared.pending=null}}null===y&&(m=p),i.baseState=m,i.firstBaseUpdate=g,i.lastBaseUpdate=y;var k=i.shared.interleaved;if(null!==k){var C=k;do{f=Hi(f,C.lane),C=C.next}while(C!==k)}else null===o&&(i.shared.lanes=0);My(f),e.lanes=f,e.memoizedState=p}fu=null}function Su(e,t){if("function"!=typeof e)throw new Error("Invalid argument passed as callback. Expected a function. Instead received: "+e);e.call(t)}function ku(){gu=!1}function Cu(){return gu}function Mu(e,t,n){var r=t.effects;if(t.effects=null,null!==r)for(var i=0;i<r.length;i++){var o=r[i],a=o.callback;null!==a&&(o.callback=null,Su(a,n))}}pu=!1,fu=null;var Iu,Pu,Au,Du,zu,Ru,Ou,Lu,Fu,Bu,Nu={},Uu=(new e.Component).refs;Iu=new Set,Pu=new Set,Au=new Set,Du=new Set,Lu=new Set,zu=new Set,Fu=new Set,Bu=new Set;var ju=new Set;function Vu(e,t,n,r){var i=e.memoizedState,o=n(r,i);if(8&e.mode){Ur(!0);try{o=n(r,i)}finally{Ur(!1)}}Ru(t,o);var a=null==o?i:we({},i,o);e.memoizedState=a,0===e.lanes&&(e.updateQueue.baseState=a)}Ou=function(e,t){if(null!==e&&"function"!=typeof e){var n=t+"_"+e;ju.has(n)||(ju.add(n),s("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e))}},Ru=function(e,t){if(void 0===t){var n=Fe(e)||"Component";zu.has(n)||(zu.add(n),s("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",n))}},Object.defineProperty(Nu,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(Nu);var $u={isMounted:function(e){var t=dr.current;if(null!==t&&1===t.tag){var n=t,r=n.stateNode;r._warnedAboutRefsInRender||s("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Ne(n)||"A component"),r._warnedAboutRefsInRender=!0}var i=Wn(e);return!!i&&pr(i)===i},enqueueSetState:function(e,t,n){var r=Wn(e),i=ly(),o=cy(r),a=vu(i,o);a.payload=t,null!=n&&(Ou(n,"setState"),a.callback=n),xu(r,a);var s=uy(r,o,i);null!==s&&bu(s,r,o),Qr(r,o)},enqueueReplaceState:function(e,t,n){var r=Wn(e),i=ly(),o=cy(r),a=vu(i,o);a.tag=1,a.payload=t,null!=n&&(Ou(n,"replaceState"),a.callback=n),xu(r,a);var s=uy(r,o,i);null!==s&&bu(s,r,o),Qr(r,o)},enqueueForceUpdate:function(e,t){var n=Wn(e),r=ly(),i=cy(n),o=vu(r,i);o.tag=mu,null!=t&&(Ou(t,"forceUpdate"),o.callback=t),xu(n,o);var a=uy(n,i,r);null!==a&&bu(a,n,i),function(e,t){null!==Fr&&"function"==typeof Fr.markForceUpdateScheduled&&Fr.markForceUpdateScheduled(e,t)}(n,i)}};function qu(e,t,n,r,i,o,a){var l=e.stateNode;if("function"==typeof l.shouldComponentUpdate){var c=l.shouldComponentUpdate(r,o,a);if(8&e.mode){Ur(!0);try{c=l.shouldComponentUpdate(r,o,a)}finally{Ur(!1)}}return void 0===c&&s("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",Fe(t)||"Component"),c}return!(t.prototype&&t.prototype.isPureReactComponent&&Ya(n,r)&&Ya(i,o))}function Gu(e,t){var n;t.updater=$u,e.stateNode=t,n=e,t._reactInternals=n,t._reactInternalInstance=Nu}function Wu(e,t,n){var r=!1,i=yc,o=yc,a=t.contextType;if("contextType"in t&&null!==a&&(void 0===a||a.$$typeof!==ae||void 0!==a._context)&&!Bu.has(t)){Bu.add(t);var l;l=void 0===a?" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":"object"!=typeof a?" However, it is set to a "+typeof a+".":a.$$typeof===oe?" Did you accidentally pass the Context.Provider instead?":void 0!==a._context?" Did you accidentally pass the Context.Consumer instead?":" However, it is set to an object with keys {"+Object.keys(a).join(", ")+"}.",s("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",Fe(t)||"Component",l)}"object"==typeof a&&null!==a?o=uu(a):(i=bc(0,t,!0),o=(r=null!=t.contextTypes)?Tc(e,i):yc);var c=new t(n,o);if(8&e.mode){Ur(!0);try{c=new t(n,o)}finally{Ur(!1)}}var u=e.memoizedState=null!==c.state&&void 0!==c.state?c.state:null;if(Gu(e,c),"function"==typeof t.getDerivedStateFromProps&&null===u){var h=Fe(t)||"Component";Pu.has(h)||(Pu.add(h),s("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",h,null===c.state?"null":"undefined",h))}if("function"==typeof t.getDerivedStateFromProps||"function"==typeof c.getSnapshotBeforeUpdate){var d=null,p=null,f=null;if("function"==typeof c.componentWillMount&&!0!==c.componentWillMount.__suppressDeprecationWarning?d="componentWillMount":"function"==typeof c.UNSAFE_componentWillMount&&(d="UNSAFE_componentWillMount"),"function"==typeof c.componentWillReceiveProps&&!0!==c.componentWillReceiveProps.__suppressDeprecationWarning?p="componentWillReceiveProps":"function"==typeof c.UNSAFE_componentWillReceiveProps&&(p="UNSAFE_componentWillReceiveProps"),"function"==typeof c.componentWillUpdate&&!0!==c.componentWillUpdate.__suppressDeprecationWarning?f="componentWillUpdate":"function"==typeof c.UNSAFE_componentWillUpdate&&(f="UNSAFE_componentWillUpdate"),null!==d||null!==p||null!==f){var m=Fe(t)||"Component",g="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Du.has(m)||(Du.add(m),s("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n%s uses %s but also contains the following legacy lifecycles:%s%s%s\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://reactjs.org/link/unsafe-component-lifecycles",m,g,null!==d?"\n  "+d:"",null!==p?"\n  "+p:"",null!==f?"\n  "+f:""))}}return r&&wc(e,i,o),c}function Zu(e,t,n,r){var i=t.state;if("function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==i){var o=Ne(e)||"Component";Iu.has(o)||(Iu.add(o),s("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",o)),$u.enqueueReplaceState(t,t.state,null)}}function Hu(e,t,n,r){!function(e,t,n){var r=e.stateNode,i=Fe(t)||"Component";r.render||(t.prototype&&"function"==typeof t.prototype.render?s("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",i):s("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",i)),!r.getInitialState||r.getInitialState.isReactClassApproved||r.state||s("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",i),r.getDefaultProps&&!r.getDefaultProps.isReactClassApproved&&s("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",i),r.propTypes&&s("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",i),r.contextType&&s("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",i),r.contextTypes&&s("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",i),t.contextType&&t.contextTypes&&!Fu.has(t)&&(Fu.add(t),s("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",i)),"function"==typeof r.componentShouldUpdate&&s("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",i),t.prototype&&t.prototype.isPureReactComponent&&void 0!==r.shouldComponentUpdate&&s("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",Fe(t)||"A pure component"),"function"==typeof r.componentDidUnmount&&s("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",i),"function"==typeof r.componentDidReceiveProps&&s("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",i),"function"==typeof r.componentWillRecieveProps&&s("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",i),"function"==typeof r.UNSAFE_componentWillRecieveProps&&s("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",i);var o=r.props!==n;void 0!==r.props&&o&&s("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",i,i),r.defaultProps&&s("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",i,i),"function"!=typeof r.getSnapshotBeforeUpdate||"function"==typeof r.componentDidUpdate||Au.has(t)||(Au.add(t),s("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",Fe(t))),"function"==typeof r.getDerivedStateFromProps&&s("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",i),"function"==typeof r.getDerivedStateFromError&&s("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",i),"function"==typeof t.getSnapshotBeforeUpdate&&s("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",i);var a=r.state;a&&("object"!=typeof a||xt(a))&&s("%s.state: must be set to an object or null",i),"function"==typeof r.getChildContext&&"object"!=typeof t.childContextTypes&&s("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",i)}(e,t,n);var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Uu,yu(e);var o=t.contextType;if("object"==typeof o&&null!==o)i.context=uu(o);else{var a=bc(0,t,!0);i.context=Tc(e,a)}if(i.state===n){var l=Fe(t)||"Component";Lu.has(l)||(Lu.add(l),s("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",l))}8&e.mode&&Nc.recordLegacyContextWarning(e,i),Nc.recordUnsafeLifecycleWarnings(e,i),i.state=e.memoizedState;var c=t.getDerivedStateFromProps;if("function"==typeof c&&(Vu(e,t,c,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(function(e,t){var n=t.state;"function"==typeof t.componentWillMount&&t.componentWillMount(),"function"==typeof t.UNSAFE_componentWillMount&&t.UNSAFE_componentWillMount(),n!==t.state&&(s("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",Ne(e)||"Component"),$u.enqueueReplaceState(t,t.state,null))}(e,i),Eu(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount){var u=4;u|=ar,0!=(e.mode&Jr)&&(u|=sr),e.flags|=u}}var Xu=[],Yu=0,Ku=null,Qu=0,Ju=[],eh=0,th=null,nh=1,rh="";function ih(e,t){ch(),Xu[Yu++]=Qu,Xu[Yu++]=Ku,Ku=e,Qu=t}function oh(e,t,n){ch(),Ju[eh++]=nh,Ju[eh++]=rh,Ju[eh++]=th,th=e;var r=nh,i=rh,o=sh(r)-1,a=r&~(1<<o),s=n+1,l=sh(t)+o;if(l>30){var c=o-o%5,u=(a&(1<<c)-1).toString(32),h=a>>c,d=o-c,p=sh(t)+d;nh=1<<p|s<<d|h,rh=u+i}else nh=1<<l|s<<o|a,rh=i}function ah(e){ch(),null!==e.return&&(ih(e,1),oh(e,1,0))}function sh(e){return 32-ei(e)}function lh(e){for(;e===Ku;)Ku=Xu[--Yu],Xu[Yu]=null,Qu=Xu[--Yu],Xu[Yu]=null;for(;e===th;)th=Ju[--eh],Ju[eh]=null,rh=Ju[--eh],Ju[eh]=null,nh=Ju[--eh],Ju[eh]=null}function ch(){Oh()||s("Expected to be hydrating. This is a bug in React. Please file an issue.")}var uh,hh,dh,ph,fh,mh,gh=null,yh=null,_h=!1,vh=!1,xh=null;function bh(e,t,n){return yh=jl(t.nextSibling),gh=e,_h=!0,xh=null,vh=!1,null!==n&&function(e,t){ch(),Ju[eh++]=nh,Ju[eh++]=rh,Ju[eh++]=th,nh=t.id,rh=t.overflow,th=e}(e,n),!0}function wh(e,t){switch(e.tag){case 3:!function(e,t){1===t.nodeType?ul(e,t):8===t.nodeType||hl(e,t)}(e.stateNode.containerInfo,t);break;case 5:!function(e,t,n,r){!0!==t.suppressHydrationWarning&&(1===r.nodeType?ul(n,r):8===r.nodeType||hl(n,r))}(e.type,e.memoizedProps,e.stateNode,t);break;case d:var n=e.memoizedState;null!==n.dehydrated&&function(e,t){var n=e.parentNode;null!==n&&(1===t.nodeType?ul(n,t):8===t.nodeType||hl(n,t))}(n.dehydrated,t)}}function Th(e,t){wh(e,t);var n,r=((n=v_(5,null,null,0)).elementType="DELETED",n);r.stateNode=t,r.return=e;var i=e.deletions;null===i?(e.deletions=[r],e.flags|=16):i.push(r)}function Eh(e,t){if(!vh)switch(e.tag){case 3:var n=e.stateNode.containerInfo;switch(t.tag){case 5:var r=t.type;t.pendingProps,function(e,t,n){dl(e,t)}(n,r);break;case 6:!function(e,t){pl(e,t)}(n,t.pendingProps)}break;case 5:e.type;var i=e.memoizedProps,o=e.stateNode;switch(t.tag){case 5:var a=t.type;t.pendingProps,function(e,t,n,r,i){!0!==t.suppressHydrationWarning&&dl(n,r)}(0,i,o,a);break;case 6:!function(e,t,n,r){!0!==t.suppressHydrationWarning&&pl(n,r)}(0,i,o,t.pendingProps);break;case d:!function(e,t,n){t.suppressHydrationWarning}(0,i)}break;case d:var s=e.memoizedState.dehydrated;if(null!==s)switch(t.tag){case 5:var l=t.type;t.pendingProps,function(e,t,n){var r=e.parentNode;null!==r&&dl(r,t)}(s,l);break;case 6:!function(e,t){var n=e.parentNode;null!==n&&pl(n,t)}(s,t.pendingProps)}break;default:return}}function Sh(e,t){t.flags=-4097&t.flags|2,Eh(e,t)}function kh(e,t){switch(e.tag){case 5:var n=e.type,r=(e.pendingProps,function(e,t,n){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e}(t,n));return null!==r&&(e.stateNode=r,gh=e,yh=jl(r.firstChild),!0);case 6:var i=function(e,t){return""===t||3!==e.nodeType?null:e}(t,e.pendingProps);return null!==i&&(e.stateNode=i,gh=e,yh=null,!0);case d:var o=function(e){return 8!==e.nodeType?null:e}(t);if(null!==o){var a={dehydrated:o,treeContext:(ch(),null!==th?{id:nh,overflow:rh}:null),retryLane:Ii};e.memoizedState=a;var s=function(e){var t=v_(g,null,null,0);return t.stateNode=e,t}(o);return s.return=e,e.child=s,gh=e,yh=null,!0}return!1;default:return!1}}function Ch(e){return 0!=(1&e.mode)&&0==(e.flags&Zn)}function Mh(e){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function Ih(e){if(_h){var t=yh;if(!t)return Ch(e)&&(Eh(gh,e),Mh()),Sh(gh,e),_h=!1,void(gh=e);var n=t;if(!kh(e,t)){Ch(e)&&(Eh(gh,e),Mh()),t=Vl(n);var r=gh;if(!t||!kh(e,t))return Sh(gh,e),_h=!1,void(gh=e);Th(r,n)}}}function Ph(e){for(var t=e.return;null!==t&&5!==t.tag&&3!==t.tag&&t.tag!==d;)t=t.return;gh=t}function Ah(e){if(e!==gh)return!1;if(!_h)return Ph(e),_h=!0,!1;if(3!==e.tag&&(5!==e.tag||"head"!==(n=e.type)&&"body"!==n&&!Cl(e.type,e.memoizedProps))){var t=yh;if(t)if(Ch(e))Dh(e),Mh();else for(;t;)Th(e,t),t=Vl(t)}var n;return Ph(e),yh=e.tag===d?function(e){var t=e.memoizedState,n=null!==t?t.dehydrated:null;if(!n)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return function(e){for(var t=e.nextSibling,n=0;t;){if(8===t.nodeType){var r=t.data;if(r===Tl){if(0===n)return Vl(t);n--}else r!==wl&&r!==Sl&&r!==El||n++}t=t.nextSibling}return null}(n)}(e):gh?Vl(e.stateNode):null,!0}function Dh(e){for(var t=yh;t;)wh(e,t),t=Vl(t)}function zh(){gh=null,yh=null,_h=!1,vh=!1}function Rh(){null!==xh&&(gy(xh),xh=null)}function Oh(){return _h}function Lh(e){null===xh?xh=[e]:xh.push(e)}function Fh(e,t,n){var r,i=n.ref;if(null!==i&&"function"!=typeof i&&"object"!=typeof i){if(8&e.mode&&(!n._owner||!n._self||n._owner.stateNode===n._self)){var o=Ne(e)||"Component";dh[o]||(s('A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',i),dh[o]=!0)}if(n._owner){var a,l=n._owner;if(l){var c=l;if(1!==c.tag)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");a=c.stateNode}if(!a)throw new Error("Missing owner for string ref "+i+". This error is likely caused by a bug in React. Please file an issue.");var u=a;I(r=i)&&(s("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.","ref",M(r)),P(r));var h=""+i;if(null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===h)return t.ref;var d=function(e){var t=u.refs;t===Uu&&(t=u.refs={}),null===e?delete t[h]:t[h]=e};return d._stringRef=h,d}if("string"!=typeof i)throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!n._owner)throw new Error("Element ref was specified as a string ("+i+") but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a function component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://reactjs.org/link/refs-must-have-owner for more information.")}return i}function Bh(e,t){var n=Object.prototype.toString.call(t);throw new Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.")}function Nh(e){var t=Ne(e)||"Component";fh[t]||(fh[t]=!0,s("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it."))}function Uh(e){var t=e._payload;return(0,e._init)(t)}function jh(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(var i=r;null!==i;)t(n,i),i=i.sibling;return null}function r(e,t){for(var n=new Map,r=t;null!==r;)null!==r.key?n.set(r.key,r):n.set(r.index,r),r=r.sibling;return n}function i(e,t){var n=b_(e,t);return n.index=0,n.sibling=null,n}function o(t,n,r){if(t.index=r,!e)return t.flags|=ir,n;var i=t.alternate;if(null!==i){var o=i.index;return o<n?(t.flags|=2,n):o}return t.flags|=2,n}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){if(null===t||6!==t.tag){var o=C_(n,e.mode,r);return o.return=e,o}var a=i(t,n);return a.return=e,a}function c(e,t,n,r){var o=n.type;if(o===ne)return h(e,t,n.props.children,r,n.key);if(null!==t&&(t.elementType===o||c_(t,n)||"object"==typeof o&&null!==o&&o.$$typeof===he&&Uh(o)===t.type)){var a=i(t,n.props);return a.ref=Fh(e,t,n),a.return=e,a._debugSource=n._source,a._debugOwner=n._owner,a}var s=E_(n,e.mode,r);return s.ref=Fh(e,t,n),s.return=e,s}function u(e,t,n,r){if(null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation){var o=M_(n,e.mode,r);return o.return=e,o}var a=i(t,n.children||[]);return a.return=e,a}function h(e,t,n,r,o){if(null===t||7!==t.tag){var a=S_(n,e.mode,r,o);return a.return=e,a}var s=i(t,n);return s.return=e,s}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t){var r=C_(""+t,e.mode,n);return r.return=e,r}if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:var i=E_(t,e.mode,n);return i.ref=Fh(e,null,t),i.return=e,i;case te:var o=M_(t,e.mode,n);return o.return=e,o;case he:var a=t._payload;return d(e,(0,t._init)(a),n)}if(xt(t)||fe(t)){var s=S_(t,e.mode,n,null);return s.return=e,s}Bh(0,t)}return"function"==typeof t&&Nh(e),null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?c(e,t,n,r):null;case te:return n.key===i?u(e,t,n,r):null;case he:var o=n._payload;return p(e,t,(0,n._init)(o),r)}if(xt(n)||fe(n))return null!==i?null:h(e,t,n,r,null);Bh(0,n)}return"function"==typeof n&&Nh(e),null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return c(t,e.get(null===r.key?n:r.key)||null,r,i);case te:return u(t,e.get(null===r.key?n:r.key)||null,r,i);case he:var o=r._payload;return f(e,t,n,(0,r._init)(o),i)}if(xt(r)||fe(r))return h(t,e.get(n)||null,r,i,null);Bh(0,r)}return"function"==typeof r&&Nh(t),null}function m(e,t,n){if("object"!=typeof e||null===e)return t;switch(e.$$typeof){case ee:case te:mh(e,n);var r=e.key;if("string"!=typeof r)break;if(null===t){(t=new Set).add(r);break}if(!t.has(r)){t.add(r);break}s("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",r);break;case he:var i=e._payload;m((0,e._init)(i),t,n)}return t}return function l(c,u,h,g){if("object"==typeof h&&null!==h&&h.type===ne&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case ee:return a(function(e,r,o,a){for(var s=o.key,l=r;null!==l;){if(l.key===s){var c=o.type;if(c===ne){if(7===l.tag){n(e,l.sibling);var u=i(l,o.props.children);return u.return=e,u._debugSource=o._source,u._debugOwner=o._owner,u}}else if(l.elementType===c||c_(l,o)||"object"==typeof c&&null!==c&&c.$$typeof===he&&Uh(c)===l.type){n(e,l.sibling);var h=i(l,o.props);return h.ref=Fh(e,l,o),h.return=e,h._debugSource=o._source,h._debugOwner=o._owner,h}n(e,l);break}t(e,l),l=l.sibling}if(o.type===ne){var d=S_(o.props.children,e.mode,a,o.key);return d.return=e,d}var p=E_(o,e.mode,a);return p.ref=Fh(e,r,o),p.return=e,p}(c,u,h,g));case te:return a(function(e,r,o,a){for(var s=o.key,l=r;null!==l;){if(l.key===s){if(4===l.tag&&l.stateNode.containerInfo===o.containerInfo&&l.stateNode.implementation===o.implementation){n(e,l.sibling);var c=i(l,o.children||[]);return c.return=e,c}n(e,l);break}t(e,l),l=l.sibling}var u=M_(o,e.mode,a);return u.return=e,u}(c,u,h,g));case he:var y=h._payload;return l(c,u,(0,h._init)(y),g)}if(xt(h))return function(i,a,s,l){for(var c=null,u=0;u<s.length;u++)c=m(s[u],c,i);for(var h=null,g=null,y=a,_=0,v=0,x=null;null!==y&&v<s.length;v++){y.index>v?(x=y,y=null):x=y.sibling;var b=p(i,y,s[v],l);if(null===b){null===y&&(y=x);break}e&&y&&null===b.alternate&&t(i,y),_=o(b,_,v),null===g?h=b:g.sibling=b,g=b,y=x}if(v===s.length)return n(i,y),Oh()&&ih(i,v),h;if(null===y){for(;v<s.length;v++){var w=d(i,s[v],l);null!==w&&(_=o(w,_,v),null===g?h=w:g.sibling=w,g=w)}return Oh()&&ih(i,v),h}for(var T=r(0,y);v<s.length;v++){var E=f(T,i,v,s[v],l);null!==E&&(e&&null!==E.alternate&&T.delete(null===E.key?v:E.key),_=o(E,_,v),null===g?h=E:g.sibling=E,g=E)}return e&&T.forEach((function(e){return t(i,e)})),Oh()&&ih(i,v),h}(c,u,h,g);if(fe(h))return function(i,a,l,c){var u=fe(l);if("function"!=typeof u)throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");"function"==typeof Symbol&&"Generator"===l[Symbol.toStringTag]&&(hh||s("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),hh=!0),l.entries===u&&(uh||s("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),uh=!0);var h=u.call(l);if(h)for(var g=null,y=h.next();!y.done;y=h.next())g=m(y.value,g,i);var _=u.call(l);if(null==_)throw new Error("An iterable object provided no iterator.");for(var v=null,x=null,b=a,w=0,T=0,E=null,S=_.next();null!==b&&!S.done;T++,S=_.next()){b.index>T?(E=b,b=null):E=b.sibling;var k=p(i,b,S.value,c);if(null===k){null===b&&(b=E);break}e&&b&&null===k.alternate&&t(i,b),w=o(k,w,T),null===x?v=k:x.sibling=k,x=k,b=E}if(S.done)return n(i,b),Oh()&&ih(i,T),v;if(null===b){for(;!S.done;T++,S=_.next()){var C=d(i,S.value,c);null!==C&&(w=o(C,w,T),null===x?v=C:x.sibling=C,x=C)}return Oh()&&ih(i,T),v}for(var M=r(0,b);!S.done;T++,S=_.next()){var I=f(M,i,T,S.value,c);null!==I&&(e&&null!==I.alternate&&M.delete(null===I.key?T:I.key),w=o(I,w,T),null===x?v=I:x.sibling=I,x=I)}return e&&M.forEach((function(e){return t(i,e)})),Oh()&&ih(i,T),v}(c,u,h,g);Bh(0,h)}return"string"==typeof h&&""!==h||"number"==typeof h?a(function(e,t,r,o){if(null!==t&&6===t.tag){n(e,t.sibling);var a=i(t,r);return a.return=e,a}n(e,t);var s=C_(r,e.mode,o);return s.return=e,s}(c,u,""+h,g)):("function"==typeof h&&Nh(c),n(c,u))}}uh=!1,hh=!1,dh={},ph={},fh={},mh=function(e,t){if(null!==e&&"object"==typeof e&&e._store&&!e._store.validated&&null==e.key){if("object"!=typeof e._store)throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");e._store.validated=!0;var n=Ne(t)||"Component";ph[n]||(ph[n]=!0,s('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};var Vh=jh(!0),$h=jh(!1);function qh(e,t){for(var n=e.child;null!==n;)w_(n,t),n=n.sibling}var Gh={},Wh=fc(Gh),Zh=fc(Gh),Hh=fc(Gh);function Xh(e){if(e===Gh)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function Yh(){return Xh(Hh.current)}function Kh(e,t){gc(Hh,t,e),gc(Zh,e,e),gc(Wh,Gh,e);var n=function(e){var t,n,r=e.nodeType;switch(r){case 9:case 11:t=9===r?"#document":"#fragment";var i=e.documentElement;n=i?i.namespaceURI:Rt(null,"");break;default:var o=8===r?e.parentNode:e;n=Rt(o.namespaceURI||null,t=o.tagName)}var a=t.toLowerCase();return{namespace:n,ancestorInfo:ml(null,a)}}(t);mc(Wh,e),gc(Wh,n,e)}function Qh(e){mc(Wh,e),mc(Zh,e),mc(Hh,e)}function Jh(){return Xh(Wh.current)}function ed(e){Xh(Hh.current);var t,n,r,i=Xh(Wh.current),o=(t=i,n=e.type,{namespace:Rt((r=t).namespace,n),ancestorInfo:ml(r.ancestorInfo,n)});i!==o&&(gc(Zh,e,e),gc(Wh,o,e))}function td(e){Zh.current===e&&(mc(Wh,e),mc(Zh,e))}var nd=fc(0);function rd(e,t){return 0!=(e&t)}function id(e){return 1&e}function od(e,t){return 1&e|t}function ad(e,t){gc(nd,t,e)}function sd(e){mc(nd,e)}function ld(e,t){var n=e.memoizedState;return null!==n?null!==n.dehydrated:(e.memoizedProps,!0)}function cd(e){for(var t=e;null!==t;){if(t.tag===d){var n=t.memoizedState;if(null!==n){var r=n.dehydrated;if(null===r||Nl(r)||Ul(r))return t}}else if(t.tag===y&&void 0!==t.memoizedProps.revealOrder){if(0!=(t.flags&Zn))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)return null;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ud=[];function hd(){for(var e=0;e<ud.length;e++)ud[e]._workInProgressVersionPrimary=null;ud.length=0}function dd(e,t){var n=(0,t._getVersion)(t._source);null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)}var pd,fd,md=i.ReactCurrentDispatcher,gd=i.ReactCurrentBatchConfig;pd=new Set;var yd=0,_d=null,vd=null,xd=null,bd=!1,wd=!1,Td=0,Ed=0,Sd=null,kd=null,Cd=-1,Md=!1;function Id(){var e=Sd;null===kd?kd=[e]:kd.push(e)}function Pd(){var e=Sd;null!==kd&&(Cd++,kd[Cd]!==e&&function(e){var t=Ne(_d);if(!pd.has(t)&&(pd.add(t),null!==kd)){for(var n="",r=0;r<=Cd;r++){for(var i=kd[r],o=r===Cd?e:i,a=r+1+". "+i;a.length<30;)a+=" ";n+=a+=o+"\n"}s("React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks\n\n   Previous render            Next render\n   ------------------------------------------------------\n%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n",t,n)}}(e))}function Ad(e){null==e||xt(e)||s("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",Sd,typeof e)}function Dd(){throw new Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.")}function zd(e,t){if(Md)return!1;if(null===t)return s("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",Sd),!1;e.length!==t.length&&s("The final argument passed to %s changed size between renders. The order and size of this array must remain constant.\n\nPrevious: %s\nIncoming: %s",Sd,"["+t.join(", ")+"]","["+e.join(", ")+"]");for(var n=0;n<t.length&&n<e.length;n++)if(!Xa(e[n],t[n]))return!1;return!0}function Rd(e,t,n,r,i,o){yd=o,_d=t,kd=null!==e?e._debugHookTypes:null,Cd=-1,Md=null!==e&&e.type!==t.type,t.memoizedState=null,t.updateQueue=null,t.lanes=0,null!==e&&null!==e.memoizedState?md.current=Np:md.current=null!==kd?Bp:Fp;var a=n(r,i);if(wd){var l=0;do{if(wd=!1,Td=0,l>=25)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");l+=1,Md=!1,vd=null,xd=null,t.updateQueue=null,Cd=-1,md.current=Up,a=n(r,i)}while(wd)}md.current=Lp,t._debugHookTypes=kd;var c=null!==vd&&null!==vd.next;if(yd=0,_d=null,vd=null,xd=null,Sd=null,kd=null,Cd=-1,null!==e&&(e.flags&hr)!=(t.flags&hr)&&0!=(1&e.mode)&&s("Internal React error: Expected static flag was missing. Please notify the React team."),bd=!1,c)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return a}function Od(){var e=0!==Td;return Td=0,e}function Ld(e,t,n){t.updateQueue=e.updateQueue,0!=(t.mode&Jr)?t.flags&=-50333701:t.flags&=-2053,e.lanes=Xi(e.lanes,n)}function Fd(){if(md.current=Lp,bd){for(var e=_d.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}bd=!1}yd=0,_d=null,vd=null,xd=null,kd=null,Cd=-1,Sd=null,kp=!1,wd=!1,Td=0}function Bd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xd?_d.memoizedState=xd=e:xd=xd.next=e,xd}function Nd(){var e,t;if(null===vd){var n=_d.alternate;e=null!==n?n.memoizedState:null}else e=vd.next;if(null!==(t=null===xd?_d.memoizedState:xd.next))t=(xd=t).next,vd=e;else{if(null===e)throw new Error("Rendered more hooks than during the previous render.");var r={memoizedState:(vd=e).memoizedState,baseState:vd.baseState,baseQueue:vd.baseQueue,queue:vd.queue,next:null};null===xd?_d.memoizedState=xd=r:xd=xd.next=r}return xd}function Ud(e,t){return"function"==typeof t?t(e):t}function jd(e,t,n){var r,i=Bd();r=void 0!==n?n(t):t,i.memoizedState=i.baseState=r;var o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r};i.queue=o;var a=o.dispatch=Ip.bind(null,_d,o);return[i.memoizedState,a]}function Vd(e,t,n){var r=Nd(),i=r.queue;if(null===i)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");i.lastRenderedReducer=e;var o=vd,a=o.baseQueue,l=i.pending;if(null!==l){if(null!==a){var c=a.next,u=l.next;a.next=u,l.next=c}o.baseQueue!==a&&s("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),o.baseQueue=a=l,i.pending=null}if(null!==a){var h=a.next,d=o.baseState,p=null,f=null,m=null,g=h;do{var y=g.lane;if(Zi(yd,y)){if(null!==m){var _={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};m=m.next=_}d=g.hasEagerState?g.eagerState:e(d,g.action)}else{var v={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};null===m?(f=m=v,p=d):m=m.next=v,_d.lanes=Hi(_d.lanes,y),My(y)}g=g.next}while(null!==g&&g!==h);null===m?p=d:m.next=f,Xa(d,r.memoizedState)||fm(),r.memoizedState=d,r.baseState=p,r.baseQueue=m,i.lastRenderedState=d}var x=i.interleaved;if(null!==x){var b=x;do{var w=b.lane;_d.lanes=Hi(_d.lanes,w),My(w),b=b.next}while(b!==x)}else null===a&&(i.lanes=0);var T=i.dispatch;return[r.memoizedState,T]}function $d(e,t,n){var r=Nd(),i=r.queue;if(null===i)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");i.lastRenderedReducer=e;var o=i.dispatch,a=i.pending,s=r.memoizedState;if(null!==a){i.pending=null;var l=a.next,c=l;do{s=e(s,c.action),c=c.next}while(c!==l);Xa(s,r.memoizedState)||fm(),r.memoizedState=s,null===r.baseQueue&&(r.baseState=s),i.lastRenderedState=s}return[s,o]}function qd(e,t,n){var r,i=_d,o=Bd();if(Oh()){if(void 0===n)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");r=n(),fd||r!==n()&&(s("The result of getServerSnapshot should be cached to avoid an infinite loop"),fd=!0)}else{if(r=t(),!fd){var a=t();Xa(r,a)||(s("The result of getSnapshot should be cached to avoid an infinite loop"),fd=!0)}if(null===sy())throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Ui(0,yd)||Wd(i,t,r)}o.memoizedState=r;var l={value:r,getSnapshot:t};return o.queue=l,op(Hd.bind(null,i,l,e),[e]),i.flags|=Kn,ep(9,Zd.bind(null,i,l,r,t),void 0,null),r}function Gd(e,t,n){var r=_d,i=Nd(),o=t();if(!fd){var a=t();Xa(o,a)||(s("The result of getSnapshot should be cached to avoid an infinite loop"),fd=!0)}var l=i.memoizedState,c=!Xa(l,o);c&&(i.memoizedState=o,fm());var u=i.queue;if(ap(Hd.bind(null,r,u,e),[e]),u.getSnapshot!==t||c||null!==xd&&1&xd.memoizedState.tag){if(r.flags|=Kn,ep(9,Zd.bind(null,r,u,o,t),void 0,null),null===sy())throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Ui(0,yd)||Wd(r,t,o)}return o}function Wd(e,t,n){e.flags|=er;var r={getSnapshot:t,value:n},i=_d.updateQueue;if(null===i)i={lastEffect:null,stores:null},_d.updateQueue=i,i.stores=[r];else{var o=i.stores;null===o?i.stores=[r]:o.push(r)}}function Zd(e,t,n,r){t.value=n,t.getSnapshot=r,Xd(t)&&Yd(e)}function Hd(e,t,n){return n((function(){Xd(t)&&Yd(e)}))}function Xd(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Xa(n,r)}catch(e){return!0}}function Yd(e){uy(e,1,Ai)}function Kd(e){var t=Bd();"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e;var n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ud,lastRenderedState:e};t.queue=n;var r=n.dispatch=Pp.bind(null,_d,n);return[t.memoizedState,r]}function Qd(e){return Vd(Ud)}function Jd(e){return $d(Ud)}function ep(e,t,n,r){var i={tag:e,create:t,destroy:n,deps:r,next:null},o=_d.updateQueue;if(null===o)o={lastEffect:null,stores:null},_d.updateQueue=o,o.lastEffect=i.next=i;else{var a=o.lastEffect;if(null===a)o.lastEffect=i.next=i;else{var s=a.next;a.next=i,i.next=s,o.lastEffect=i}}return i}function tp(e){var t={current:e};return Bd().memoizedState=t,t}function np(e){return Nd().memoizedState}function rp(e,t,n,r){var i=Bd(),o=void 0===r?null:r;_d.flags|=e,i.memoizedState=ep(1|t,n,void 0,o)}function ip(e,t,n,r){var i=Nd(),o=void 0===r?null:r,a=void 0;if(null!==vd){var s=vd.memoizedState;if(a=s.destroy,null!==o&&zd(o,s.deps))return void(i.memoizedState=ep(t,n,a,o))}_d.flags|=e,i.memoizedState=ep(1|t,n,a,o)}function op(e,t){return 0!=(_d.mode&Jr)?rp(41945088,8,e,t):rp(8390656,8,e,t)}function ap(e,t){return ip(Kn,8,e,t)}function sp(e,t){return rp(4,2,e,t)}function lp(e,t){return ip(4,2,e,t)}function cp(e,t){var n=4;return n|=ar,0!=(_d.mode&Jr)&&(n|=sr),rp(n,4,e,t)}function up(e,t){return ip(4,4,e,t)}function hp(e,t){if("function"==typeof t){var n=t,r=e();return n(r),function(){n(null)}}if(null!=t){var i=t;i.hasOwnProperty("current")||s("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(i).join(", ")+"}");var o=e();return i.current=o,function(){i.current=null}}}function dp(e,t,n){"function"!=typeof t&&s("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",null!==t?typeof t:"null");var r=null!=n?n.concat([e]):null,i=4;return i|=ar,0!=(_d.mode&Jr)&&(i|=sr),rp(i,4,hp.bind(null,t,e),r)}function pp(e,t,n){"function"!=typeof t&&s("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",null!==t?typeof t:"null");var r=null!=n?n.concat([e]):null;return ip(4,4,hp.bind(null,t,e),r)}var fp=function(e,t){};function mp(e,t){var n=void 0===t?null:t;return Bd().memoizedState=[e,n],e}function gp(e,t){var n=Nd(),r=void 0===t?null:t,i=n.memoizedState;return null!==i&&null!==r&&zd(r,i[1])?i[0]:(n.memoizedState=[e,r],e)}function yp(e,t){var n=Bd(),r=void 0===t?null:t,i=e();return n.memoizedState=[i,r],i}function _p(e,t){var n=Nd(),r=void 0===t?null:t,i=n.memoizedState;if(null!==i&&null!==r&&zd(r,i[1]))return i[0];var o=e();return n.memoizedState=[o,r],o}function vp(e){var t=Kd(e),n=t[0],r=t[1];return op((function(){var t=gd.transition;gd.transition={};try{r(e)}finally{gd.transition=t}}),[e]),n}function xp(e){var t=Qd(),n=t[0],r=t[1];return ap((function(){var t=gd.transition;gd.transition={};try{r(e)}finally{gd.transition=t}}),[e]),n}function bp(e){var t=Jd(),n=t[0],r=t[1];return ap((function(){var t=gd.transition;gd.transition={};try{r(e)}finally{gd.transition=t}}),[e]),n}function wp(e,t,n){var r,i=ho();po((4,0!==(r=i)&&r<4?r:4)),e(!0);var o=gd.transition;gd.transition={};var s=gd.transition;gd.transition._updatedFibers=new Set;try{e(!1),t()}finally{po(i),gd.transition=o,null===o&&s._updatedFibers&&(s._updatedFibers.size>10&&a("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),s._updatedFibers.clear())}}function Tp(){var e=Kd(!1),t=e[0],n=e[1],r=wp.bind(null,n);return Bd().memoizedState=r,[t,r]}function Ep(){return[Qd()[0],Nd().memoizedState]}function Sp(){return[Jd()[0],Nd().memoizedState]}var kp=!1;function Cp(){var e,t=Bd(),n=sy().identifierPrefix;if(Oh()){e=":"+n+"R"+function(){var e,t=rh;return(nh&(e=nh,~(1<<sh(e)-1))).toString(32)+t}();var r=Td++;r>0&&(e+="H"+r.toString(32)),e+=":"}else e=":"+n+"r"+(Ed++).toString(32)+":";return t.memoizedState=e,e}function Mp(){return Nd().memoizedState}function Ip(e,t,n){"function"==typeof arguments[3]&&s("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var r=cy(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(e))Dp(t,i);else{zp(e,t,i);var o=ly(),a=uy(e,r,o);null!==a&&Rp(a,t,r)}Op(e,r)}function Pp(e,t,n){"function"==typeof arguments[3]&&s("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var r=cy(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(e))Dp(t,i);else{zp(e,t,i);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)){var a=t.lastRenderedReducer;if(null!==a){var l;l=md.current,md.current=Vp;try{var c=t.lastRenderedState,u=a(c,n);if(i.hasEagerState=!0,i.eagerState=u,Xa(u,c))return}catch(e){}finally{md.current=l}}}var h=ly(),d=uy(e,r,h);null!==d&&Rp(d,t,r)}Op(e,r)}function Ap(e){var t=e.alternate;return e===_d||null!==t&&t===_d}function Dp(e,t){wd=bd=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zp(e,t,n,r){if(dy(e)){var i=t.interleaved;null===i?(n.next=n,du(t)):(n.next=i.next,i.next=n),t.interleaved=n}else{var o=t.pending;null===o?n.next=n:(n.next=o.next,o.next=n),t.pending=n}}function Rp(e,t,n){if(ji(n)){var r=t.lanes,i=Hi(r=Yi(r,e.pendingLanes),n);t.lanes=i,eo(e,i)}}function Op(e,t,n){Qr(e,t)}var Lp={readContext:uu,useCallback:Dd,useContext:Dd,useEffect:Dd,useImperativeHandle:Dd,useInsertionEffect:Dd,useLayoutEffect:Dd,useMemo:Dd,useReducer:Dd,useRef:Dd,useState:Dd,useDebugValue:Dd,useDeferredValue:Dd,useTransition:Dd,useMutableSource:Dd,useSyncExternalStore:Dd,useId:Dd,unstable_isNewReconciler:x},Fp=null,Bp=null,Np=null,Up=null,jp=null,Vp=null,$p=null,qp=function(){s("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},Gp=function(){s("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};Fp={readContext:function(e){return uu(e)},useCallback:function(e,t){return Sd="useCallback",Id(),Ad(t),mp(e,t)},useContext:function(e){return Sd="useContext",Id(),uu(e)},useEffect:function(e,t){return Sd="useEffect",Id(),Ad(t),op(e,t)},useImperativeHandle:function(e,t,n){return Sd="useImperativeHandle",Id(),Ad(n),dp(e,t,n)},useInsertionEffect:function(e,t){return Sd="useInsertionEffect",Id(),Ad(t),sp(e,t)},useLayoutEffect:function(e,t){return Sd="useLayoutEffect",Id(),Ad(t),cp(e,t)},useMemo:function(e,t){Sd="useMemo",Id(),Ad(t);var n=md.current;md.current=jp;try{return yp(e,t)}finally{md.current=n}},useReducer:function(e,t,n){Sd="useReducer",Id();var r=md.current;md.current=jp;try{return jd(e,t,n)}finally{md.current=r}},useRef:function(e){return Sd="useRef",Id(),tp(e)},useState:function(e){Sd="useState",Id();var t=md.current;md.current=jp;try{return Kd(e)}finally{md.current=t}},useDebugValue:function(e,t){Sd="useDebugValue",Id()},useDeferredValue:function(e){return Sd="useDeferredValue",Id(),vp(e)},useTransition:function(){return Sd="useTransition",Id(),Tp()},useMutableSource:function(e,t,n){Sd="useMutableSource",Id()},useSyncExternalStore:function(e,t,n){return Sd="useSyncExternalStore",Id(),qd(e,t,n)},useId:function(){return Sd="useId",Id(),Cp()},unstable_isNewReconciler:x},Bp={readContext:function(e){return uu(e)},useCallback:function(e,t){return Sd="useCallback",Pd(),mp(e,t)},useContext:function(e){return Sd="useContext",Pd(),uu(e)},useEffect:function(e,t){return Sd="useEffect",Pd(),op(e,t)},useImperativeHandle:function(e,t,n){return Sd="useImperativeHandle",Pd(),dp(e,t,n)},useInsertionEffect:function(e,t){return Sd="useInsertionEffect",Pd(),sp(e,t)},useLayoutEffect:function(e,t){return Sd="useLayoutEffect",Pd(),cp(e,t)},useMemo:function(e,t){Sd="useMemo",Pd();var n=md.current;md.current=jp;try{return yp(e,t)}finally{md.current=n}},useReducer:function(e,t,n){Sd="useReducer",Pd();var r=md.current;md.current=jp;try{return jd(e,t,n)}finally{md.current=r}},useRef:function(e){return Sd="useRef",Pd(),tp(e)},useState:function(e){Sd="useState",Pd();var t=md.current;md.current=jp;try{return Kd(e)}finally{md.current=t}},useDebugValue:function(e,t){Sd="useDebugValue",Pd()},useDeferredValue:function(e){return Sd="useDeferredValue",Pd(),vp(e)},useTransition:function(){return Sd="useTransition",Pd(),Tp()},useMutableSource:function(e,t,n){Sd="useMutableSource",Pd()},useSyncExternalStore:function(e,t,n){return Sd="useSyncExternalStore",Pd(),qd(e,t,n)},useId:function(){return Sd="useId",Pd(),Cp()},unstable_isNewReconciler:x},Np={readContext:function(e){return uu(e)},useCallback:function(e,t){return Sd="useCallback",Pd(),gp(e,t)},useContext:function(e){return Sd="useContext",Pd(),uu(e)},useEffect:function(e,t){return Sd="useEffect",Pd(),ap(e,t)},useImperativeHandle:function(e,t,n){return Sd="useImperativeHandle",Pd(),pp(e,t,n)},useInsertionEffect:function(e,t){return Sd="useInsertionEffect",Pd(),lp(e,t)},useLayoutEffect:function(e,t){return Sd="useLayoutEffect",Pd(),up(e,t)},useMemo:function(e,t){Sd="useMemo",Pd();var n=md.current;md.current=Vp;try{return _p(e,t)}finally{md.current=n}},useReducer:function(e,t,n){Sd="useReducer",Pd();var r=md.current;md.current=Vp;try{return Vd(e)}finally{md.current=r}},useRef:function(e){return Sd="useRef",Pd(),np()},useState:function(e){Sd="useState",Pd();var t=md.current;md.current=Vp;try{return Qd()}finally{md.current=t}},useDebugValue:function(e,t){return Sd="useDebugValue",Pd(),fp()},useDeferredValue:function(e){return Sd="useDeferredValue",Pd(),xp(e)},useTransition:function(){return Sd="useTransition",Pd(),Ep()},useMutableSource:function(e,t,n){Sd="useMutableSource",Pd()},useSyncExternalStore:function(e,t,n){return Sd="useSyncExternalStore",Pd(),Gd(e,t)},useId:function(){return Sd="useId",Pd(),Mp()},unstable_isNewReconciler:x},Up={readContext:function(e){return uu(e)},useCallback:function(e,t){return Sd="useCallback",Pd(),gp(e,t)},useContext:function(e){return Sd="useContext",Pd(),uu(e)},useEffect:function(e,t){return Sd="useEffect",Pd(),ap(e,t)},useImperativeHandle:function(e,t,n){return Sd="useImperativeHandle",Pd(),pp(e,t,n)},useInsertionEffect:function(e,t){return Sd="useInsertionEffect",Pd(),lp(e,t)},useLayoutEffect:function(e,t){return Sd="useLayoutEffect",Pd(),up(e,t)},useMemo:function(e,t){Sd="useMemo",Pd();var n=md.current;md.current=$p;try{return _p(e,t)}finally{md.current=n}},useReducer:function(e,t,n){Sd="useReducer",Pd();var r=md.current;md.current=$p;try{return $d(e)}finally{md.current=r}},useRef:function(e){return Sd="useRef",Pd(),np()},useState:function(e){Sd="useState",Pd();var t=md.current;md.current=$p;try{return Jd()}finally{md.current=t}},useDebugValue:function(e,t){return Sd="useDebugValue",Pd(),fp()},useDeferredValue:function(e){return Sd="useDeferredValue",Pd(),bp(e)},useTransition:function(){return Sd="useTransition",Pd(),Sp()},useMutableSource:function(e,t,n){Sd="useMutableSource",Pd()},useSyncExternalStore:function(e,t,n){return Sd="useSyncExternalStore",Pd(),Gd(e,t)},useId:function(){return Sd="useId",Pd(),Mp()},unstable_isNewReconciler:x},jp={readContext:function(e){return qp(),uu(e)},useCallback:function(e,t){return Sd="useCallback",Gp(),Id(),mp(e,t)},useContext:function(e){return Sd="useContext",Gp(),Id(),uu(e)},useEffect:function(e,t){return Sd="useEffect",Gp(),Id(),op(e,t)},useImperativeHandle:function(e,t,n){return Sd="useImperativeHandle",Gp(),Id(),dp(e,t,n)},useInsertionEffect:function(e,t){return Sd="useInsertionEffect",Gp(),Id(),sp(e,t)},useLayoutEffect:function(e,t){return Sd="useLayoutEffect",Gp(),Id(),cp(e,t)},useMemo:function(e,t){Sd="useMemo",Gp(),Id();var n=md.current;md.current=jp;try{return yp(e,t)}finally{md.current=n}},useReducer:function(e,t,n){Sd="useReducer",Gp(),Id();var r=md.current;md.current=jp;try{return jd(e,t,n)}finally{md.current=r}},useRef:function(e){return Sd="useRef",Gp(),Id(),tp(e)},useState:function(e){Sd="useState",Gp(),Id();var t=md.current;md.current=jp;try{return Kd(e)}finally{md.current=t}},useDebugValue:function(e,t){Sd="useDebugValue",Gp(),Id()},useDeferredValue:function(e){return Sd="useDeferredValue",Gp(),Id(),vp(e)},useTransition:function(){return Sd="useTransition",Gp(),Id(),Tp()},useMutableSource:function(e,t,n){Sd="useMutableSource",Gp(),Id()},useSyncExternalStore:function(e,t,n){return Sd="useSyncExternalStore",Gp(),Id(),qd(e,t,n)},useId:function(){return Sd="useId",Gp(),Id(),Cp()},unstable_isNewReconciler:x},Vp={readContext:function(e){return qp(),uu(e)},useCallback:function(e,t){return Sd="useCallback",Gp(),Pd(),gp(e,t)},useContext:function(e){return Sd="useContext",Gp(),Pd(),uu(e)},useEffect:function(e,t){return Sd="useEffect",Gp(),Pd(),ap(e,t)},useImperativeHandle:function(e,t,n){return Sd="useImperativeHandle",Gp(),Pd(),pp(e,t,n)},useInsertionEffect:function(e,t){return Sd="useInsertionEffect",Gp(),Pd(),lp(e,t)},useLayoutEffect:function(e,t){return Sd="useLayoutEffect",Gp(),Pd(),up(e,t)},useMemo:function(e,t){Sd="useMemo",Gp(),Pd();var n=md.current;md.current=Vp;try{return _p(e,t)}finally{md.current=n}},useReducer:function(e,t,n){Sd="useReducer",Gp(),Pd();var r=md.current;md.current=Vp;try{return Vd(e)}finally{md.current=r}},useRef:function(e){return Sd="useRef",Gp(),Pd(),np()},useState:function(e){Sd="useState",Gp(),Pd();var t=md.current;md.current=Vp;try{return Qd()}finally{md.current=t}},useDebugValue:function(e,t){return Sd="useDebugValue",Gp(),Pd(),fp()},useDeferredValue:function(e){return Sd="useDeferredValue",Gp(),Pd(),xp(e)},useTransition:function(){return Sd="useTransition",Gp(),Pd(),Ep()},useMutableSource:function(e,t,n){Sd="useMutableSource",Gp(),Pd()},useSyncExternalStore:function(e,t,n){return Sd="useSyncExternalStore",Gp(),Pd(),Gd(e,t)},useId:function(){return Sd="useId",Gp(),Pd(),Mp()},unstable_isNewReconciler:x},$p={readContext:function(e){return qp(),uu(e)},useCallback:function(e,t){return Sd="useCallback",Gp(),Pd(),gp(e,t)},useContext:function(e){return Sd="useContext",Gp(),Pd(),uu(e)},useEffect:function(e,t){return Sd="useEffect",Gp(),Pd(),ap(e,t)},useImperativeHandle:function(e,t,n){return Sd="useImperativeHandle",Gp(),Pd(),pp(e,t,n)},useInsertionEffect:function(e,t){return Sd="useInsertionEffect",Gp(),Pd(),lp(e,t)},useLayoutEffect:function(e,t){return Sd="useLayoutEffect",Gp(),Pd(),up(e,t)},useMemo:function(e,t){Sd="useMemo",Gp(),Pd();var n=md.current;md.current=Vp;try{return _p(e,t)}finally{md.current=n}},useReducer:function(e,t,n){Sd="useReducer",Gp(),Pd();var r=md.current;md.current=Vp;try{return $d(e)}finally{md.current=r}},useRef:function(e){return Sd="useRef",Gp(),Pd(),np()},useState:function(e){Sd="useState",Gp(),Pd();var t=md.current;md.current=Vp;try{return Jd()}finally{md.current=t}},useDebugValue:function(e,t){return Sd="useDebugValue",Gp(),Pd(),fp()},useDeferredValue:function(e){return Sd="useDeferredValue",Gp(),Pd(),bp(e)},useTransition:function(){return Sd="useTransition",Gp(),Pd(),Sp()},useMutableSource:function(e,t,n){Sd="useMutableSource",Gp(),Pd()},useSyncExternalStore:function(e,t,n){return Sd="useSyncExternalStore",Gp(),Pd(),Gd(e,t)},useId:function(){return Sd="useId",Gp(),Pd(),Mp()},unstable_isNewReconciler:x};var Wp=r.unstable_now,Zp=0,Hp=-1,Xp=-1,Yp=-1,Kp=!1,Qp=!1;function Jp(){return Kp}function ef(){return Zp}function tf(){Zp=Wp()}function nf(e){Xp=Wp(),e.actualStartTime<0&&(e.actualStartTime=Wp())}function rf(e){Xp=-1}function of(e,t){if(Xp>=0){var n=Wp()-Xp;e.actualDuration+=n,t&&(e.selfBaseDuration=n),Xp=-1}}function af(e){if(Hp>=0){var t=Wp()-Hp;Hp=-1;for(var n=e.return;null!==n;){switch(n.tag){case 3:case h:return void(n.stateNode.effectDuration+=t)}n=n.return}}}function sf(e){if(Yp>=0){var t=Wp()-Yp;Yp=-1;for(var n=e.return;null!==n;){switch(n.tag){case 3:var r=n.stateNode;return void(null!==r&&(r.passiveEffectDuration+=t));case h:var i=n.stateNode;return void(null!==i&&(i.passiveEffectDuration+=t))}n=n.return}}}function lf(){Hp=Wp()}function cf(){Yp=Wp()}function uf(e){for(var t=e.child;t;)e.actualDuration+=t.actualDuration,t=t.sibling}function hf(e,t){return{value:e,source:t,stack:Oe(t)}}function df(e,t){try{var n=t.value,r=t.source,i=t.stack,o=null!==i?i:"";if(null!=n&&n._suppressLogging){if(1===e.tag)return;console.error(n)}var a=r?Ne(r):null,s=(a?"The above error occurred in the <"+a+"> component:":"The above error occurred in one of your React components:")+"\n"+o+"\n\n"+(3===e.tag?"Consider adding an error boundary to your tree to customize error handling behavior.\nVisit https://reactjs.org/link/error-boundaries to learn more about error boundaries.":"React will try to recreate this component tree from scratch using the error boundary you provided, "+(Ne(e)||"Anonymous")+".");console.error(s)}catch(e){setTimeout((function(){throw e}))}}var pf,ff,mf,gf="function"==typeof WeakMap?WeakMap:Map;function yf(e,t,n){var r=vu(Ai,n);r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){By(i),df(e,t)},r}function _f(e,t,n){var r=vu(Ai,n);r.tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var o=t.value;r.payload=function(){return i(o)},r.callback=function(){u_(e),df(e,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(r.callback=function(){u_(e),df(e,t),"function"!=typeof i&&(this,null===Kg?Kg=new Set([this]):Kg.add(this));var n=t.value,r=t.stack;this.componentDidCatch(n,{componentStack:null!==r?r:""}),"function"!=typeof i&&(Wi(e.lanes,1)||s("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",Ne(e)||"Unknown"))}),r}function vf(e,t,n){var r,i=e.pingCache;if(null===i?(i=e.pingCache=new gf,r=new Set,i.set(t,r)):void 0===(r=i.get(t))&&(r=new Set,i.set(t,r)),!r.has(n)){r.add(n);var o=jy.bind(null,e,t,n);Nr&&Qy(e,n),t.then(o,o)}}function xf(e){var t=e;do{if(t.tag===d&&ld(t))return t;t=t.return}while(null!==t);return null}function bf(e,t,n,r,i){if(0==(1&e.mode)){if(e===t)e.flags|=nr;else{if(e.flags|=Zn,n.flags|=rr,n.flags&=-52805,1===n.tag)if(null===n.alternate)n.tag=m;else{var o=vu(Ai,1);o.tag=mu,xu(n,o)}n.lanes=Hi(n.lanes,1)}return e}return e.flags|=nr,e.lanes=i,e}function wf(e,t,n,r,i){if(n.flags|=tr,Nr&&Qy(e,i),null!==r&&"object"==typeof r&&"function"==typeof r.then){var o=r;!function(e,t){var n=e.tag;if(0==(1&e.mode)&&(0===n||n===u||n===f)){var r=e.alternate;r?(e.updateQueue=r.updateQueue,e.memoizedState=r.memoizedState,e.lanes=r.lanes):(e.updateQueue=null,e.memoizedState=null)}}(n);var a=xf(t);if(null!==a)return a.flags&=-257,bf(a,t,n,0,i),1&a.mode&&vf(e,o,i),void function(e,t,n,r){var i=e.updateQueue;if(null===i){var o=new Set;o.add(n),e.updateQueue=o}else i.add(n)}(a,0,o);if(0==(1&i))return vf(e,o,i),void Iy();r=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.")}else if(Oh()&&1&n.mode){vh=!0;var s=xf(t);if(null!==s)return 0==(s.flags&nr)&&(s.flags|=Hn),bf(s,t,n,0,i),void Lh(r)}!function(e){4!==Fg&&(Fg=2),null===$g?$g=[e]:$g.push(e)}(r),r=hf(r,n);var l=t;do{switch(l.tag){case 3:var c=r;l.flags|=nr;var h=$i(i);return l.lanes=Hi(l.lanes,h),void wu(l,yf(l,c,h));case 1:var d=r,p=l.type,m=l.stateNode;if(0==(l.flags&Zn)&&("function"==typeof p.getDerivedStateFromError||null!==m&&"function"==typeof m.componentDidCatch&&!Fy(m))){l.flags|=nr;var g=$i(i);return l.lanes=Hi(l.lanes,g),void wu(l,_f(l,d,g))}}l=l.return}while(null!==l)}function Tf(e){e.flags|=4}function Ef(e){e.flags|=Xn,e.flags|=or}function Sf(e,t){if(!Oh())switch(e.tailMode){case"hidden":for(var n=e.tail,r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":for(var i=e.tail,o=null;null!==i;)null!==i.alternate&&(o=i),i=i.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function kf(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t){if(0!=(2&e.mode)){for(var i=e.selfBaseDuration,o=e.child;null!==o;)n=Hi(n,Hi(o.lanes,o.childLanes)),r|=o.subtreeFlags&hr,r|=o.flags&hr,i+=o.treeBaseDuration,o=o.sibling;e.treeBaseDuration=i}else for(var a=e.child;null!==a;)n=Hi(n,Hi(a.lanes,a.childLanes)),r|=a.subtreeFlags&hr,r|=a.flags&hr,a.return=e,a=a.sibling;e.subtreeFlags|=r}else{if(0!=(2&e.mode)){for(var s=e.actualDuration,l=e.selfBaseDuration,c=e.child;null!==c;)n=Hi(n,Hi(c.lanes,c.childLanes)),r|=c.subtreeFlags,r|=c.flags,s+=c.actualDuration,l+=c.treeBaseDuration,c=c.sibling;e.actualDuration=s,e.treeBaseDuration=l}else for(var u=e.child;null!==u;)n=Hi(n,Hi(u.lanes,u.childLanes)),r|=u.subtreeFlags,r|=u.flags,u.return=e,u=u.sibling;e.subtreeFlags|=r}return e.childLanes=n,t}function Cf(e,t,n){var r=t.pendingProps;switch(lh(t),t.tag){case 2:case 16:case f:case 0:case u:case 7:case 8:case h:case 9:case p:return kf(t),null;case 1:return Sc(t.type)&&kc(t),kf(t),null;case 3:var i=t.stateNode;return Qh(t),Cc(t),hd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(null===e||null===e.child)&&(Ah(t)?Tf(t):null!==e&&(e.memoizedState.isDehydrated&&0==(t.flags&Hn)||(t.flags|=Yn,Rh()))),kf(t),null;case 5:td(t);var o=Yh(),a=t.type;if(null!==e&&null!=t.stateNode)ff(e,t,a,r),e.ref!==t.ref&&Ef(t);else{if(!r){if(null===t.stateNode)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return kf(t),null}var l=Jh();if(Ah(t))(function(e,t,n){var r=e.stateNode,i=!vh,o=function(e,t,n,r,i,o,a){return Kl(o,e),oc(e,n),function(e,t,n,r,i,o,a){var s,l;switch($s=!0===n.suppressHydrationWarning,s=an(t,n),qs(t,n),t){case"dialog":As("cancel",e),As("close",e);break;case"iframe":case"object":case"embed":As("load",e);break;case"video":case"audio":for(var c=0;c<ks.length;c++)As(ks[c],e);break;case"source":As("error",e);break;case"img":case"image":case"link":As("error",e),As("load",e);break;case"details":As("toggle",e);break;case"input":ct(e,n),As("invalid",e);break;case"option":yt(0,n);break;case"select":St(e,n),As("invalid",e);break;case"textarea":Mt(e,n),As("invalid",e)}on(t,n),l=new Set;for(var u=e.attributes,h=0;h<u.length;h++)switch(u[h].name.toLowerCase()){case"value":case"checked":case"selected":break;default:l.add(u[h].name)}var d,p=null;for(var f in n)if(n.hasOwnProperty(f)){var m=n[f];if(f===tl)"string"==typeof m?e.textContent!==m&&($s||al(e.textContent,m,o,a),p=[tl,m]):"number"==typeof m&&e.textContent!==""+m&&($s||al(e.textContent,m,o,a),p=[tl,""+m]);else if(w.hasOwnProperty(f))null!=m&&("function"!=typeof m&&Zs(f,m),"onScroll"===f&&As("scroll",e));else if(a&&"boolean"==typeof s){var g=void 0,y=$(f);if($s);else if(f===Qs||f===Js||"value"===f||"checked"===f||"selected"===f);else if(f===Ks){var _=e.innerHTML,v=m?m.__html:void 0;if(null!=v){var x=Xs(e,v);x!==_&&Gs(f,_,x)}}else if(f===nl){if(l.delete(f),Hs){var b=en(m);b!==(g=e.getAttribute("style"))&&Gs(f,g,b)}}else if(s)l.delete(f.toLowerCase()),m!==(g=Q(e,f,m))&&Gs(f,g,m);else if(!U(f,y,s)&&!V(f,m,y,s)){var T=!1;if(null!==y)l.delete(y.attributeName),g=K(e,f,m,y);else{var E=r;if(E===At&&(E=zt(t)),E===At)l.delete(f.toLowerCase());else{var S=(d=f.toLowerCase(),sn.hasOwnProperty(d)&&sn[d]||null);null!==S&&S!==f&&(T=!0,l.delete(S)),l.delete(f)}g=Q(e,f,m)}m===g||T||Gs(f,g,m)}}}switch(a&&l.size>0&&!$s&&Ws(l),t){case"input":et(e),dt(e,n,!0);break;case"textarea":et(e),Pt(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&cl(e)}return p}(e,t,n,i.namespace,0,0!=(1&o.mode),a)}(r,e.type,e.memoizedProps,0,n,e,i);return e.updateQueue=o,null!==o})(t,0,l)&&Tf(t);else{var g=function(e,t,n,r,i){var o=r;if(fl(e,null,o.ancestorInfo),"string"==typeof t.children||"number"==typeof t.children){var a=""+t.children,l=ml(o.ancestorInfo,e);fl(null,a,l)}var c=function(e,t,n,r){var i,o,a=sl(n),l=r;if(l===At&&(l=zt(e)),l===At){if((i=an(e,t))||e===e.toLowerCase()||s("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),"script"===e){var c=a.createElement("div");c.innerHTML="<script><\/script>";var u=c.firstChild;o=c.removeChild(u)}else if("string"==typeof t.is)o=a.createElement(e,{is:t.is});else if(o=a.createElement(e),"select"===e){var h=o;t.multiple?h.multiple=!0:t.size&&(h.size=t.size)}}else o=a.createElementNS(l,e);return l===At&&(i||"[object HTMLUnknownElement]"!==Object.prototype.toString.call(o)||C.call(Vs,e)||(Vs[e]=!0,s("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e))),o}(e,t,n,o.namespace);return Kl(i,c),oc(c,t),c}(a,r,o,l,t);pf(g,t),t.stateNode=g,function(e,t,n,r,i){switch(function(e,t,n,r){var i,o=an(t,n);switch(qs(t,n),t){case"dialog":As("cancel",e),As("close",e),i=n;break;case"iframe":case"object":case"embed":As("load",e),i=n;break;case"video":case"audio":for(var a=0;a<ks.length;a++)As(ks[a],e);i=n;break;case"source":As("error",e),i=n;break;case"img":case"image":case"link":As("error",e),As("load",e),i=n;break;case"details":As("toggle",e),i=n;break;case"input":ct(e,n),i=lt(e,n),As("invalid",e);break;case"option":yt(0,n),i=n;break;case"select":St(e,n),i=Et(0,n),As("invalid",e);break;case"textarea":Mt(e,n),i=Ct(e,n),As("invalid",e);break;default:i=n}switch(on(t,i),function(e,t,n,r,i){for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];if(o===nl)a&&Object.freeze(a),tn(t,a);else if(o===Ks){var s=a?a.__html:void 0;null!=s&&Ft(t,s)}else o===tl?"string"==typeof a?("textarea"!==e||""!==a)&&Bt(t,a):"number"==typeof a&&Bt(t,""+a):o===Qs||o===Js||o===el||(w.hasOwnProperty(o)?null!=a&&("function"!=typeof a&&Zs(o,a),"onScroll"===o&&As("scroll",t)):null!=a&&J(t,o,a,i))}}(t,e,0,i,o),t){case"input":et(e),dt(e,n,!1);break;case"textarea":et(e),Pt(e);break;case"option":!function(e,t){null!=t.value&&e.setAttribute("value",He(Xe(t.value)))}(e,n);break;case"select":!function(e,t){var n=e;n.multiple=!!t.multiple;var r=t.value;null!=r?Tt(n,!!t.multiple,r,!1):null!=t.defaultValue&&Tt(n,!!t.multiple,t.defaultValue,!0)}(e,n);break;default:"function"==typeof i.onClick&&cl(e)}}(e,t,n),t){case"button":case"input":case"select":case"textarea":return!!n.autoFocus;case"img":return!0;default:return!1}}(g,a,r)&&Tf(t)}null!==t.ref&&Ef(t)}return kf(t),null;case 6:var x=r;if(e&&null!=t.stateNode){var b=e.memoizedProps;mf(0,t,b,x)}else{if("string"!=typeof x&&null===t.stateNode)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var T=Yh(),E=Jh();Ah(t)?function(e){var t=e.stateNode,n=e.memoizedProps,r=function(e,t,n,r){return Kl(n,e),n.mode,function(e,t,n){return e.nodeValue!==t}(e,t)}(t,n,e);if(r){var i=gh;if(null!==i){var o=0!=(1&i.mode);switch(i.tag){case 3:i.stateNode.containerInfo,function(e,t,n,r){al(t.nodeValue,n,r,!0)}(0,t,n,o);break;case 5:i.type;var a=i.memoizedProps;i.stateNode,function(e,t,n,r,i,o){!0!==t.suppressHydrationWarning&&al(r.nodeValue,i,o,!0)}(0,a,0,t,n,o)}}}return r}(t)&&Tf(t):t.stateNode=function(e,t,n,r){fl(null,e,n.ancestorInfo);var i=function(e,t){return sl(t).createTextNode(e)}(e,t);return Kl(r,i),i}(x,T,E,t)}return kf(t),null;case d:sd(t);var S=t.memoizedState;if(_h&&null!==yh&&0!=(1&t.mode)&&0==(t.flags&Zn))return Dh(t),zh(),t.flags|=98560,t;if(null!==S&&null!==S.dehydrated){var k=Ah(t);if(null===e){if(!k)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(function(e){var t=e.memoizedState,n=null!==t?t.dehydrated:null;if(!n)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");!function(e,t){Kl(t,e)}(n,e)}(t),kf(t),0!=(2&t.mode)&&null!==S){var M=t.child;null!==M&&(t.treeBaseDuration-=M.treeBaseDuration)}return null}if(zh(),0==(t.flags&Zn)&&(t.memoizedState=null),t.flags|=4,kf(t),0!=(2&t.mode)&&null!==S){var I=t.child;null!==I&&(t.treeBaseDuration-=I.treeBaseDuration)}return null}if(Rh(),0!=(t.flags&Zn))return t.lanes=n,0!=(2&t.mode)&&uf(t),t;var P=null!==S,A=!1;if(null===e?Ah(t):A=null!==e.memoizedState,P&&!A&&(t.child.flags|=Jn,0!=(1&t.mode)&&(null===e&&(t.memoizedProps.unstable_avoidThisFallback,1)||rd(nd.current,1)?0===Fg&&(Fg=3):Iy())),null!==t.updateQueue&&(t.flags|=4),kf(t),0!=(2&t.mode)&&P){var D=t.child;null!==D&&(t.treeBaseDuration-=D.treeBaseDuration)}return null;case 4:return Qh(t),null===e&&Rs(t.stateNode.containerInfo),kf(t),null;case c:return su(t.type._context,t),kf(t),null;case m:return Sc(t.type)&&kc(t),kf(t),null;case y:sd(t);var z=t.memoizedState;if(null===z)return kf(t),null;var R=0!=(t.flags&Zn),O=z.rendering;if(null===O)if(R)Sf(z,!1);else{if(0!==Fg||null!==e&&0!=(e.flags&Zn))for(var L=t.child;null!==L;){var F=cd(L);if(null!==F){R=!0,t.flags|=Zn,Sf(z,!1);var B=F.updateQueue;return null!==B&&(t.updateQueue=B,t.flags|=4),t.subtreeFlags=0,qh(t,n),ad(t,od(nd.current,2)),t.child}L=L.sibling}null!==z.tail&&kr()>Hg()&&(t.flags|=Zn,R=!0,Sf(z,!1),t.lanes=Ei)}else{if(!R){var N=cd(O);if(null!==N){t.flags|=Zn,R=!0;var j=N.updateQueue;if(null!==j&&(t.updateQueue=j,t.flags|=4),Sf(z,!0),null===z.tail&&"hidden"===z.tailMode&&!O.alternate&&!Oh())return kf(t),null}else 2*kr()-z.renderingStartTime>Hg()&&n!==Ii&&(t.flags|=Zn,R=!0,Sf(z,!1),t.lanes=Ei)}if(z.isBackwards)O.sibling=t.child,t.child=O;else{var q=z.last;null!==q?q.sibling=O:t.child=O,z.last=O}}if(null!==z.tail){var G=z.tail;z.rendering=G,z.tail=G.sibling,z.renderingStartTime=kr(),G.sibling=null;var W=nd.current;return ad(t,W=R?od(W,2):id(W)),G}return kf(t),null;case 21:break;case _:case v:Ty(t);var Z=null!==t.memoizedState;return null!==e&&null!==e.memoizedState!==Z&&(t.flags|=Jn),Z&&0!=(1&t.mode)?Wi(Og,Ii)&&(kf(t),6&t.subtreeFlags&&(t.flags|=Jn)):kf(t),null;case 24:case 25:return null}throw new Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}pf=function(e,t,n,r){for(var i,o,a=t.child;null!==a;){if(5===a.tag||6===a.tag)i=e,o=a.stateNode,i.appendChild(o);else if(4===a.tag);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)return;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ff=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a=function(e,t,n,r,i,o){var a=o;if(typeof r.children!=typeof n.children&&("string"==typeof r.children||"number"==typeof r.children)){var l=""+r.children,c=ml(a.ancestorInfo,t);fl(null,l,c)}return function(e,t,n,r,i){qs(t,r);var o,a,l,c,u=null;switch(t){case"input":o=lt(e,n),a=lt(e,r),u=[];break;case"select":o=Et(0,n),a=Et(0,r),u=[];break;case"textarea":o=Ct(e,n),a=Ct(e,r),u=[];break;default:a=r,"function"!=typeof(o=n).onClick&&"function"==typeof a.onClick&&cl(e)}on(t,a);var h=null;for(l in o)if(!a.hasOwnProperty(l)&&o.hasOwnProperty(l)&&null!=o[l])if(l===nl){var d=o[l];for(c in d)d.hasOwnProperty(c)&&(h||(h={}),h[c]="")}else l===Ks||l===tl||l===Qs||l===Js||l===el||(w.hasOwnProperty(l)?u||(u=[]):(u=u||[]).push(l,null));for(l in a){var p=a[l],f=null!=o?o[l]:void 0;if(a.hasOwnProperty(l)&&p!==f&&(null!=p||null!=f))if(l===nl)if(p&&Object.freeze(p),f){for(c in f)!f.hasOwnProperty(c)||p&&p.hasOwnProperty(c)||(h||(h={}),h[c]="");for(c in p)p.hasOwnProperty(c)&&f[c]!==p[c]&&(h||(h={}),h[c]=p[c])}else h||(u||(u=[]),u.push(l,h)),h=p;else if(l===Ks){var m=p?p.__html:void 0,g=f?f.__html:void 0;null!=m&&g!==m&&(u=u||[]).push(l,m)}else l===tl?"string"!=typeof p&&"number"!=typeof p||(u=u||[]).push(l,""+p):l===Qs||l===Js||(w.hasOwnProperty(l)?(null!=p&&("function"!=typeof p&&Zs(l,p),"onScroll"===l&&As("scroll",e)),u||f===p||(u=[])):(u=u||[]).push(l,p))}return h&&(function(e,t){if(t){var n,r=nn(e),i=nn(t),o={};for(var a in r){var l=r[a],c=i[a];if(c&&l!==c){var u=l+","+c;if(o[u])continue;o[u]=!0,s("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",null==(n=e[l])||"boolean"==typeof n||""===n?"Removing":"Updating",l,c)}}}}(h,a.style),(u=u||[]).push(nl,h)),u}(e,t,n,r)}(t.stateNode,n,o,r,0,Jh());t.updateQueue=a,a&&Tf(t)}},mf=function(e,t,n,r){n!==r&&Tf(t)};var Mf,If,Pf,Af,Df,zf,Rf,Of,Lf=i.ReactCurrentOwner,Ff=!1;function Bf(e,t,n,r){t.child=null===e?$h(t,null,n,r):Vh(t,e.child,n,r)}function Nf(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&cc(o,r,"prop",Fe(n))}var a,s,l=n.render,c=t.ref;if(cu(t,i),qr(t),Lf.current=t,Ze(!0),a=Rd(e,t,l,r,c,i),s=Od(),8&t.mode){Ur(!0);try{a=Rd(e,t,l,r,c,i),s=Od()}finally{Ur(!1)}}return Ze(!1),Gr(),null===e||Ff?(Oh()&&s&&ah(t),t.flags|=1,Bf(e,t,a,i),t.child):(Ld(e,t,i),mm(e,t,i))}function Uf(e,t,n,r,i){if(null===e){var o,a=n.type;if(function(e){return"function"==typeof e&&!x_(e)&&void 0===e.defaultProps}(a)&&null===n.compare&&void 0===n.defaultProps)return o=a_(a),t.tag=f,t.type=o,Xf(t,a),jf(e,t,o,r,i);var s=a.propTypes;s&&cc(s,r,"prop",Fe(a));var l=T_(n.type,null,r,t,t.mode,i);return l.ref=t.ref,l.return=t,t.child=l,l}var c=n.type,u=c.propTypes;u&&cc(u,r,"prop",Fe(c));var h=e.child;if(!gm(e,i)){var d=h.memoizedProps,p=n.compare;if((p=null!==p?p:Ya)(d,r)&&e.ref===t.ref)return mm(e,t,i)}t.flags|=1;var m=b_(h,r);return m.ref=t.ref,m.return=t,t.child=m,m}function jf(e,t,n,r,i){if(t.type!==t.elementType){var o=t.elementType;if(o.$$typeof===he){var a=o,s=a._payload,l=a._init;try{o=l(s)}catch(e){o=null}var c=o&&o.propTypes;c&&cc(c,r,"prop",Fe(o))}}if(null!==e&&Ya(e.memoizedProps,r)&&e.ref===t.ref&&t.type===e.type){if(Ff=!1,!gm(e,i))return t.lanes=e.lanes,mm(e,t,i);0!=(e.flags&rr)&&(Ff=!0)}return qf(e,t,n,r,i)}function Vf(e,t,n){var r,i=t.pendingProps,o=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0==(1&t.mode)){t.memoizedState={baseLanes:0,cachePool:null},wy(t,n)}else{if(!Wi(n,Ii)){var s;s=null!==a?Hi(a.baseLanes,n):n,t.lanes=t.childLanes=Ii;var l={baseLanes:s,cachePool:null};return t.memoizedState=l,t.updateQueue=null,wy(t,s),null}t.memoizedState={baseLanes:0,cachePool:null},wy(t,null!==a?a.baseLanes:n)}else null!==a?(r=Hi(a.baseLanes,n),t.memoizedState=null):r=n,wy(t,r);return Bf(e,t,o,n),t.child}function $f(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=Xn,t.flags|=or)}function qf(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&cc(o,r,"prop",Fe(n))}var a,s,l;if(a=Tc(t,bc(0,n,!0)),cu(t,i),qr(t),Lf.current=t,Ze(!0),s=Rd(e,t,n,r,a,i),l=Od(),8&t.mode){Ur(!0);try{s=Rd(e,t,n,r,a,i),l=Od()}finally{Ur(!1)}}return Ze(!1),Gr(),null===e||Ff?(Oh()&&l&&ah(t),t.flags|=1,Bf(e,t,s,i),t.child):(Ld(e,t,i),mm(e,t,i))}function Gf(e,t,n,r,i){switch(J_(t)){case!1:var o=t.stateNode,a=new(0,t.type)(t.memoizedProps,o.context).state;o.updater.enqueueSetState(o,a,null);break;case!0:t.flags|=Zn,t.flags|=nr;var l=new Error("Simulated error coming from DevTools"),c=$i(i);t.lanes=Hi(t.lanes,c),wu(t,_f(t,hf(l,t),c))}if(t.type!==t.elementType){var u=n.propTypes;u&&cc(u,r,"prop",Fe(n))}var h,d;Sc(n)?(h=!0,Pc(t)):h=!1,cu(t,i),null===t.stateNode?(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Wu(t,n,r),Hu(t,n,r,i),d=!0):d=null===e?function(e,t,n,r){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a,s=i.context,l=t.contextType;a="object"==typeof l&&null!==l?uu(l):Tc(e,bc(0,t,!0));var c=t.getDerivedStateFromProps,u="function"==typeof c||"function"==typeof i.getSnapshotBeforeUpdate;u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||o===n&&s===a||Zu(e,i,n,a),ku();var h=e.memoizedState,d=i.state=h;if(Eu(e,n,i,r),d=e.memoizedState,o===n&&h===d&&!Ec()&&!Cu()){if("function"==typeof i.componentDidMount){var p=4;p|=ar,0!=(e.mode&Jr)&&(p|=sr),e.flags|=p}return!1}"function"==typeof c&&(Vu(e,t,c,n),d=e.memoizedState);var f=Cu()||qu(e,t,o,n,h,d,a);if(f){if(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount){var m=4;m|=ar,0!=(e.mode&Jr)&&(m|=sr),e.flags|=m}}else{if("function"==typeof i.componentDidMount){var g=4;g|=ar,0!=(e.mode&Jr)&&(g|=sr),e.flags|=g}e.memoizedProps=n,e.memoizedState=d}return i.props=n,i.state=d,i.context=a,f}(t,n,r,i):function(e,t,n,r,i){var o=t.stateNode;_u(e,t);var a=t.memoizedProps,s=t.type===t.elementType?a:Yc(t.type,a);o.props=s;var l,c=t.pendingProps,u=o.context,h=n.contextType;l="object"==typeof h&&null!==h?uu(h):Tc(t,bc(0,n,!0));var d=n.getDerivedStateFromProps,p="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate;p||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||a===c&&u===l||Zu(t,o,r,l),ku();var f=t.memoizedState,m=o.state=f;if(Eu(t,r,o,i),m=t.memoizedState,a===c&&f===m&&!Ec()&&!Cu())return"function"==typeof o.componentDidUpdate&&(a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4)),"function"==typeof o.getSnapshotBeforeUpdate&&(a===e.memoizedProps&&f===e.memoizedState||(t.flags|=Yn)),!1;"function"==typeof d&&(Vu(t,n,d,r),m=t.memoizedState);var g=Cu()||qu(t,n,s,r,f,m,l)||!1;return g?(p||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=Yn)):("function"==typeof o.componentDidUpdate&&(a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4)),"function"==typeof o.getSnapshotBeforeUpdate&&(a===e.memoizedProps&&f===e.memoizedState||(t.flags|=Yn)),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,g}(e,t,n,r,i);var p=Wf(e,t,n,d,h,i),f=t.stateNode;return d&&f.props!==r&&(zf||s("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",Ne(t)||"a component"),zf=!0),p}function Wf(e,t,n,r,i,o){$f(e,t);var a=0!=(t.flags&Zn);if(!r&&!a)return i&&Ac(t,n,!1),mm(e,t,o);var s,l=t.stateNode;if(Lf.current=t,a&&"function"!=typeof n.getDerivedStateFromError)s=null,rf();else{if(qr(t),Ze(!0),s=l.render(),8&t.mode){Ur(!0);try{l.render()}finally{Ur(!1)}}Ze(!1),Gr()}return t.flags|=1,null!==e&&a?function(e,t,n,r){t.child=Vh(t,e.child,null,r),t.child=Vh(t,null,n,r)}(e,t,s,o):Bf(e,t,s,o),t.memoizedState=l.state,i&&Ac(t,n,!0),t.child}function Zf(e){var t=e.stateNode;t.pendingContext?Mc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mc(e,t.context,!1),Kh(e,t.containerInfo)}function Hf(e,t,n,r,i){return zh(),Lh(i),t.flags|=Hn,Bf(e,t,n,r),t.child}function Xf(e,t){if(t&&t.childContextTypes&&s("%s(...): childContextTypes cannot be defined on a function component.",t.displayName||t.name||"Component"),null!==e.ref){var n="",r=$e();r&&(n+="\n\nCheck the render method of `"+r+"`.");var i=r||"",o=e._debugSource;o&&(i=o.fileName+":"+o.lineNumber),Df[i]||(Df[i]=!0,s("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",n))}if("function"==typeof t.getDerivedStateFromProps){var a=Fe(t)||"Unknown";Af[a]||(s("%s: Function components do not support getDerivedStateFromProps.",a),Af[a]=!0)}if("object"==typeof t.contextType&&null!==t.contextType){var l=Fe(t)||"Unknown";Pf[l]||(s("%s: Function components do not support contextType.",l),Pf[l]=!0)}}Mf={},If={},Pf={},Af={},Df={},zf=!1,Rf={},Of={};var Yf={dehydrated:null,treeContext:null,retryLane:0};function Kf(e){return{baseLanes:e,cachePool:null}}function Qf(e,t){return{baseLanes:Hi(e.baseLanes,t),cachePool:null}}function Jf(e,t){return Xi(e.childLanes,t)}function em(e,t,n){var r=t.pendingProps;ev(t)&&(t.flags|=Zn);var i=nd.current,o=!1,a=0!=(t.flags&Zn);if(a||function(e,t,n,r){return(null===t||null!==t.memoizedState)&&rd(e,2)}(i,e)?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),ad(t,i=id(i)),null===e){Ih(t);var l=t.memoizedState;if(null!==l){var c=l.dehydrated;if(null!==c)return function(e,t,n){return 0==(1&e.mode)?(s("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),e.lanes=1):Ul(t)?e.lanes=8:e.lanes=Ii,null}(t,c)}var u=r.children,h=r.fallback;if(o){var d=function(e,t,n,r){var i,o,a=e.mode,s=e.child,l={mode:"hidden",children:t};return 0==(1&a)&&null!==s?((i=s).childLanes=0,i.pendingProps=l,2&e.mode&&(i.actualDuration=0,i.actualStartTime=-1,i.selfBaseDuration=0,i.treeBaseDuration=0),o=S_(n,a,r,null)):(i=nm(l,a),o=S_(n,a,r,null)),i.return=e,o.return=e,i.sibling=o,e.child=i,o}(t,u,h,n);return t.child.memoizedState=Kf(n),t.memoizedState=Yf,d}return tm(t,u)}var p=e.memoizedState;if(null!==p){var f=p.dehydrated;if(null!==f){if(a){if(t.flags&Hn)return t.flags&=-257,am(e,t,n,new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));if(null!==t.memoizedState)return t.child=e.child,t.flags|=Zn,null;var m=function(e,t,n,r,i){var o=t.mode,a=nm({mode:"visible",children:n},o),s=S_(r,o,i,null);return s.flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!=(1&t.mode)&&Vh(t,e.child,null,i),s}(e,t,r.children,r.fallback,n);return t.child.memoizedState=Kf(n),t.memoizedState=Yf,m}return function(e,t,n,r,i){if(_h&&s("We should not be hydrating here. This is a bug in React. Please file a bug."),0==(1&t.mode))return am(e,t,i,null);if(Ul(n))return am(e,t,i,new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering."));var o=Wi(i,e.childLanes);if(Ff||o){var a=sy();if(null!==a){var l=function(e,t){var n;switch(Vi(t)){case 4:n=2;break;case ii:n=8;break;case 64:case 128:case 256:case 512:case ai:case si:case li:case ci:case ui:case hi:case di:case pi:case fi:case mi:case gi:case yi:case vi:case xi:case bi:case wi:case Ti:n=32;break;case Mi:n=Ci;break;default:n=0}return 0!=(n&(e.suspendedLanes|t))?0:n}(a,i);0!==l&&l!==r.retryLane&&(r.retryLane=l,uy(e,l,Ai))}return Iy(),am(e,t,i,new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."))}if(Nl(n))return t.flags|=Zn,t.child=e.child,c=$y.bind(null,e),n._reactRetry=c,null;bh(t,n,r.treeContext);var c,u=tm(t,t.pendingProps.children);return u.flags|=Qn,u}(e,t,f,p,n)}if(o){var g=r.fallback,y=om(e,t,r.children,g,n),_=t.child,v=e.child.memoizedState;return _.memoizedState=null===v?Kf(n):Qf(v,n),_.childLanes=Jf(e,n),t.memoizedState=Yf,y}var x=im(e,t,r.children,n);return t.memoizedState=null,x}if(o){var b=r.fallback,w=om(e,t,r.children,b,n),T=t.child,E=e.child.memoizedState;return T.memoizedState=null===E?Kf(n):Qf(E,n),T.childLanes=Jf(e,n),t.memoizedState=Yf,w}var S=im(e,t,r.children,n);return t.memoizedState=null,S}function tm(e,t,n){var r=nm({mode:"visible",children:t},e.mode);return r.return=e,e.child=r,r}function nm(e,t,n){return k_(e,t,0,null)}function rm(e,t){return b_(e,t)}function im(e,t,n,r){var i=e.child,o=i.sibling,a=rm(i,{mode:"visible",children:n});if(0==(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==o){var s=t.deletions;null===s?(t.deletions=[o],t.flags|=16):s.push(o)}return t.child=a,a}function om(e,t,n,r,i){var o,a,s=t.mode,l=e.child,c=l.sibling,u={mode:"hidden",children:n};return 0==(1&s)&&t.child!==l?((o=t.child).childLanes=0,o.pendingProps=u,2&t.mode&&(o.actualDuration=0,o.actualStartTime=-1,o.selfBaseDuration=l.selfBaseDuration,o.treeBaseDuration=l.treeBaseDuration),t.deletions=null):(o=rm(l,u)).subtreeFlags=l.subtreeFlags&hr,null!==c?a=b_(c,r):(a=S_(r,s,i,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,a}function am(e,t,n,r){null!==r&&Lh(r),Vh(t,e.child,null,n);var i=tm(t,t.pendingProps.children);return i.flags|=2,t.memoizedState=null,i}function sm(e,t,n){e.lanes=Hi(e.lanes,t);var r=e.alternate;null!==r&&(r.lanes=Hi(r.lanes,t)),lu(e.return,t,n)}function lm(e,t){var n=xt(e),r=!n&&"function"==typeof fe(e);if(n||r){var i=n?"array":"iterable";return s("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",i,t,i),!1}return!0}function cm(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function um(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail,a=r.children;!function(e){if(void 0!==e&&"forwards"!==e&&"backwards"!==e&&"together"!==e&&!Rf[e])if(Rf[e]=!0,"string"==typeof e)switch(e.toLowerCase()){case"together":case"forwards":case"backwards":s('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',e,e.toLowerCase());break;case"forward":case"backward":s('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',e,e.toLowerCase());break;default:s('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}else s('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}(i),function(e,t){void 0===e||Of[e]||("collapsed"!==e&&"hidden"!==e?(Of[e]=!0,s('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',e)):"forwards"!==t&&"backwards"!==t&&(Of[e]=!0,s('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',e)))}(o,i),function(e,t){if(("forwards"===t||"backwards"===t)&&null!=e&&!1!==e)if(xt(e)){for(var n=0;n<e.length;n++)if(!lm(e[n],n))return}else{var r=fe(e);if("function"==typeof r){var i=r.call(e);if(i)for(var o=i.next(),a=0;!o.done;o=i.next()){if(!lm(o.value,a))return;a++}}else s('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',t)}}(a,i),Bf(e,t,a,n);var l=nd.current;if(rd(l,2)?(l=od(l,2),t.flags|=Zn):(null!==e&&0!=(e.flags&Zn)&&function(e,t,n){for(var r=t;null!==r;){if(r.tag===d)null!==r.memoizedState&&sm(r,n,e);else if(r.tag===y)sm(r,n,e);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)return;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}(t,t.child,n),l=id(l)),ad(t,l),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":var c,u=function(e){for(var t=e,n=null;null!==t;){var r=t.alternate;null!==r&&null===cd(r)&&(n=t),t=t.sibling}return n}(t.child);null===u?(c=t.child,t.child=null):(c=u.sibling,u.sibling=null),cm(t,!1,c,u,o);break;case"backwards":var h=null,p=t.child;for(t.child=null;null!==p;){var f=p.alternate;if(null!==f&&null===cd(f)){t.child=p;break}var m=p.sibling;p.sibling=h,h=p,p=m}cm(t,!0,h,null,o);break;case"together":cm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}var hm,dm=!1,pm=!1;function fm(){Ff=!0}function mm(e,t,n){return null!==e&&(t.dependencies=e.dependencies),rf(),My(t.lanes),Wi(n,t.childLanes)?(function(e,t){if(null!==e&&t.child!==e.child)throw new Error("Resuming work not yet implemented.");if(null!==t.child){var n=t.child,r=b_(n,n.pendingProps);for(t.child=r,r.return=t;null!==n.sibling;)n=n.sibling,(r=r.sibling=b_(n,n.pendingProps)).return=t;r.sibling=null}}(e,t),t.child):null}function gm(e,t){return!!Wi(e.lanes,t)}function ym(e,t,n){if(t._debugNeedsRemount&&null!==e)return function(e,t,n){var r=t.return;if(null===r)throw new Error("Cannot swap the root fiber.");if(e.alternate=null,t.alternate=null,n.index=t.index,n.sibling=t.sibling,n.return=t.return,n.ref=t.ref,t===r.child)r.child=n;else{var i=r.child;if(null===i)throw new Error("Expected parent to have a child.");for(;i.sibling!==t;)if(null===(i=i.sibling))throw new Error("Expected to find the previous sibling.");i.sibling=n}var o=r.deletions;return null===o?(r.deletions=[e],r.flags|=16):o.push(e),n.flags|=2,n}(e,t,T_(t.type,t.key,t.pendingProps,t._debugOwner||null,t.mode,t.lanes));if(null!==e)if(e.memoizedProps!==t.pendingProps||Ec()||t.type!==e.type)Ff=!0;else{if(!gm(e,n)&&0==(t.flags&Zn))return Ff=!1,function(e,t,n){switch(t.tag){case 3:Zf(t),t.stateNode,zh();break;case 5:ed(t);break;case 1:Sc(t.type)&&Pc(t);break;case 4:Kh(t,t.stateNode.containerInfo);break;case c:var r=t.memoizedProps.value;au(t,t.type._context,r);break;case h:Wi(n,t.childLanes)&&(t.flags|=4);var i=t.stateNode;i.effectDuration=0,i.passiveEffectDuration=0;break;case d:var o=t.memoizedState;if(null!==o){if(null!==o.dehydrated)return ad(t,id(nd.current)),t.flags|=Zn,null;if(Wi(n,t.child.childLanes))return em(e,t,n);ad(t,id(nd.current));var a=mm(e,t,n);return null!==a?a.sibling:null}ad(t,id(nd.current));break;case y:var s=0!=(e.flags&Zn),l=Wi(n,t.childLanes);if(s){if(l)return um(e,t,n);t.flags|=Zn}var u=t.memoizedState;if(null!==u&&(u.rendering=null,u.tail=null,u.lastEffect=null),ad(t,nd.current),l)break;return null;case _:case v:return t.lanes=0,Vf(e,t,n)}return mm(e,t,n)}(e,t,n);Ff=0!=(e.flags&rr)}else if(Ff=!1,Oh()&&function(e){return ch(),0!=(e.flags&ir)}(t)){var r=t.index;oh(t,(ch(),Qu),r)}switch(t.lanes=0,t.tag){case 2:return function(e,t,n,r){null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2);var i,o,a,l=t.pendingProps;if(i=Tc(t,bc(0,n,!1)),cu(t,r),qr(t),n.prototype&&"function"==typeof n.prototype.render){var c=Fe(n)||"Unknown";Mf[c]||(s("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",c,c),Mf[c]=!0)}if(8&t.mode&&Nc.recordLegacyContextWarning(t,null),Ze(!0),Lf.current=t,o=Rd(null,t,n,l,i,r),a=Od(),Ze(!1),Gr(),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){var u=Fe(n)||"Unknown";If[u]||(s("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",u,u,u),If[u]=!0)}if("object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){var h=Fe(n)||"Unknown";If[h]||(s("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",h,h,h),If[h]=!0),t.tag=1,t.memoizedState=null,t.updateQueue=null;var d=!1;return Sc(n)?(d=!0,Pc(t)):d=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,yu(t),Gu(t,o),Hu(t,n,l,r),Wf(null,t,n,!0,d,r)}if(t.tag=0,8&t.mode){Ur(!0);try{o=Rd(null,t,n,l,i,r),a=Od()}finally{Ur(!1)}}return Oh()&&a&&ah(t),Bf(null,t,o,r),Xf(t,n),t.child}(e,t,t.type,n);case 16:return function(e,t,n,r){null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2);var i=t.pendingProps,o=n,a=o._payload,s=(0,o._init)(a);t.type=s;var l=t.tag=function(e){if("function"==typeof e)return x_(e)?1:0;if(null!=e){var t=e.$$typeof;if(t===se)return u;if(t===ue)return p}return 2}(s),c=Yc(s,i);switch(l){case 0:return Xf(t,s),t.type=s=a_(s),qf(null,t,s,c,r);case 1:return t.type=s=s_(s),Gf(null,t,s,c,r);case u:return t.type=s=l_(s),Nf(null,t,s,c,r);case p:if(t.type!==t.elementType){var h=s.propTypes;h&&cc(h,c,"prop",Fe(s))}return Uf(null,t,s,Yc(s.type,c),r)}var d="";throw null!==s&&"object"==typeof s&&s.$$typeof===he&&(d=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+s+". Lazy element type must resolve to a class or function."+d)}(e,t,t.elementType,n);case 0:var i=t.type,o=t.pendingProps;return qf(e,t,i,t.elementType===i?o:Yc(i,o),n);case 1:var a=t.type,l=t.pendingProps;return Gf(e,t,a,t.elementType===a?l:Yc(a,l),n);case 3:return function(e,t,n){if(Zf(t),null===e)throw new Error("Should have a current fiber. This is a bug in React.");var r=t.pendingProps,i=t.memoizedState,o=i.element;_u(e,t),Eu(t,r,null,n);var a,s,l=t.memoizedState,c=(t.stateNode,l.element);if(i.isDehydrated){var u={element:c,isDehydrated:!1,cache:l.cache,transitions:l.transitions};if(t.updateQueue.baseState=u,t.memoizedState=u,t.flags&Hn)return Hf(e,t,c,n,new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."));if(c!==o)return Hf(e,t,c,n,new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."));s=(a=t).stateNode.containerInfo,yh=jl(s.firstChild),gh=a,_h=!0,xh=null,vh=!1;var h=$h(t,null,c,n);t.child=h;for(var d=h;d;)d.flags=-3&d.flags|Qn,d=d.sibling}else{if(zh(),c===o)return mm(e,t,n);Bf(e,t,c,n)}return t.child}(e,t,n);case 5:return function(e,t,n){ed(t),null===e&&Ih(t);var r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children;return Cl(r,i)?a=null:null!==o&&Cl(r,o)&&(t.flags|=32),$f(e,t),Bf(e,t,a,n),t.child}(e,t,n);case 6:return function(e,t){return null===e&&Ih(t),null}(e,t);case d:return em(e,t,n);case 4:return function(e,t,n){Kh(t,t.stateNode.containerInfo);var r=t.pendingProps;return null===e?t.child=Vh(t,null,r,n):Bf(e,t,r,n),t.child}(e,t,n);case u:var x=t.type,b=t.pendingProps;return Nf(e,t,x,t.elementType===x?b:Yc(x,b),n);case 7:return function(e,t,n){return Bf(e,t,t.pendingProps,n),t.child}(e,t,n);case 8:return function(e,t,n){return Bf(e,t,t.pendingProps.children,n),t.child}(e,t,n);case h:return function(e,t,n){t.flags|=4;var r=t.stateNode;return r.effectDuration=0,r.passiveEffectDuration=0,Bf(e,t,t.pendingProps.children,n),t.child}(e,t,n);case c:return function(e,t,n){var r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value;"value"in i||dm||(dm=!0,s("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var l=t.type.propTypes;if(l&&cc(l,i,"prop","Context.Provider"),au(t,r,a),null!==o){var u=o.value;if(Xa(u,a)){if(o.children===i.children&&!Ec())return mm(e,t,n)}else!function(e,t,n){!function(e,t,n){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=void 0,o=r.dependencies;if(null!==o){i=r.child;for(var a=o.firstContext;null!==a;){if(a.context===t){if(1===r.tag){var s=$i(n),l=vu(Ai,s);l.tag=mu;var u=r.updateQueue;if(null===u);else{var h=u.shared,d=h.pending;null===d?l.next=l:(l.next=d.next,d.next=l),h.pending=l}}r.lanes=Hi(r.lanes,n);var p=r.alternate;null!==p&&(p.lanes=Hi(p.lanes,n)),lu(r.return,n,e),o.lanes=Hi(o.lanes,n);break}a=a.next}}else if(r.tag===c)i=r.type===e.type?null:r.child;else if(r.tag===g){var f=r.return;if(null===f)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");f.lanes=Hi(f.lanes,n);var m=f.alternate;null!==m&&(m.lanes=Hi(m.lanes,n)),lu(f,n,e),i=r.sibling}else i=r.child;if(null!==i)i.return=r;else for(i=r;null!==i;){if(i===e){i=null;break}var y=i.sibling;if(null!==y){y.return=i.return,i=y;break}i=i.return}r=i}}(e,t,n)}(t,r,n)}return Bf(e,t,i.children,n),t.child}(e,t,n);case 9:return function(e,t,n){var r=t.type;void 0===r._context?r!==r.Consumer&&(pm||(pm=!0,s("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):r=r._context;var i=t.pendingProps.children;"function"!=typeof i&&s("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),cu(t,n);var o,a=uu(r);return qr(t),Lf.current=t,Ze(!0),o=i(a),Ze(!1),Gr(),t.flags|=1,Bf(e,t,o,n),t.child}(e,t,n);case p:var w=t.type,T=Yc(w,t.pendingProps);if(t.type!==t.elementType){var E=w.propTypes;E&&cc(E,T,"prop",Fe(w))}return Uf(e,t,w,T=Yc(w.type,T),n);case f:return jf(e,t,t.type,t.pendingProps,n);case m:var S=t.type,k=t.pendingProps;return function(e,t,n,r,i){var o;return null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Sc(n)?(o=!0,Pc(t)):o=!1,cu(t,i),Wu(t,n,r),Hu(t,n,r,i),Wf(null,t,n,!0,o,i)}(e,t,S,t.elementType===S?k:Yc(S,k),n);case y:return um(e,t,n);case 21:break;case _:return Vf(e,t,n)}throw new Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function _m(e,t,n){switch(lh(t),t.tag){case 1:Sc(t.type)&&kc(t);var r=t.flags;return r&nr?(t.flags=-65537&r|Zn,0!=(2&t.mode)&&uf(t),t):null;case 3:Qh(t),Cc(t),hd();var i=t.flags;return 0!=(i&nr)&&0==(i&Zn)?(t.flags=-65537&i|Zn,t):null;case 5:return td(t),null;case d:sd(t);var o=t.memoizedState;if(null!==o&&null!==o.dehydrated){if(null===t.alternate)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");zh()}var a=t.flags;return a&nr?(t.flags=-65537&a|Zn,0!=(2&t.mode)&&uf(t),t):null;case y:return sd(t),null;case 4:return Qh(t),null;case c:return su(t.type._context,t),null;case _:case v:return Ty(t),null;default:return null}}function vm(e,t,n){switch(lh(t),t.tag){case 1:null!=t.type.childContextTypes&&kc(t);break;case 3:Qh(t),Cc(t),hd();break;case 5:td(t);break;case 4:Qh(t);break;case d:case y:sd(t);break;case c:su(t.type._context,t);break;case _:case v:Ty(t)}}hm=new Set;var xm=!1,bm=!1,wm="function"==typeof WeakSet?WeakSet:Set,Tm=null,Em=null,Sm=null;function km(e){qn(null,(function(){throw e})),Gn()}function Cm(e,t){try{Fm(4,e)}catch(n){km(n),Uy(e,t,n)}}function Mm(e,t,n){try{!function(e,t){if(t.props=e.memoizedProps,t.state=e.memoizedState,2&e.mode)try{lf(),t.componentWillUnmount()}finally{af(e)}else t.componentWillUnmount()}(e,n)}catch(n){km(n),Uy(e,t,n)}}function Im(e,t){try{jm(e)}catch(n){km(n),Uy(e,t,n)}}function Pm(e,t){var n=e.ref;if(null!==n)if("function"==typeof n){var r;try{if(2&e.mode)try{lf(),r=n(null)}finally{af(e)}else r=n(null)}catch(n){km(n),Uy(e,t,n)}"function"==typeof r&&s("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Ne(e))}else n.current=null}function Am(e,t,n){try{n()}catch(n){km(n),Uy(e,t,n)}}var Dm=!1;function zm(e,t){var n;e.containerInfo,n=is(),kl={focusedElem:n,selectionRange:os(n)?as(n):null},Tm=t,function(){for(;null!==Tm;){var e=Tm,t=e.child;0!=(1028&e.subtreeFlags)&&null!==t?(yg(t,e),Tm=t):Rm()}}();var r=Dm;return Dm=!1,r}function Rm(){for(;null!==Tm;){var e=Tm;We(e);try{Om(e)}catch(t){km(t),Uy(e,e.return,t)}Ge();var t=e.sibling;if(null!==t)return yg(t,e.return),void(Tm=t);Tm=e.return}}function Om(e){var t=e.alternate;if(0!=(e.flags&Yn)){switch(We(e),e.tag){case 0:case u:case f:break;case 1:if(null!==t){var n=t.memoizedProps,r=t.memoizedState,i=e.stateNode;e.type!==e.elementType||zf||(i.props!==e.memoizedProps&&s("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ne(e)||"instance"),i.state!==e.memoizedState&&s("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ne(e)||"instance"));var o=i.getSnapshotBeforeUpdate(e.elementType===e.type?n:Yc(e.type,n),r),a=hm;void 0!==o||a.has(e.type)||(a.add(e.type),s("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",Ne(e))),i.__reactInternalSnapshotBeforeUpdate=o}break;case 3:!function(e){if(1===e.nodeType)e.textContent="";else if(9===e.nodeType){var t=e.body;null!=t&&(t.textContent="")}}(e.stateNode.containerInfo);break;case 5:case 6:case 4:case m:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}Ge()}}function Lm(e,t,n){var r,i=t.updateQueue,o=null!==i?i.lastEffect:null;if(null!==o){var a=o.next,s=a;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,void 0!==l&&(0!=(8&e)?(r=t,null!==Fr&&"function"==typeof Fr.markComponentPassiveEffectUnmountStarted&&Fr.markComponentPassiveEffectUnmountStarted(r)):0!=(4&e)&&Zr(t),Am(t,n,l),0!=(8&e)?null!==Fr&&"function"==typeof Fr.markComponentPassiveEffectUnmountStopped&&Fr.markComponentPassiveEffectUnmountStopped():0!=(4&e)&&Hr())}s=s.next}while(s!==a)}}function Fm(e,t){var n,r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next,a=o;do{if((a.tag&e)===e){0!=(8&e)?(n=t,null!==Fr&&"function"==typeof Fr.markComponentPassiveEffectMountStarted&&Fr.markComponentPassiveEffectMountStarted(n)):0!=(4&e)&&Wr(t);var l=a.create;a.destroy=l(),0!=(8&e)?null!==Fr&&"function"==typeof Fr.markComponentPassiveEffectMountStopped&&Fr.markComponentPassiveEffectMountStopped():0!=(4&e)&&null!==Fr&&"function"==typeof Fr.markComponentLayoutEffectMountStopped&&Fr.markComponentLayoutEffectMountStopped();var c=a.destroy;if(void 0!==c&&"function"!=typeof c){var u;s("%s must not return anything besides a function, which is used for clean-up.%s",u=0!=(4&a.tag)?"useLayoutEffect":0!=(2&a.tag)?"useInsertionEffect":"useEffect",null===c?" You returned null. If your effect does not require clean up, return undefined (or nothing).":"function"==typeof c.then?"\n\nIt looks like you wrote "+u+"(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:\n\n"+u+"(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching":" You returned: "+c)}}a=a.next}while(a!==o)}}function Bm(e,t){if(0!=(4&t.flags)&&t.tag===h){var n=t.stateNode.passiveEffectDuration,r=t.memoizedProps,i=r.id,o=r.onPostCommit,a=ef(),s=null===t.alternate?"mount":"update";Jp()&&(s="nested-update"),"function"==typeof o&&o(i,s,n,a);var l=t.return;e:for(;null!==l;){switch(l.tag){case 3:case h:l.stateNode.passiveEffectDuration+=n;break e}l=l.return}}}function Nm(e,t,n,r){if(0!=(n.flags&cr))switch(n.tag){case 0:case u:case f:if(!bm)if(2&n.mode)try{lf(),Fm(5,n)}finally{af(n)}else Fm(5,n);break;case 1:var i=n.stateNode;if(4&n.flags&&!bm)if(null===t)if(n.type!==n.elementType||zf||(i.props!==n.memoizedProps&&s("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ne(n)||"instance"),i.state!==n.memoizedState&&s("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ne(n)||"instance")),2&n.mode)try{lf(),i.componentDidMount()}finally{af(n)}else i.componentDidMount();else{var o=n.elementType===n.type?t.memoizedProps:Yc(n.type,t.memoizedProps),a=t.memoizedState;if(n.type!==n.elementType||zf||(i.props!==n.memoizedProps&&s("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ne(n)||"instance"),i.state!==n.memoizedState&&s("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ne(n)||"instance")),2&n.mode)try{lf(),i.componentDidUpdate(o,a,i.__reactInternalSnapshotBeforeUpdate)}finally{af(n)}else i.componentDidUpdate(o,a,i.__reactInternalSnapshotBeforeUpdate)}var l=n.updateQueue;null!==l&&(n.type!==n.elementType||zf||(i.props!==n.memoizedProps&&s("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ne(n)||"instance"),i.state!==n.memoizedState&&s("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ne(n)||"instance")),Mu(0,l,i));break;case 3:var c=n.updateQueue;if(null!==c){var p=null;if(null!==n.child)switch(n.child.tag){case 5:case 1:p=n.child.stateNode}Mu(0,c,p)}break;case 5:var g=n.stateNode;null===t&&4&n.flags&&function(e,t,n,r){switch(t){case"button":case"input":case"select":case"textarea":return void(n.autoFocus&&e.focus());case"img":n.src&&(e.src=n.src)}}(g,n.type,n.memoizedProps);break;case 6:case 4:break;case h:var x=n.memoizedProps,b=x.onCommit,w=x.onRender,T=n.stateNode.effectDuration,E=ef(),S=null===t?"mount":"update";Jp()&&(S="nested-update"),"function"==typeof w&&w(n.memoizedProps.id,S,n.actualDuration,n.treeBaseDuration,n.actualStartTime,E),"function"==typeof b&&b(n.memoizedProps.id,S,T,E),C=n,ty.push(C),Qg||(Qg=!0,e_(Pr,(function(){return Ly(),null})));var k=n.return;e:for(;null!==k;){switch(k.tag){case 3:case h:k.stateNode.effectDuration+=T;break e}k=k.return}break;case d:!function(e,t){if(null===t.memoizedState){var n=t.alternate;if(null!==n){var r=n.memoizedState;if(null!==r){var i=r.dehydrated;null!==i&&function(e){Ro(e)}(i)}}}}(0,n);break;case y:case m:case 21:case _:case v:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}var C;bm||n.flags&Xn&&jm(n)}function Um(e){switch(e.tag){case 0:case u:case f:if(2&e.mode)try{lf(),Cm(e,e.return)}finally{af(e)}else Cm(e,e.return);break;case 1:var t=e.stateNode;"function"==typeof t.componentDidMount&&function(e,t,n){try{n.componentDidMount()}catch(n){km(n),Uy(e,t,n)}}(e,e.return,t),Im(e,e.return);break;case 5:Im(e,e.return)}}function jm(e){var t=e.ref;if(null!==t){var n,r=e.stateNode;if(e.tag,n=r,"function"==typeof t){var i;if(2&e.mode)try{lf(),i=t(n)}finally{af(e)}else i=t(n);"function"==typeof i&&s("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Ne(e))}else t.hasOwnProperty("current")||s("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",Ne(e)),t.current=n}}function Vm(e,t,n){switch(function(e){if(Lr&&"function"==typeof Lr.onCommitFiberUnmount)try{Lr.onCommitFiberUnmount(Or,e)}catch(e){Br||(Br=!0,s("React instrumentation encountered an error: %s",e))}}(t),t.tag){case 0:case u:case p:case f:var r=t.updateQueue;if(null!==r){var i=r.lastEffect;if(null!==i){var o=i.next,a=o;do{var l=a,c=l.destroy,h=l.tag;void 0!==c&&(0!=(2&h)?Am(t,n,c):0!=(4&h)&&(Zr(t),2&t.mode?(lf(),Am(t,n,c),af(t)):Am(t,n,c),Hr())),a=a.next}while(a!==o)}}return;case 1:Pm(t,n);var d=t.stateNode;return void("function"==typeof d.componentWillUnmount&&Mm(t,n,d));case 5:return void Pm(t,n);case 4:return void Ym(e,t,n);case g:case 21:return}}function $m(e,t,n){for(var r=t;;)if(Vm(e,r,n),null===r.child||4===r.tag){if(r===t)return;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function qm(e){var t,n=e.alternate;if(null!==n&&(e.alternate=null,qm(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag){var r=e.stateNode;null!==r&&(delete(t=r)[Gl],delete t[Wl],delete t[Hl],delete t[Xl],delete t[Yl])}e.stateNode=null,e._debugOwner=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gm(e){return 5===e.tag||3===e.tag||4===e.tag}function Wm(e){var t=e;e:for(;;){for(;null===t.sibling;){if(null===t.return||Gm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&t.tag!==g;){if(2&t.flags)continue e;if(null===t.child||4===t.tag)continue e;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function Zm(e){var t=function(e){for(var t=e.return;null!==t;){if(Gm(t))return t;t=t.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}(e);switch(t.tag){case 5:var n=t.stateNode;32&t.flags&&(zl(n),t.flags&=-33),Xm(e,Wm(e),n);break;case 3:case 4:var r=t.stateNode.containerInfo;Hm(e,Wm(e),r);break;default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function Hm(e,t,n){var r=e.tag;if(5===r||6===r){var i=e.stateNode;t?function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)}(n,i,t):function(e,t){var n;8===e.nodeType?(n=e.parentNode).insertBefore(t,e):(n=e).appendChild(t),null==e._reactRootContainer&&null===n.onclick&&cl(n)}(n,i)}else if(4===r);else{var o=e.child;if(null!==o){Hm(o,t,n);for(var a=o.sibling;null!==a;)Hm(a,t,n),a=a.sibling}}}function Xm(e,t,n){var r=e.tag;if(5===r||6===r){var i=e.stateNode;t?function(e,t,n){e.insertBefore(t,n)}(n,i,t):function(e,t){e.appendChild(t)}(n,i)}else if(4===r);else{var o=e.child;if(null!==o){Xm(o,t,n);for(var a=o.sibling;null!==a;)Xm(a,t,n),a=a.sibling}}}function Ym(e,t,n){for(var r,i,o,a,s=t,l=!1;;){if(!l){var c=s.return;e:for(;;){if(null===c)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");var u=c.stateNode;switch(c.tag){case 5:r=u,i=!1;break e;case 3:case 4:r=u.containerInfo,i=!0;break e}c=c.return}l=!0}if(5===s.tag||6===s.tag)$m(e,s,n),i?(o=r,a=s.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):Rl(r,s.stateNode);else if(s.tag===g)i?Ll(r,s.stateNode):Ol(r,s.stateNode);else if(4===s.tag){if(null!==s.child){r=s.stateNode.containerInfo,i=!0,s.child.return=s,s=s.child;continue}}else if(Vm(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)return;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(l=!1)}s.sibling.return=s.return,s=s.sibling}}function Km(e,t,n){var r,i;Ym(e,t,n),null!==(i=(r=t).alternate)&&(i.return=null),r.return=null}function Qm(e,t){switch(t.tag){case 0:case u:case p:case f:if(Lm(3,t,t.return),Fm(3,t),2&t.mode)try{lf(),Lm(5,t,t.return)}finally{af(t)}else Lm(5,t,t.return);return;case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r,o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&function(e,t,n,r,i,o){(function(e,t,n,r,i){switch("input"===n&&"radio"===i.type&&null!=i.name&&ut(e,i),an(n,r),function(e,t,n,r){for(var i=0;i<t.length;i+=2){var o=t[i],a=t[i+1];o===nl?tn(e,a):o===Ks?Ft(e,a):o===tl?Bt(e,a):J(e,o,a,r)}}(e,t,0,an(n,i)),n){case"input":ht(e,i);break;case"textarea":It(e,i);break;case"select":!function(e,t){var n=e,r=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!t.multiple;var i=t.value;null!=i?Tt(n,!!t.multiple,i,!1):r!==!!t.multiple&&(null!=t.defaultValue?Tt(n,!!t.multiple,t.defaultValue,!0):Tt(n,!!t.multiple,t.multiple?[]:"",!1))}(e,i)}})(e,t,n,r,i),oc(e,i)}(n,a,o,i,r)}return;case 6:if(null===t.stateNode)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var s=t.stateNode,l=t.memoizedProps;return null!==e&&e.memoizedProps,void function(e,t,n){e.nodeValue=n}(s,0,l);case 3:if(null!==e&&e.memoizedState.isDehydrated)Ro(t.stateNode.containerInfo);return;case h:return;case d:return function(e){e.memoizedState}(t),void Jm(t);case y:return void Jm(t);case m:return}throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function Jm(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new wm),t.forEach((function(t){var r=qy.bind(null,e,t);if(!n.has(t)){if(n.add(t),Nr){if(null===Em||null===Sm)throw Error("Expected finished root and lanes to be set. This is a bug in React.");Qy(Sm,Em)}t.then(r,r)}}))}}function eg(e,t){for(;null!==Tm;){var n=Tm;We(n);try{tg(n)}catch(e){km(e),Uy(n,n.return,e)}Ge();var r=n.sibling;if(null!==r)return yg(r,n.return),void(Tm=r);Tm=n.return}}function tg(e,t,n){var r=e.flags;if(32&r&&function(e){zl(e.stateNode)}(e),r&Xn){var i=e.alternate;null!==i&&function(e){var t=e.ref;if(null!==t)if("function"==typeof t)if(2&e.mode)try{lf(),t(null)}finally{af(e)}else t(null);else t.current=null}(i)}if(r&Jn)switch(e.tag){case d:if(null!==e.memoizedState){var o=e.alternate;null!==o&&null!==o.memoizedState||(Gg=kr())}break;case _:var a=null!==e.memoizedState,s=e.alternate,l=null!==s&&null!==s.memoizedState,c=e;if(function(e,t){for(var n=null,r=e;;){if(5===r.tag){if(null===n){n=r;var i=r.stateNode;t?Fl(i):Bl(r.stateNode,r.memoizedProps)}}else if(6===r.tag){if(null===n){var o=r.stateNode;t?o.nodeValue="":(a=o,s=r.memoizedProps,a.nodeValue=s)}}else if((r.tag!==_&&r.tag!==v||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)return;for(;null===r.sibling;){if(null===r.return||r.return===e)return;n===r&&(n=null),r=r.return}n===r&&(n=null),r.sibling.return=r.return,r=r.sibling}var a,s}(c,a),a&&!l&&0!=(1&c.mode)){Tm=c;for(var u=c.child;null!==u;)Tm=u,og(u),u=u.sibling}}switch(4102&r){case 2:Zm(e),e.flags&=-3;break;case 6:Zm(e),e.flags&=-3,Qm(e.alternate,e);break;case Qn:e.flags&=-4097;break;case 4100:e.flags&=-4097,Qm(e.alternate,e);break;case 4:Qm(e.alternate,e)}}function ng(e,t,n){Em=n,Sm=t,Tm=e,rg(e,t,n),Em=null,Sm=null}function rg(e,t,n){for(var r=0!=(1&e.mode);null!==Tm;){var i=Tm,o=i.child;if(i.tag===_&&r){var a=null!==i.memoizedState||xm;if(a){ig(e);continue}var s=i.alternate,l=null!==s&&null!==s.memoizedState,c=xm,u=bm;xm=a,(bm=l||bm)&&!u&&(Tm=i,sg(i));for(var h=o;null!==h;)Tm=h,rg(h,t,n),h=h.sibling;Tm=i,xm=c,bm=u,ig(e)}else 0!=(i.subtreeFlags&cr)&&null!==o?(yg(o,i),Tm=o):ig(e)}}function ig(e,t,n){for(;null!==Tm;){var r=Tm;if(0!=(r.flags&cr)){var i=r.alternate;We(r);try{Nm(0,i,r)}catch(e){km(e),Uy(r,r.return,e)}Ge()}if(r===e)return void(Tm=null);var o=r.sibling;if(null!==o)return yg(o,r.return),void(Tm=o);Tm=r.return}}function og(e){for(;null!==Tm;){var t=Tm,n=t.child;switch(t.tag){case 0:case u:case p:case f:if(2&t.mode)try{lf(),Lm(4,t,t.return)}finally{af(t)}else Lm(4,t,t.return);break;case 1:Pm(t,t.return);var r=t.stateNode;"function"==typeof r.componentWillUnmount&&Mm(t,t.return,r);break;case 5:Pm(t,t.return);break;case _:if(null!==t.memoizedState){ag(e);continue}}null!==n?(n.return=t,Tm=n):ag(e)}}function ag(e){for(;null!==Tm;){var t=Tm;if(t===e)return void(Tm=null);var n=t.sibling;if(null!==n)return n.return=t.return,void(Tm=n);Tm=t.return}}function sg(e){for(;null!==Tm;){var t=Tm,n=t.child;t.tag!==_||null===t.memoizedState?null!==n?(n.return=t,Tm=n):lg(e):lg(e)}}function lg(e){for(;null!==Tm;){var t=Tm;We(t);try{Um(t)}catch(e){km(e),Uy(t,t.return,e)}if(Ge(),t===e)return void(Tm=null);var n=t.sibling;if(null!==n)return n.return=t.return,void(Tm=n);Tm=t.return}}function cg(e,t){for(;null!==Tm;){var n=Tm;if(0!=(n.flags&Kn)){We(n);try{ug(0,n)}catch(e){km(e),Uy(n,n.return,e)}Ge()}if(n===e)return void(Tm=null);var r=n.sibling;if(null!==r)return yg(r,n.return),void(Tm=r);Tm=n.return}}function ug(e,t){switch(t.tag){case 0:case u:case f:if(2&t.mode){cf();try{Fm(9,t)}finally{sf(t)}}else Fm(9,t)}}function hg(){for(;null!==Tm;){var e=Tm;0!=(e.flags&Kn)&&(We(e),dg(e),Ge());var t=e.sibling;if(null!==t)return yg(t,e.return),void(Tm=t);Tm=e.return}}function dg(e){switch(e.tag){case 0:case u:case f:2&e.mode?(cf(),Lm(9,e,e.return),sf(e)):Lm(9,e,e.return)}}function pg(e,t){for(;null!==Tm;){var n=Tm;We(n),mg(n,t),Ge();var r=n.child;null!==r?(yg(r,n),Tm=r):fg(e)}}function fg(e){for(;null!==Tm;){var t=Tm,n=t.sibling,r=t.return;if(qm(t),t===e)return void(Tm=null);if(null!==n)return yg(n,r),void(Tm=n);Tm=r}}function mg(e,t){switch(e.tag){case 0:case u:case f:2&e.mode?(cf(),Lm(8,e,t),sf(e)):Lm(8,e,t)}}var gg=!1;function yg(e,t){gg||e.return===t||(gg=!0,s("Internal React error: Return pointer is inconsistent with parent.")),e.return=t}function _g(e){switch(e.tag){case 0:case u:case f:try{Fm(5,e)}catch(t){km(t),Uy(e,e.return,t)}break;case 1:var t=e.stateNode;try{t.componentDidMount()}catch(t){km(t),Uy(e,e.return,t)}}}function vg(e){switch(e.tag){case 0:case u:case f:try{Fm(9,e)}catch(t){km(t),Uy(e,e.return,t)}}}function xg(e){switch(e.tag){case 0:case u:case f:try{Lm(5,e,e.return)}catch(t){km(t),Uy(e,e.return,t)}break;case 1:var t=e.stateNode;"function"==typeof t.componentWillUnmount&&Mm(e,e.return,t)}}function bg(e){switch(e.tag){case 0:case u:case f:try{Lm(9,e,e.return)}catch(t){km(t),Uy(e,e.return,t)}}}if("function"==typeof Symbol&&Symbol.for){var wg=Symbol.for;wg("selector.component"),wg("selector.has_pseudo_class"),wg("selector.role"),wg("selector.test_id"),wg("selector.text")}var Tg=[],Eg=i.ReactCurrentActQueue;function Sg(){var e="undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?IS_REACT_ACT_ENVIRONMENT:void 0;return e||null===Eg.current||s("The current testing environment is not configured to support act(...)"),e}var kg=Math.ceil,Cg=i.ReactCurrentDispatcher,Mg=i.ReactCurrentOwner,Ig=i.ReactCurrentBatchConfig,Pg=i.ReactCurrentActQueue,Ag=0,Dg=null,zg=null,Rg=0,Og=0,Lg=fc(0),Fg=0,Bg=null,Ng=0,Ug=0,jg=0,Vg=0,$g=null,qg=null,Gg=0,Wg=1/0;function Zg(){Wg=kr()+500}function Hg(){return Wg}var Xg=!1,Yg=null,Kg=null,Qg=!1,Jg=null,ey=0,ty=[],ny=0,ry=null,iy=0,oy=Ai,ay=0;function sy(){return Dg}function ly(){return 0!=(6&Ag)?kr():oy!==Ai?oy:oy=kr()}function cy(e){var t;if(0==(1&e.mode))return 1;if(0!=(2&Ag)&&0!==Rg)return $i(Rg);if(null!==Bc.transition){if(null!==Ig.transition){var n=Ig.transition;n._updatedFibers||(n._updatedFibers=new Set),n._updatedFibers.add(e)}return 0===ay&&(t=Di,0==((Di<<=1)&oi)&&(Di=64),ay=t),ay}var r,i=ho();return 0!==i?i:void 0===(r=window.event)?lo:jo(r.type)}function uy(e,t,n){!function(){if(ny>50)throw ny=0,ry=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");iy>50&&(iy=0,s("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}();var r=hy(e,t);return null===r?null:(Qi(r,t,n),0!=(2&Ag)&&r===Dg?function(e){if(Ve&&!kp)switch(e.tag){case 0:case u:case f:var t=zg&&Ne(zg)||"Unknown",n=t;Yy.has(n)||(Yy.add(n),s("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",Ne(e)||"Unknown",t,t));break;case 1:Ky||(s("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),Ky=!0)}}(e):(Nr&&to(r,e,t),function(e){if(1&e.mode){if(!Sg())return}else{if(t="undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?IS_REACT_ACT_ENVIRONMENT:void 0,"undefined"==typeof jest||!1===t)return;if(0!==Ag)return;if(0!==e.tag&&e.tag!==u&&e.tag!==f)return}var t;if(null===Pg.current){var n=je;try{We(e),s("An update to %s inside a test was not wrapped in act(...).\n\nWhen testing, code that causes React state updates should be wrapped into act(...):\n\nact(() => {\n  /* fire events that update state */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act",Ne(e))}finally{n?We(e):Ge()}}}(e),r===Dg&&(0==(2&Ag)&&(jg=Hi(jg,t)),4===Fg&&yy(r,Rg)),py(r,n),1!==t||0!==Ag||0!=(1&e.mode)||Pg.isBatchingLegacy||(Zg(),Lc())),r)}function hy(e,t){e.lanes=Hi(e.lanes,t);var n=e.alternate;null!==n&&(n.lanes=Hi(n.lanes,t)),null===n&&0!=(4098&e.flags)&&Xy(e);for(var r=e,i=e.return;null!==i;)i.childLanes=Hi(i.childLanes,t),null!==(n=i.alternate)?n.childLanes=Hi(n.childLanes,t):0!=(4098&i.flags)&&Xy(e),r=i,i=i.return;return 3===r.tag?r.stateNode:null}function dy(e,t){return null!==Dg&&0!=(1&e.mode)&&0==(2&Ag)}function py(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.pendingLanes,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=n;a>0;){var s=qi(a),l=1<<s,c=o[s];c===Ai?0!=(l&r)&&0==(l&i)||(o[s]=Li(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var r=Oi(e,e===Dg?Rg:0);if(0===r)return null!==n&&t_(n),e.callbackNode=null,void(e.callbackPriority=0);var i=Vi(r),o=e.callbackPriority;if(o!==i||null!==Pg.current&&n!==Jy){var a,l;if(null!=n&&t_(n),1===i)0===e.tag?(null!==Pg.isBatchingLegacy&&(Pg.didScheduleLegacyUpdate=!0),l=_y.bind(null,e),zc=!0,Oc(l)):Oc(_y.bind(null,e)),null!==Pg.current?Pg.current.push(Fc):Al((function(){0===Ag&&Fc()})),a=null;else{var c;switch(mo(r)){case 1:c=Mr;break;case 4:c=Ir;break;case lo:c=Pr;break;case co:c=Dr;break;default:c=Pr}a=e_(c,fy.bind(null,e))}e.callbackPriority=i,e.callbackNode=a}else null==n&&1!==o&&s("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.")}function fy(e,t){if(Kp=!1,Qp=!1,oy=Ai,ay=0,0!=(6&Ag))throw new Error("Should not already be working.");var n=e.callbackNode;if(Ly()&&e.callbackNode!==n)return null;var r=Oi(e,e===Dg?Rg:0);if(0===r)return null;var i=!Ui(0,r)&&!function(e,t){return 0!=(t&e.expiredLanes)}(e,r)&&!t,o=i?function(e,t){var n=Ag;Ag|=2;var r=ky();if(Dg!==e||Rg!==t){if(Nr){var i=e.memoizedUpdaters;i.size>0&&(Qy(e,Rg),i.clear()),no(e,t)}Zg(),Ey(e,t)}for(Yr(t);;)try{Dy();break}catch(t){Sy(e,t)}return ru(),Cy(r),Ag=n,null!==zg?(null!==Fr&&"function"==typeof Fr.markRenderYielded&&Fr.markRenderYielded(),0):(Kr(),Dg=null,Rg=0,Fg)}(e,r):Py(e,r);if(0!==o){if(2===o){var a=Fi(e);0!==a&&(r=a,o=my(e,a))}if(1===o){var s=Bg;throw Ey(e,0),yy(e,r),py(e,kr()),s}if(6===o)yy(e,r);else{var l=!Ui(0,r),c=e.current.alternate;if(l&&!function(e){for(var t=e;;){if(t.flags&er){var n=t.updateQueue;if(null!==n){var r=n.stores;if(null!==r)for(var i=0;i<r.length;i++){var o=r[i],a=o.getSnapshot,s=o.value;try{if(!Xa(a(),s))return!1}catch(e){return!1}}}}var l=t.child;if(t.subtreeFlags&er&&null!==l)l.return=t,t=l;else{if(t===e)return!0;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(c)){if(2===(o=Py(e,r))){var u=Fi(e);0!==u&&(r=u,o=my(e,u))}if(1===o){var h=Bg;throw Ey(e,0),yy(e,r),py(e,kr()),h}}e.finishedWork=c,e.finishedLanes=r,function(e,t,n){switch(t){case 0:case 1:throw new Error("Root did not complete. This is a bug in React.");case 2:case 5:Oy(e,qg);break;case 3:if(yy(e,n),Ni(n)&&!n_()){var r=Gg+500-kr();if(r>10){if(0!==Oi(e,0))break;var i=e.suspendedLanes;if(!Zi(i,n)){ly(),Ji(e,i);break}e.timeoutHandle=Ml(Oy.bind(null,e,qg),r);break}}Oy(e,qg);break;case 4:if(yy(e,n),function(e){return(e&oi)===e}(n))break;if(!n_()){var o=function(e,t){for(var n=e.eventTimes,r=Ai;t>0;){var i=qi(t),o=1<<i,a=n[i];a>r&&(r=a),t&=~o}return r}(e,n),a=o,s=kr()-a,l=((c=s)<120?120:c<480?480:c<1080?1080:c<1920?1920:c<3e3?3e3:c<4320?4320:1960*kg(c/1960))-s;if(l>10){e.timeoutHandle=Ml(Oy.bind(null,e,qg),l);break}}Oy(e,qg);break;default:throw new Error("Unknown root exit status.")}var c}(e,o,r)}}return py(e,kr()),e.callbackNode===n?fy.bind(null,e):null}function my(e,t){var n=$g;go(e)&&(Ey(e,t).flags|=Hn,s("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",e.containerInfo.nodeName.toLowerCase()));var r=Py(e,t);if(2!==r){var i=qg;qg=n,null!==i&&gy(i)}return r}function gy(e){null===qg?qg=e:qg.push.apply(qg,e)}function yy(e,t){t=Xi(t,Vg),function(e,t){e.suspendedLanes|=t,e.pingedLanes&=~t;for(var n=e.expirationTimes,r=t;r>0;){var i=qi(r),o=1<<i;n[i]=Ai,r&=~o}}(e,t=Xi(t,jg))}function _y(e){if(Kp=Qp,Qp=!1,0!=(6&Ag))throw new Error("Should not already be working.");Ly();var t=Oi(e,0);if(!Wi(t,1))return py(e,kr()),null;var n=Py(e,t);if(0!==e.tag&&2===n){var r=Fi(e);0!==r&&(t=r,n=my(e,r))}if(1===n){var i=Bg;throw Ey(e,0),yy(e,t),py(e,kr()),i}if(6===n)throw new Error("Root did not complete. This is a bug in React.");var o=e.current.alternate;return e.finishedWork=o,e.finishedLanes=t,Oy(e,qg),py(e,kr()),null}function vy(e,t){var n=Ag;Ag|=1;try{return e(t)}finally{0!==(Ag=n)||Pg.isBatchingLegacy||(Zg(),Lc())}}function xy(e){null!==Jg&&0===Jg.tag&&0==(6&Ag)&&Ly();var t=Ag;Ag|=1;var n=Ig.transition,r=ho();try{return Ig.transition=null,po(1),e?e():void 0}finally{po(r),Ig.transition=n,0==(6&(Ag=t))&&Fc()}}function by(){return 0!=(6&Ag)}function wy(e,t){gc(Lg,Og,e),Og=Hi(Og,t),Ng=Hi(Ng,t)}function Ty(e){Og=Lg.current,mc(Lg,e)}function Ey(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Il(n)),null!==zg)for(var r=zg.return;null!==r;)r.alternate,vm(0,r),r=r.return;Dg=e;var i=b_(e.current,null);return zg=i,Rg=Og=Ng=t,Fg=0,Bg=null,Ug=0,jg=0,Vg=0,$g=null,qg=null,function(){if(null!==hu){for(var e=0;e<hu.length;e++){var t=hu[e],n=t.interleaved;if(null!==n){t.interleaved=null;var r=n.next,i=t.pending;if(null!==i){var o=i.next;i.next=r,n.next=o}t.pending=n}}hu=null}}(),Nc.discardPendingWarnings(),i}function Sy(e,t){for(;;){var n=zg;try{if(ru(),Fd(),Ge(),Mg.current=null,null===n||null===n.return)return Fg=1,Bg=t,void(zg=null);2&n.mode&&of(n,!0),Gr(),null!==t&&"object"==typeof t&&"function"==typeof t.then?(r=n,i=t,o=Rg,null!==Fr&&"function"==typeof Fr.markComponentSuspended&&Fr.markComponentSuspended(r,i,o)):Xr(n,t,Rg),wf(e,n.return,n,t,Rg),Ry(n)}catch(e){t=e,zg===n&&null!==n?(n=n.return,zg=n):n=zg;continue}return}var r,i,o}function ky(){var e=Cg.current;return Cg.current=Lp,null===e?Lp:e}function Cy(e){Cg.current=e}function My(e){Ug=Hi(e,Ug)}function Iy(){0!==Fg&&3!==Fg&&2!==Fg||(Fg=4),null!==Dg&&(Bi(Ug)||Bi(jg))&&yy(Dg,Rg)}function Py(e,t){var n=Ag;Ag|=2;var r=ky();if(Dg!==e||Rg!==t){if(Nr){var i=e.memoizedUpdaters;i.size>0&&(Qy(e,Rg),i.clear()),no(e,t)}Ey(e,t)}for(Yr(t);;)try{Ay();break}catch(t){Sy(e,t)}if(ru(),Ag=n,Cy(r),null!==zg)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Kr(),Dg=null,Rg=0,Fg}function Ay(){for(;null!==zg;)zy(zg)}function Dy(){for(;null!==zg&&!Er();)zy(zg)}function zy(e){var t,n=e.alternate;We(e),0!=(2&e.mode)?(nf(e),t=Zy(n,e,Og),of(e,!0)):t=Zy(n,e,Og),Ge(),e.memoizedProps=e.pendingProps,null===t?Ry(e):zg=t,Mg.current=null}function Ry(e){var t=e;do{var n=t.alternate,r=t.return;if(0==(t.flags&tr)){We(t);var i=void 0;if(0==(2&t.mode)?i=Cf(n,t,Og):(nf(t),i=Cf(n,t,Og),of(t,!1)),Ge(),null!==i)return void(zg=i)}else{var o=_m(0,t);if(null!==o)return o.flags&=32767,void(zg=o);if(0!=(2&t.mode)){of(t,!1);for(var a=t.actualDuration,s=t.child;null!==s;)a+=s.actualDuration,s=s.sibling;t.actualDuration=a}if(null===r)return Fg=6,void(zg=null);r.flags|=tr,r.subtreeFlags=0,r.deletions=null}var l=t.sibling;if(null!==l)return void(zg=l);zg=t=r}while(null!==t);0===Fg&&(Fg=5)}function Oy(e,t){var n=ho(),r=Ig.transition;try{Ig.transition=null,po(1),function(e,t,n){do{Ly()}while(null!==Jg);if(Nc.flushLegacyContextWarning(),Nc.flushPendingUnsafeLifecycleWarnings(),0!=(6&Ag))throw new Error("Should not already be working.");var r=e.finishedWork,i=e.finishedLanes;if(function(e){null!==Fr&&"function"==typeof Fr.markCommitStarted&&Fr.markCommitStarted(e)}(i),null===r)return $r(),null;if(0===i&&s("root.finishedLanes should not be empty during a commit. This is a bug in React."),e.finishedWork=null,e.finishedLanes=0,r===e.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null,e.callbackPriority=0;var o=Hi(r.lanes,r.childLanes);(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t;for(var r=e.entanglements,i=e.eventTimes,o=e.expirationTimes,a=n;a>0;){var s=qi(a),l=1<<s;r[s]=0,i[s]=Ai,o[s]=Ai,a&=~l}})(e,o),e===Dg&&(Dg=null,zg=null,Rg=0),0==(r.subtreeFlags&ur)&&0==(r.flags&ur)||Qg||(Qg=!0,e_(Pr,(function(){return Ly(),null})));var a=0!=(15990&r.subtreeFlags),l=0!=(15990&r.flags);if(a||l){var c=Ig.transition;Ig.transition=null;var u=ho();po(1);var h=Ag;Ag|=4,Mg.current=null,zm(e,r),tf(),function(e,t,n){Em=n,Sm=e,Tm=t,function(e,t){for(;null!==Tm;){var n=Tm,r=n.deletions;if(null!==r)for(var i=0;i<r.length;i++){var o=r[i];try{Km(e,o,n)}catch(e){km(e),Uy(o,n,e)}}var a=n.child;0!=(12854&n.subtreeFlags)&&null!==a?(yg(a,n),Tm=a):eg()}}(e),Em=null,Sm=null}(e,r,i),e.containerInfo,function(e){var t,n,r,i,o=is(),a=e.focusedElem,s=e.selectionRange;if(o!==a&&ns(a)){null!==s&&os(a)&&(t=a,r=(n=s).start,void 0===(i=n.end)&&(i=r),"selectionStart"in t?(t.selectionStart=r,t.selectionEnd=Math.min(i,t.value.length)):function(e,t){var n=e.ownerDocument||document,r=n&&n.defaultView||window;if(r.getSelection){var i=r.getSelection(),o=e.textContent.length,a=Math.min(t.start,o),s=void 0===t.end?a:Math.min(t.end,o);if(!i.extend&&a>s){var l=s;s=a,a=l}var c=Ja(e,a),u=Ja(e,s);if(c&&u){if(1===i.rangeCount&&i.anchorNode===c.node&&i.anchorOffset===c.offset&&i.focusNode===u.node&&i.focusOffset===u.offset)return;var h=n.createRange();h.setStart(c.node,c.offset),i.removeAllRanges(),a>s?(i.addRange(h),i.extend(u.node,u.offset)):(h.setEnd(u.node,u.offset),i.addRange(h))}}}(t,n));for(var l=[],c=a;c=c.parentNode;)1===c.nodeType&&l.push({element:c,left:c.scrollLeft,top:c.scrollTop});"function"==typeof a.focus&&a.focus();for(var u=0;u<l.length;u++){var h=l[u];h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}}(kl),kl=null,e.current=r,function(e){null!==Fr&&"function"==typeof Fr.markLayoutEffectsStarted&&Fr.markLayoutEffectsStarted(e)}(i),ng(r,e,i),null!==Fr&&"function"==typeof Fr.markLayoutEffectsStopped&&Fr.markLayoutEffectsStopped(),Sr(),Ag=h,po(u),Ig.transition=c}else e.current=r,tf();var d=Qg;if(Qg&&(Qg=!1,Jg=e,ey=i),0===(o=e.pendingLanes)&&(Kg=null),d||Gy(e.current,!1),function(e,t){if(Lr&&"function"==typeof Lr.onCommitFiberRoot)try{var n,r=(e.current.flags&Zn)===Zn;switch(t){case 1:n=Mr;break;case 4:n=Ir;break;case lo:n=Pr;break;case co:n=Dr;break;default:n=Pr}Lr.onCommitFiberRoot(Or,e,n,r)}catch(e){Br||(Br=!0,s("React instrumentation encountered an error: %s",e))}}(r.stateNode,n),Nr&&e.memoizedUpdaters.clear(),Tg.forEach((function(e){return e()})),py(e,kr()),null!==t)for(var p=e.onRecoverableError,f=0;f<t.length;f++)p(t[f]);if(Xg){Xg=!1;var m=Yg;throw Yg=null,m}Wi(ey,1)&&0!==e.tag&&Ly(),Wi(o=e.pendingLanes,1)?(Qp=!0,e===ry?ny++:(ny=0,ry=e)):ny=0,Fc(),$r()}(e,t,n)}finally{Ig.transition=r,po(n)}return null}function Ly(){if(null!==Jg){var e=(r=mo(ey),0===lo||16>r?16:r),t=Ig.transition,n=ho();try{return Ig.transition=null,po(e),function(){if(null===Jg)return!1;var e=Jg,t=ey;if(Jg=null,ey=0,0!=(6&Ag))throw new Error("Cannot flush passive effects while already rendering.");!function(e){null!==Fr&&"function"==typeof Fr.markPassiveEffectsStarted&&Fr.markPassiveEffectsStarted(e)}(t);var n,r,i=Ag;Ag|=4,r=e.current,Tm=r,function(){for(;null!==Tm;){var e=Tm,t=e.child;if(0!=(16&Tm.flags)){var n=e.deletions;if(null!==n){for(var r=0;r<n.length;r++){var i=n[r];Tm=i,pg(i,e)}var o=e.alternate;if(null!==o){var a=o.child;if(null!==a){o.child=null;do{var s=a.sibling;a.sibling=null,a=s}while(null!==a)}}Tm=e}}0!=(e.subtreeFlags&ur)&&null!==t?(yg(t,e),Tm=t):hg()}}(),n=e.current,Tm=n,function(e,t){for(;null!==Tm;){var n=Tm,r=n.child;0!=(n.subtreeFlags&ur)&&null!==r?(yg(r,n),Tm=r):cg(e)}}(n);var o=ty;ty=[];for(var a=0;a<o.length;a++)Bm(0,o[a]);null!==Fr&&"function"==typeof Fr.markPassiveEffectsStopped&&Fr.markPassiveEffectsStopped(),Gy(e.current,!0),Ag=i,Fc(),iy=null===Jg?0:iy+1,function(e){if(Lr&&"function"==typeof Lr.onPostCommitFiberRoot)try{Lr.onPostCommitFiberRoot(Or,e)}catch(e){Br||(Br=!0,s("React instrumentation encountered an error: %s",e))}}(e);var l=e.current.stateNode;return l.effectDuration=0,l.passiveEffectDuration=0,!0}()}finally{po(n),Ig.transition=t}}var r;return!1}function Fy(e){return null!==Kg&&Kg.has(e)}var By=function(e){Xg||(Xg=!0,Yg=e)};function Ny(e,t,n){xu(e,yf(e,hf(n,t),1));var r=ly(),i=hy(e,1);null!==i&&(Qi(i,1,r),py(i,r))}function Uy(e,t,n){if(3!==e.tag){var r=null;for(r=t;null!==r;){if(3===r.tag)return void Ny(r,e,n);if(1===r.tag){var i=r.type,o=r.stateNode;if("function"==typeof i.getDerivedStateFromError||"function"==typeof o.componentDidCatch&&!Fy(o)){xu(r,_f(r,hf(n,e),1));var a=ly(),l=hy(r,1);return void(null!==l&&(Qi(l,1,a),py(l,a)))}}r=r.return}s("Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.\n\nError message:\n\n%s",n)}else Ny(e,e,n)}function jy(e,t,n){var r=e.pingCache;null!==r&&r.delete(t);var i=ly();Ji(e,n),function(e){0!==e.tag&&Sg()&&null===Pg.current&&s("A suspended resource finished loading inside a test, but the event was not wrapped in act(...).\n\nWhen testing, code that resolves suspended data should be wrapped into act(...):\n\nact(() => {\n  /* finish loading suspended data */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act")}(e),Dg===e&&Zi(Rg,n)&&(4===Fg||3===Fg&&Ni(Rg)&&kr()-Gg<500?Ey(e,0):Vg=Hi(Vg,n)),py(e,i)}function Vy(e,t){var n;0===t&&(t=0==(1&e.mode)?1:(n=zi,0==((zi<<=1)&_i)&&(zi=vi),n));var r=ly(),i=hy(e,t);null!==i&&(Qi(i,t,r),py(i,r))}function $y(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Vy(e,n)}function qy(e,t){var n,r=0;switch(e.tag){case d:n=e.stateNode;var i=e.memoizedState;null!==i&&(r=i.retryLane);break;case y:n=e.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}null!==n&&n.delete(t),Vy(e,r)}function Gy(e,t){We(e),Wy(e,sr,xg),t&&Wy(e,lr,bg),Wy(e,sr,_g),t&&Wy(e,lr,vg),Ge()}function Wy(e,t,n){for(var r=e,i=null;null!==r;){var o=r.subtreeFlags&t;r!==i&&null!==r.child&&0!==o?r=r.child:(0!=(r.flags&t)&&n(r),r=null!==r.sibling?r.sibling:i=r.return)}}var Zy,Hy=null;function Xy(e){if(0==(2&Ag)&&1&e.mode){var t=e.tag;if(2===t||3===t||1===t||0===t||t===u||t===p||t===f){var n=Ne(e)||"ReactComponent";if(null!==Hy){if(Hy.has(n))return;Hy.add(n)}else Hy=new Set([n]);var r=je;try{We(e),s("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{r?We(e):Ge()}}}}Zy=function(e,t,n){var r=I_(null,t);try{return ym(e,t,n)}catch(o){if(null!==o&&"object"==typeof o&&"function"==typeof o.then)throw o;if(ru(),Fd(),vm(0,t),I_(t,r),2&t.mode&&nf(t),qn(null,ym,null,e,t,n),Nn){var i=Gn();"object"==typeof i&&null!==i&&i._suppressLogging&&"object"==typeof o&&null!==o&&!o._suppressLogging&&(o._suppressLogging=!0)}throw o}};var Yy,Ky=!1;function Qy(e,t){Nr&&e.memoizedUpdaters.forEach((function(n){to(e,n,t)}))}Yy=new Set;var Jy={};function e_(e,t){var n=Pg.current;return null!==n?(n.push(t),Jy):wr(e,t)}function t_(e){if(e!==Jy)return Tr(e)}function n_(){return null!==Pg.current}var r_=null,i_=null,o_=function(e){r_=e};function a_(e){if(null===r_)return e;var t=r_(e);return void 0===t?e:t.current}function s_(e){return a_(e)}function l_(e){if(null===r_)return e;var t=r_(e);if(void 0===t){if(null!=e&&"function"==typeof e.render){var n=a_(e.render);if(e.render!==n){var r={$$typeof:se,render:n};return void 0!==e.displayName&&(r.displayName=e.displayName),r}}return e}return t.current}function c_(e,t){if(null===r_)return!1;var n=e.elementType,r=t.type,i=!1,o="object"==typeof r&&null!==r?r.$$typeof:null;switch(e.tag){case 1:"function"==typeof r&&(i=!0);break;case 0:("function"==typeof r||o===he)&&(i=!0);break;case u:(o===se||o===he)&&(i=!0);break;case p:case f:(o===ue||o===he)&&(i=!0);break;default:return!1}if(i){var a=r_(n);if(void 0!==a&&a===r_(r))return!0}return!1}function u_(e){null!==r_&&"function"==typeof WeakSet&&(null===i_&&(i_=new WeakSet),i_.add(e))}var h_=function(e,t){if(null!==r_){var n=t.staleFamilies,r=t.updatedFamilies;Ly(),xy((function(){p_(e.current,r,n)}))}},d_=function(e,t){e.context===yc&&(Ly(),xy((function(){N_(t,e,null,null)})))};function p_(e,t,n){var r=e.alternate,i=e.child,o=e.sibling,a=e.tag,s=e.type,l=null;switch(a){case 0:case f:case 1:l=s;break;case u:l=s.render}if(null===r_)throw new Error("Expected resolveFamily to be set during hot reload.");var c=!1,h=!1;if(null!==l){var d=r_(l);void 0!==d&&(n.has(d)?h=!0:t.has(d)&&(1===a?h=!0:c=!0))}null!==i_&&(i_.has(e)||null!==r&&i_.has(r))&&(h=!0),h&&(e._debugNeedsRemount=!0),(h||c)&&uy(e,1,Ai),null===i||h||p_(i,t,n),null!==o&&p_(o,t,n)}var f_,m_=function(e,t){var n=new Set,r=new Set(t.map((function(e){return e.current})));return g_(e.current,r,n),n};function g_(e,t,n){var r=e.child,i=e.sibling,o=e.tag,a=e.type,s=null;switch(o){case 0:case f:case 1:s=a;break;case u:s=a.render}var l=!1;null!==s&&t.has(s)&&(l=!0),l?function(e,t){if(!function(e,t){for(var n=e,r=!1;;){if(5===n.tag)r=!0,t.add(n.stateNode);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)return r;for(;null===n.sibling;){if(null===n.return||n.return===e)return r;n=n.return}n.sibling.return=n.return,n=n.sibling}return!1}(e,t))for(var n=e;;){switch(n.tag){case 5:return void t.add(n.stateNode);case 4:case 3:return void t.add(n.stateNode.containerInfo)}if(null===n.return)throw new Error("Expected to reach root first.");n=n.return}}(e,n):null!==r&&g_(r,t,n),null!==i&&g_(i,t,n)}f_=!1;try{var y_=Object.preventExtensions({});new Map([[y_,null]]),new Set([y_])}catch(e){f_=!0}function __(e,t,n,r){this.tag=e,this.key=n,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=r,this.flags=0,this.subtreeFlags=0,this.deletions=null,this.lanes=0,this.childLanes=0,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,f_||"function"!=typeof Object.preventExtensions||Object.preventExtensions(this)}var v_=function(e,t,n,r){return new __(e,t,n,r)};function x_(e){var t=e.prototype;return!(!t||!t.isReactComponent)}function b_(e,t){var n=e.alternate;null===n?((n=v_(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n._debugSource=e._debugSource,n._debugOwner=e._debugOwner,n._debugHookTypes=e._debugHookTypes,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null,n.actualDuration=0,n.actualStartTime=-1),n.flags=e.flags&hr,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue;var r=e.dependencies;switch(n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.selfBaseDuration=e.selfBaseDuration,n.treeBaseDuration=e.treeBaseDuration,n._debugNeedsRemount=e._debugNeedsRemount,n.tag){case 2:case 0:case f:n.type=a_(e.type);break;case 1:n.type=s_(e.type);break;case u:n.type=l_(e.type)}return n}function w_(e,t){e.flags&=14680066;var n=e.alternate;if(null===n)e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0;else{e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type;var r=n.dependencies;e.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},e.selfBaseDuration=n.selfBaseDuration,e.treeBaseDuration=n.treeBaseDuration}return e}function T_(e,t,n,r,i,o){var a=2,l=e;if("function"==typeof e)x_(e)?(a=1,l=s_(l)):l=a_(l);else if("string"==typeof e)a=5;else e:switch(e){case ne:return S_(n.children,i,o,t);case re:a=8,0!=(1&(i|=8))&&(i|=Jr);break;case ie:return function(e,t,n,r){"string"!=typeof e.id&&s('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof e.id);var i=v_(h,e,r,2|t);return i.elementType=ie,i.lanes=n,i.stateNode={effectDuration:0,passiveEffectDuration:0},i}(n,i,o,t);case le:return function(e,t,n,r){var i=v_(d,e,r,t);return i.elementType=le,i.lanes=n,i}(n,i,o,t);case ce:return function(e,t,n,r){var i=v_(y,e,r,t);return i.elementType=ce,i.lanes=n,i}(n,i,o,t);case de:return k_(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case oe:a=c;break e;case ae:a=9;break e;case se:a=u,l=l_(l);break e;case ue:a=p;break e;case he:a=16,l=null;break e}var f="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(f+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var m=r?Ne(r):null;throw m&&(f+="\n\nCheck the render method of `"+m+"`."),new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(null==e?e:typeof e)+"."+f)}var g=v_(a,n,t,i);return g.elementType=e,g.type=l,g.lanes=o,g._debugOwner=r,g}function E_(e,t,n){var r;r=e._owner;var i=T_(e.type,e.key,e.props,r,t,n);return i._debugSource=e._source,i._debugOwner=e._owner,i}function S_(e,t,n,r){var i=v_(7,e,r,t);return i.lanes=n,i}function k_(e,t,n,r){var i=v_(_,e,r,t);return i.elementType=de,i.lanes=n,i.stateNode={},i}function C_(e,t,n){var r=v_(6,e,null,t);return r.lanes=n,r}function M_(e,t,n){var r=null!==e.children?e.children:[],i=v_(4,r,e.key,t);return i.lanes=n,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function I_(e,t){return null===e&&(e=v_(2,null,null,0)),e.tag=t.tag,e.key=t.key,e.elementType=t.elementType,e.type=t.type,e.stateNode=t.stateNode,e.return=t.return,e.child=t.child,e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e.pendingProps=t.pendingProps,e.memoizedProps=t.memoizedProps,e.updateQueue=t.updateQueue,e.memoizedState=t.memoizedState,e.dependencies=t.dependencies,e.mode=t.mode,e.flags=t.flags,e.subtreeFlags=t.subtreeFlags,e.deletions=t.deletions,e.lanes=t.lanes,e.childLanes=t.childLanes,e.alternate=t.alternate,e.actualDuration=t.actualDuration,e.actualStartTime=t.actualStartTime,e.selfBaseDuration=t.selfBaseDuration,e.treeBaseDuration=t.treeBaseDuration,e._debugSource=t._debugSource,e._debugOwner=t._debugOwner,e._debugNeedsRemount=t._debugNeedsRemount,e._debugHookTypes=t._debugHookTypes,e}function P_(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=-1,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ki(0),this.expirationTimes=Ki(Ai),this.pendingLanes=0,this.suspendedLanes=0,this.pingedLanes=0,this.expiredLanes=0,this.mutableReadLanes=0,this.finishedLanes=0,this.entangledLanes=0,this.entanglements=Ki(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0,this.memoizedUpdaters=new Set;for(var o=this.pendingUpdatersLaneMap=[],a=0;a<ri;a++)o.push(new Set);switch(t){case 1:this._debugRootType=n?"hydrateRoot()":"createRoot()";break;case 0:this._debugRootType=n?"hydrate()":"render()"}}function A_(e,t,n,r,i,o,a,s,l,c){var u=new P_(e,t,n,s,l),h=function(e,t,n){var r;return 1===e?(r=1,!0===t&&(r|=8,r|=Jr)):r=0,Nr&&(r|=2),v_(3,null,null,r)}(t,o);u.current=h,h.stateNode=u;var d={element:r,isDehydrated:n,cache:null,transitions:null};return h.memoizedState=d,yu(h),u}var D_,z_,R_="18.0.0-fc46dba67-20220329";function O_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return D(r),{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function L_(e){if(!e)return yc;var t=Wn(e),n=function(e){if(!function(e){return pr(e)===e}(e)||1!==e.tag)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var t=e;do{switch(t.tag){case 3:return t.stateNode.context;case 1:if(Sc(t.type))return t.stateNode.__reactInternalMemoizedMergedChildContext}t=t.return}while(null!==t);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}(t);if(1===t.tag){var r=t.type;if(Sc(r))return Ic(t,r,n)}return n}function F_(e,t,n,r,i,o,a,s){return A_(e,t,!1,null,0,r,0,o,a)}function B_(e,t,n,r,i,o,a,s,l,c){var u=A_(n,r,!0,e,0,o,0,s,l);u.context=L_(null);var h=u.current,d=ly(),p=cy(h),f=vu(d,p);return f.callback=null!=t?t:null,xu(h,f),function(e,t,n){e.current.lanes=t,Qi(e,t,n),py(e,n)}(u,p,d),u}function N_(e,t,n,r){!function(e,t){if(Lr&&"function"==typeof Lr.onScheduleFiberRoot)try{Lr.onScheduleFiberRoot(Or,e,t)}catch(e){Br||(Br=!0,s("React instrumentation encountered an error: %s",e))}}(t,e);var i=t.current,o=ly(),a=cy(i);!function(e){null!==Fr&&"function"==typeof Fr.markRenderScheduled&&Fr.markRenderScheduled(e)}(a);var l=L_(n);null===t.context?t.context=l:t.pendingContext=l,Ve&&null!==je&&!D_&&(D_=!0,s("Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.\n\nCheck the render method of %s.",Ne(je)||"Unknown"));var c=vu(o,a);c.payload={element:e},null!==(r=void 0===r?null:r)&&("function"!=typeof r&&s("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",r),c.callback=r),xu(i,c);var u=uy(i,a,o);return null!==u&&bu(u,i,a),a}function U_(e){var t=e.current;return t.child?(t.child.tag,t.child.stateNode):null}function j_(e,t){var n,r,i=e.memoizedState;null!==i&&null!==i.dehydrated&&(i.retryLane=(r=t,0!==(n=i.retryLane)&&n<r?n:r))}function V_(e,t){j_(e,t);var n=e.alternate;n&&j_(n,t)}function $_(e){var t=xr(e);return null===t?null:t.stateNode}D_=!1,z_={};var q_,G_,W_,Z_,H_,X_,Y_,K_,Q_,J_=function(e){return null},ev=function(e){return!1},tv=function(e,t,n){var r=t[n],i=xt(e)?e.slice():we({},e);return n+1===t.length?(xt(i)?i.splice(r,1):delete i[r],i):(i[r]=tv(e[r],t,n+1),i)},nv=function(e,t){return tv(e,t,0)},rv=function(e,t,n,r){var i=t[r],o=xt(e)?e.slice():we({},e);return r+1===t.length?(o[n[r]]=o[i],xt(o)?o.splice(i,1):delete o[i]):o[i]=rv(e[i],t,n,r+1),o},iv=function(e,t,n){if(t.length===n.length){for(var r=0;r<n.length-1;r++)if(t[r]!==n[r])return void a("copyWithRename() expects paths to be the same except for the deepest key");return rv(e,t,n,0)}a("copyWithRename() expects paths of the same length")},ov=function(e,t,n,r){if(n>=t.length)return r;var i=t[n],o=xt(e)?e.slice():we({},e);return o[i]=ov(e[i],t,n+1,r),o},av=function(e,t,n){return ov(e,t,0,n)},sv=function(e,t){for(var n=e.memoizedState;null!==n&&t>0;)n=n.next,t--;return n};function lv(e){var t=_r(e);return null===t?null:t.stateNode}function cv(e){return null}function uv(){return je}q_=function(e,t,n,r){var i=sv(e,t);if(null!==i){var o=av(i.memoizedState,n,r);i.memoizedState=o,i.baseState=o,e.memoizedProps=we({},e.memoizedProps),uy(e,1,Ai)}},G_=function(e,t,n){var r=sv(e,t);if(null!==r){var i=nv(r.memoizedState,n);r.memoizedState=i,r.baseState=i,e.memoizedProps=we({},e.memoizedProps),uy(e,1,Ai)}},W_=function(e,t,n,r){var i=sv(e,t);if(null!==i){var o=iv(i.memoizedState,n,r);i.memoizedState=o,i.baseState=o,e.memoizedProps=we({},e.memoizedProps),uy(e,1,Ai)}},Z_=function(e,t,n){e.pendingProps=av(e.memoizedProps,t,n),e.alternate&&(e.alternate.pendingProps=e.pendingProps),uy(e,1,Ai)},H_=function(e,t){e.pendingProps=nv(e.memoizedProps,t),e.alternate&&(e.alternate.pendingProps=e.pendingProps),uy(e,1,Ai)},X_=function(e,t,n){e.pendingProps=iv(e.memoizedProps,t,n),e.alternate&&(e.alternate.pendingProps=e.pendingProps),uy(e,1,Ai)},Y_=function(e){uy(e,1,Ai)},K_=function(e){J_=e},Q_=function(e){ev=e};var hv="function"==typeof reportError?reportError:function(e){console.error(e)};function dv(e){this._internalRoot=e}function pv(e){this._internalRoot=e}function fv(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function mv(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function gv(e){1===e.nodeType&&e.tagName&&"BODY"===e.tagName.toUpperCase()&&s("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),ec(e)&&(e._reactRootContainer?s("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):s("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}pv.prototype.render=dv.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw new Error("Cannot update an unmounted root.");"function"==typeof arguments[1]?s("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):fv(arguments[1])?s("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):void 0!==arguments[1]&&s("You passed a second argument to root.render(...) but it only accepts one argument.");var n=t.containerInfo;if(8!==n.nodeType){var r=$_(t.current);r&&r.parentNode!==n&&s("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}N_(e,t,null,null)},pv.prototype.unmount=dv.prototype.unmount=function(){"function"==typeof arguments[0]&&s("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;by()&&s("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),xy((function(){N_(null,e,null,null)})),Jl(t)}},pv.prototype.unstable_scheduleHydration=function(e){e&&function(e){for(var t=ao(),n={blockedOn:null,target:e,priority:t},r=0;r<So.length&&fo(t,So[r].priority);r++);So.splice(r,0,n),0===r&&Io(n)}(e)};var yv,_v,vv=i.ReactCurrentOwner;function xv(e){return e?9===e.nodeType?e.documentElement:e.firstChild:null}function bv(){}function wv(e,t,n,r,i){yv(n),function(e,t){null!==e&&"function"!=typeof e&&s("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.","render",e)}(void 0===i?null:i);var o,a=n._reactRootContainer;if(a){if("function"==typeof i){var l=i;i=function(){var e=U_(o);l.call(e)}}N_(t,o=a,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var e=U_(a);o.call(e)}}var a=B_(t,r,e,0,0,!1,0,"",bv);return e._reactRootContainer=a,Ql(a.current,e),Rs(8===e.nodeType?e.parentNode:e),xy(),a}for(var s;s=e.lastChild;)e.removeChild(s);if("function"==typeof r){var l=r;r=function(){var e=U_(c);l.call(e)}}var c=F_(e,0,0,!1,0,"",bv);return e._reactRootContainer=c,Ql(c.current,e),Rs(8===e.nodeType?e.parentNode:e),xy((function(){N_(t,c,n,r)})),c}(n,t,e,i,r);return U_(o)}yv=function(e){if(e._reactRootContainer&&8!==e.nodeType){var t=$_(e._reactRootContainer.current);t&&t.parentNode!==e&&s("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var n=!!e._reactRootContainer,r=xv(e);!(!r||!nc(r))&&!n&&s("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),1===e.nodeType&&e.tagName&&"BODY"===e.tagName.toUpperCase()&&s("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")},_v=function(e){switch(e.tag){case 3:var t=e.stateNode;if(go(t)){var n=function(e){return Ri(e.pendingLanes)}(t);!function(e,t){0!==t&&(eo(e,Hi(t,1)),py(e,kr()),0==(6&Ag)&&(Zg(),Fc()))}(t,n)}break;case d:var r=ly();xy((function(){return uy(e,1,r)})),V_(e,1)}},ro=_v,io=function(e){if(e.tag===d){var t=ly(),n=Si;uy(e,n,t),V_(e,n)}},oo=function(e){if(e.tag===d){var t=ly(),n=cy(e);uy(e,n,t),V_(e,n)}},function(e){ao=e}(ho),so=function(e,t){var n=uo;try{return uo=e,t()}finally{uo=n}},"function"==typeof Map&&null!=Map.prototype&&"function"==typeof Map.prototype.forEach&&"function"==typeof Set&&null!=Set.prototype&&"function"==typeof Set.prototype.clear&&"function"==typeof Set.prototype.forEach||s("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),wn=function(e,t,n){switch(t){case"input":return void function(e,t){var n=e;ht(n,t),function(e,t){var n=t.name;if("radio"===t.type&&null!=n){for(var r=e;r.parentNode;)r=r.parentNode;A(n,"name");for(var i=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),o=0;o<i.length;o++){var a=i[o];if(a!==e&&a.form===e.form){var s=ic(a);if(!s)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");tt(a),ht(a,s)}}}}(n,t)}(e,n);case"textarea":return void function(e,t){It(e,t)}(e,n);case"select":return void function(e,t){var n=e,r=t.value;null!=r&&Tt(n,!!t.multiple,r,!1)}(e,n)}},Mn=vy,In=xy;var Tv={usingClientEntryPoint:!1,Events:[nc,rc,ic,kn,Cn,vy]},Ev=function(e){var t=e.findFiberByHostInstance,n=i.ReactCurrentDispatcher;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return s("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{e=we({},e,{getLaneLabelMap:Vr,injectProfilingHooks:jr}),Or=t.inject(e),Lr=t}catch(e){s("React instrumentation encountered an error: %s.",e)}return!!t.checkDCE}({bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:q_,overrideHookStateDeletePath:G_,overrideHookStateRenamePath:W_,overrideProps:Z_,overridePropsDeletePath:H_,overridePropsRenamePath:X_,setErrorHandler:K_,setSuspenseHandler:Q_,scheduleUpdate:Y_,currentDispatcherRef:n,findHostInstanceByFiber:lv,findFiberByHostInstance:t||cv,findHostInstancesForRefresh:m_,scheduleRefresh:h_,scheduleRoot:d_,setRefreshHandler:o_,getCurrentFiber:uv,reconcilerVersion:R_})}({findFiberByHostInstance:tc,bundleType:1,version:R_,rendererPackageName:"react-dom"});if(!Ev&&k&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&-1===navigator.userAgent.indexOf("Edge")||navigator.userAgent.indexOf("Firefox")>-1)){var Sv=window.location.protocol;/^(https?|file):$/.test(Sv)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+("file:"===Sv?"\nYou might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq":""),"font-weight:bold")}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tv,t.createPortal=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!fv(t))throw new Error("Target container is not a DOM element.");return O_(e,t,null,n)},t.createRoot=function(e,t){return Tv.usingClientEntryPoint||s('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),function(e,t){if(!fv(e))throw new Error("createRoot(...): Target container is not a DOM element.");gv(e);var n=!1,r="",i=hv;null!=t&&(t.hydrate?a("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):"object"==typeof t&&null!==t&&t.$$typeof===ee&&s("You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:\n\n  let root = createRoot(domContainer);\n  root.render(<App />);"),!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError),void 0!==t.transitionCallbacks&&t.transitionCallbacks);var o=F_(e,1,0,n,0,r,i);return Ql(o.current,e),Rs(8===e.nodeType?e.parentNode:e),new dv(o)}(e,t)},t.findDOMNode=function(e){var t=vv.current;return null!==t&&null!==t.stateNode&&(t.stateNode._warnedAboutRefsInRender||s("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Fe(t.type)||"A component"),t.stateNode._warnedAboutRefsInRender=!0),null==e?null:1===e.nodeType?e:function(e,t){var n=Wn(e);if(void 0===n){if("function"==typeof e.render)throw new Error("Unable to find node on an unmounted component.");var r=Object.keys(e).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+r)}var i=_r(n);if(null===i)return null;if(8&i.mode){var o=Ne(n)||"Component";if(!z_[o]){z_[o]=!0;var a=je;try{We(i),8&n.mode?s("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",t,t,o):s("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",t,t,o)}finally{a?We(a):Ge()}}}return i.stateNode}(e,"findDOMNode")},t.flushSync=function(e){return by()&&s("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),xy(e)},t.hydrate=function(e,t,n){if(s("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mv(t))throw new Error("Target container is not a DOM element.");return ec(t)&&void 0===t._reactRootContainer&&s("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?"),wv(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){return Tv.usingClientEntryPoint||s('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),function(e,t,n){if(!fv(e))throw new Error("hydrateRoot(...): Target container is not a DOM element.");gv(e),void 0===t&&s("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=hv;null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError));var l=B_(t,null,e,1,0,i,0,o,a);if(Ql(l.current,e),Rs(e),r)for(var c=0;c<r.length;c++)dd(l,r[c]);return new pv(l)}(e,t,n)},t.render=function(e,t,n){if(s("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mv(t))throw new Error("Target container is not a DOM element.");return ec(t)&&void 0===t._reactRootContainer&&s("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?"),wv(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!mv(e))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");if(ec(e)&&void 0===e._reactRootContainer&&s("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?"),e._reactRootContainer){var t=xv(e);return t&&!nc(t)&&s("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React."),xy((function(){wv(null,null,e,!1,(function(){e._reactRootContainer=null,Jl(e)}))})),!0}var n=xv(e),r=!(!n||!nc(n)),i=1===e.nodeType&&mv(e.parentNode)&&!!e.parentNode._reactRootContainer;return r&&s("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",i?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1},t.unstable_batchedUpdates=vy,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){return function(e,t,n,r){if(s("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!mv(n))throw new Error("Target container is not a DOM element.");if(null==e||void 0===e._reactInternals)throw new Error("parentComponent must be a valid React Component");return wv(e,t,n,!1,r)}(e,t,n,r)},t.version=R_,"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()},935:function(e,t,n){"use strict";e.exports=n(116)},590:function(e){var t="undefined"!=typeof Element,n="function"==typeof Map,r="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,l,c,u;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(l=s;0!=l--;)if(!o(e[l],a[l]))return!1;return!0}if(n&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!o(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(l=s;0!=l--;)if(e[l]!==a[l])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=s;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!o(e[c[l]],a[c[l]]))return!1;return!0}return e!=e&&a!=a}e.exports=function(e,t){try{return o(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},201:function(e,t){"use strict";!function(){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var p=e.type;switch(p){case c:case u:case i:case a:case o:case d:return p;default:var g=p&&p.$$typeof;switch(g){case l:case h:case m:case f:case s:return g;default:return t}}case r:return t}}}var b=c,w=u,T=l,E=s,S=n,k=h,C=i,M=m,I=f,P=r,A=a,D=o,z=d,R=!1;function O(e){return x(e)===u}t.AsyncMode=b,t.ConcurrentMode=w,t.ContextConsumer=T,t.ContextProvider=E,t.Element=S,t.ForwardRef=k,t.Fragment=C,t.Lazy=M,t.Memo=I,t.Portal=P,t.Profiler=A,t.StrictMode=D,t.Suspense=z,t.isAsyncMode=function(e){return R||(R=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),O(e)||x(e)===c},t.isConcurrentMode=O,t.isContextConsumer=function(e){return x(e)===l},t.isContextProvider=function(e){return x(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===i},t.isLazy=function(e){return x(e)===m},t.isMemo=function(e){return x(e)===f},t.isPortal=function(e){return x(e)===r},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===u||e===a||e===o||e===d||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===s||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===_||e.$$typeof===v||e.$$typeof===g)},t.typeOf=x}()},864:function(e,t,n){"use strict";e.exports=n(201)},420:function(e,t,n){"use strict";!function(){var e=n(294),r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),g=Symbol.iterator,y=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function _(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v("error",e,n)}function v(e,t,n){var r=y.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var i=n.map((function(e){return String(e)}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i)}var x=Symbol.for("react.module.reference");function b(e){return e.displayName||"Context"}function w(e){if(null==e)return null;if("number"==typeof e.tag&&_("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case o:return"Fragment";case i:return"Portal";case s:return"Profiler";case a:return"StrictMode";case h:return"Suspense";case d:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case c:return b(e)+".Consumer";case l:return b(e._context)+".Provider";case u:return function(e,t,n){var r=e.displayName;if(r)return r;var i=t.displayName||t.name||"";return""!==i?"ForwardRef("+i+")":n}(e,e.render,"ForwardRef");case p:var t=e.displayName||null;return null!==t?t:w(e.type)||"Memo";case f:var n=e,r=n._payload,m=n._init;try{return w(m(r))}catch(e){return null}}return null}var T,E,S,k,C,M,I,P=Object.assign,A=0;function D(){}D.__reactDisabledLog=!0;var z,R=y.ReactCurrentDispatcher;function O(e,t,n){if(void 0===z)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);z=r&&r[1]||""}return"\n"+z+e}var L,F=!1,B="function"==typeof WeakMap?WeakMap:Map;function N(e,t){if(!e||F)return"";var n,r=L.get(e);if(void 0!==r)return r;F=!0;var i,o=Error.prepareStackTrace;Error.prepareStackTrace=void 0,i=R.current,R.current=null,function(){if(0===A){T=console.log,E=console.info,S=console.warn,k=console.error,C=console.group,M=console.groupCollapsed,I=console.groupEnd;var e={configurable:!0,enumerable:!0,value:D,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}A++}();try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(e){n=e}Reflect.construct(e,[],a)}else{try{a.call()}catch(e){n=e}e.call(a.prototype)}}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var s=t.stack.split("\n"),l=n.stack.split("\n"),c=s.length-1,u=l.length-1;c>=1&&u>=0&&s[c]!==l[u];)u--;for(;c>=1&&u>=0;c--,u--)if(s[c]!==l[u]){if(1!==c||1!==u)do{if(c--,--u<0||s[c]!==l[u]){var h="\n"+s[c].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),"function"==typeof e&&L.set(e,h),h}}while(c>=1&&u>=0);break}}}finally{F=!1,R.current=i,function(){if(0==--A){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:P({},e,{value:T}),info:P({},e,{value:E}),warn:P({},e,{value:S}),error:P({},e,{value:k}),group:P({},e,{value:C}),groupCollapsed:P({},e,{value:M}),groupEnd:P({},e,{value:I})})}A<0&&_("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=o}var d=e?e.displayName||e.name:"",p=d?O(d):"";return"function"==typeof e&&L.set(e,p),p}function U(e,t,n){if(null==e)return"";if("function"==typeof e)return N(e,!(!(r=e.prototype)||!r.isReactComponent));var r;if("string"==typeof e)return O(e);switch(e){case h:return O("Suspense");case d:return O("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case u:return N(e.render,!1);case p:return U(e.type,t,n);case f:var i=e,o=i._payload,a=i._init;try{return U(a(o),t,n)}catch(e){}}return""}L=new B;var j=Object.prototype.hasOwnProperty,V={},$=y.ReactDebugCurrentFrame;function q(e){if(e){var t=e._owner,n=U(e.type,e._source,t?t.type:null);$.setExtraStackFrame(n)}else $.setExtraStackFrame(null)}var G=Array.isArray;function W(e){return G(e)}function Z(e){return""+e}function H(e){if(function(e){try{return Z(e),!1}catch(e){return!0}}(e))return _("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),Z(e)}var X,Y,K,Q=y.ReactCurrentOwner,J={key:!0,ref:!0,__self:!0,__source:!0};K={};var ee,te=y.ReactCurrentOwner,ne=y.ReactDebugCurrentFrame;function re(e){if(e){var t=e._owner,n=U(e.type,e._source,t?t.type:null);ne.setExtraStackFrame(n)}else ne.setExtraStackFrame(null)}function ie(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}function oe(){if(te.current){var e=w(te.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}ee=!1;var ae={};function se(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=oe();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!ae[n]){ae[n]=!0;var r="";e&&e._owner&&e._owner!==te.current&&(r=" It was passed a child from "+w(e._owner.type)+"."),re(e),_('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),re(null)}}}function le(e,t){if("object"==typeof e)if(W(e))for(var n=0;n<e.length;n++){var r=e[n];ie(r)&&se(r,t)}else if(ie(e))e._store&&(e._store.validated=!0);else if(e){var i=function(e){if(null===e||"object"!=typeof e)return null;var t=g&&e[g]||e["@@iterator"];return"function"==typeof t?t:null}(e);if("function"==typeof i&&i!==e.entries)for(var o,a=i.call(e);!(o=a.next()).done;)ie(o.value)&&se(o.value,t)}}function ce(e,t,n,i,g,y){var v=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===s||e===a||e===h||e===d||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===p||e.$$typeof===l||e.$$typeof===c||e.$$typeof===u||e.$$typeof===x||void 0!==e.getModuleId)}(e);if(!v){var b="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(b+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var T,E=function(e){return void 0!==e?"\n\nCheck your code at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+".":""}(g);b+=E||oe(),null===e?T="null":W(e)?T="array":void 0!==e&&e.$$typeof===r?(T="<"+(w(e.type)||"Unknown")+" />",b=" Did you accidentally export a JSX literal instead of a component?"):T=typeof e,_("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",T,b)}var S=function(e,t,n,i,o){var a,s={},l=null,c=null;for(a in void 0!==n&&(H(n),l=""+n),function(e){if(j.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(H(t.key),l=""+t.key),function(e){if(j.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(c=t.ref,function(e,t){if("string"==typeof e.ref&&Q.current&&t&&Q.current.stateNode!==t){var n=w(Q.current.type);K[n]||(_('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',w(Q.current.type),e.ref),K[n]=!0)}}(t,o)),t)j.call(t,a)&&!J.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps){var u=e.defaultProps;for(a in u)void 0===s[a]&&(s[a]=u[a])}if(l||c){var h="function"==typeof e?e.displayName||e.name||"Unknown":e;l&&function(e,t){var n=function(){X||(X=!0,_("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(s,h),c&&function(e,t){var n=function(){Y||(Y=!0,_("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(s,h)}return function(e,t,n,i,o,a,s){var l={$$typeof:r,type:e,key:t,ref:n,props:s,_owner:a,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l}(e,l,c,o,i,Q.current,s)}(e,t,n,g,y);if(null==S)return S;if(v){var k=t.children;if(void 0!==k)if(i)if(W(k)){for(var C=0;C<k.length;C++)le(k[C],e);Object.freeze&&Object.freeze(k)}else _("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else le(k,e)}return e===o?function(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){re(e),_("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),re(null);break}}null!==e.ref&&(re(e),_("Invalid attribute `ref` supplied to `React.Fragment`."),re(null))}(S):function(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==u&&n.$$typeof!==p)return;t=n.propTypes}if(t){var r=w(n);!function(e,t,n,r,i){var o=Function.call.bind(j);for(var a in e)if(o(e,a)){var s=void 0;try{if("function"!=typeof e[a]){var l=Error((r||"React class")+": prop type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}s=e[a](t,a,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){s=e}!s||s instanceof Error||(q(i),_("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,a,typeof s),q(null)),s instanceof Error&&!(s.message in V)&&(V[s.message]=!0,q(i),_("Failed %s type: %s",n,s.message),q(null))}}(t,e.props,"prop",r,e)}else void 0===n.PropTypes||ee||(ee=!0,_("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",w(n)||"Unknown"));"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||_("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}(S),S}t.jsx=function(e,t,n){return ce(e,t,n,!1)},t.jsxs=function(e,t,n){return ce(e,t,n,!0)}}()},369:function(e,t,n){"use strict";e=n.nmd(e),function(){"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m=Symbol.iterator;function g(e){if(null===e||"object"!=typeof e)return null;var t=m&&e[m]||e["@@iterator"];return"function"==typeof t?t:null}var y={current:null},_={transition:null},v={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},x={current:null},b={},w=null;function T(e){w=e}b.setExtraStackFrame=function(e){w=e},b.getCurrentStack=null,b.getStackAddendum=function(){var e="";w&&(e+=w);var t=b.getCurrentStack;return t&&(e+=t()||""),e};var E={ReactCurrentDispatcher:y,ReactCurrentBatchConfig:_,ReactCurrentOwner:x};function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];C("warn",e,n)}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];C("error",e,n)}function C(e,t,n){var r=E.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var i=n.map((function(e){return String(e)}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i)}E.ReactDebugCurrentFrame=b,E.ReactCurrentActQueue=v;var M={};function I(e,t){var n=e.constructor,r=n&&(n.displayName||n.name)||"ReactClass",i=r+"."+t;M[i]||(k("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",t,r),M[i]=!0)}var P={isMounted:function(e){return!1},enqueueForceUpdate:function(e,t,n){I(e,"forceUpdate")},enqueueReplaceState:function(e,t,n,r){I(e,"replaceState")},enqueueSetState:function(e,t,n,r){I(e,"setState")}},A=Object.assign,D={};function z(e,t,n){this.props=e,this.context=t,this.refs=D,this.updater=n||P}Object.freeze(D),z.prototype.isReactComponent={},z.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},z.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};var R={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},O=function(e,t){Object.defineProperty(z.prototype,e,{get:function(){S("%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var L in R)R.hasOwnProperty(L)&&O(L,R[L]);function F(){}function B(e,t,n){this.props=e,this.context=t,this.refs=D,this.updater=n||P}F.prototype=z.prototype;var N=B.prototype=new F;N.constructor=B,A(N,z.prototype),N.isPureReactComponent=!0;var U=Array.isArray;function j(e){return U(e)}function V(e){return""+e}function $(e){if(function(e){try{return V(e),!1}catch(e){return!0}}(e))return k("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),V(e)}function q(e){return e.displayName||"Context"}function G(e){if(null==e)return null;if("number"==typeof e.tag&&k("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case i:return"Fragment";case r:return"Portal";case a:return"Profiler";case o:return"StrictMode";case u:return"Suspense";case h:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case l:return q(e)+".Consumer";case s:return q(e._context)+".Provider";case c:return function(e,t,n){var r=e.displayName;if(r)return r;var i=t.displayName||t.name||"";return""!==i?"ForwardRef("+i+")":n}(e,e.render,"ForwardRef");case d:var t=e.displayName||null;return null!==t?t:G(e.type)||"Memo";case p:var n=e,f=n._payload,m=n._init;try{return G(m(f))}catch(e){return null}}return null}var W,Z,H,X=Object.prototype.hasOwnProperty,Y={key:!0,ref:!0,__self:!0,__source:!0};function K(e){if(X.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function Q(e){if(X.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}function J(e,t){var n=function(){W||(W=!0,k("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}function ee(e,t){var n=function(){Z||(Z=!0,k("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}function te(e){if("string"==typeof e.ref&&x.current&&e.__self&&x.current.stateNode!==e.__self){var t=G(x.current.type);H[t]||(k('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',t,e.ref),H[t]=!0)}}H={};var ne=function(e,t,r,i,o,a,s){var l={$$typeof:n,type:e,key:t,ref:r,props:s,_owner:a,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l};function re(e,t,n){var r,i={},o=null,a=null,s=null,l=null;if(null!=t)for(r in K(t)&&(a=t.ref,te(t)),Q(t)&&($(t.key),o=""+t.key),s=void 0===t.__self?null:t.__self,l=void 0===t.__source?null:t.__source,t)X.call(t,r)&&!Y.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(c>1){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];Object.freeze&&Object.freeze(u),i.children=u}if(e&&e.defaultProps){var d=e.defaultProps;for(r in d)void 0===i[r]&&(i[r]=d[r])}if(o||a){var p="function"==typeof e?e.displayName||e.name||"Unknown":e;o&&J(i,p),a&&ee(i,p)}return ne(e,o,a,s,l,x.current,i)}function ie(e,t,n){if(null==e)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r,i,o=A({},e.props),a=e.key,s=e.ref,l=e._self,c=e._source,u=e._owner;if(null!=t)for(r in K(t)&&(s=t.ref,u=x.current),Q(t)&&($(t.key),a=""+t.key),e.type&&e.type.defaultProps&&(i=e.type.defaultProps),t)X.call(t,r)&&!Y.hasOwnProperty(r)&&(void 0===t[r]&&void 0!==i?o[r]=i[r]:o[r]=t[r]);var h=arguments.length-2;if(1===h)o.children=n;else if(h>1){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];o.children=d}return ne(e.type,a,s,l,c,u,o)}function oe(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var ae=!1,se=/\/+/g;function le(e){return e.replace(se,"$&/")}function ce(e,t){return"object"==typeof e&&null!==e&&null!=e.key?($(e.key),n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function ue(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u,h=!1;if(null===e)h=!0;else switch(s){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case n:case r:h=!0}}if(h){var d=e,p=a(d),f=""===o?"."+ce(d,0):o;if(j(p)){var m="";null!=f&&(m=le(f)+"/"),ue(p,t,m,"",(function(e){return e}))}else null!=p&&(oe(p)&&(!p.key||d&&d.key===p.key||$(p.key),l=p,c=i+(!p.key||d&&d.key===p.key?"":le(""+p.key)+"/")+f,p=ne(l.type,c,l.ref,l._self,l._source,l._owner,l.props)),t.push(p));return 1}var y=0,_=""===o?".":o+":";if(j(e))for(var v=0;v<e.length;v++)y+=ue(u=e[v],t,i,_+ce(u,v),a);else{var x=g(e);if("function"==typeof x){var b=e;x===b.entries&&(ae||S("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),ae=!0);for(var w,T=x.call(b),E=0;!(w=T.next()).done;)y+=ue(u=w.value,t,i,_+ce(u,E++),a)}else if("object"===s){var k=String(e);throw new Error("Objects are not valid as a React child (found: "+("[object Object]"===k?"object with keys {"+Object.keys(e).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}}return y}function he(e,t,n){if(null==e)return e;var r=[],i=0;return ue(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function de(e){if(-1===e._status){var t=(0,e._result)();if(t.then((function(t){if(0===e._status||-1===e._status){var n=e;n._status=1,n._result=t}}),(function(t){if(0===e._status||-1===e._status){var n=e;n._status=2,n._result=t}})),-1===e._status){var n=e;n._status=0,n._result=t}}if(1===e._status){var r=e._result;return void 0===r&&k("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))\n\nDid you accidentally put curly braces around the import?",r),"default"in r||k("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",r),r.default}throw e._result}var pe=Symbol.for("react.module.reference");function fe(e){return"string"==typeof e||"function"==typeof e||e===i||e===a||e===o||e===u||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===d||e.$$typeof===s||e.$$typeof===l||e.$$typeof===c||e.$$typeof===pe||void 0!==e.getModuleId)}function me(){var e=y.current;return null===e&&k("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem."),e}var ge,ye,_e,ve,xe,be,we,Te=0;function Ee(){}Ee.__reactDisabledLog=!0;var Se,ke=E.ReactCurrentDispatcher;function Ce(e,t,n){if(void 0===Se)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);Se=r&&r[1]||""}return"\n"+Se+e}var Me,Ie=!1,Pe="function"==typeof WeakMap?WeakMap:Map;function Ae(e,t){if(!e||Ie)return"";var n,r=Me.get(e);if(void 0!==r)return r;Ie=!0;var i,o=Error.prepareStackTrace;Error.prepareStackTrace=void 0,i=ke.current,ke.current=null,function(){if(0===Te){ge=console.log,ye=console.info,_e=console.warn,ve=console.error,xe=console.group,be=console.groupCollapsed,we=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Ee,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Te++}();try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(e){n=e}Reflect.construct(e,[],a)}else{try{a.call()}catch(e){n=e}e.call(a.prototype)}}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var s=t.stack.split("\n"),l=n.stack.split("\n"),c=s.length-1,u=l.length-1;c>=1&&u>=0&&s[c]!==l[u];)u--;for(;c>=1&&u>=0;c--,u--)if(s[c]!==l[u]){if(1!==c||1!==u)do{if(c--,--u<0||s[c]!==l[u]){var h="\n"+s[c].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),"function"==typeof e&&Me.set(e,h),h}}while(c>=1&&u>=0);break}}}finally{Ie=!1,ke.current=i,function(){if(0==--Te){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:A({},e,{value:ge}),info:A({},e,{value:ye}),warn:A({},e,{value:_e}),error:A({},e,{value:ve}),group:A({},e,{value:xe}),groupCollapsed:A({},e,{value:be}),groupEnd:A({},e,{value:we})})}Te<0&&k("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=o}var d=e?e.displayName||e.name:"",p=d?Ce(d):"";return"function"==typeof e&&Me.set(e,p),p}function De(e,t,n){if(null==e)return"";if("function"==typeof e)return Ae(e,function(e){var t=e.prototype;return!(!t||!t.isReactComponent)}(e));if("string"==typeof e)return Ce(e);switch(e){case u:return Ce("Suspense");case h:return Ce("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case c:return Ae(e.render,!1);case d:return De(e.type,t,n);case p:var r=e,i=r._payload,o=r._init;try{return De(o(i),t,n)}catch(e){}}return""}Me=new Pe;var ze,Re={},Oe=E.ReactDebugCurrentFrame;function Le(e){if(e){var t=e._owner,n=De(e.type,e._source,t?t.type:null);Oe.setExtraStackFrame(n)}else Oe.setExtraStackFrame(null)}function Fe(e){if(e){var t=e._owner;T(De(e.type,e._source,t?t.type:null))}else T(null)}function Be(){if(x.current){var e=G(x.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}function Ne(e){return null!=e&&void 0!==(t=e.__source)?"\n\nCheck your code at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+".":"";var t}ze=!1;var Ue={};function je(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=Be();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!Ue[n]){Ue[n]=!0;var r="";e&&e._owner&&e._owner!==x.current&&(r=" It was passed a child from "+G(e._owner.type)+"."),Fe(e),k('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),Fe(null)}}}function Ve(e,t){if("object"==typeof e)if(j(e))for(var n=0;n<e.length;n++){var r=e[n];oe(r)&&je(r,t)}else if(oe(e))e._store&&(e._store.validated=!0);else if(e){var i=g(e);if("function"==typeof i&&i!==e.entries)for(var o,a=i.call(e);!(o=a.next()).done;)oe(o.value)&&je(o.value,t)}}function $e(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==c&&n.$$typeof!==d)return;t=n.propTypes}if(t){var r=G(n);!function(e,t,n,r,i){var o=Function.call.bind(X);for(var a in e)if(o(e,a)){var s=void 0;try{if("function"!=typeof e[a]){var l=Error((r||"React class")+": "+"prop type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}s=e[a](t,a,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){s=e}!s||s instanceof Error||(Le(i),k("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,a,typeof s),Le(null)),s instanceof Error&&!(s.message in Re)&&(Re[s.message]=!0,Le(i),k("Failed %s type: %s",n,s.message),Le(null))}}(t,e.props,"prop",r,e)}else void 0===n.PropTypes||ze||(ze=!0,k("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",G(n)||"Unknown"));"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||k("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function qe(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){Fe(e),k("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),Fe(null);break}}null!==e.ref&&(Fe(e),k("Invalid attribute `ref` supplied to `React.Fragment`."),Fe(null))}function Ge(e,t,r){var o=fe(e);if(!o){var a="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(a+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var s,l=Ne(t);a+=l||Be(),null===e?s="null":j(e)?s="array":void 0!==e&&e.$$typeof===n?(s="<"+(G(e.type)||"Unknown")+" />",a=" Did you accidentally export a JSX literal instead of a component?"):s=typeof e,k("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",s,a)}var c=re.apply(this,arguments);if(null==c)return c;if(o)for(var u=2;u<arguments.length;u++)Ve(arguments[u],e);return e===i?qe(c):$e(c),c}var We=!1,Ze=!1,He=null,Xe=0,Ye=!1;function Ke(e){e!==Xe-1&&k("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Xe=e}function Qe(t,n,r){var i=v.current;if(null!==i)try{et(i),function(o){if(null===He)try{var a=("require"+Math.random()).slice(0,7),s=e&&e[a];He=s.call(e,"timers").setImmediate}catch(e){He=function(e){!1===Ze&&(Ze=!0,"undefined"==typeof MessageChannel&&k("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(void 0)}}He((function(){0===i.length?(v.current=null,n(t)):Qe(t,n,r)}))}()}catch(e){r(e)}else n(t)}var Je=!1;function et(e){if(!Je){Je=!0;var t=0;try{for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}e.length=0}catch(n){throw e=e.slice(t+1),n}finally{Je=!1}}}var tt=Ge,nt={map:he,forEach:function(e,t,n){he(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return he(e,(function(){t++})),t},toArray:function(e){return he(e,(function(e){return e}))||[]},only:function(e){if(!oe(e))throw new Error("React.Children.only expected to receive a single React element child.");return e}};t.Children=nt,t.Component=z,t.Fragment=i,t.Profiler=a,t.PureComponent=B,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E,t.cloneElement=function(e,t,n){for(var r=ie.apply(this,arguments),i=2;i<arguments.length;i++)Ve(arguments[i],r.type);return $e(r),r},t.createContext=function(e){var t={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};t.Provider={$$typeof:s,_context:t};var n=!1,r=!1,i=!1,o={$$typeof:l,_context:t};return Object.defineProperties(o,{Provider:{get:function(){return r||(r=!0,k("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),t.Provider},set:function(e){t.Provider=e}},_currentValue:{get:function(){return t._currentValue},set:function(e){t._currentValue=e}},_currentValue2:{get:function(){return t._currentValue2},set:function(e){t._currentValue2=e}},_threadCount:{get:function(){return t._threadCount},set:function(e){t._threadCount=e}},Consumer:{get:function(){return n||(n=!0,k("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),t.Consumer}},displayName:{get:function(){return t.displayName},set:function(e){i||(S("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",e),i=!0)}}}),t.Consumer=o,t._currentRenderer=null,t._currentRenderer2=null,t},t.createElement=tt,t.createFactory=function(e){var t=Ge.bind(null,e);return t.type=e,We||(We=!0,S("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(t,"type",{enumerable:!1,get:function(){return S("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},t.createRef=function(){var e={current:null};return Object.seal(e),e},t.forwardRef=function(e){null!=e&&e.$$typeof===d?k("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):"function"!=typeof e?k("forwardRef requires a render function but was given %s.",null===e?"null":typeof e):0!==e.length&&2!==e.length&&k("forwardRef render functions accept exactly two parameters: props and ref. %s",1===e.length?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),null!=e&&(null==e.defaultProps&&null==e.propTypes||k("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?"));var t,n={$$typeof:c,render:e};return Object.defineProperty(n,"displayName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n,e.name||e.displayName||(e.displayName=n)}}),n},t.isValidElement=oe,t.lazy=function(e){var t,n,r={$$typeof:p,_payload:{_status:-1,_result:e},_init:de};return Object.defineProperties(r,{defaultProps:{configurable:!0,get:function(){return t},set:function(e){k("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),t=e,Object.defineProperty(r,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return n},set:function(e){k("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),n=e,Object.defineProperty(r,"propTypes",{enumerable:!0})}}}),r},t.memo=function(e,t){fe(e)||k("memo: The first argument must be a component. Instead received: %s",null===e?"null":typeof e);var n,r={$$typeof:d,type:e,compare:void 0===t?null:t};return Object.defineProperty(r,"displayName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(t){n=t,e.name||e.displayName||(e.displayName=t)}}),r},t.startTransition=function(e,t){var n=_.transition;_.transition={};var r=_.transition;_.transition._updatedFibers=new Set;try{e()}finally{_.transition=n,null===n&&r._updatedFibers&&(r._updatedFibers.size>10&&S("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),r._updatedFibers.clear())}},t.unstable_act=function(e){var t=Xe;Xe++,null===v.current&&(v.current=[]);var n,r=v.isBatchingLegacy;try{if(v.isBatchingLegacy=!0,n=e(),!r&&v.didScheduleLegacyUpdate){var i=v.current;null!==i&&(v.didScheduleLegacyUpdate=!1,et(i))}}catch(e){throw Ke(t),e}finally{v.isBatchingLegacy=r}if(null!==n&&"object"==typeof n&&"function"==typeof n.then){var o=n,a=!1,s={then:function(e,n){a=!0,o.then((function(r){Ke(t),0===Xe?Qe(r,e,n):e(r)}),(function(e){Ke(t),n(e)}))}};return Ye||"undefined"==typeof Promise||Promise.resolve().then((function(){})).then((function(){a||(Ye=!0,k("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))})),s}var l=n;if(Ke(t),0===Xe){var c=v.current;return null!==c&&(et(c),v.current=null),{then:function(e,t){null===v.current?(v.current=[],Qe(l,e,t)):e(l)}}}return{then:function(e,t){e(l)}}},t.useCallback=function(e,t){return me().useCallback(e,t)},t.useContext=function(e){var t=me();if(void 0!==e._context){var n=e._context;n.Consumer===e?k("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):n.Provider===e&&k("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return t.useContext(e)},t.useDebugValue=function(e,t){return me().useDebugValue(e,t)},t.useDeferredValue=function(e){return me().useDeferredValue(e)},t.useEffect=function(e,t){return me().useEffect(e,t)},t.useId=function(){return me().useId()},t.useImperativeHandle=function(e,t,n){return me().useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return me().useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return me().useLayoutEffect(e,t)},t.useMemo=function(e,t){return me().useMemo(e,t)},t.useReducer=function(e,t,n){return me().useReducer(e,t,n)},t.useRef=function(e){return me().useRef(e)},t.useState=function(e){return me().useState(e)},t.useSyncExternalStore=function(e,t,n){return me().useSyncExternalStore(e,t,n)},t.useTransition=function(){return me().useTransition()},t.version="18.0.0-fc46dba67-20220329","undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()},294:function(e,t,n){"use strict";e.exports=n(369)},893:function(e,t,n){"use strict";e.exports=n(420)},972:function(e,t){"use strict";!function(){function e(e,t){var n=e.length;e.push(t),function(e,t,n){for(var r=n;r>0;){var o=r-1>>>1,a=e[o];if(!(i(a,t)>0))return;e[o]=t,e[r]=a,r=o}}(e,t,n)}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();return n!==t&&(e[0]=n,function(e,t,n){for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(i(l,t)<0)c<o&&i(u,l)<0?(e[r]=u,e[c]=t,r=c):(e[r]=l,e[s]=t,r=s);else{if(!(c<o&&i(u,t)<0))return;e[r]=u,e[c]=t,r=c}}}(e,n)),t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),"object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,h=null,d=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function v(t){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=t))return;r(c),i.sortIndex=i.expirationTime,e(l,i)}i=n(c)}}function x(e){if(m=!1,v(e),!f)if(null!==n(l))f=!0,D(b);else{var t=n(c);null!==t&&z(x,t.startTime-e)}}function b(e,i){f=!1,m&&(m=!1,R()),p=!0;var o=d;try{return function(e,i){var o=i;for(v(o),h=n(l);null!==h&&(!(h.expirationTime>o)||e&&!C());){var a=h.callback;if("function"==typeof a){h.callback=null,d=h.priorityLevel;var s=a(h.expirationTime<=o);o=t.unstable_now(),"function"==typeof s?h.callback=s:h===n(l)&&r(l),v(o)}else r(l);h=n(l)}if(null!==h)return!0;var u=n(c);return null!==u&&z(x,u.startTime-o),!1}(e,i)}finally{h=null,d=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w=!1,T=null,E=-1,S=5,k=-1;function C(){return!(t.unstable_now()-k<S)}var M,I=function(){if(null!==T){var e=t.unstable_now();k=e;var n=!0;try{n=T(!0,e)}finally{n?M():(w=!1,T=null)}}else w=!1};if("function"==typeof _)M=function(){_(I)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=I,M=function(){A.postMessage(null)}}else M=function(){g(I,0)};function D(e){T=e,w||(w=!0,M())}function z(e,n){E=g((function(){e(t.unstable_now())}),n)}function R(){y(E),E=-1}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,D(b))},t.unstable_forceFrameRate=function(e){e<0||e>125?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=e>0?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(e){var t;switch(d){case 1:case 2:case 3:t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(r,i,o){var a,s,h=t.unstable_now();if("object"==typeof o&&null!==o){var d=o.delay;a="number"==typeof d&&d>0?h+d:h}else a=h;switch(r){case 1:s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}var g=a+s,y={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:g,sortIndex:-1};return a>h?(y.sortIndex=a,e(c,y),null===n(l)&&y===n(c)&&(m?R():m=!0,z(x,a-h))):(y.sortIndex=g,e(l,y),f||p||(f=!0,D(b))),y},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()},840:function(e,t,n){"use strict";e.exports=n(972)},473:function(e){"use strict";var t,n=function(e,t){var n=arguments.length;t=new Array(n>1?n-1:0);for(var r=1;r<n;r++)t[r-1]=arguments[r];var i=0,o="Warning: "+e.replace(/%s/g,(function(){return t[i++]}));"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(e){}};t=function(e,t,r){var i=arguments.length;r=new Array(i>2?i-2:0);for(var o=2;o<i;o++)r[o-2]=arguments[o];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||n.apply(null,[t].concat(r))},e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){"use strict";var e=n(294),t=n.n(e),r=n(935),i=(n(959),n(158)),o=n.n(i),a=n(697),s=n.n(a),l=n(184),c=e.createContext(),u=e.createContext();function h(t){var n=t.children,r=e.useState(null),i=r[0],o=r[1],a=e.useRef(!1);e.useEffect((function(){return function(){a.current=!0}}),[]);var s=e.useCallback((function(e){a.current||o(e)}),[]);return e.createElement(c.Provider,{value:i},e.createElement(u.Provider,{value:s},n))}var d=function(e){return Array.isArray(e)?e[0]:e},p=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},f=function(e,t){if("function"==typeof e)return p(e,t);null!=e&&(e.current=t)},m=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},g="undefined"!=typeof window&&window.document&&window.document.createElement?e.useLayoutEffect:e.useEffect;function y(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function _(e){return e instanceof y(e).Element||e instanceof Element}function v(e){return e instanceof y(e).HTMLElement||e instanceof HTMLElement}function x(e){return"undefined"!=typeof ShadowRoot&&(e instanceof y(e).ShadowRoot||e instanceof ShadowRoot)}var b=Math.max,w=Math.min,T=Math.round;function E(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(v(e)&&t){var o=e.offsetHeight,a=e.offsetWidth;a>0&&(r=T(n.width)/a||1),o>0&&(i=T(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function S(e){var t=y(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function k(e){return e?(e.nodeName||"").toLowerCase():null}function C(e){return((_(e)?e.ownerDocument:e.document)||window.document).documentElement}function M(e){return E(C(e)).left+S(e).scrollLeft}function I(e){return y(e).getComputedStyle(e)}function P(e){var t=I(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function A(e,t,n){void 0===n&&(n=!1);var r=v(t),i=v(t)&&function(e){var t=e.getBoundingClientRect(),n=T(t.width)/e.offsetWidth||1,r=T(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=C(t),a=E(e,i),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==k(t)||P(o))&&(s=function(e){return e!==y(e)&&v(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:S(e);var t}(t)),v(t)?((l=E(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=M(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function D(e){var t=E(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function z(e){return"html"===k(e)?e:e.assignedSlot||e.parentNode||(x(e)?e.host:null)||C(e)}function R(e){return["html","body","#document"].indexOf(k(e))>=0?e.ownerDocument.body:v(e)&&P(e)?e:R(z(e))}function O(e,t){var n;void 0===t&&(t=[]);var r=R(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=y(r),a=i?[o].concat(o.visualViewport||[],P(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(O(z(a)))}function L(e){return["table","td","th"].indexOf(k(e))>=0}function F(e){return v(e)&&"fixed"!==I(e).position?e.offsetParent:null}function B(e){for(var t=y(e),n=F(e);n&&L(n)&&"static"===I(n).position;)n=F(n);return n&&("html"===k(n)||"body"===k(n)&&"static"===I(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&v(e)&&"fixed"===I(e).position)return null;var n=z(e);for(x(n)&&(n=n.host);v(n)&&["html","body"].indexOf(k(n))<0;){var r=I(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var N="top",U="bottom",j="right",V="left",$="auto",q=[N,U,j,V],G="start",W="end",Z="viewport",H="popper",X=q.reduce((function(e,t){return e.concat([t+"-"+G,t+"-"+W])}),[]),Y=[].concat(q,[$]).reduce((function(e,t){return e.concat([t,t+"-"+G,t+"-"+W])}),[]),K=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Q(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function J(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce((function(e,t){return e.replace(/%s/,t)}),e)}var ee='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',te=["name","enabled","phase","fn","effect","requires","options"];function ne(e){return e.split("-")[0]}var re="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",ie={placement:"bottom",modifiers:[],strategy:"absolute"};function oe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function ae(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?ie:i;return function(e,t,n){void 0===n&&(n=o);var i,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},ie,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){var i="function"==typeof n?n(s.options):n;h(),s.options=Object.assign({},o,s.options,i),s.scrollParents={reference:_(e)?O(e):e.contextElement?O(e.contextElement):[],popper:O(t)};var a=function(e){var t=Q(e);return K.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,s.options.modifiers)));s.orderedModifiers=a.filter((function(e){return e.enabled}));var c=(d=[].concat(a,s.options.modifiers),p=function(e){return e.name},f=new Set,d.filter((function(e){var t=p(e);if(!f.has(t))return f.add(t),!0})));(function(e){e.forEach((function(t){[].concat(Object.keys(t),te).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(n){switch(n){case"name":"string"!=typeof t.name&&console.error(J(ee,String(t.name),'"name"','"string"','"'+String(t.name)+'"'));break;case"enabled":"boolean"!=typeof t.enabled&&console.error(J(ee,t.name,'"enabled"','"boolean"','"'+String(t.enabled)+'"'));break;case"phase":K.indexOf(t.phase)<0&&console.error(J(ee,t.name,'"phase"',"either "+K.join(", "),'"'+String(t.phase)+'"'));break;case"fn":"function"!=typeof t.fn&&console.error(J(ee,t.name,'"fn"','"function"','"'+String(t.fn)+'"'));break;case"effect":null!=t.effect&&"function"!=typeof t.effect&&console.error(J(ee,t.name,'"effect"','"function"','"'+String(t.fn)+'"'));break;case"requires":null==t.requires||Array.isArray(t.requires)||console.error(J(ee,t.name,'"requires"','"array"','"'+String(t.requires)+'"'));break;case"requiresIfExists":Array.isArray(t.requiresIfExists)||console.error(J(ee,t.name,'"requiresIfExists"','"array"','"'+String(t.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+t.name+'" modifier, valid properties are '+te.map((function(e){return'"'+e+'"'})).join(", ")+'; but "'+n+'" was provided.')}t.requires&&t.requires.forEach((function(n){null==e.find((function(e){return e.name===n}))&&console.error(J('Popper: modifier "%s" requires "%s", but "%s" modifier is not available',String(t.name),n,n))}))}))}))})(c),ne(s.options.placement)===$&&(s.orderedModifiers.find((function(e){return"flip"===e.name}))||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" ")));var d,p,f,m=I(t);return[m.marginTop,m.marginRight,m.marginBottom,m.marginLeft].some((function(e){return parseFloat(e)}))&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" ")),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:s,name:t,instance:u,options:r});l.push(o||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(oe(t,n)){s.rects={reference:A(t,B(n),"fixed"===s.options.strategy),popper:D(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0,i=0;i<s.orderedModifiers.length;i++){if((r+=1)>100){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}if(!0!==s.reset){var o=s.orderedModifiers[i],a=o.fn,l=o.options,h=void 0===l?{}:l,d=o.name;"function"==typeof a&&(s=a({state:s,options:h,name:d,instance:u})||s)}else s.reset=!1,i=-1}}else console.error(re)}},update:(i=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(i())}))}))),a}),destroy:function(){h(),c=!0}};if(!oe(e,t))return console.error(re),u;function h(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var se={passive:!0};function le(e){return e.split("-")[1]}function ce(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ue(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?ne(i):null,a=i?le(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case N:t={x:s,y:n.y-r.height};break;case U:t={x:s,y:n.y+n.height};break;case j:t={x:n.x+n.width,y:l};break;case V:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?ce(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case G:t[c]=t[c]-(n[u]/2-r[u]/2);break;case W:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var he={top:"auto",right:"auto",bottom:"auto",left:"auto"};function de(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=a.x,p=void 0===d?0:d,f=a.y,m=void 0===f?0:f,g="function"==typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var _=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),x=V,b=N,w=window;if(c){var E=B(n),S="clientHeight",k="clientWidth";E===y(n)&&"static"!==I(E=C(n)).position&&"absolute"===s&&(S="scrollHeight",k="scrollWidth"),E=E,(i===N||(i===V||i===j)&&o===W)&&(b=U,m-=(h&&E===w&&w.visualViewport?w.visualViewport.height:E[S])-r.height,m*=l?1:-1),i!==V&&(i!==N&&i!==U||o!==W)||(x=j,p-=(h&&E===w&&w.visualViewport?w.visualViewport.width:E[k])-r.width,p*=l?1:-1)}var M,P=Object.assign({position:s},c&&he),A=!0===u?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:T(t*r)/r||0,y:T(n*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=A.x,m=A.y,l?Object.assign({},P,((M={})[b]=v?"0":"",M[x]=_?"0":"",M.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",M)):Object.assign({},P,((t={})[b]=v?m+"px":"",t[x]=_?p+"px":"",t.transform="",t))}var pe={left:"right",right:"left",bottom:"top",top:"bottom"};function fe(e){return e.replace(/left|right|bottom|top/g,(function(e){return pe[e]}))}var me={start:"end",end:"start"};function ge(e){return e.replace(/start|end/g,(function(e){return me[e]}))}function ye(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&x(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _e(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ve(e,t){return t===Z?_e(function(e){var t=y(e),n=C(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,s=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:i,height:o,x:a+M(e),y:s}}(e)):_(t)?function(e){var t=E(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):_e(function(e){var t,n=C(e),r=S(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=b(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=b(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+M(e),l=-r.scrollTop;return"rtl"===I(i||n).direction&&(s+=b(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(C(e)))}function xe(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function be(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function we(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,a=void 0===o?"clippingParents":o,s=n.rootBoundary,l=void 0===s?Z:s,c=n.elementContext,u=void 0===c?H:c,h=n.altBoundary,d=void 0!==h&&h,p=n.padding,f=void 0===p?0:p,m=xe("number"!=typeof f?f:be(f,q)),g=u===H?"reference":H,y=e.rects.popper,x=e.elements[d?g:u],T=function(e,t,n){var r="clippingParents"===t?function(e){var t=O(z(e)),n=["absolute","fixed"].indexOf(I(e).position)>=0&&v(e)?B(e):e;return _(n)?t.filter((function(e){return _(e)&&ye(e,n)&&"body"!==k(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),o=i[0],a=i.reduce((function(t,n){var r=ve(e,n);return t.top=b(r.top,t.top),t.right=w(r.right,t.right),t.bottom=w(r.bottom,t.bottom),t.left=b(r.left,t.left),t}),ve(e,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(_(x)?x:x.contextElement||C(e.elements.popper),a,l),S=E(e.elements.reference),M=ue({reference:S,element:y,strategy:"absolute",placement:i}),P=_e(Object.assign({},y,M)),A=u===H?P:S,D={top:T.top-A.top+m.top,bottom:A.bottom-T.bottom+m.bottom,left:T.left-A.left+m.left,right:A.right-T.right+m.right},R=e.modifiersData.offset;if(u===H&&R){var L=R[i];Object.keys(D).forEach((function(e){var t=[j,U].indexOf(e)>=0?1:-1,n=[N,U].indexOf(e)>=0?"y":"x";D[e]+=L[n]*t}))}return D}var Te={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,y=ne(g),_=l||(y!==g&&f?function(e){if(ne(e)===$)return[];var t=fe(e);return[ge(e),t,ge(t)]}(g):[fe(g)]),v=[g].concat(_).reduce((function(e,n){return e.concat(ne(n)===$?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Y:l,u=le(r),h=u?s?X:X.filter((function(e){return le(e)===u})):q,d=h.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=h,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var p=d.reduce((function(t,n){return t[n]=we(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[ne(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,b=t.rects.popper,w=new Map,T=!0,E=v[0],S=0;S<v.length;S++){var k=v[S],C=ne(k),M=le(k)===G,I=[N,U].indexOf(C)>=0,P=I?"width":"height",A=we(t,{placement:k,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),D=I?M?j:V:M?U:N;x[P]>b[P]&&(D=fe(D));var z=fe(D),R=[];if(o&&R.push(A[C]<=0),s&&R.push(A[D]<=0,A[z]<=0),R.every((function(e){return e}))){E=k,T=!1;break}w.set(k,R)}if(T)for(var O=function(e){var t=v.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return E=t,"break"},L=f?3:1;L>0&&"break"!==O(L);L--);t.placement!==E&&(t.modifiersData[r]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ee(e,t,n){return b(e,w(t,n))}var Se={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=we(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),y=ne(t.placement),_=le(t.placement),v=!_,x=ce(y),T="x"===x?"y":"x",E=t.modifiersData.popperOffsets,S=t.rects.reference,k=t.rects.popper,C="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,M="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(E){if(o){var A,z="y"===x?N:V,R="y"===x?U:j,O="y"===x?"height":"width",L=E[x],F=L+g[z],$=L-g[R],q=p?-k[O]/2:0,W=_===G?S[O]:k[O],Z=_===G?-k[O]:-S[O],H=t.elements.arrow,X=p&&H?D(H):{width:0,height:0},Y=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},K=Y[z],Q=Y[R],J=Ee(0,S[O],X[O]),ee=v?S[O]/2-q-J-K-M.mainAxis:W-J-K-M.mainAxis,te=v?-S[O]/2+q+J+Q+M.mainAxis:Z+J+Q+M.mainAxis,re=t.elements.arrow&&B(t.elements.arrow),ie=re?"y"===x?re.clientTop||0:re.clientLeft||0:0,oe=null!=(A=null==I?void 0:I[x])?A:0,ae=L+te-oe,se=Ee(p?w(F,L+ee-oe-ie):F,L,p?b($,ae):$);E[x]=se,P[x]=se-L}if(s){var ue,he="x"===x?N:V,de="x"===x?U:j,pe=E[T],fe="y"===T?"height":"width",me=pe+g[he],ge=pe-g[de],ye=-1!==[N,V].indexOf(y),_e=null!=(ue=null==I?void 0:I[T])?ue:0,ve=ye?me:pe-S[fe]-k[fe]-_e+M.altAxis,xe=ye?pe+S[fe]+k[fe]-_e-M.altAxis:ge,be=p&&ye?function(e,t,n){var r=Ee(e,t,n);return r>n?n:r}(ve,pe,xe):Ee(p?ve:me,pe,p?xe:ge);E[T]=be,P[T]=be-pe}t.modifiersData[r]=P}},requiresIfExists:["offset"]},ke={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=ne(n.placement),l=ce(s),c=[V,j].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(e,t){return xe("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:be(e,q))}(i.padding,n),h=D(o),d="y"===l?N:V,p="y"===l?U:j,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=B(o),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,_=f/2-m/2,v=u[d],x=y-h[c]-u[p],b=y/2-h[c]/2+_,w=Ee(v,b,x),T=l;n.modifiersData[r]=((t={})[T]=w,t.centerOffset=w-b,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&(v(r)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),ye(t.elements.popper,r)?t.elements.arrow=r:console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" ")))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ce(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Me(e){return[N,j,U,V].some((function(t){return e[t]>=0}))}var Ie=ae({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=y(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,se)})),s&&l.addEventListener("resize",n.update,se),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,se)})),s&&l.removeEventListener("resize",n.update,se)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ue({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c=I(t.elements.popper).transitionProperty||"";a&&["transform","top","right","bottom","left"].some((function(e){return c.indexOf(e)>=0}))&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "));var u={placement:ne(t.placement),variation:le(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,de(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,de(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];v(i)&&k(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});v(r)&&k(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=Y.reduce((function(e,n){return e[n]=function(e,t,n){var r=ne(e),i=[V,N].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[V,j].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},Te,Se,ke,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=we(t,{elementContext:"reference"}),s=we(t,{altBoundary:!0}),l=Ce(a,r),c=Ce(s,i,o),u=Me(l),h=Me(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]}),Pe=n(590),Ae=n.n(Pe),De=[],ze=function(){},Re=function(){return Promise.resolve(null)},Oe=[];function Le(t){var n=t.placement,r=void 0===n?"bottom":n,i=t.strategy,o=void 0===i?"absolute":i,a=t.modifiers,s=void 0===a?Oe:a,l=t.referenceElement,u=t.onFirstUpdate,h=t.innerRef,p=t.children,y=e.useContext(c),_=e.useState(null),v=_[0],x=_[1],b=e.useState(null),w=b[0],T=b[1];e.useEffect((function(){f(h,v)}),[h,v]);var E=e.useMemo((function(){return{placement:r,strategy:o,onFirstUpdate:u,modifiers:[].concat(s,[{name:"arrow",enabled:null!=w,options:{element:w}}])}}),[r,o,u,s,w]),S=function(t,n,r){void 0===r&&(r={});var i=e.useRef(null),o={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||De},a=e.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=a[0],l=a[1],c=e.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);l({styles:m(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:m(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),u=e.useMemo((function(){var e={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[c,{name:"applyStyles",enabled:!1}])};return Ae()(i.current,e)?i.current||e:(i.current=e,e)}),[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,c]),h=e.useRef();return g((function(){h.current&&h.current.setOptions(u)}),[u]),g((function(){if(null!=t&&null!=n){var e=(r.createPopper||Ie)(t,n,u);return h.current=e,function(){e.destroy(),h.current=null}}}),[t,n,r.createPopper]),{state:h.current?h.current.state:null,styles:s.styles,attributes:s.attributes,update:h.current?h.current.update:null,forceUpdate:h.current?h.current.forceUpdate:null}}(l||y,v,E),k=S.state,C=S.styles,M=S.forceUpdate,I=S.update,P=e.useMemo((function(){return{ref:x,style:C.popper,placement:k?k.placement:r,hasPopperEscaped:k&&k.modifiersData.hide?k.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:k&&k.modifiersData.hide?k.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:C.arrow,ref:T},forceUpdate:M||ze,update:I||Re}}),[x,T,r,k,C,I,M]);return d(p)(P)}var Fe=n(473),Be=n.n(Fe);function Ne(t){var n=t.children,r=t.innerRef,i=e.useContext(u),o=e.useCallback((function(e){f(r,e),p(i,e)}),[r,i]);return e.useEffect((function(){return function(){return f(r,null)}})),e.useEffect((function(){Be()(Boolean(i),"`Reference` should not be used outside of a `Manager` component.")}),[i]),d(n)({ref:o})}function Ue(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function je(e,t){return je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},je(e,t)}var Ve=s().oneOfType([s().number,s().shape({enter:s().number,exit:s().number,appear:s().number}).isRequired]),$e=(s().oneOfType([s().string,s().shape({enter:s().string,exit:s().string,active:s().string}),s().shape({enter:s().string,enterDone:s().string,enterActive:s().string,exit:s().string,exitDone:s().string,exitActive:s().string})]),t().createContext(null)),qe="unmounted",Ge="exited",We="entering",Ze="entered",He="exiting",Xe=function(e){var n,i;function o(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Ge,r.appearStatus=We):i=Ze:i=t.unmountOnExit||t.mountOnEnter?qe:Ge,r.state={status:i},r.nextCallback=null,r}i=e,(n=o).prototype=Object.create(i.prototype),n.prototype.constructor=n,je(n,i),o.getDerivedStateFromProps=function(e,t){return e.in&&t.status===qe?{status:Ge}:null};var a=o.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==We&&n!==Ze&&(t=We):n!==We&&n!==Ze||(t=He)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===We?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Ge&&this.setState({status:qe})},a.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,o=this.props.nodeRef?[i]:[r.findDOMNode(this),i],a=o[0],s=o[1],l=this.getTimeouts(),c=i?l.appear:l.enter;e||n?(this.props.onEnter(a,s),this.safeSetState({status:We},(function(){t.props.onEntering(a,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:Ze},(function(){t.props.onEntered(a,s)}))}))}))):this.safeSetState({status:Ze},(function(){t.props.onEntered(a)}))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t?(this.props.onExit(i),this.safeSetState({status:He},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ge},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:Ge},(function(){e.props.onExited(i)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=o[0],s=o[1];this.props.addEndListener(a,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===qe)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,Ue(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t().createElement($e.Provider,{value:null},"function"==typeof r?r(e,i):t().cloneElement(t().Children.only(r),i))},o}(t().Component);function Ye(){}Xe.contextType=$e,Xe.propTypes={nodeRef:s().shape({current:"undefined"==typeof Element?s().any:function(e,t,n,r,i,o){var a=e[t];return s().instanceOf(a&&"ownerDocument"in a?a.ownerDocument.defaultView.Element:Element)(e,t,n,r,i,o)}}),children:s().oneOfType([s().func.isRequired,s().element.isRequired]).isRequired,in:s().bool,mountOnEnter:s().bool,unmountOnExit:s().bool,appear:s().bool,enter:s().bool,exit:s().bool,timeout:function(e){var t=Ve;e.addEndListener||(t=t.isRequired);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.apply(void 0,[e].concat(r))},addEndListener:s().func,onEnter:s().func,onEntering:s().func,onEntered:s().func,onExit:s().func,onExiting:s().func,onExited:s().func},Xe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ye,onEntering:Ye,onEntered:Ye,onExit:Ye,onExiting:Ye,onExited:Ye},Xe.UNMOUNTED=qe,Xe.EXITED=Ge,Xe.ENTERING=We,Xe.ENTERED=Ze,Xe.EXITING=He;var Ke=Xe;function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(){return tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tt.apply(this,arguments)}function nt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rt(e){document.body.style.paddingRight=e>0?`${e}px`:null}function it(){const e=window.getComputedStyle(document.body,null);return parseInt(e&&e.getPropertyValue("padding-right")||0,10)}function ot(){const e=function(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}(),t=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],n=t?parseInt(t.style.paddingRight||0,10):0;document.body.clientWidth<window.innerWidth&&rt(n+e)}function at(e="",t){return t?e.split(" ").map((e=>t[e]||e)).join(" "):e}function st(e,t){const n={};return Object.keys(e).forEach((r=>{-1===t.indexOf(r)&&(n[r]=e[r])})),n}function lt(e,t){const n=Array.isArray(t)?t:[t];let r,i=n.length;const o={};for(;i>0;)i-=1,r=n[i],o[r]=e[r];return o}let ct={};function ut(e){ct[e]||("undefined"!=typeof console&&console.error(e),ct[e]=!0)}function ht(e,t){return function(n,r,i,...o){return null!==n[r]&&void 0!==n[r]&&ut(`"${r}" property of "${i}" has been deprecated.\n${t}`),e(n,r,i,...o)}}const dt="object"==typeof window&&window.Element||function(){};function pt(e,t,n){if(!(e[t]instanceof dt))return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Expected prop to be an instance of Element. Validation failed.")}const ft=a.oneOfType([a.string,a.func,pt,a.shape({current:a.any})]),mt=a.oneOfType([a.func,a.string,a.shape({$$typeof:a.symbol,render:a.func}),a.arrayOf(a.oneOfType([a.func,a.string,a.shape({$$typeof:a.symbol,render:a.func})]))]),gt=150,yt=350,_t=300,vt=600,xt=300,bt=["in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],wt="entering",Tt="entered",Et="exiting",St="exited",kt={esc:27,space:32,enter:13,tab:9,up:38,down:40,home:36,end:35,n:78,p:80},Ct=!("undefined"==typeof window||!window.document||!window.document.createElement);function Mt(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function It(e){const t=typeof e;if("number"===t)return e;if("symbol"===t||"object"===t&&"[object Symbol]"===Mt(e))return NaN;if(Pt(e)){const t="function"==typeof e.valueOf?e.valueOf():e;e=Pt(t)?`${t}`:t}if("string"!==t)return 0===e?e:+e;e=e.replace(/^\s+|\s+$/g,"");const n=/^0b[01]+$/i.test(e);return n||/^0o[0-7]+$/i.test(e)?parseInt(e.slice(2),n?2:8):/^[-+]0x[0-9a-f]+$/i.test(e)?NaN:+e}function Pt(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)}function At(e){if(function(e){return!(!e||"object"!=typeof e)&&"current"in e}(e))return e.current;if(function(e){if(!Pt(e))return!1;const t=Mt(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object Proxy]"===t}(e))return e();if("string"==typeof e&&Ct){let t=document.querySelectorAll(e);if(t.length||(t=document.querySelectorAll(`#${e}`)),!t.length)throw new Error(`The target '${e}' could not be identified in the dom, tip: check spelling`);return t}return e}function Dt(e){return null!==e&&(Array.isArray(e)||Ct&&"number"==typeof e.length)}function zt(e,t){const n=At(e);return t?Dt(n)?n:null===n?[]:[n]:Dt(n)?n[0]:n}const Rt=["a[href]","area[href]","input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","object","embed","[tabindex]:not(.modal)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],Ot=["className","cssModule","fluid","tag"],Lt={tag:mt,fluid:a.oneOfType([a.bool,a.string]),className:a.string,cssModule:a.object},Ft=t=>{const{className:n,cssModule:r,fluid:i,tag:o}=t,a=nt(t,Ot);let s="container";!0===i?s="container-fluid":i&&(s=`container-${i}`);const c=at(l(n,s),r);return e.createElement(o,tt({},a,{className:c}))};Ft.propTypes=Lt,Ft.defaultProps={tag:"div"};const Bt=["className","cssModule","noGutters","tag","form","widths"],Nt=a.oneOfType([a.number,a.string]),Ut={tag:mt,noGutters:ht(a.bool,"Please use Bootstrap 5 gutter utility classes. https://getbootstrap.com/docs/5.0/layout/gutters/"),className:a.string,cssModule:a.object,form:a.bool,xs:Nt,sm:Nt,md:Nt,lg:Nt,xl:Nt,xxl:Nt},jt=t=>{const{className:n,cssModule:r,noGutters:i,tag:o,form:a,widths:s}=t,c=nt(t,Bt),u=[];s.forEach(((e,n)=>{let r=t[e];if(delete c[e],!r)return;const i=!n;u.push(i?`row-cols-${r}`:`row-cols-${e}-${r}`)}));const h=at(l(n,i?"gx-0":null,a?"form-row":"row",u),r);return e.createElement(o,tt({},c,{className:h}))};jt.propTypes=Ut,jt.defaultProps={tag:"div",widths:["xs","sm","md","lg","xl","xxl"]};const Vt=["className","cssModule","widths","tag"],$t=["xs","sm","md","lg","xl","xxl"],qt=a.oneOfType([a.number,a.string]),Gt=a.oneOfType([a.bool,a.number,a.string,a.shape({size:a.oneOfType([a.bool,a.number,a.string]),order:qt,offset:qt})]),Wt={tag:mt,xs:Gt,sm:Gt,md:Gt,lg:Gt,xl:Gt,xxl:Gt,className:a.string,cssModule:a.object,widths:a.array},Zt={tag:"div",widths:$t},Ht=(e,t,n)=>!0===n||""===n?e?"col":`col-${t}`:"auto"===n?e?"col-auto":`col-${t}-auto`:e?`col-${n}`:`col-${t}-${n}`,Xt=(e,t,n=$t)=>{const r=[];return n.forEach(((n,i)=>{let o=e[n];if(delete e[n],!o&&""!==o)return;const a=!i;if(Pt(o)){const e=a?"-":`-${n}-`,i=Ht(a,n,o.size);r.push(at(l({[i]:o.size||""===o.size,[`order${e}${o.order}`]:o.order||0===o.order,[`offset${e}${o.offset}`]:o.offset||0===o.offset}),t))}else{const e=Ht(a,n,o);r.push(e)}})),{colClasses:r,attributes:e}},Yt=t=>{const{className:n,cssModule:r,widths:i,tag:o}=t,a=nt(t,Vt);let{attributes:s,colClasses:c}=Xt(a,r,i);c.length||c.push("col");const u=at(l(n,c),r);return e.createElement(o,tt({},s,{className:u}))};Yt.propTypes=Wt,Yt.defaultProps=Zt;var Kt=Yt;const Qt=["expand","className","cssModule","light","dark","fixed","sticky","color","container","tag","children"],Jt={light:a.bool,dark:a.bool,full:a.bool,fixed:a.string,sticky:a.string,color:a.string,role:a.string,tag:mt,container:a.oneOfType([a.bool,a.string]),className:a.string,cssModule:a.object,expand:a.oneOfType([a.bool,a.string]),children:a.node},en=t=>{const{expand:n,className:r,cssModule:i,light:o,dark:a,fixed:s,sticky:c,color:u,container:h,tag:d,children:p}=t,f=nt(t,Qt),m=at(l(r,"navbar",(e=>!1!==e&&(!0===e||"xs"===e?"navbar-expand":`navbar-expand-${e}`))(n),{"navbar-light":o,"navbar-dark":a,[`bg-${u}`]:u,[`fixed-${s}`]:s,[`sticky-${c}`]:c}),i),g=h&&!0===h?"container":`container-${h}`;return e.createElement(d,tt({},f,{className:m}),h?e.createElement("div",{className:g},p):p)};en.propTypes=Jt,en.defaultProps={tag:"nav",expand:!1,container:"fluid"};const tn=["className","cssModule","tag"],nn={tag:mt,className:a.string,cssModule:a.object},rn=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,tn),a=at(l(n,"navbar-brand"),r);return e.createElement(i,tt({},o,{className:a}))};rn.propTypes=nn,rn.defaultProps={tag:"a"};const on=["className","cssModule","active","tag"],an={tag:mt,className:a.string,cssModule:a.object},sn=t=>{const{className:n,cssModule:r,active:i,tag:o}=t,a=nt(t,on),s=at(l(n,"navbar-text"),r);return e.createElement(o,tt({},a,{className:s}))};sn.propTypes=an,sn.defaultProps={tag:"span"};const ln=["className","cssModule","children","tag"],cn={tag:mt,type:a.string,className:a.string,cssModule:a.object,children:a.node},un=t=>{const{className:n,cssModule:r,children:i,tag:o}=t,a=nt(t,ln),s=at(l(n,"navbar-toggler"),r);return e.createElement(o,tt({"aria-label":"Toggle navigation"},a,{className:s}),i||e.createElement("span",{className:at("navbar-toggler-icon",r)}))};un.propTypes=cn,un.defaultProps={tag:"button",type:"button"};const hn=["className","cssModule","tabs","pills","vertical","horizontal","justified","fill","navbar","card","tag"],dn={tabs:a.bool,pills:a.bool,vertical:a.oneOfType([a.bool,a.string]),horizontal:a.string,justified:a.bool,fill:a.bool,navbar:a.bool,card:a.bool,tag:mt,className:a.string,cssModule:a.object},pn=t=>{const{className:n,cssModule:r,tabs:i,pills:o,vertical:a,horizontal:s,justified:c,fill:u,navbar:h,card:d,tag:p}=t,f=nt(t,hn),m=at(l(n,h?"navbar-nav":"nav",!!s&&`justify-content-${s}`,(e=>!1!==e&&(!0===e||"xs"===e?"flex-column":`flex-${e}-column`))(a),{"nav-tabs":i,"card-header-tabs":d&&i,"nav-pills":o,"card-header-pills":d&&o,"nav-justified":c,"nav-fill":u}),r);return e.createElement(p,tt({},f,{className:m}))};pn.propTypes=dn,pn.defaultProps={tag:"ul",vertical:!1};const fn=["className","cssModule","active","tag"],mn={tag:mt,active:a.bool,className:a.string,cssModule:a.object},gn=t=>{const{className:n,cssModule:r,active:i,tag:o}=t,a=nt(t,fn),s=at(l(n,"nav-item",!!i&&"active"),r);return e.createElement(o,tt({},a,{className:s}))};gn.propTypes=mn,gn.defaultProps={tag:"li"};const yn=["className","cssModule","active","tag","innerRef"],_n={tag:mt,innerRef:a.oneOfType([a.object,a.func,a.string]),disabled:a.bool,active:a.bool,className:a.string,cssModule:a.object,onClick:a.func,href:a.any};class vn extends e.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){this.props.disabled?e.preventDefault():("#"===this.props.href&&e.preventDefault(),this.props.onClick&&this.props.onClick(e))}render(){let t=this.props,{className:n,cssModule:r,active:i,tag:o,innerRef:a}=t,s=nt(t,yn);const c=at(l(n,"nav-link",{disabled:s.disabled,active:i}),r);return e.createElement(o,tt({},s,{ref:a,onClick:this.onClick,className:c}))}}vn.propTypes=_n,vn.defaultProps={tag:"a"};const xn=["className","listClassName","cssModule","children","tag","listTag","aria-label"],bn={tag:mt,listTag:mt,className:a.string,listClassName:a.string,cssModule:a.object,children:a.node,"aria-label":a.string},wn=t=>{const{className:n,listClassName:r,cssModule:i,children:o,tag:a,listTag:s,"aria-label":c}=t,u=nt(t,xn),h=at(l(n),i),d=at(l("breadcrumb",r),i);return e.createElement(a,tt({},u,{className:h,"aria-label":c}),e.createElement(s,{className:d},o))};wn.propTypes=bn,wn.defaultProps={tag:"nav",listTag:"ol","aria-label":"breadcrumb"};const Tn=["className","cssModule","active","tag"],En={tag:mt,active:a.bool,className:a.string,cssModule:a.object},Sn=t=>{const{className:n,cssModule:r,active:i,tag:o}=t,a=nt(t,Tn),s=at(l(n,!!i&&"active","breadcrumb-item"),r);return e.createElement(o,tt({},a,{className:s,"aria-current":i?"page":void 0}))};Sn.propTypes=En,Sn.defaultProps={tag:"li"};const kn=["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"],Cn={active:a.bool,"aria-label":a.string,block:a.bool,color:a.string,disabled:a.bool,outline:a.bool,tag:mt,innerRef:a.oneOfType([a.object,a.func,a.string]),onClick:a.func,size:a.string,children:a.node,className:a.string,cssModule:a.object,close:a.bool};class Mn extends e.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){if(!this.props.disabled)return this.props.onClick?this.props.onClick(e):void 0;e.preventDefault()}render(){let t=this.props,{active:n,"aria-label":r,block:i,className:o,close:a,cssModule:s,color:c,outline:u,size:h,tag:d,innerRef:p}=t,f=nt(t,kn);const m=at(l(o,a&&"btn-close",a||"btn",a||`btn${u?"-outline":""}-${c}`,!!h&&`btn-${h}`,!!i&&"d-block w-100",{active:n,disabled:this.props.disabled}),s);f.href&&"button"===d&&(d="a");const g=a?"Close":null;return e.createElement(d,tt({type:"button"===d&&f.onClick?"button":void 0},f,{className:m,ref:p,onClick:this.onClick,"aria-label":r||g}))}}Mn.propTypes=Cn,Mn.defaultProps={color:"secondary",tag:"button"};var In=Mn;const Pn=["className"],An={onClick:a.func,onBlur:a.func,onFocus:a.func,defaultValue:a.bool};class Dn extends e.Component{constructor(e){super(e),this.state={toggled:e.defaultValue,focus:!1},this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onClick=this.onClick.bind(this)}onBlur(e){this.props.onBlur&&this.props.onBlur(e),this.setState({focus:!1})}onFocus(e){this.props.onFocus&&this.props.onFocus(e),this.setState({focus:!0})}onClick(e){this.props.onClick&&this.props.onClick(e),this.setState((({toggled:e})=>({toggled:!e})))}render(){const t=this.props,{className:n}=t,r=nt(t,Pn),i=at(l(n,{focus:this.state.focus}),this.props.cssModule);return e.createElement(In,tt({active:this.state.toggled,onBlur:this.onBlur,onFocus:this.onFocus,onClick:this.onClick,className:i},r))}}Dn.propTypes=An,Dn.defaultProps={defaultValue:!1};const zn=e.createContext({}),Rn=["className","cssModule","direction","isOpen","group","size","nav","setActiveFromChild","active","tag","menuRole"],On={a11y:a.bool,disabled:a.bool,direction:a.oneOf(["up","down","start","end","left","right"]),group:a.bool,isOpen:a.bool,nav:a.bool,active:a.bool,size:a.string,tag:mt,toggle:a.func,children:a.node,className:a.string,cssModule:a.object,inNavbar:a.bool,setActiveFromChild:a.bool,menuRole:a.oneOf(["listbox","menu"])},Ln=[kt.space,kt.enter,kt.up,kt.down,kt.end,kt.home];class Fn extends e.Component{constructor(t){super(t),this.addEvents=this.addEvents.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.removeEvents=this.removeEvents.bind(this),this.toggle=this.toggle.bind(this),this.handleMenuRef=this.handleMenuRef.bind(this),this.containerRef=e.createRef(),this.menuRef=e.createRef()}handleMenuRef(e){this.menuRef.current=e}getContextValue(){return{toggle:this.toggle,isOpen:this.props.isOpen,direction:"down"===this.props.direction&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar,disabled:this.props.disabled,onMenuRef:this.handleMenuRef,menuRole:this.props.menuRole}}componentDidMount(){this.handleProps()}componentDidUpdate(e){this.props.isOpen!==e.isOpen&&this.handleProps()}componentWillUnmount(){this.removeEvents()}getContainer(){return this.containerRef.current}getMenu(){return this.menuRef.current}getMenuCtrl(){return this._$menuCtrl||(this._$menuCtrl=this.getContainer().querySelector("[aria-expanded]")),this._$menuCtrl}getItemType(){return"listbox"===this.context.menuRole?"option":"menuitem"}getMenuItems(){const e=this.getMenu()||this.getContainer();return[].slice.call(e.querySelectorAll(`[role="${this.getItemType()}"]`))}addEvents(){["click","touchstart","keyup"].forEach((e=>document.addEventListener(e,this.handleDocumentClick,!0)))}removeEvents(){["click","touchstart","keyup"].forEach((e=>document.removeEventListener(e,this.handleDocumentClick,!0)))}handleDocumentClick(e){if(e&&(3===e.which||"keyup"===e.type&&e.which!==kt.tab))return;const t=this.getContainer(),n=this.getMenu(),r=t.contains(e.target)&&t!==e.target,i=t.classList.contains("input-group")&&t.classList.contains("dropdown")&&"INPUT"===e.target.tagName,o=n&&n.contains(e.target)&&n!==e.target;(!(r&&!i||o)||"keyup"===e.type&&e.which!==kt.tab)&&this.toggle(e)}handleKeyDown(e){const t="menuitem"===e.target.getAttribute("role")||"option"===e.target.getAttribute("role"),n=this.getMenuCtrl()===e.target,r=kt.tab===e.which;if(!(/input|textarea/i.test(e.target.tagName)||r&&!this.props.a11y||r&&!t&&!n)&&((-1!==Ln.indexOf(e.which)||e.which>=48&&e.which<=90)&&e.preventDefault(),!this.props.disabled&&(n&&([kt.space,kt.enter,kt.up,kt.down].indexOf(e.which)>-1?(this.props.isOpen||this.toggle(e),setTimeout((()=>this.getMenuItems()[0].focus()))):this.props.isOpen&&r?(e.preventDefault(),this.getMenuItems()[0].focus()):this.props.isOpen&&e.which===kt.esc&&this.toggle(e)),this.props.isOpen&&t)))if([kt.tab,kt.esc].indexOf(e.which)>-1)this.toggle(e),this.getMenuCtrl().focus();else if([kt.space,kt.enter].indexOf(e.which)>-1)e.target.click(),this.getMenuCtrl().focus();else if([kt.down,kt.up].indexOf(e.which)>-1||[kt.n,kt.p].indexOf(e.which)>-1&&e.ctrlKey){const t=this.getMenuItems();let n=t.indexOf(e.target);kt.up===e.which||kt.p===e.which&&e.ctrlKey?n=0!==n?n-1:t.length-1:(kt.down===e.which||kt.n===e.which&&e.ctrlKey)&&(n=n===t.length-1?0:n+1),t[n].focus()}else if(kt.end===e.which){const e=this.getMenuItems();e[e.length-1].focus()}else if(kt.home===e.which)this.getMenuItems()[0].focus();else if(e.which>=48&&e.which<=90){const t=this.getMenuItems(),n=String.fromCharCode(e.which).toLowerCase();for(let e=0;e<t.length;e+=1)if((t[e].textContent&&t[e].textContent[0].toLowerCase())===n){t[e].focus();break}}}handleProps(){this.props.isOpen?this.addEvents():this.removeEvents()}toggle(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}render(){const t=st(this.props,["toggle","disabled","inNavbar","a11y"]),{className:n,cssModule:r,direction:i,isOpen:o,group:a,size:s,nav:c,setActiveFromChild:u,active:d,tag:p,menuRole:f}=t,m=nt(t,Rn),g=p||(c?"li":"div");let y=!1;u&&e.Children.map(this.props.children[1].props.children,(e=>{e&&e.props.active&&(y=!0)}));const _=at(l(n,!(!c||!d)&&"active",!(!u||!y)&&"active",{"btn-group":a,[`btn-group-${s}`]:!!s,dropdown:!a,dropup:"up"===i,dropstart:"start"===i||"left"===i,dropend:"end"===i||"right"===i,show:o,"nav-item":c}),r);return e.createElement(zn.Provider,{value:this.getContextValue()},e.createElement(h,null,e.createElement(g,tt({},m,{["string"==typeof g?"ref":"innerRef"]:this.containerRef,onKeyDown:this.handleKeyDown,className:_}))))}}Fn.propTypes=On,Fn.defaultProps={a11y:!0,isOpen:!1,direction:"down",nav:!1,active:!1,inNavbar:!1,setActiveFromChild:!1};var Bn=Fn;const Nn={children:a.node},Un=t=>e.createElement(Bn,tt({group:!0},t));Un.propTypes=Nn;var jn=Un;const Vn=["className","cssModule","size","vertical","tag"],$n={tag:mt,"aria-label":a.string,className:a.string,cssModule:a.object,role:a.string,size:a.string,vertical:a.bool},qn=t=>{const{className:n,cssModule:r,size:i,vertical:o,tag:a}=t,s=nt(t,Vn),c=at(l(n,!!i&&"btn-group-"+i,o?"btn-group-vertical":"btn-group"),r);return e.createElement(a,tt({},s,{className:c}))};qn.propTypes=$n,qn.defaultProps={tag:"div",role:"group"};const Gn=["className","cssModule","tag"],Wn={tag:mt,"aria-label":a.string,className:a.string,cssModule:a.object,role:a.string},Zn=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Gn),a=at(l(n,"btn-toolbar"),r);return e.createElement(i,tt({},o,{className:a}))};Zn.propTypes=Wn,Zn.defaultProps={tag:"div",role:"toolbar"};const Hn=["className","cssModule","divider","tag","header","active","text"],Xn={children:a.node,active:a.bool,disabled:a.bool,divider:a.bool,tag:mt,header:a.bool,onClick:a.func,className:a.string,cssModule:a.object,toggle:a.bool,text:a.bool};class Yn extends e.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.getTabIndex=this.getTabIndex.bind(this)}getRole(){return"listbox"===this.context.menuRole?"option":"menuitem"}onClick(e){const{disabled:t,header:n,divider:r,text:i}=this.props;t||n||r||i?e.preventDefault():(this.props.onClick&&this.props.onClick(e),this.props.toggle&&this.context.toggle(e))}getTabIndex(){const{disabled:e,header:t,divider:n,text:r}=this.props;return e||t||n||r?"-1":"0"}render(){const t=this.getTabIndex(),n=t>-1?this.getRole():void 0;let r=st(this.props,["toggle"]),{className:i,cssModule:o,divider:a,tag:s,header:c,active:u,text:h}=r,d=nt(r,Hn);const p=at(l(i,{disabled:d.disabled,"dropdown-item":!a&&!c&&!h,active:u,"dropdown-header":c,"dropdown-divider":a,"dropdown-item-text":h}),o);return"button"===s&&(c?s="h6":a?s="div":d.href?s="a":h&&(s="span")),e.createElement(s,tt({type:"button"===s&&(d.onClick||this.props.toggle)?"button":void 0},d,{tabIndex:t,role:n,className:p,onClick:this.onClick}))}}Yn.propTypes=Xn,Yn.defaultProps={tag:"button",toggle:!0},Yn.contextType=zn;const Kn=["className","cssModule","dark","end","right","tag","flip","modifiers","persist","strategy","container"],Qn={tag:mt,children:a.node.isRequired,dark:a.bool,end:a.bool,flip:a.bool,modifiers:a.array,className:a.string,cssModule:a.object,persist:a.bool,strategy:a.string,container:ft,right:ht(a.bool,'Please use "end" instead.')},Jn={up:"top",left:"left",right:"right",start:"left",end:"right",down:"bottom"};class er extends e.Component{getRole(){return"listbox"===this.context.menuRole?"listbox":"menu"}render(){const t=this.props,{className:n,cssModule:i,dark:o,end:a,right:s,tag:c,flip:u,modifiers:h,persist:d,strategy:p,container:f}=t,m=nt(t,Kn),g=at(l(n,"dropdown-menu",{"dropdown-menu-dark":o,"dropdown-menu-end":a||s,show:this.context.isOpen}),i),y=c;if(d||this.context.isOpen&&!this.context.inNavbar){const t=`${Jn[this.context.direction]||"bottom"}-${a||s?"end":"start"}`,n=[...h,{name:"flip",enabled:!!u}],i=e.createElement(Le,{placement:t,modifiers:n,strategy:p},(({ref:t,style:n,placement:r})=>{let i=Je(Je({},this.props.style),n);return e.createElement(y,tt({tabIndex:"-1",role:this.getRole(),ref:e=>{t(e);const{onMenuRef:n}=this.context;n&&n(e)}},m,{style:i,"aria-hidden":!this.context.isOpen,className:g,"data-popper-placement":r}))}));return f?r.createPortal(i,zt(f)):i}return e.createElement(y,tt({tabIndex:"-1",role:this.getRole()},m,{"aria-hidden":!this.context.isOpen,className:g,"data-popper-placement":m.placement}))}}er.propTypes=Qn,er.defaultProps={tag:"div",flip:!0,modifiers:[]},er.contextType=zn;const tr=["className","color","cssModule","caret","split","nav","tag","innerRef"],nr={caret:a.bool,color:a.string,children:a.node,className:a.string,cssModule:a.object,disabled:a.bool,onClick:a.func,"aria-haspopup":a.bool,split:a.bool,tag:mt,nav:a.bool};class rr extends e.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){this.props.disabled||this.context.disabled?e.preventDefault():(this.props.nav&&!this.props.tag&&e.preventDefault(),this.props.onClick&&this.props.onClick(e),this.context.toggle(e))}getRole(){return this.context.menuRole||this.props["aria-haspopup"]}render(){const t=this.props,{className:n,color:r,cssModule:i,caret:o,split:a,nav:s,tag:c,innerRef:u}=t,h=nt(t,tr),d=h["aria-label"]||"Toggle Dropdown",p=at(l(n,{"dropdown-toggle":o||a,"dropdown-toggle-split":a,"nav-link":s}),i),f=void 0!==h.children?h.children:e.createElement("span",{className:"visually-hidden"},d);let m;return s&&!c?(m="a",h.href="#"):c?m=c:(m=In,h.color=r,h.cssModule=i),this.context.inNavbar?e.createElement(m,tt({},h,{className:p,onClick:this.onClick,"aria-expanded":this.context.isOpen,"aria-haspopup":this.getRole(),children:f})):e.createElement(Ne,{innerRef:u},(({ref:t})=>e.createElement(m,tt({},h,{["string"==typeof m?"ref":"innerRef"]:t,className:p,onClick:this.onClick,"aria-expanded":this.context.isOpen,"aria-haspopup":this.getRole(),children:f}))))}}rr.propTypes=nr,rr.defaultProps={color:"secondary","aria-haspopup":!0},rr.contextType=zn;const ir=["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"],or=Je(Je({},Ke.propTypes),{},{children:a.oneOfType([a.arrayOf(a.node),a.node]),tag:mt,baseClass:a.string,baseClassActive:a.string,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func])}),ar=Je(Je({},Ke.defaultProps),{},{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:gt,appear:!0,enter:!0,exit:!0,in:!0});function sr(t){const{tag:n,baseClass:r,baseClassActive:i,className:o,cssModule:a,children:s,innerRef:c}=t,u=nt(t,ir),h=lt(u,bt),d=st(u,bt);return e.createElement(Ke,h,(t=>{const u=at(l(o,r,"entered"===t&&i),a);return e.createElement(n,tt({className:u},d,{ref:c}),s)}))}sr.propTypes=or,sr.defaultProps=ar;const lr=e.createContext({}),cr=["flush","open","toggle","className","cssModule","tag","innerRef"],ur={tag:mt,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func]),children:a.node,flush:a.bool,open:a.oneOfType([a.array,a.string]).isRequired,toggle:a.func.isRequired},hr=t=>{const{flush:n,open:r,toggle:i,className:o,cssModule:a,tag:s,innerRef:c}=t,u=nt(t,cr),h=at(l(o,"accordion",{"accordion-flush":n}),a),d=(0,e.useMemo)((()=>({open:r,toggle:i})));return e.createElement(lr.Provider,{value:d},e.createElement(s,tt({},u,{className:h,ref:c})))};hr.propTypes=ur,hr.defaultProps={tag:"div"};var dr=hr;const pr={tag:mt,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func]),children:a.node,defaultOpen:a.oneOfType([a.array,a.string]),stayOpen:a.bool};dr.propTypes=pr,dr.defaultProps={tag:"div"};const fr=["className","cssModule","tag","innerRef","children","targetId"],mr={tag:mt,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func]),children:a.node,targetId:a.string.isRequired},gr=t=>{const{className:n,cssModule:r,tag:i,innerRef:o,children:a,targetId:s}=t,c=nt(t,fr),{open:u,toggle:h}=(0,e.useContext)(lr),d=at(l(n,"accordion-header"),r),p=at(l("accordion-button",{collapsed:!(Array.isArray(u)?u.includes(s):u===s)}),r);return e.createElement(i,tt({},c,{className:d,ref:o}),e.createElement("button",{type:"button",className:p,onClick:()=>h(s)},a))};gr.propTypes=mr,gr.defaultProps={tag:"h2"};const yr=["className","cssModule","tag","innerRef"],_r={tag:mt,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func]),children:a.node},vr=t=>{const{className:n,cssModule:r,tag:i,innerRef:o}=t,a=nt(t,yr),s=at(l(n,"accordion-item"),r);return e.createElement(i,tt({},a,{className:s,ref:o}))};vr.propTypes=_r,vr.defaultProps={tag:"div"};const xr=["tag","horizontal","isOpen","className","navbar","cssModule","children","innerRef"],br=Je(Je({},Ke.propTypes),{},{horizontal:a.bool,isOpen:a.bool,children:a.oneOfType([a.arrayOf(a.node),a.node]),tag:mt,className:a.node,navbar:a.bool,cssModule:a.object,innerRef:a.oneOfType([a.func,a.string,a.object])}),wr=Je(Je({},Ke.defaultProps),{},{horizontal:!1,isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:yt}),Tr={[wt]:"collapsing",[Tt]:"collapse show",[Et]:"collapsing",[St]:"collapse"};class Er extends e.Component{constructor(e){super(e),this.state={dimension:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach((e=>{this[e]=this[e].bind(this)}))}getDimension(e){return this.props.horizontal?e.scrollWidth:e.scrollHeight}onEntering(e,t){this.setState({dimension:this.getDimension(e)}),this.props.onEntering(e,t)}onEntered(e,t){this.setState({dimension:null}),this.props.onEntered(e,t)}onExit(e){this.setState({dimension:this.getDimension(e)}),this.props.onExit(e)}onExiting(e){this.getDimension(e),this.setState({dimension:0}),this.props.onExiting(e)}onExited(e){this.setState({dimension:null}),this.props.onExited(e)}render(){const t=this.props,{tag:n,horizontal:r,isOpen:i,className:o,navbar:a,cssModule:s,children:c,innerRef:u}=t,h=nt(t,xr),{dimension:d}=this.state,p=lt(h,bt),f=st(h,bt);return e.createElement(Ke,tt({},p,{in:i,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(t=>{let i=function(e){return Tr[e]||"collapse"}(t);const u=at(l(o,r&&"collapse-horizontal",i,a&&"navbar-collapse"),s),h=null===d?null:{[r?"width":"height"]:d};return e.createElement(n,tt({},f,{style:Je(Je({},f.style),h),className:u,ref:this.props.innerRef}),c)}))}}Er.propTypes=br,Er.defaultProps=wr;var Sr=Er;const kr=["className","cssModule","tag","innerRef","children","accordionId"],Cr={tag:mt,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func]),children:a.node,accordionId:a.string.isRequired},Mr=t=>{const{className:n,cssModule:r,tag:i,innerRef:o,children:a,accordionId:s}=t,c=nt(t,kr),{open:u}=(0,e.useContext)(lr),h=at(l(n,"accordion-collapse"),r);return e.createElement(Sr,tt({},c,{className:h,ref:o,isOpen:Array.isArray(u)?u.includes(s):u===s}),e.createElement(i,{className:"accordion-body"},a))};Mr.propTypes=Cr,Mr.defaultProps={tag:"div"};const Ir=["className","cssModule","color","innerRef","pill","tag"],Pr={color:a.string,pill:a.bool,tag:mt,innerRef:a.oneOfType([a.object,a.func,a.string]),children:a.node,className:a.string,cssModule:a.object},Ar=t=>{let{className:n,cssModule:r,color:i,innerRef:o,pill:a,tag:s}=t,c=nt(t,Ir);const u=at(l(n,"badge","bg-"+i,!!a&&"rounded-pill"),r);return c.href&&"span"===s&&(s="a"),e.createElement(s,tt({},c,{className:u,ref:o}))};Ar.propTypes=Pr,Ar.defaultProps={color:"secondary",pill:!1,tag:"span"};const Dr=["className","cssModule","color","body","inverse","outline","tag","innerRef"],zr={tag:mt,inverse:a.bool,color:a.string,body:a.bool,outline:a.bool,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func])},Rr=t=>{const{className:n,cssModule:r,color:i,body:o,inverse:a,outline:s,tag:c,innerRef:u}=t,h=nt(t,Dr),d=at(l(n,"card",!!a&&"text-white",!!o&&"card-body",!!i&&`${s?"border":"bg"}-${i}`),r);return e.createElement(c,tt({},h,{className:d,ref:u}))};Rr.propTypes=zr,Rr.defaultProps={tag:"div"};const Or=["className","cssModule","tag"],Lr={tag:mt,className:a.string,cssModule:a.object},Fr=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Or),a=at(l(n,"card-group"),r);return e.createElement(i,tt({},o,{className:a}))};Fr.propTypes=Lr,Fr.defaultProps={tag:"div"};const Br=["className","cssModule","tag"],Nr={tag:mt,className:a.string,cssModule:a.object},Ur=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Br),a=at(l(n,"card-deck"),r);return e.createElement(i,tt({},o,{className:a}))};Ur.propTypes=Nr,Ur.defaultProps={tag:"div"};const jr=["className","cssModule","tag"],Vr={tag:mt,className:a.string,cssModule:a.object},$r=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,jr),a=at(l(n,"card-columns"),r);return e.createElement(i,tt({},o,{className:a}))};$r.propTypes=Vr,$r.defaultProps={tag:"div"};const qr=["className","cssModule","innerRef","tag"],Gr={tag:mt,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func])},Wr=t=>{const{className:n,cssModule:r,innerRef:i,tag:o}=t,a=nt(t,qr),s=at(l(n,"card-body"),r);return e.createElement(o,tt({},a,{className:s,ref:i}))};Wr.propTypes=Gr,Wr.defaultProps={tag:"div"};const Zr=["className","cssModule","tag","innerRef"],Hr={tag:mt,innerRef:a.oneOfType([a.object,a.func,a.string]),className:a.string,cssModule:a.object},Xr=t=>{const{className:n,cssModule:r,tag:i,innerRef:o}=t,a=nt(t,Zr),s=at(l(n,"card-link"),r);return e.createElement(i,tt({},a,{ref:o,className:s}))};Xr.propTypes=Hr,Xr.defaultProps={tag:"a"};const Yr=["className","cssModule","tag"],Kr={tag:mt,className:a.string,cssModule:a.object},Qr=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Yr),a=at(l(n,"card-footer"),r);return e.createElement(i,tt({},o,{className:a}))};Qr.propTypes=Kr,Qr.defaultProps={tag:"div"};const Jr=["className","cssModule","tag"],ei={tag:mt,className:a.string,cssModule:a.object},ti=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Jr),a=at(l(n,"card-header"),r);return e.createElement(i,tt({},o,{className:a}))};ti.propTypes=ei,ti.defaultProps={tag:"div"};const ni=["className","cssModule","top","bottom","tag"],ri={tag:mt,top:a.bool,bottom:a.bool,className:a.string,cssModule:a.object},ii=t=>{const{className:n,cssModule:r,top:i,bottom:o,tag:a}=t,s=nt(t,ni);let c="card-img";i&&(c="card-img-top"),o&&(c="card-img-bottom");const u=at(l(n,c),r);return e.createElement(a,tt({},s,{className:u}))};ii.propTypes=ri,ii.defaultProps={tag:"img"};const oi=["className","cssModule","tag"],ai={tag:mt,className:a.string,cssModule:a.object},si=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,oi),a=at(l(n,"card-img-overlay"),r);return e.createElement(i,tt({},o,{className:a}))};si.propTypes=ai,si.defaultProps={tag:"div"};const li=["in","children","cssModule","slide","tag","className"];class ci extends e.Component{constructor(e){super(e),this.state={startAnimation:!1},this.onEnter=this.onEnter.bind(this),this.onEntering=this.onEntering.bind(this),this.onExit=this.onExit.bind(this),this.onExiting=this.onExiting.bind(this),this.onExited=this.onExited.bind(this)}onEnter(e,t){this.setState({startAnimation:!1}),this.props.onEnter(e,t)}onEntering(e,t){const n=e.offsetHeight;return this.setState({startAnimation:!0}),this.props.onEntering(e,t),n}onExit(e){this.setState({startAnimation:!1}),this.props.onExit(e)}onExiting(e){this.setState({startAnimation:!0}),e.dispatchEvent(new CustomEvent("slide.bs.carousel")),this.props.onExiting(e)}onExited(e){e.dispatchEvent(new CustomEvent("slid.bs.carousel")),this.props.onExited(e)}render(){const t=this.props,{in:n,children:r,cssModule:i,slide:o,tag:a,className:s}=t,c=nt(t,li);return e.createElement(Ke,tt({},c,{enter:o,exit:o,in:n,onEnter:this.onEnter,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(t=>{const{direction:n}=this.context,o=t===Tt||t===Et,c=(t===wt||t===Et)&&this.state.startAnimation&&("end"===n?"carousel-item-start":"carousel-item-end"),u=at(l(s,"carousel-item",o&&"active",c,t===wt&&("end"===n?"carousel-item-next":"carousel-item-prev")),i);return e.createElement(a,{className:u},r)}))}}ci.propTypes=Je(Je({},Ke.propTypes),{},{tag:mt,in:a.bool,cssModule:a.object,children:a.node,slide:a.bool,className:a.string}),ci.defaultProps=Je(Je({},Ke.defaultProps),{},{tag:"div",timeout:vt,slide:!0}),ci.contextTypes={direction:a.string};var ui=ci;const hi=e.createContext({});class di extends e.Component{constructor(e){super(e),this.handleKeyPress=this.handleKeyPress.bind(this),this.renderItems=this.renderItems.bind(this),this.hoverStart=this.hoverStart.bind(this),this.hoverEnd=this.hoverEnd.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.touchStartX=0,this.touchStartY=0,this.state={activeIndex:this.props.activeIndex,direction:"end",indicatorClicked:!1}}getContextValue(){return{direction:this.state.direction}}componentDidMount(){"carousel"===this.props.ride&&this.setInterval(),document.addEventListener("keyup",this.handleKeyPress)}static getDerivedStateFromProps(e,t){let n=null,{activeIndex:r,direction:i,indicatorClicked:o}=t;return e.activeIndex!==r&&(e.activeIndex===r+1?i="end":e.activeIndex===r-1?i="start":e.activeIndex<r?i=o?"start":"end":e.activeIndex!==r&&(i=o?"end":"start"),n={activeIndex:e.activeIndex,direction:i,indicatorClicked:!1}),n}componentDidUpdate(e,t){t.activeIndex!==this.state.activeIndex&&this.setInterval(this.props)}componentWillUnmount(){this.clearInterval(),document.removeEventListener("keyup",this.handleKeyPress)}setInterval(e=this.props){this.clearInterval(),e.interval&&(this.cycleInterval=setInterval((()=>{e.next()}),parseInt(e.interval,10)))}clearInterval(){clearInterval(this.cycleInterval)}hoverStart(...e){"hover"===this.props.pause&&this.clearInterval(),this.props.mouseEnter&&this.props.mouseEnter(...e)}hoverEnd(...e){"hover"===this.props.pause&&this.setInterval(),this.props.mouseLeave&&this.props.mouseLeave(...e)}handleKeyPress(e){this.props.keyboard&&(37===e.keyCode?this.props.previous():39===e.keyCode&&this.props.next())}handleTouchStart(e){this.props.enableTouch&&(this.touchStartX=e.changedTouches[0].screenX,this.touchStartY=e.changedTouches[0].screenY)}handleTouchEnd(e){if(!this.props.enableTouch)return;const t=e.changedTouches[0].screenX,n=e.changedTouches[0].screenY,r=Math.abs(this.touchStartX-t);r<Math.abs(this.touchStartY-n)||r<40||(t<this.touchStartX?this.props.next():this.props.previous())}renderItems(t,n){const{slide:r}=this.props;return e.createElement("div",{className:n},t.map(((t,n)=>{const i=n===this.state.activeIndex;return e.cloneElement(t,{in:i,slide:r})})))}render(){const{cssModule:t,slide:n,className:r,dark:i,fade:o}=this.props,a=at(l(r,"carousel",o,n&&"slide",i&&"carousel-dark"),t),s=at(l("carousel-inner"),t),c=this.props.children.filter((e=>null!=e&&"boolean"!=typeof e));if(c.every((e=>e.type===ui)))return e.createElement("div",{className:a,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},e.createElement(hi.Provider,{value:this.getContextValue()},this.renderItems(c,s)));if(c[0]instanceof Array){const t=c[0],n=c[1],r=c[2];return e.createElement("div",{className:a,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},e.createElement(hi.Provider,{value:this.getContextValue()},this.renderItems(t,s),n,r))}const u=c[0],h=e.cloneElement(u,{onClickHandler:e=>{"function"==typeof u.props.onClickHandler&&this.setState({indicatorClicked:!0},(()=>u.props.onClickHandler(e)))}}),d=c[1],p=c[2],f=c[3];return e.createElement("div",{className:a,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},e.createElement(hi.Provider,{value:this.getContextValue()},h,this.renderItems(d,s),p,f))}}di.propTypes={activeIndex:a.number,next:a.func.isRequired,previous:a.func.isRequired,keyboard:a.bool,pause:a.oneOf(["hover",!1]),ride:a.oneOf(["carousel"]),interval:a.oneOfType([a.number,a.string,a.bool]),children:a.array,mouseEnter:a.func,mouseLeave:a.func,slide:a.bool,dark:a.bool,cssModule:a.object,className:a.string,enableTouch:a.bool},di.defaultProps={interval:5e3,pause:"hover",keyboard:!0,slide:!0,enableTouch:!0,fade:!1},di.childContextTypes={direction:a.string};var pi=di;const fi=t=>{const{direction:n,onClickHandler:r,cssModule:i,directionText:o,className:a}=t,s=at(l(a,`carousel-control-${n}`),i),c=at(l(`carousel-control-${n}-icon`),i),u=at(l("visually-hidden"),i);return e.createElement("a",{className:s,style:{cursor:"pointer"},role:"button",tabIndex:"0",onClick:e=>{e.preventDefault(),r()}},e.createElement("span",{className:c,"aria-hidden":"true"}),e.createElement("span",{className:u},o||n))};fi.propTypes={direction:a.oneOf(["prev","next"]).isRequired,onClickHandler:a.func.isRequired,cssModule:a.object,directionText:a.string,className:a.string};var mi=fi;const gi=t=>{const{items:n,activeIndex:r,cssModule:i,onClickHandler:o,className:a}=t,s=at(l(a,"carousel-indicators"),i),c=n.map(((t,n)=>{const a=at(l({active:r===n}),i);return e.createElement("button",{"aria-label":t.caption,"data-bs-target":!0,key:`${t.key||Object.values(t).join("")}`,onClick:e=>{e.preventDefault(),o(n)},className:a},t.caption)}));return e.createElement("div",{className:s},c)};gi.propTypes={items:a.array.isRequired,activeIndex:a.number.isRequired,cssModule:a.object,onClickHandler:a.func.isRequired,className:a.string};var yi=gi;const _i=t=>{const{captionHeader:n,captionText:r,cssModule:i,className:o}=t,a=at(l(o,"carousel-caption","d-none","d-md-block"),i);return e.createElement("div",{className:a},e.createElement("h3",null,n),e.createElement("p",null,r))};_i.propTypes={captionHeader:a.node,captionText:a.node.isRequired,cssModule:a.object,className:a.string};var vi=_i;const xi=["defaultActiveIndex","autoPlay","indicators","controls","items","goToIndex"],bi={items:a.array.isRequired,indicators:a.bool,controls:a.bool,autoPlay:a.bool,defaultActiveIndex:a.number,activeIndex:a.number,next:a.func,previous:a.func,goToIndex:a.func};class wi extends e.Component{constructor(e){super(e),this.animating=!1,this.state={activeIndex:e.defaultActiveIndex||0},this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.goToIndex=this.goToIndex.bind(this),this.onExiting=this.onExiting.bind(this),this.onExited=this.onExited.bind(this)}onExiting(){this.animating=!0}onExited(){this.animating=!1}next(){if(this.animating)return;const e=this.state.activeIndex===this.props.items.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}previous(){if(this.animating)return;const e=0===this.state.activeIndex?this.props.items.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}goToIndex(e){this.animating||this.setState({activeIndex:e})}render(){const t=this.props,{defaultActiveIndex:n,autoPlay:r,indicators:i,controls:o,items:a,goToIndex:s}=t,l=nt(t,xi),{activeIndex:c}=this.state,u=a.map((t=>{const n=t.key||t.src;return e.createElement(ui,{onExiting:this.onExiting,onExited:this.onExited,key:n},e.createElement("img",{className:"d-block w-100",src:t.src,alt:t.altText}),e.createElement(vi,{captionText:t.caption,captionHeader:t.header||t.caption}))}));return e.createElement(pi,tt({activeIndex:c,next:this.next,previous:this.previous,ride:r?"carousel":void 0},l),i&&e.createElement(yi,{items:a,activeIndex:l.activeIndex||c,onClickHandler:s||this.goToIndex}),u,o&&e.createElement(mi,{direction:"prev",directionText:"Previous",onClickHandler:l.previous||this.previous}),o&&e.createElement(mi,{direction:"next",directionText:"Next",onClickHandler:l.next||this.next}))}}wi.propTypes=bi,wi.defaultProps={controls:!0,indicators:!0,autoPlay:!0};const Ti=["className","cssModule","tag"],Ei={tag:mt,className:a.string,cssModule:a.object},Si=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Ti),a=at(l(n,"card-subtitle"),r);return e.createElement(i,tt({},o,{className:a}))};Si.propTypes=Ei,Si.defaultProps={tag:"div"};const ki=["className","cssModule","tag"],Ci={tag:mt,className:a.string,cssModule:a.object},Mi=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,ki),a=at(l(n,"card-text"),r);return e.createElement(i,tt({},o,{className:a}))};Mi.propTypes=Ci,Mi.defaultProps={tag:"p"};const Ii=["className","cssModule","tag"],Pi={tag:mt,className:a.string,cssModule:a.object},Ai=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Ii),a=at(l(n,"card-title"),r);return e.createElement(i,tt({},o,{className:a}))};Ai.propTypes=Pi,Ai.defaultProps={tag:"div"};const Di=["cssModule","children","isOpen","flip","target","offset","fallbackPlacements","placementPrefix","arrowClassName","hideArrow","popperClassName","tag","container","modifiers","strategy","boundariesElement","onClosed","fade","transition","placement"],zi={children:a.oneOfType([a.node,a.func]).isRequired,popperClassName:a.string,placement:a.string,placementPrefix:a.string,arrowClassName:a.string,hideArrow:a.bool,tag:mt,isOpen:a.bool.isRequired,cssModule:a.object,offset:a.arrayOf(a.number),fallbackPlacements:a.array,flip:a.bool,container:ft,target:ft.isRequired,modifiers:a.array,strategy:a.string,boundariesElement:a.oneOfType([a.string,pt]),onClosed:a.func,fade:a.bool,transition:a.shape(sr.propTypes)},Ri={boundariesElement:"scrollParent",placement:"auto",hideArrow:!1,isOpen:!1,offset:[0,0],flip:!0,container:"body",modifiers:[],onClosed:function(){},fade:!0,transition:Je({},sr.defaultProps)};class Oi extends e.Component{constructor(e){super(e),this.setTargetNode=this.setTargetNode.bind(this),this.getTargetNode=this.getTargetNode.bind(this),this.getRef=this.getRef.bind(this),this.onClosed=this.onClosed.bind(this),this.state={isOpen:e.isOpen}}static getDerivedStateFromProps(e,t){return e.isOpen&&!t.isOpen?{isOpen:e.isOpen}:null}componentDidUpdate(){this._element&&this._element.childNodes&&this._element.childNodes[0]&&this._element.childNodes[0].focus&&this._element.childNodes[0].focus()}setTargetNode(e){this.targetNode="string"==typeof e?zt(e):e}getTargetNode(){return this.targetNode}getContainerNode(){return zt(this.props.container)}getRef(e){this._element=e}onClosed(){this.props.onClosed(),this.setState({isOpen:!1})}renderChildren(){const t=this.props,{cssModule:n,children:r,isOpen:i,flip:o,target:a,offset:s,fallbackPlacements:c,placementPrefix:u,arrowClassName:h,hideArrow:d,popperClassName:p,tag:f,container:m,modifiers:g,strategy:y,boundariesElement:_,onClosed:v,fade:x,transition:b,placement:w}=t,T=nt(t,Di),E=at(l("arrow",h),n),S=at(l(p,u?`${u}-auto`:""),this.props.cssModule),k=g.map((e=>e.name)),C=[...[{name:"offset",options:{offset:s}},{name:"flip",enabled:o,options:{fallbackPlacements:c}},{name:"preventOverflow",options:{boundary:_}}].filter((e=>!k.includes(e.name))),...g],M=Je(Je(Je({},sr.defaultProps),b),{},{baseClass:x?b.baseClass:"",timeout:x?b.timeout:0});return e.createElement(sr,tt({},M,T,{in:i,onExited:this.onClosed,tag:f}),e.createElement(Le,{referenceElement:this.targetNode,modifiers:C,placement:w,strategy:y},(({ref:t,style:n,placement:i,isReferenceHidden:o,arrowProps:a,update:s})=>e.createElement("div",{ref:t,style:n,className:S,"data-popper-placement":i,"data-popper-reference-hidden":o?"true":void 0},"function"==typeof r?r({update:s}):r,!d&&e.createElement("span",{ref:a.ref,className:E,style:a.style})))))}render(){return this.setTargetNode(this.props.target),this.state.isOpen?"inline"===this.props.container?this.renderChildren():r.createPortal(e.createElement("div",{ref:this.getRef},this.renderChildren()),this.getContainerNode()):null}}Oi.propTypes=zi,Oi.defaultProps=Ri;var Li=Oi;const Fi=(e,t)=>(t.popperManager.setTargetNode(zt(e.target)),null);Fi.contextTypes={popperManager:a.object.isRequired},Fi.propTypes={target:ft.isRequired};const Bi={children:a.oneOfType([a.node,a.func]),placement:a.oneOf(["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"]),target:ft.isRequired,container:ft,isOpen:a.bool,disabled:a.bool,hideArrow:a.bool,boundariesElement:a.oneOfType([a.string,pt]),className:a.string,innerClassName:a.string,arrowClassName:a.string,popperClassName:a.string,cssModule:a.object,toggle:a.func,autohide:a.bool,placementPrefix:a.string,delay:a.oneOfType([a.shape({show:a.number,hide:a.number}),a.number]),modifiers:a.array,strategy:a.string,offset:a.arrayOf(a.number),innerRef:a.oneOfType([a.func,a.string,a.object]),trigger:a.string,fade:a.bool,flip:a.bool},Ni={show:0,hide:50},Ui={isOpen:!1,hideArrow:!1,autohide:!1,delay:Ni,toggle:function(){},trigger:"click",fade:!0};function ji(e,t){return t&&(e===t||t.contains(e))}function Vi(e,t=[]){return t&&t.length&&t.filter((t=>ji(e,t)))[0]}class $i extends e.Component{constructor(e){super(e),this._targets=[],this.currentTargetElement=null,this.addTargetEvents=this.addTargetEvents.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.removeTargetEvents=this.removeTargetEvents.bind(this),this.toggle=this.toggle.bind(this),this.showWithDelay=this.showWithDelay.bind(this),this.hideWithDelay=this.hideWithDelay.bind(this),this.onMouseOverTooltipContent=this.onMouseOverTooltipContent.bind(this),this.onMouseLeaveTooltipContent=this.onMouseLeaveTooltipContent.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.onEscKeyDown=this.onEscKeyDown.bind(this),this.getRef=this.getRef.bind(this),this.state={isOpen:e.isOpen},this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.updateTarget()}componentWillUnmount(){this._isMounted=!1,this.removeTargetEvents(),this._targets=null,this.clearShowTimeout(),this.clearHideTimeout()}static getDerivedStateFromProps(e,t){return e.isOpen&&!t.isOpen?{isOpen:e.isOpen}:null}onMouseOverTooltipContent(){this.props.trigger.indexOf("hover")>-1&&!this.props.autohide&&(this._hideTimeout&&this.clearHideTimeout(),this.state.isOpen&&!this.props.isOpen&&this.toggle())}onMouseLeaveTooltipContent(e){this.props.trigger.indexOf("hover")>-1&&!this.props.autohide&&(this._showTimeout&&this.clearShowTimeout(),e.persist(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide")))}onEscKeyDown(e){"Escape"===e.key&&this.hide(e)}getRef(e){const{innerRef:t}=this.props;t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),this._popover=e}getDelay(e){const{delay:t}=this.props;return"object"==typeof t?isNaN(t[e])?Ni[e]:t[e]:t}getCurrentTarget(e){if(!e)return null;const t=this._targets.indexOf(e);return t>=0?this._targets[t]:this.getCurrentTarget(e.parentElement)}show(e){if(!this.props.isOpen){if(this.clearShowTimeout(),this.currentTargetElement=e?e.currentTarget||this.getCurrentTarget(e.target):null,e&&e.composedPath&&"function"==typeof e.composedPath){const t=e.composedPath();this.currentTargetElement=t&&t[0]||this.currentTargetElement}this.toggle(e)}}showWithDelay(e){this._hideTimeout&&this.clearHideTimeout(),this._showTimeout=setTimeout(this.show.bind(this,e),this.getDelay("show"))}hide(e){this.props.isOpen&&(this.clearHideTimeout(),this.currentTargetElement=null,this.toggle(e))}hideWithDelay(e){this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide"))}clearShowTimeout(){clearTimeout(this._showTimeout),this._showTimeout=void 0}clearHideTimeout(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}handleDocumentClick(e){const t=this.props.trigger.split(" ");t.indexOf("legacy")>-1&&(this.props.isOpen||Vi(e.target,this._targets))?(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen&&!ji(e.target,this._popover)?this.hideWithDelay(e):this.props.isOpen||this.showWithDelay(e)):t.indexOf("click")>-1&&Vi(e.target,this._targets)&&(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen?this.hideWithDelay(e):this.showWithDelay(e))}addEventOnTargets(e,t,n){this._targets.forEach((r=>{r.addEventListener(e,t,n)}))}removeEventOnTargets(e,t,n){this._targets.forEach((r=>{r.removeEventListener(e,t,n)}))}addTargetEvents(){if(this.props.trigger){let e=this.props.trigger.split(" ");-1===e.indexOf("manual")&&((e.indexOf("click")>-1||e.indexOf("legacy")>-1)&&document.addEventListener("click",this.handleDocumentClick,!0),this._targets&&this._targets.length&&(e.indexOf("hover")>-1&&(this.addEventOnTargets("mouseover",this.showWithDelay,!0),this.addEventOnTargets("mouseout",this.hideWithDelay,!0)),e.indexOf("focus")>-1&&(this.addEventOnTargets("focusin",this.show,!0),this.addEventOnTargets("focusout",this.hide,!0)),this.addEventOnTargets("keydown",this.onEscKeyDown,!0)))}}removeTargetEvents(){this._targets&&(this.removeEventOnTargets("mouseover",this.showWithDelay,!0),this.removeEventOnTargets("mouseout",this.hideWithDelay,!0),this.removeEventOnTargets("keydown",this.onEscKeyDown,!0),this.removeEventOnTargets("focusin",this.show,!0),this.removeEventOnTargets("focusout",this.hide,!0)),document.removeEventListener("click",this.handleDocumentClick,!0)}updateTarget(){const e=zt(this.props.target,!0);e!==this._targets&&(this.removeTargetEvents(),this._targets=e?Array.from(e):[],this.currentTargetElement=this.currentTargetElement||this._targets[0],this.addTargetEvents())}toggle(e){return this.props.disabled||!this._isMounted?e&&e.preventDefault():this.props.toggle(e)}render(){this.props.isOpen&&this.updateTarget();const t=this.currentTargetElement||this._targets[0];if(!t)return null;const{className:n,cssModule:r,innerClassName:i,isOpen:o,hideArrow:a,boundariesElement:s,placement:l,placementPrefix:c,arrowClassName:u,popperClassName:h,container:d,modifiers:p,strategy:f,offset:m,fade:g,flip:y,children:_}=this.props,v=st(this.props,Object.keys(Bi)),x=at(h,r),b=at(i,r);return e.createElement(Li,{className:n,target:t,isOpen:o,hideArrow:a,boundariesElement:s,placement:l,placementPrefix:c,arrowClassName:u,popperClassName:x,container:d,modifiers:p,strategy:f,offset:m,cssModule:r,fade:g,flip:y},(({update:t})=>e.createElement("div",tt({},v,{ref:this.getRef,className:b,role:"tooltip",onMouseOver:this.onMouseOverTooltipContent,onMouseLeave:this.onMouseLeaveTooltipContent,onKeyDown:this.onEscKeyDown}),"function"==typeof _?_({update:t}):_)))}}$i.propTypes=Bi,$i.defaultProps=Ui;var qi=$i;const Gi=t=>{const n=l("popover","show",t.popperClassName),r=l("popover-inner",t.innerClassName);return e.createElement(qi,tt({},t,{arrowClassName:"popover-arrow",popperClassName:n,innerClassName:r}))};Gi.propTypes=Bi,Gi.defaultProps={placement:"right",placementPrefix:"bs-popover",trigger:"click",offset:[0,8]};var Wi=Gi;const Zi=["defaultOpen"];class Hi extends e.Component{constructor(e){super(e),this.state={isOpen:e.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState({isOpen:!this.state.isOpen})}render(){return e.createElement(Wi,tt({isOpen:this.state.isOpen,toggle:this.toggle},st(this.props,Zi)))}}Hi.propTypes=Je({defaultOpen:a.bool},Wi.propTypes);const Xi=["className","cssModule","tag"],Yi={tag:mt,className:a.string,cssModule:a.object},Ki=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Xi),a=at(l(n,"popover-header"),r);return e.createElement(i,tt({},o,{className:a}))};Ki.propTypes=Yi,Ki.defaultProps={tag:"h3"};const Qi=["className","cssModule","tag"],Ji={tag:mt,className:a.string,cssModule:a.object},eo=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Qi),a=at(l(n,"popover-body"),r);return e.createElement(i,tt({},o,{className:a}))};eo.propTypes=Ji,eo.defaultProps={tag:"div"};const to=["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"],no={children:a.node,bar:a.bool,multi:a.bool,tag:mt,value:a.oneOfType([a.string,a.number]),min:a.oneOfType([a.string,a.number]),max:a.oneOfType([a.string,a.number]),animated:a.bool,striped:a.bool,color:a.string,className:a.string,barClassName:a.string,cssModule:a.object,style:a.object,barStyle:a.object,barAriaValueText:a.string,barAriaLabelledBy:a.string},ro=t=>{const{children:n,className:r,barClassName:i,cssModule:o,value:a,min:s,max:c,animated:u,striped:h,color:d,bar:p,multi:f,tag:m,style:g,barStyle:y,barAriaValueText:_,barAriaLabelledBy:v}=t,x=nt(t,to),b=It(a)/It(c)*100,w=at(l(r,"progress"),o),T={className:at(l("progress-bar",p&&r||i,u?"progress-bar-animated":null,d?`bg-${d}`:null,h||u?"progress-bar-striped":null),o),style:Je(Je(Je({},p?g:{}),y),{},{width:`${b}%`}),role:"progressbar","aria-valuenow":a,"aria-valuemin":s,"aria-valuemax":c,"aria-valuetext":_,"aria-labelledby":v,children:n};return p?e.createElement(m,tt({},x,T)):e.createElement(m,tt({},x,{style:g,className:w}),f?n:e.createElement("div",T))};ro.propTypes=no,ro.defaultProps={tag:"div",value:0,min:0,max:100,style:{},barStyle:{}};const io={children:a.node.isRequired,node:a.any};class oo extends e.Component{componentWillUnmount(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}render(){return Ct?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),r.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}oo.propTypes=io;var ao=oo;function so(){}const lo=a.shape(sr.propTypes),co={isOpen:a.bool,autoFocus:a.bool,centered:a.bool,fullscreen:a.oneOfType([a.bool,a.oneOf(["sm","md","lg","xl"])]),scrollable:a.bool,size:a.string,toggle:a.func,keyboard:a.bool,role:a.string,labelledBy:a.string,backdrop:a.oneOfType([a.bool,a.oneOf(["static"])]),onEnter:a.func,onExit:a.func,onOpened:a.func,onClosed:a.func,children:a.node,className:a.string,wrapClassName:a.string,modalClassName:a.string,backdropClassName:a.string,contentClassName:a.string,external:a.node,fade:a.bool,cssModule:a.object,zIndex:a.oneOfType([a.number,a.string]),backdropTransition:lo,modalTransition:lo,innerRef:a.oneOfType([a.object,a.string,a.func]),unmountOnClose:a.bool,returnFocusAfterClose:a.bool,container:ft,trapFocus:a.bool},uo=Object.keys(co),ho={isOpen:!1,autoFocus:!0,centered:!1,scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:so,onClosed:so,modalTransition:{timeout:_t},backdropTransition:{mountOnEnter:!0,timeout:gt},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body",trapFocus:!1};class po extends e.Component{constructor(e){super(e),this._element=null,this._originalBodyPadding=null,this.getFocusableChildren=this.getFocusableChildren.bind(this),this.handleBackdropClick=this.handleBackdropClick.bind(this),this.handleBackdropMouseDown=this.handleBackdropMouseDown.bind(this),this.handleEscape=this.handleEscape.bind(this),this.handleStaticBackdropAnimation=this.handleStaticBackdropAnimation.bind(this),this.handleTab=this.handleTab.bind(this),this.onOpened=this.onOpened.bind(this),this.onClosed=this.onClosed.bind(this),this.manageFocusAfterClose=this.manageFocusAfterClose.bind(this),this.clearBackdropAnimationTimeout=this.clearBackdropAnimationTimeout.bind(this),this.trapFocus=this.trapFocus.bind(this),this.state={isOpen:!1,showStaticBackdropAnimation:!1}}componentDidMount(){const{isOpen:e,autoFocus:t,onEnter:n}=this.props;e&&(this.init(),this.setState({isOpen:!0}),t&&this.setFocus()),n&&n(),document.addEventListener("focus",this.trapFocus,!0),this._isMounted=!0}componentDidUpdate(e,t){if(this.props.isOpen&&!e.isOpen)return this.init(),void this.setState({isOpen:!0});this.props.autoFocus&&this.state.isOpen&&!t.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}componentWillUnmount(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),document.removeEventListener("focus",this.trapFocus,!0),this._isMounted=!1}trapFocus(e){if(!this.props.trapFocus)return;if(!this._element)return;if(this._dialog&&this._dialog.parentNode===e.target)return;if(this.modalIndex<po.openCount-1)return;const t=this.getFocusableChildren();for(let n=0;n<t.length;n++)if(t[n]===e.target)return;t.length>0&&(e.preventDefault(),e.stopPropagation(),t[0].focus())}onOpened(e,t){this.props.onOpened(),(this.props.modalTransition.onEntered||so)(e,t)}onClosed(e){const{unmountOnClose:t}=this.props;this.props.onClosed(),(this.props.modalTransition.onExited||so)(e),t&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})}setFocus(){this._dialog&&this._dialog.parentNode&&"function"==typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()}getFocusableChildren(){return this._element.querySelectorAll(Rt.join(", "))}getFocusedChild(){let e;const t=this.getFocusableChildren();try{e=document.activeElement}catch(n){e=t[0]}return e}handleBackdropClick(e){if(e.target===this._mouseDownElement){e.stopPropagation();const t=this._dialog?this._dialog.parentNode:null;if(t&&e.target===t&&"static"===this.props.backdrop&&this.handleStaticBackdropAnimation(),!this.props.isOpen||!0!==this.props.backdrop)return;t&&e.target===t&&this.props.toggle&&this.props.toggle(e)}}handleTab(e){if(9!==e.which)return;if(this.modalIndex<po.openCount-1)return;const t=this.getFocusableChildren(),n=t.length;if(0===n)return;const r=this.getFocusedChild();let i=0;for(let e=0;e<n;e+=1)if(t[e]===r){i=e;break}e.shiftKey&&0===i?(e.preventDefault(),t[n-1].focus()):e.shiftKey||i!==n-1||(e.preventDefault(),t[0].focus())}handleBackdropMouseDown(e){this._mouseDownElement=e.target}handleEscape(e){this.props.isOpen&&e.keyCode===kt.esc&&this.props.toggle&&(this.props.keyboard?(e.preventDefault(),e.stopPropagation(),this.props.toggle(e)):"static"===this.props.backdrop&&(e.preventDefault(),e.stopPropagation(),this.handleStaticBackdropAnimation()))}handleStaticBackdropAnimation(){this.clearBackdropAnimationTimeout(),this.setState({showStaticBackdropAnimation:!0}),this._backdropAnimationTimeout=setTimeout((()=>{this.setState({showStaticBackdropAnimation:!1})}),100)}init(){try{this._triggeringElement=document.activeElement}catch(e){this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=zt(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=it(),ot(),0===po.openCount&&(document.body.className=l(document.body.className,at("modal-open",this.props.cssModule))),this.modalIndex=po.openCount,po.openCount+=1}destroy(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()}manageFocusAfterClose(){if(this._triggeringElement){const{returnFocusAfterClose:e}=this.props;this._triggeringElement.focus&&e&&this._triggeringElement.focus(),this._triggeringElement=null}}close(){if(po.openCount<=1){const e=at("modal-open",this.props.cssModule),t=new RegExp(`(^| )${e}( |$)`);document.body.className=document.body.className.replace(t," ").trim()}this.manageFocusAfterClose(),po.openCount=Math.max(0,po.openCount-1),rt(this._originalBodyPadding)}renderModalDialog(){const t=st(this.props,uo);return e.createElement("div",tt({},t,{className:at(l("modal-dialog",this.props.className,{[`modal-${this.props.size}`]:this.props.size,"modal-dialog-centered":this.props.centered,"modal-dialog-scrollable":this.props.scrollable,"modal-fullscreen":!0===this.props.fullscreen,[`modal-fullscreen-${this.props.fullscreen}-down`]:"string"==typeof this.props.fullscreen}),this.props.cssModule),role:"document",ref:e=>{this._dialog=e}}),e.createElement("div",{className:at(l("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))}render(){const{unmountOnClose:t}=this.props;if(this._element&&(this.state.isOpen||!t)){const n=!!this._element&&!this.state.isOpen&&!t;this._element.style.display=n?"none":"block";const{wrapClassName:r,modalClassName:i,backdropClassName:o,cssModule:a,isOpen:s,backdrop:c,role:u,labelledBy:h,external:d,innerRef:p}=this.props,f={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":h,role:u,tabIndex:"-1"},m=this.props.fade,g=Je(Je(Je({},sr.defaultProps),this.props.modalTransition),{},{baseClass:m?this.props.modalTransition.baseClass:"",timeout:m?this.props.modalTransition.timeout:0}),y=Je(Je(Je({},sr.defaultProps),this.props.backdropTransition),{},{baseClass:m?this.props.backdropTransition.baseClass:"",timeout:m?this.props.backdropTransition.timeout:0}),_=c&&(m?e.createElement(sr,tt({},y,{in:s&&!!c,cssModule:a,className:at(l("modal-backdrop",o),a)})):e.createElement("div",{className:at(l("modal-backdrop","show",o),a)}));return e.createElement(ao,{node:this._element},e.createElement("div",{className:at(r)},e.createElement(sr,tt({},f,g,{in:s,onEntered:this.onOpened,onExited:this.onClosed,cssModule:a,className:at(l("modal",i,this.state.showStaticBackdropAnimation&&"modal-static"),a),innerRef:p}),d,this.renderModalDialog()),_))}return null}clearBackdropAnimationTimeout(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)}}po.propTypes=co,po.defaultProps=ho,po.openCount=0;const fo=["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","close"],mo={tag:mt,wrapTag:mt,toggle:a.func,className:a.string,cssModule:a.object,children:a.node,closeAriaLabel:a.string,close:a.object},go=t=>{let n;const{className:r,cssModule:i,children:o,toggle:a,tag:s,wrapTag:c,closeAriaLabel:u,close:h}=t,d=nt(t,fo),p=at(l(r,"modal-header"),i);return!h&&a&&(n=e.createElement("button",{type:"button",onClick:a,className:at("btn-close",i),"aria-label":u})),e.createElement(c,tt({},d,{className:p}),e.createElement(s,{className:at("modal-title",i)},o),h||n)};go.propTypes=mo,go.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close"};const yo=["className","cssModule","tag"],_o={tag:mt,className:a.string,cssModule:a.object},vo=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,yo),a=at(l(n,"modal-body"),r);return e.createElement(i,tt({},o,{className:a}))};vo.propTypes=_o,vo.defaultProps={tag:"div"};const xo=["className","cssModule","tag"],bo={tag:mt,className:a.string,cssModule:a.object},wo=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,xo),a=at(l(n,"modal-footer"),r);return e.createElement(i,tt({},o,{className:a}))};wo.propTypes=bo,wo.defaultProps={tag:"div"};const To=t=>{const n=l("tooltip","show",t.popperClassName),r=l("tooltip-inner",t.innerClassName);return e.createElement(qi,tt({},t,{arrowClassName:"tooltip-arrow",popperClassName:n,innerClassName:r}))};To.propTypes=Bi,To.defaultProps={placement:"top",autohide:!0,placementPrefix:"bs-tooltip",trigger:"hover focus"};var Eo=To;const So=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"],ko={className:a.string,cssModule:a.object,size:a.string,bordered:a.bool,borderless:a.bool,striped:a.bool,dark:a.bool,hover:a.bool,responsive:a.oneOfType([a.bool,a.string]),tag:mt,responsiveTag:mt,innerRef:a.oneOfType([a.func,a.string,a.object])},Co=t=>{const{className:n,cssModule:r,size:i,bordered:o,borderless:a,striped:s,dark:c,hover:u,responsive:h,tag:d,responsiveTag:p,innerRef:f}=t,m=nt(t,So),g=at(l(n,"table",!!i&&"table-"+i,!!o&&"table-bordered",!!a&&"table-borderless",!!s&&"table-striped",!!c&&"table-dark",!!u&&"table-hover"),r),y=e.createElement(d,tt({},m,{ref:f,className:g}));if(h){const t=at(!0===h?"table-responsive":`table-responsive-${h}`,r);return e.createElement(p,{className:t},y)}return y};Co.propTypes=ko,Co.defaultProps={tag:"table",responsiveTag:"div"};const Mo=["className","cssModule","tag","flush","horizontal","numbered"],Io={tag:mt,flush:a.bool,className:a.string,cssModule:a.object,horizontal:a.oneOfType([a.bool,a.string]),numbered:a.bool},Po=t=>{const{className:n,cssModule:r,tag:i,flush:o,horizontal:a,numbered:s}=t,c=nt(t,Mo),u=at(l(n,"list-group",o?"list-group-flush":(e=>!1!==e&&(!0===e||"xs"===e?"list-group-horizontal":`list-group-horizontal-${e}`))(a),{"list-group-numbered":s}),r);return e.createElement(i,tt({},c,{className:u}))};Po.propTypes=Io,Po.defaultProps={tag:"ul",horizontal:!1,numbered:!1};const Ao=["className","cssModule","inline","tag","innerRef"],Do={children:a.node,inline:a.bool,tag:mt,innerRef:a.oneOfType([a.object,a.func,a.string]),className:a.string,cssModule:a.object};class zo extends e.Component{constructor(e){super(e),this.getRef=this.getRef.bind(this),this.submit=this.submit.bind(this)}getRef(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}submit(){this.ref&&this.ref.submit()}render(){const t=this.props,{className:n,cssModule:r,inline:i,tag:o,innerRef:a}=t,s=nt(t,Ao),c=at(l(n,!!i&&"form-inline"),r);return e.createElement(o,tt({},s,{ref:a,className:c}))}}zo.propTypes=Do,zo.defaultProps={tag:"form"};const Ro=["className","cssModule","valid","tooltip","tag"],Oo={children:a.node,tag:mt,className:a.string,cssModule:a.object,valid:a.bool,tooltip:a.bool},Lo=t=>{const{className:n,cssModule:r,valid:i,tooltip:o,tag:a}=t,s=nt(t,Ro),c=o?"tooltip":"feedback",u=at(l(n,i?`valid-${c}`:`invalid-${c}`),r);return e.createElement(a,tt({},s,{className:u}))};Lo.propTypes=Oo,Lo.defaultProps={tag:"div",valid:void 0};const Fo=["className","cssModule","row","disabled","check","inline","floating","tag"],Bo={children:a.node,row:a.bool,check:a.bool,switch:a.bool,inline:a.bool,floating:a.bool,disabled:a.bool,tag:mt,className:a.string,cssModule:a.object},No=t=>{const{className:n,cssModule:r,row:i,disabled:o,check:a,inline:s,floating:c,tag:u}=t,h=nt(t,Fo),d=a||t.switch,p=at(l(n,!!i&&"row",d?"form-check":"mb-3",!!t.switch&&"form-switch",!(!d||!s)&&"form-check-inline",!(!d||!o)&&"disabled",c&&"form-floating"),r);return"fieldset"===u&&(h.disabled=o),e.createElement(u,tt({},h,{className:p}))};No.propTypes=Bo,No.defaultProps={tag:"div"};const Uo=["className","cssModule","inline","color","tag"],jo={children:a.node,inline:a.bool,tag:mt,color:a.string,className:a.string,cssModule:a.object},Vo=t=>{const{className:n,cssModule:r,inline:i,color:o,tag:a}=t,s=nt(t,Uo),c=at(l(n,!i&&"form-text",!!o&&`text-${o}`),r);return e.createElement(a,tt({},s,{className:c}))};Vo.propTypes=jo,Vo.defaultProps={tag:"small",color:"muted"};const $o=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"],qo={children:a.node,type:a.string,size:a.oneOfType([a.number,a.string]),bsSize:a.string,valid:a.bool,invalid:a.bool,tag:mt,innerRef:a.oneOfType([a.object,a.func,a.string]),plaintext:a.bool,addon:a.bool,className:a.string,cssModule:a.object};class Go extends e.Component{constructor(e){super(e),this.getRef=this.getRef.bind(this),this.focus=this.focus.bind(this)}getRef(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}focus(){this.ref&&this.ref.focus()}render(){let t=this.props,{className:n,cssModule:r,type:i,bsSize:o,valid:a,invalid:s,tag:c,addon:u,plaintext:h,innerRef:d}=t,p=nt(t,$o);const f=["switch","radio","checkbox"].indexOf(i)>-1,m=new RegExp("\\D","g"),g="select"===i;let y=c||(g||"textarea"===i?i:"input"),_="form-control";h?(_=`${_}-plaintext`,y=c||"input"):"range"===i?_="form-range":g?_="form-select":f&&(_=u?null:"form-check-input"),p.size&&m.test(p.size)&&(ut('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),o=p.size,delete p.size);const v=at(l(n,s&&"is-invalid",a&&"is-valid",!!o&&(g?`form-select-${o}`:`form-control-${o}`),_),r);return("input"===y||c&&"function"==typeof c)&&(p.type="switch"===i?"checkbox":i),p.children&&!h&&"select"!==i&&"string"==typeof y&&"select"!==y&&(ut(`Input with a type of "${i}" cannot have children. Please use "value"/"defaultValue" instead.`),delete p.children),e.createElement(y,tt({},p,{ref:d,className:v,"aria-invalid":s}))}}Go.propTypes=qo,Go.defaultProps={type:"text"};var Wo=Go;const Zo=["className","cssModule","tag","type","size"],Ho={tag:mt,type:a.bool,size:a.string,className:a.string,cssModule:a.object},Xo=t=>{const{className:n,cssModule:r,tag:i,type:o,size:a}=t,s=nt(t,Zo),c=at(l(n,"input-group",a?`input-group-${a}`:null),r);return"dropdown"===t.type?e.createElement(Bn,tt({},s,{className:c})):e.createElement(i,tt({},s,{className:c}))};Xo.propTypes=Ho,Xo.defaultProps={tag:"div"};const Yo=["className","cssModule","tag"],Ko={tag:mt,className:a.string,cssModule:a.object},Qo=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Yo),a=at(l(n,"input-group-text"),r);return e.createElement(i,tt({},o,{className:a}))};Qo.propTypes=Ko,Qo.defaultProps={tag:"span"};const Jo=["className","cssModule","hidden","widths","tag","check","size","for"],ea=a.oneOfType([a.number,a.string]),ta=a.oneOfType([a.bool,a.string,a.number,a.shape({size:ea,order:ea,offset:ea})]),na={children:a.node,hidden:a.bool,check:a.bool,size:a.string,for:a.string,tag:mt,className:a.string,cssModule:a.object,xs:ta,sm:ta,md:ta,lg:ta,xl:ta,xxl:ta,widths:a.array},ra=(e,t,n)=>!0===n||""===n?e?"col":`col-${t}`:"auto"===n?e?"col-auto":`col-${t}-auto`:e?`col-${n}`:`col-${t}-${n}`,ia=t=>{const{className:n,cssModule:r,hidden:i,widths:o,tag:a,check:s,size:c,for:u}=t,h=nt(t,Jo),d=[];o.forEach(((e,n)=>{let i=t[e];if(delete h[e],!i&&""!==i)return;const o=!n;let a;if(Pt(i)){const t=o?"-":`-${e}-`;a=ra(o,e,i.size),d.push(at(l({[a]:i.size||""===i.size,[`order${t}${i.order}`]:i.order||0===i.order,[`offset${t}${i.offset}`]:i.offset||0===i.offset})),r)}else a=ra(o,e,i),d.push(a)}));const p=at(l(n,!!i&&"visually-hidden",!!s&&"form-check-label",!!c&&`col-form-label-${c}`,d,d.length?"col-form-label":"form-label"),r);return e.createElement(a,tt({htmlFor:u},h,{className:p}))};ia.propTypes=na,ia.defaultProps={tag:"label",widths:["xs","sm","md","lg","xl","xxl"]};a.bool,a.bool,a.node,a.string,a.object,a.bool,a.bool,a.bool,a.bool,a.bool,a.bool,a.bool;function oa(){}const aa=a.shape(sr.propTypes),sa={autoFocus:a.bool,backdrop:a.bool,backdropClassName:a.string,backdropTransition:aa,children:a.node,className:a.string,container:ft,cssModule:a.object,direction:a.oneOf(["start","end","bottom","top","left","right"]),fade:a.bool,innerRef:a.oneOfType([a.object,a.string,a.func]),isOpen:a.bool,keyboard:a.bool,labelledBy:a.string,offcanvasTransition:aa,onClosed:a.func,onEnter:a.func,onExit:a.func,onOpened:a.func,returnFocusAfterClose:a.bool,role:a.string,scrollable:a.bool,toggle:a.func,trapFocus:a.bool,unmountOnClose:a.bool,zIndex:a.oneOfType([a.number,a.string])},la=Object.keys(sa),ca={isOpen:!1,autoFocus:!0,direction:"start",scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:oa,onClosed:oa,offcanvasTransition:{timeout:xt},backdropTransition:{mountOnEnter:!0,timeout:gt},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body",trapFocus:!1};class ua extends e.Component{constructor(e){super(e),this._element=null,this._originalBodyPadding=null,this.getFocusableChildren=this.getFocusableChildren.bind(this),this.handleBackdropClick=this.handleBackdropClick.bind(this),this.handleBackdropMouseDown=this.handleBackdropMouseDown.bind(this),this.handleEscape=this.handleEscape.bind(this),this.handleTab=this.handleTab.bind(this),this.onOpened=this.onOpened.bind(this),this.onClosed=this.onClosed.bind(this),this.manageFocusAfterClose=this.manageFocusAfterClose.bind(this),this.clearBackdropAnimationTimeout=this.clearBackdropAnimationTimeout.bind(this),this.trapFocus=this.trapFocus.bind(this),this.state={isOpen:!1}}componentDidMount(){const{isOpen:e,autoFocus:t,onEnter:n}=this.props;e&&(this.init(),this.setState({isOpen:!0}),t&&this.setFocus()),n&&n(),document.addEventListener("focus",this.trapFocus,!0),this._isMounted=!0}componentDidUpdate(e,t){if(this.props.isOpen&&!e.isOpen)return this.init(),void this.setState({isOpen:!0});this.props.autoFocus&&this.state.isOpen&&!t.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}componentWillUnmount(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),document.removeEventListener("focus",this.trapFocus,!0),this._isMounted=!1}trapFocus(e){if(!this.props.trapFocus)return;if(!this._element)return;if(this._dialog===e.target)return;if(this.offcanvasIndex<ua.openCount-1)return;const t=this.getFocusableChildren();for(let n=0;n<t.length;n++)if(t[n]===e.target)return;t.length>0&&(e.preventDefault(),e.stopPropagation(),t[0].focus())}onOpened(e,t){this.props.onOpened(),(this.props.offcanvasTransition.onEntered||oa)(e,t)}onClosed(e){const{unmountOnClose:t}=this.props;this.props.onClosed(),(this.props.offcanvasTransition.onExited||oa)(e),t&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})}setFocus(){this._dialog&&"function"==typeof this._dialog.focus&&this._dialog.focus()}getFocusableChildren(){return this._element.querySelectorAll(Rt.join(", "))}getFocusedChild(){let e;const t=this.getFocusableChildren();try{e=document.activeElement}catch(n){e=t[0]}return e}handleBackdropClick(e){if(e.target===this._mouseDownElement){e.stopPropagation();const t=this._backdrop;if(!this.props.isOpen||!0!==this.props.backdrop)return;t&&e.target===t&&this.props.toggle&&this.props.toggle(e)}}handleTab(e){if(9!==e.which)return;if(this.offcanvasIndex<ua.openCount-1)return;const t=this.getFocusableChildren(),n=t.length;if(0===n)return;const r=this.getFocusedChild();let i=0;for(let e=0;e<n;e+=1)if(t[e]===r){i=e;break}e.shiftKey&&0===i?(e.preventDefault(),t[n-1].focus()):e.shiftKey||i!==n-1||(e.preventDefault(),t[0].focus())}handleBackdropMouseDown(e){this._mouseDownElement=e.target}handleEscape(e){this.props.isOpen&&e.keyCode===kt.esc&&this.props.toggle&&this.props.keyboard&&(e.preventDefault(),e.stopPropagation(),this.props.toggle(e))}init(){try{this._triggeringElement=document.activeElement}catch(e){this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=zt(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=it(),ot(),0===ua.openCount&&this.props.backdrop&&!this.props.scrollable&&(document.body.style.overflow="hidden"),this.offcanvasIndex=ua.openCount,ua.openCount+=1}destroy(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()}manageFocusAfterClose(){if(this._triggeringElement){const{returnFocusAfterClose:e}=this.props;this._triggeringElement.focus&&e&&this._triggeringElement.focus(),this._triggeringElement=null}}close(){this.manageFocusAfterClose(),ua.openCount=Math.max(0,ua.openCount-1),document.body.style.overflow=null,rt(this._originalBodyPadding)}render(){const{direction:t,unmountOnClose:n}=this.props;if(this._element&&(this.state.isOpen||!n)){const r=!!this._element&&!this.state.isOpen&&!n;this._element.style.display=r?"none":"block";const{className:i,backdropClassName:o,cssModule:a,isOpen:s,backdrop:c,role:u,labelledBy:h,style:d}=this.props,p={onKeyUp:this.handleEscape,onKeyDown:this.handleTab,"aria-labelledby":h,role:u,tabIndex:"-1"},f=this.props.fade,m=Je(Je(Je({},sr.defaultProps),this.props.offcanvasTransition),{},{baseClass:f?this.props.offcanvasTransition.baseClass:"",timeout:f?this.props.offcanvasTransition.timeout:0}),g=Je(Je(Je({},sr.defaultProps),this.props.backdropTransition),{},{baseClass:f?this.props.backdropTransition.baseClass:"",timeout:f?this.props.backdropTransition.timeout:0}),y=c&&(f?e.createElement(sr,tt({},g,{in:s&&!!c,innerRef:e=>{this._backdrop=e},cssModule:a,className:at(l("offcanvas-backdrop",o),a),onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown})):e.createElement("div",{className:at(l("offcanvas-backdrop","show",o),a),onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown})),_=st(this.props,la);return e.createElement(ao,{node:this._element},e.createElement(sr,tt({},_,p,m,{in:s,onEntered:this.onOpened,onExited:this.onClosed,cssModule:a,className:at(l("offcanvas",i,`offcanvas-${t}`),a),innerRef:e=>{this._dialog=e},style:Je(Je({},d),{},{visibility:s?"visible":"hidden"})}),this.props.children),y)}return null}clearBackdropAnimationTimeout(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)}}ua.propTypes=sa,ua.defaultProps=ca,ua.openCount=0;const ha=["className","cssModule","tag"],da={tag:mt,className:a.string,cssModule:a.object},pa=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,ha),a=at(l(n,"offcanvas-body"),r);return e.createElement(i,tt({},o,{className:a}))};pa.propTypes=da,pa.defaultProps={tag:"div"};const fa=["children","className","close","closeAriaLabel","cssModule","tag","toggle","wrapTag"],ma={children:a.node,className:a.string,close:a.object,closeAriaLabel:a.string,cssModule:a.object,tag:mt,toggle:a.func,wrapTag:mt},ga=t=>{let n;const{children:r,className:i,close:o,closeAriaLabel:a,cssModule:s,tag:c,toggle:u,wrapTag:h}=t,d=nt(t,fa),p=at(l(i,"offcanvas-header"),s);return!o&&u&&(n=e.createElement("button",{type:"button",onClick:u,className:at("btn-close",s),"aria-label":a})),e.createElement(h,tt({},d,{className:p}),e.createElement(c,{className:at("offcanvas-title",s)},r),o||n)};ga.propTypes=ma,ga.defaultProps={closeAriaLabel:"Close",tag:"h5",wrapTag:"div"};const ya=["className","listClassName","cssModule","size","tag","listTag","aria-label"],_a={children:a.node,className:a.string,listClassName:a.string,cssModule:a.object,size:a.string,tag:mt,listTag:mt,"aria-label":a.string},va=t=>{const{className:n,listClassName:r,cssModule:i,size:o,tag:a,listTag:s,"aria-label":c}=t,u=nt(t,ya),h=at(l(n),i),d=at(l(r,"pagination",{[`pagination-${o}`]:!!o}),i);return e.createElement(a,{className:h,"aria-label":c},e.createElement(s,tt({},u,{className:d})))};va.propTypes=_a,va.defaultProps={tag:"nav",listTag:"ul","aria-label":"pagination"};const xa=["active","className","cssModule","disabled","tag"],ba={active:a.bool,children:a.node,className:a.string,cssModule:a.object,disabled:a.bool,tag:mt},wa=t=>{const{active:n,className:r,cssModule:i,disabled:o,tag:a}=t,s=nt(t,xa),c=at(l(r,"page-item",{active:n,disabled:o}),i);return e.createElement(a,tt({},s,{className:c}))};wa.propTypes=ba,wa.defaultProps={tag:"li"};const Ta=["className","cssModule","next","previous","first","last","tag"],Ea={"aria-label":a.string,children:a.node,className:a.string,cssModule:a.object,next:a.bool,previous:a.bool,first:a.bool,last:a.bool,tag:mt},Sa=t=>{let{className:n,cssModule:r,next:i,previous:o,first:a,last:s,tag:c}=t,u=nt(t,Ta);const h=at(l(n,"page-link"),r);let d;o?d="Previous":i?d="Next":a?d="First":s&&(d="Last");const p=t["aria-label"]||d;let f;o?f="‹":i?f="›":a?f="«":s&&(f="»");let m=t.children;return m&&Array.isArray(m)&&0===m.length&&(m=null),u.href||"a"!==c||(c="button"),(o||i||a||s)&&(m=[e.createElement("span",{"aria-hidden":"true",key:"caret"},m||f),e.createElement("span",{className:"visually-hidden",key:"ariaLabel"},p)]),e.createElement(c,tt({},u,{className:h,"aria-label":p}),m)};Sa.propTypes=Ea,Sa.defaultProps={tag:"a"};const ka=e.createContext({}),Ca={tag:mt,activeTab:a.any,className:a.string,cssModule:a.object};class Ma extends e.Component{static getDerivedStateFromProps(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null}constructor(e){super(e),this.state={activeTab:this.props.activeTab}}render(){const{className:t,cssModule:n,tag:r}=this.props,i=st(this.props,Object.keys(Ca)),o=at(l("tab-content",t),n);return e.createElement(ka.Provider,{value:{activeTabId:this.state.activeTab}},e.createElement(r,tt({},i,{className:o})))}}Ma.propTypes=Ca,Ma.defaultProps={tag:"div"};const Ia=["className","cssModule","tabId","tag"],Pa={tag:mt,className:a.string,cssModule:a.object,tabId:a.any};function Aa(t){const{className:n,cssModule:r,tabId:i,tag:o}=t,a=nt(t,Ia),s=e=>at(l("tab-pane",n,{active:i===e}),r);return e.createElement(ka.Consumer,null,(({activeTabId:t})=>e.createElement(o,tt({},a,{className:s(t)}))))}Aa.propTypes=Pa,Aa.defaultProps={tag:"div"};const Da=["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"],za={children:a.node,className:a.string,closeClassName:a.string,closeAriaLabel:a.string,cssModule:a.object,color:a.string,fade:a.bool,isOpen:a.bool,toggle:a.func,tag:mt,transition:a.shape(sr.propTypes),innerRef:a.oneOfType([a.object,a.string,a.func])},Ra={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",fade:!0,transition:Je(Je({},sr.defaultProps),{},{unmountOnExit:!0})};function Oa(t){const{className:n,closeClassName:r,closeAriaLabel:i,cssModule:o,tag:a,color:s,isOpen:c,toggle:u,children:h,transition:d,fade:p,innerRef:f}=t,m=nt(t,Da),g=at(l(n,"alert",`alert-${s}`,{"alert-dismissible":u}),o),y=at(l("btn-close",r),o),_=Je(Je(Je({},sr.defaultProps),d),{},{baseClass:p?d.baseClass:"",timeout:p?d.timeout:0});return e.createElement(sr,tt({},m,_,{tag:a,className:g,in:c,role:"alert",innerRef:f}),u?e.createElement("button",{type:"button",className:y,"aria-label":i,onClick:u}):null,h)}Oa.propTypes=za,Oa.defaultProps=Ra;const La=["className","cssModule","tag","isOpen","children","transition","fade","innerRef"],Fa={children:a.node,className:a.string,cssModule:a.object,fade:a.bool,isOpen:a.bool,tag:mt,transition:a.shape(sr.propTypes),innerRef:a.oneOfType([a.object,a.string,a.func])},Ba={isOpen:!0,tag:"div",fade:!0,transition:Je(Je({},sr.defaultProps),{},{unmountOnExit:!0})};function Na(t){const{className:n,cssModule:r,tag:i,isOpen:o,children:a,transition:s,fade:c,innerRef:u}=t,h=nt(t,La),d=at(l(n,"toast"),r),p=Je(Je(Je({},sr.defaultProps),s),{},{baseClass:c?s.baseClass:"",timeout:c?s.timeout:0});return e.createElement(sr,tt({},h,p,{tag:i,className:d,in:o,role:"alert",innerRef:u}),a)}Na.propTypes=Fa,Na.defaultProps=Ba;const Ua=["className","cssModule","innerRef","tag"],ja={tag:mt,className:a.string,cssModule:a.object,innerRef:a.oneOfType([a.object,a.string,a.func])},Va=t=>{const{className:n,cssModule:r,innerRef:i,tag:o}=t,a=nt(t,Ua),s=at(l(n,"toast-body"),r);return e.createElement(o,tt({},a,{className:s,ref:i}))};Va.propTypes=ja,Va.defaultProps={tag:"div"};const $a=["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","close","tagClassName","icon"],qa={tag:mt,icon:a.oneOfType([a.string,a.node]),wrapTag:mt,toggle:a.func,className:a.string,cssModule:a.object,children:a.node,closeAriaLabel:a.string,charCode:a.oneOfType([a.string,a.number]),close:a.object},Ga=t=>{let n,r;const{className:i,cssModule:o,children:a,toggle:s,tag:c,wrapTag:u,closeAriaLabel:h,close:d,tagClassName:p,icon:f}=t,m=nt(t,$a),g=at(l(i,"toast-header"),o);return!d&&s&&(n=e.createElement("button",{type:"button",onClick:s,className:at("btn-close",o),"aria-label":h})),"string"==typeof f?r=e.createElement("svg",{className:at(`rounded text-${f}`),width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img"},e.createElement("rect",{fill:"currentColor",width:"100%",height:"100%"})):f&&(r=f),e.createElement(u,tt({},m,{className:g}),r,e.createElement(c,{className:at(l(p,{"ms-2":null!=r}),o)},a),d||n)};Ga.propTypes=qa,Ga.defaultProps={tag:"strong",wrapTag:"div",tagClassName:"me-auto",closeAriaLabel:"Close"};const Wa=["className","cssModule","tag","active","disabled","action","color"],Za={tag:mt,active:a.bool,disabled:a.bool,color:a.string,action:a.bool,className:a.any,cssModule:a.object},Ha=e=>{e.preventDefault()},Xa=t=>{const{className:n,cssModule:r,tag:i,active:o,disabled:a,action:s,color:c}=t,u=nt(t,Wa),h=at(l(n,!!o&&"active",!!a&&"disabled",!!s&&"list-group-item-action",!!c&&`list-group-item-${c}`,"list-group-item"),r);return a&&(u.onClick=Ha),e.createElement(i,tt({},u,{className:h}))};Xa.propTypes=Za,Xa.defaultProps={tag:"li"};const Ya=["className","cssModule","tag"],Ka={tag:mt,className:a.any,cssModule:a.object},Qa=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Ya),a=at(l(n,"list-group-item-heading"),r);return e.createElement(i,tt({},o,{className:a}))};Qa.propTypes=Ka,Qa.defaultProps={tag:"h5"};const Ja=["className","cssModule","tag"],es={tag:mt,className:a.any,cssModule:a.object},ts=t=>{const{className:n,cssModule:r,tag:i}=t,o=nt(t,Ja),a=at(l(n,"list-group-item-text"),r);return e.createElement(i,tt({},o,{className:a}))};ts.propTypes=es,ts.defaultProps={tag:"p"};const ns=["className","cssModule","tag","type"],rs={tag:mt,className:a.string,cssModule:a.object,type:a.string},is=(0,e.forwardRef)(((t,n)=>{const{className:r,cssModule:i,tag:o,type:a}=t,s=nt(t,ns),c=at(l(r,!!a&&`list-${a}`),i);return e.createElement(o,tt({},s,{className:c,ref:n}))}));is.name="List",is.propTypes=rs,is.defaultProps={tag:"ul"};const os=["className","cssModule","tag"],as={tag:mt,className:a.string,cssModule:a.object},ss=(0,e.forwardRef)(((t,n)=>{const{className:r,cssModule:i,tag:o}=t,a=nt(t,os),s=at(l(r,"list-inline-item"),i);return e.createElement(o,tt({},a,{className:s,ref:n}))}));ss.name="ListInlineItem",ss.propTypes=as,ss.defaultProps={tag:"li"},e.Component;const ls=["defaultOpen"];class cs extends e.Component{constructor(e){super(e),this.state={isOpen:e.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState({isOpen:!this.state.isOpen})}render(){return e.createElement(jn,tt({isOpen:this.state.isOpen,toggle:this.toggle},st(this.props,ls)))}}cs.propTypes=Je({defaultOpen:a.bool},jn.propTypes);const us=["toggleEvents","defaultOpen"],hs={defaultOpen:a.bool,toggler:a.string.isRequired,toggleEvents:a.arrayOf(a.string)},ds={toggleEvents:["touchstart","click"]};class ps extends e.Component{constructor(e){super(e),this.togglers=null,this.removeEventListeners=null,this.toggle=this.toggle.bind(this),this.state={isOpen:e.defaultOpen||!1}}componentDidMount(){this.togglers=At(this.props.toggler),this.togglers.length&&(this.removeEventListeners=function(e,t,n,r){let i=e;Dt(i)||(i=[i]);let o=n;if("string"==typeof o&&(o=o.split(/\s+/)),!Dt(i)||"function"!=typeof t||!Array.isArray(o))throw new Error("\n      The first argument of this function must be DOM node or an array on DOM nodes or NodeList.\n      The second must be a function.\n      The third is a string or an array of strings that represents DOM events\n    ");return Array.prototype.forEach.call(o,(e=>{Array.prototype.forEach.call(i,(n=>{n.addEventListener(e,t,r)}))})),function(){Array.prototype.forEach.call(o,(e=>{Array.prototype.forEach.call(i,(n=>{n.removeEventListener(e,t,r)}))}))}}(this.togglers,this.toggle,this.props.toggleEvents))}componentWillUnmount(){this.togglers.length&&this.removeEventListeners&&this.removeEventListeners()}toggle(e){this.setState((({isOpen:e})=>({isOpen:!e}))),e.preventDefault()}render(){return e.createElement(Sr,tt({isOpen:this.state.isOpen},st(this.props,us)))}}ps.propTypes=hs,ps.defaultProps=ds;const fs=["defaultOpen"];class ms extends e.Component{constructor(e){super(e),this.state={isOpen:e.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(e){const t=!this.state.isOpen;this.setState({isOpen:t},(()=>{this.props.onToggle&&this.props.onToggle(e,t)}))}render(){return e.createElement(Bn,tt({isOpen:this.state.isOpen,toggle:this.toggle},st(this.props,fs)))}}ms.propTypes=Je({defaultOpen:a.bool,onToggle:a.func},Bn.propTypes);const gs=["defaultOpen"];class ys extends e.Component{constructor(e){super(e),this.state={isOpen:e.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState({isOpen:!this.state.isOpen})}render(){return e.createElement(Eo,tt({isOpen:this.state.isOpen,toggle:this.toggle},st(this.props,gs)))}}ys.propTypes=Je({defaultOpen:a.bool},Eo.propTypes);const _s=["className","cssModule","type","size","color","children","tag"],vs={tag:mt,type:a.string,size:a.string,color:a.string,className:a.string,cssModule:a.object,children:a.string},xs=t=>{const{className:n,cssModule:r,type:i,size:o,color:a,children:s,tag:c}=t,u=nt(t,_s),h=at(l(n,!!o&&`spinner-${i}-${o}`,`spinner-${i}`,!!a&&`text-${a}`),r);return e.createElement(c,tt({role:"status"},u,{className:h}),s&&e.createElement("span",{className:at("visually-hidden",r)},s))};xs.propTypes=vs,xs.defaultProps={tag:"div",type:"border",children:"Loading..."};const bs=["className","cssModule","color","innerRef","tag","animation","size","widths"],ws=Je(Je({},Kt.propTypes),{},{color:a.string,tag:mt,animation:a.oneOf(["glow","wave"]),innerRef:a.oneOfType([a.object,a.func,a.string]),size:a.oneOf(["lg","sm","xs"])}),Ts=t=>{let{className:n,cssModule:r,color:i,innerRef:o,tag:a,animation:s,size:c,widths:u}=t,h=nt(t,bs),{attributes:d,colClasses:p}=Xt(h,r,u);const f=at(l(n,p,"placeholder"+(s?"-"+s:""),!!c&&"placeholder-"+c,!!i&&"bg-"+i),r);return e.createElement(a,tt({},d,{className:f,ref:o}))};Ts.propTypes=ws,Ts.defaultProps={tag:"span"};const Es=["cssModule","className","tag"],Ss={size:a.string,color:a.string,outline:a.bool,className:a.string,tag:mt},ks={color:"primary",tag:In},Cs=t=>{let{cssModule:n,className:r,tag:i}=t,o=nt(t,Es),{attributes:a,colClasses:s}=Xt(o,n);const c=at(l("placeholder",r,s),n);return e.createElement(In,tt({},a,{className:c,disabled:!0}))};Cs.propTypes=Ss,Cs.defaultProps=ks,"object"==typeof window&&"function"!=typeof window.CustomEvent&&(window.CustomEvent=(e,t)=>{t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}),"function"!=typeof Object.values&&(Object.values=e=>Object.keys(e).map((t=>e[t])));const Ms=[{name:"CH4 - Methane",key:"CH4"}];var Is=n.p+"eb20782cdf206bbfae10d6afb18f0c95.png",Ps=n(893);const As={container:{height:"60px",width:"100vw",position:"fixed",top:"0px",display:"flex",padding:"6px 15px 6px 15px",flexDirection:"row",backdropFilter:"blur(6px)",background:"rgba(75, 75, 75, 0.69)"},logoImage:{paddingRight:"18px"},logoTitle:{fontSize:"33px",lineHeight:"54px",color:"white"},inputs:{position:"absolute",right:"50px",height:"100%",display:"flex",justifyContent:"end"},inputContainer:{display:"flex",flexDirection:"column",marginLeft:"auto"},selectionInput:{width:"200px",height:"30px",marginTop:"6px",border:"none",borderRadius:"3px"},titleSpan:{color:"white",fontWeight:"500"}},Ds=({gas:e,setGas:t})=>{const n=Ms.map((e=>(0,Ps.jsx)("option",{name:e.name,value:e.key,children:e.name},e.key)));return(0,Ps.jsxs)("div",{style:As.container,children:[(0,Ps.jsx)("img",{style:As.logoImage,src:Is}),(0,Ps.jsx)("span",{style:As.logoTitle,children:"Astronomalies"}),(0,Ps.jsx)("div",{style:As.inputs,children:(0,Ps.jsxs)("div",{style:As.inputContainer,children:[(0,Ps.jsx)("span",{style:As.titleSpan,children:"Visualize Gas:"}),(0,Ps.jsx)(Wo,{style:As.selectionInput,value:e,type:"select",name:"visualize-gas",onChange:e=>{const n=e.currentTarget.name,r=e.currentTarget.value;"visualize-gas"===n&&t(r)},children:n})]})})]})};function zs(){return zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zs.apply(this,arguments)}function Rs(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Rs(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Os(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Rs(e))&&(r&&(r+=" "),r+=t);return r}var Ls=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0!==e.speedy&&e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1],n=64===e.charCodeAt(0)&&105===e.charCodeAt(1);if(n&&this._alreadyInsertedOrderInsensitiveRule&&console.error("You're attempting to insert the following rule:\n"+e+"\n\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules."),this._alreadyInsertedOrderInsensitiveRule=this._alreadyInsertedOrderInsensitiveRule||!n,this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(t){/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear){/.test(e)||console.error('There was a problem inserting the following rule: "'+e+'"',t)}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0,this._alreadyInsertedOrderInsensitiveRule=!1},e}(),Fs=Math.abs,Bs=String.fromCharCode,Ns=Object.assign;function Us(e){return e.trim()}function js(e,t,n){return e.replace(t,n)}function Vs(e,t){return e.indexOf(t)}function $s(e,t){return 0|e.charCodeAt(t)}function qs(e,t,n){return e.slice(t,n)}function Gs(e){return e.length}function Ws(e){return e.length}function Zs(e,t){return t.push(e),e}var Hs=1,Xs=1,Ys=0,Ks=0,Qs=0,Js="";function el(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Hs,column:Xs,length:a,return:""}}function tl(e,t){return Ns(el("",null,null,"",null,null,0),e,{length:-e.length},t)}function nl(){return Qs=Ks>0?$s(Js,--Ks):0,Xs--,10===Qs&&(Xs=1,Hs--),Qs}function rl(){return Qs=Ks<Ys?$s(Js,Ks++):0,Xs++,10===Qs&&(Xs=1,Hs++),Qs}function il(){return $s(Js,Ks)}function ol(){return Ks}function al(e,t){return qs(Js,e,t)}function sl(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ll(e){return Hs=Xs=1,Ys=Gs(Js=e),Ks=0,[]}function cl(e){return Js="",e}function ul(e){return Us(al(Ks-1,pl(91===e?e+2:40===e?e+1:e)))}function hl(e){for(;(Qs=il())&&Qs<33;)rl();return sl(e)>2||sl(Qs)>3?"":" "}function dl(e,t){for(;--t&&rl()&&!(Qs<48||Qs>102||Qs>57&&Qs<65||Qs>70&&Qs<97););return al(e,ol()+(t<6&&32==il()&&32==rl()))}function pl(e){for(;rl();)switch(Qs){case e:return Ks;case 34:case 39:34!==e&&39!==e&&pl(Qs);break;case 40:41===e&&pl(e);break;case 92:rl()}return Ks}function fl(e,t){for(;rl()&&e+Qs!==57&&(e+Qs!==84||47!==il()););return"/*"+al(t,Ks-1)+"*"+Bs(47===e?e:rl())}function ml(e){for(;!sl(il());)rl();return al(e,Ks)}var gl="-ms-",yl="-moz-",_l="-webkit-",vl="comm",xl="rule",bl="decl",wl="@keyframes";function Tl(e,t){for(var n="",r=Ws(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function El(e,t,n,r){switch(e.type){case"@import":case bl:return e.return=e.return||e.value;case vl:return"";case wl:return e.return=e.value+"{"+Tl(e.children,r)+"}";case xl:e.value=e.props.join(",")}return Gs(n=Tl(e.children,r))?e.return=e.value+"{"+n+"}":""}function Sl(e,t){switch(function(e,t){return(((t<<2^$s(e,0))<<2^$s(e,1))<<2^$s(e,2))<<2^$s(e,3)}(e,t)){case 5103:return _l+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _l+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return _l+e+yl+e+gl+e+e;case 6828:case 4268:return _l+e+gl+e+e;case 6165:return _l+e+gl+"flex-"+e+e;case 5187:return _l+e+js(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return _l+e+gl+"flex-item-"+js(e,/flex-|-self/,"")+e;case 4675:return _l+e+gl+"flex-line-pack"+js(e,/align-content|flex-|-self/,"")+e;case 5548:return _l+e+gl+js(e,"shrink","negative")+e;case 5292:return _l+e+gl+js(e,"basis","preferred-size")+e;case 6060:return _l+"box-"+js(e,"-grow","")+_l+e+gl+js(e,"grow","positive")+e;case 4554:return _l+js(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return js(js(js(e,/(zoom-|grab)/,_l+"$1"),/(image-set)/,_l+"$1"),e,"")+e;case 5495:case 3959:return js(e,/(image-set\([^]*)/,_l+"$1$`$1");case 4968:return js(js(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+_l+e+e;case 4095:case 3583:case 4068:case 2532:return js(e,/(.+)-inline(.+)/,_l+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Gs(e)-1-t>6)switch($s(e,t+1)){case 109:if(45!==$s(e,t+4))break;case 102:return js(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+yl+(108==$s(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Vs(e,"stretch")?Sl(js(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==$s(e,t+1))break;case 6444:switch($s(e,Gs(e)-3-(~Vs(e,"!important")&&10))){case 107:return js(e,":",":"+_l)+e;case 101:return js(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_l+(45===$s(e,14)?"inline-":"")+"box$3$1"+_l+"$2$3$1"+gl+"$2box$3")+e}break;case 5936:switch($s(e,t+11)){case 114:return _l+e+gl+js(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return _l+e+gl+js(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return _l+e+gl+js(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return _l+e+gl+e+e}return e}function kl(e){return cl(Cl("",null,null,null,[""],e=ll(e),0,[0],e))}function Cl(e,t,n,r,i,o,a,s,l){for(var c=0,u=0,h=a,d=0,p=0,f=0,m=1,g=1,y=1,_=0,v="",x=i,b=o,w=r,T=v;g;)switch(f=_,_=rl()){case 40:if(108!=f&&58==T.charCodeAt(h-1)){-1!=Vs(T+=js(ul(_),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:T+=ul(_);break;case 9:case 10:case 13:case 32:T+=hl(f);break;case 92:T+=dl(ol()-1,7);continue;case 47:switch(il()){case 42:case 47:Zs(Il(fl(rl(),ol()),t,n),l);break;default:T+="/"}break;case 123*m:s[c++]=Gs(T)*y;case 125*m:case 59:case 0:switch(_){case 0:case 125:g=0;case 59+u:p>0&&Gs(T)-h&&Zs(p>32?Pl(T+";",r,n,h-1):Pl(js(T," ","")+";",r,n,h-2),l);break;case 59:T+=";";default:if(Zs(w=Ml(T,t,n,c,u,i,s,v,x=[],b=[],h),o),123===_)if(0===u)Cl(T,t,w,w,x,o,h,s,b);else switch(d){case 100:case 109:case 115:Cl(e,w,w,r&&Zs(Ml(e,w,w,0,0,i,s,v,i,x=[],h),b),i,b,h,s,r?x:b);break;default:Cl(T,w,w,w,[""],b,0,s,b)}}c=u=p=0,m=y=1,v=T="",h=a;break;case 58:h=1+Gs(T),p=f;default:if(m<1)if(123==_)--m;else if(125==_&&0==m++&&125==nl())continue;switch(T+=Bs(_),_*m){case 38:y=u>0?1:(T+="\f",-1);break;case 44:s[c++]=(Gs(T)-1)*y,y=1;break;case 64:45===il()&&(T+=ul(rl())),d=il(),u=h=Gs(v=T+=ml(ol())),_++;break;case 45:45===f&&2==Gs(T)&&(m=0)}}return o}function Ml(e,t,n,r,i,o,a,s,l,c,u){for(var h=i-1,d=0===i?o:[""],p=Ws(d),f=0,m=0,g=0;f<r;++f)for(var y=0,_=qs(e,h+1,h=Fs(m=a[f])),v=e;y<p;++y)(v=Us(m>0?d[y]+" "+_:js(_,/&\f/g,d[y])))&&(l[g++]=v);return el(e,t,n,0===i?xl:s,l,c,u)}function Il(e,t,n){return el(e,t,n,vl,Bs(Qs),qs(e,2,-2),0)}function Pl(e,t,n,r){return el(e,t,n,bl,qs(e,0,r),qs(e,r+1,-1),r)}var Al=function(e,t,n){for(var r=0,i=0;r=i,i=il(),38===r&&12===i&&(t[n]=1),!sl(i);)rl();return al(e,Ks)},Dl=new WeakMap,zl=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Dl.get(n))&&!r){Dl.set(e,!0);for(var i=[],o=function(e,t){return cl(function(e,t){var n=-1,r=44;do{switch(sl(r)){case 0:38===r&&12===il()&&(t[n]=1),e[n]+=Al(Ks-1,t,n);break;case 2:e[n]+=ul(r);break;case 4:if(44===r){e[++n]=58===il()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Bs(r)}}while(r=rl());return e}(ll(e),t))}(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},Rl=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},Ol=function(e){return 105===e.type.charCodeAt(1)&&64===e.type.charCodeAt(0)},Ll=function(e){e.type="",e.value="",e.return="",e.children="",e.props=""},Fl=function(e,t,n){Ol(e)&&(e.parent?(console.error("`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles."),Ll(e)):function(e,t){for(var n=e-1;n>=0;n--)if(!Ol(t[n]))return!0;return!1}(t,n)&&(console.error("`@import` rules can't be after other rules. Please put your `@import` rules before your other rules."),Ll(e)))},Bl=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case bl:e.return=Sl(e.value,e.length);break;case wl:return Tl([tl(e,{value:js(e.value,"@","@"+_l)})],r);case xl:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return Tl([tl(e,{props:[js(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Tl([tl(e,{props:[js(t,/:(plac\w+)/,":-webkit-input-$1")]}),tl(e,{props:[js(t,/:(plac\w+)/,":-moz-$1")]}),tl(e,{props:[js(t,/:(plac\w+)/,gl+"input-$1")]})],r)}return""}))}}],Nl=function(e){var t=e.key;if(!t)throw new Error("You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\nIf multiple caches share the same key they might \"fight\" for each other's style elements.");if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Bl;if(/[^a-z-]/.test(t))throw new Error('Emotion key must only contain lower case alphabetical characters and - but "'+t+'" was passed');var i,o,a={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var l=[zl,Rl];l.push(function(e){return function(t,n,r){if("rule"===t.type){var i,o=t.value.match(/(:first|:nth|:nth-last)-child/g);if(o&&!0!==e.compat){var a=n>0?r[n-1]:null;if(a&&function(e){return!!e&&"comm"===e.type&&e.children.indexOf("emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason")>-1}((i=a.children).length?i[i.length-1]:null))return;o.forEach((function(e){console.error('The pseudo class "'+e+'" is potentially unsafe when doing server-side rendering. Try changing it to "'+e.split("-child")[0]+'-of-type".')}))}}}}({get compat(){return f.compat}}),Fl);var c,u,h,d=[El,function(e){e.root||(e.return?c.insert(e.return):e.value&&e.type!==vl&&c.insert(e.value+"{}"))}],p=(u=l.concat(r,d),h=Ws(u),function(e,t,n,r){for(var i="",o=0;o<h;o++)i+=u[o](e,t,n,r)||"";return i});o=function(e,t,n,r){c=n,void 0!==t.map&&(c={insert:function(e){n.insert(e+t.map)}}),function(e){Tl(kl(e),p)}(e?e+"{"+t.styles+"}":t.styles),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new Ls({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(s),f};function Ul(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var jl=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Vl=function(e,t,n){jl(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},$l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ql=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},Gl="You have illegal escape sequence in your template literal, most likely inside content's property value.\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \"content: '\\00d7';\" should become \"content: '\\\\00d7';\".\nYou can read more about this here:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences",Wl=/[A-Z]|^ms/g,Zl=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Hl=function(e){return 45===e.charCodeAt(1)},Xl=function(e){return null!=e&&"boolean"!=typeof e},Yl=ql((function(e){return Hl(e)?e:e.replace(Wl,"-$&").toLowerCase()})),Kl=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Zl,(function(e,t,n){return ac={name:t,styles:n,next:ac},t}))}return 1===$l[e]||Hl(e)||"number"!=typeof t||0===t?t:t+"px"},Ql=/(var|attr|counters?|url|(((repeating-)?(linear|radial))|conic)-gradient)\(|(no-)?(open|close)-quote/,Jl=["normal","none","initial","inherit","unset"],ec=Kl,tc=/^-ms-/,nc=/-(.)/g,rc={};function ic(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles){if("NO_COMPONENT_SELECTOR"===n.toString())throw new Error("Component selectors can only be used in conjunction with @emotion/babel-plugin.");return n}switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return ac={name:n.name,styles:n.styles,next:ac},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)ac={name:r.name,styles:r.styles,next:ac},r=r.next;var i=n.styles+";";return void 0!==n.map&&(i+=n.map),i}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=ic(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":Xl(a)&&(r+=Yl(o)+":"+Kl(o,a)+";");else{if("NO_COMPONENT_SELECTOR"===o)throw new Error("Component selectors can only be used in conjunction with @emotion/babel-plugin.");if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=ic(e,t,a);switch(o){case"animation":case"animationName":r+=Yl(o)+":"+s+";";break;default:"undefined"===o&&console.error("You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key)."),r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)Xl(a[l])&&(r+=Yl(o)+":"+Kl(o,a[l])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var o=ac,a=n(e);return ac=o,ic(e,t,a)}console.error("Functions that are interpolated in css calls will be stringified.\nIf you want to have a css call based on props, create a function that returns a css call like this\nlet dynamicStyle = (props) => css`color: ${props.color}`\nIt can be called directly with props or interpolated in a styled call like this\nlet SomeComponent = styled('div')`${dynamicStyle}`");break;case"string":var s=[],l=n.replace(Zl,(function(e,t,n){var r="animation"+s.length;return s.push("const "+r+" = keyframes`"+n.replace(/^@keyframes animation-\w+/,"")+"`"),"${"+r+"}"}));s.length&&console.error("`keyframes` output got interpolated into plain string, please wrap it with `css`.\n\nInstead of doing this:\n\n"+[].concat(s,["`"+l+"`"]).join("\n")+"\n\nYou should wrap it with `css` like this:\n\ncss`"+l+"`")}if(null==t)return n;var c=t[n];return void 0!==c?c:n}Kl=function(e,t){if("content"===e&&("string"!=typeof t||-1===Jl.indexOf(t)&&!Ql.test(t)&&(t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0))))throw new Error("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\""+t+"\"'`");var n=ec(e,t);return""===n||Hl(e)||-1===e.indexOf("-")||void 0!==rc[e]||(rc[e]=!0,console.error("Using kebab-case for css properties in objects is not supported. Did you mean "+e.replace(tc,"ms-").replace(nc,(function(e,t){return t.toUpperCase()}))+"?")),n};var oc,ac,sc=/label:\s*([^\s;\n{]+)\s*(;|$)/g;oc=/\/\*#\ssourceMappingURL=data:application\/json;\S+\s+\*\//g;var lc=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";ac=void 0;var o,a=e[0];null==a||void 0===a.raw?(r=!1,i+=ic(n,t,a)):(void 0===a[0]&&console.error(Gl),i+=a[0]);for(var s=1;s<e.length;s++)i+=ic(n,t,e[s]),r&&(void 0===a[s]&&console.error(Gl),i+=a[s]);i=i.replace(oc,(function(e){return o=e,""})),sc.lastIndex=0;for(var l,c="";null!==(l=sc.exec(i));)c+="-"+l[1];var u=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+c;return{name:u,styles:i,map:o,next:ac,toString:function(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}}},cc={}.hasOwnProperty,uc=(0,e.createContext)("undefined"!=typeof HTMLElement?Nl({key:"css"}):null);uc.displayName="EmotionCacheContext",uc.Provider;var hc=function(t){return(0,e.forwardRef)((function(n,r){var i=(0,e.useContext)(uc);return t(n,i,r)}))},dc=(0,e.createContext)({});dc.displayName="EmotionThemeContext";var pc=e.useInsertionEffect?e.useInsertionEffect:function(e){e()};function fc(e){pc(e)}var mc="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",gc="__EMOTION_LABEL_PLEASE_DO_NOT_USE__",yc=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return jl(t,n,r),fc((function(){return Vl(t,n,r)})),null};hc((function(t,n,r){var i=t.css;"string"==typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var o=t[mc],a=[i],s="";"string"==typeof t.className?s=Ul(n.registered,a,t.className):null!=t.className&&(s=t.className+" ");var l=lc(a,void 0,(0,e.useContext)(dc));if(-1===l.name.indexOf("-")){var c=t[gc];c&&(l=lc([l,"label:"+c+";"]))}s+=n.key+"-"+l.name;var u={};for(var h in t)cc.call(t,h)&&"css"!==h&&h!==mc&&h!==gc&&(u[h]=t[h]);return u.ref=r,u.className=s,(0,e.createElement)(e.Fragment,null,(0,e.createElement)(yc,{cache:n,serialized:l,isStringTag:"string"==typeof o}),(0,e.createElement)(o,u))})).displayName="EmotionCssPropInternal",n(679);var _c=e.useInsertionEffect?e.useInsertionEffect:e.useLayoutEffect,vc=!1,xc=hc((function(t,n){vc||!t.className&&!t.css||(console.error("It looks like you're using the css prop on Global, did you mean to use the styles prop instead?"),vc=!0);var r=t.styles,i=lc([r],void 0,(0,e.useContext)(dc)),o=(0,e.useRef)();return _c((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",e),t.hydrate([a])),o.current=[t,r],function(){t.flush()}}),[n]),_c((function(){var e=o.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&Vl(n,i.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",i,t,!1)}}),[n,i.name]),null}));function bc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lc(t)}xc.displayName="EmotionGlobal";var wc=function(){var e=bc.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Tc=function e(t){for(var n=t.length,r=0,i="";r<n;r++){var o=t[r];if(null!=o){var a=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))a=e(o);else for(var s in void 0!==o.styles&&void 0!==o.name&&console.error("You have passed styles created with `css` from `@emotion/react` package to the `cx`.\n`cx` is meant to compose class names (strings) so you should convert those styles to a class name by passing them to the `css` received from <ClassNames/> component."),a="",o)o[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=o}a&&(i&&(i+=" "),i+=a)}}return i};function Ec(e,t,n){var r=[],i=Ul(e,r,n);return r.length<2?n:i+t(r)}var Sc=function(e){var t=e.cache,n=e.serializedArr;return fc((function(){for(var e=0;e<n.length;e++)Vl(t,n[e],!1)})),null},kc=hc((function(t,n){var r=!1,i=[],o=function(){if(r)throw new Error("css can only be used during render");for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=lc(t,n.registered);return i.push(a),jl(n,a,!1),n.key+"-"+a.name},a={css:o,cx:function(){if(r)throw new Error("cx can only be used during render");for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ec(n.registered,o,Tc(t))},theme:(0,e.useContext)(dc)},s=t.children(a);return r=!0,(0,e.createElement)(e.Fragment,null,(0,e.createElement)(Sc,{cache:n,serializedArr:i}),s)}));if(kc.displayName="EmotionClassNames","undefined"==typeof jest){var Cc="undefined"!=typeof globalThis?globalThis:window,Mc="__EMOTION_REACT_"+"11.9.0".split(".")[0]+"__";Cc[Mc]&&console.warn("You are loading @emotion/react when it is already loaded. Running multiple instances may cause problems. This can happen if multiple versions are used, or if multiple builds of the same version are used."),Cc[Mc]=!0}function Ic(e){if("string"!=typeof e)throw new Error("MUI: `capitalize(string)` expects a string argument.");return e.charAt(0).toUpperCase()+e.slice(1)}var Pc=Ic;function Ac(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function Dc(e,t,n={clone:!0}){const r=n.clone?zs({},e):e;return Ac(e)&&Ac(t)&&Object.keys(t).forEach((i=>{"__proto__"!==i&&(Ac(t[i])&&i in e&&Ac(e[i])?r[i]=Dc(e[i],t[i],n):r[i]=t[i])})),r}const zc=["values","unit","step"];var Rc={borderRadius:4},Oc=s().oneOfType([s().number,s().string,s().object,s().array]);const Lc={xs:0,sm:600,md:900,lg:1200,xl:1536},Fc={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Lc[e]}px)`};function Bc(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||Fc;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"==typeof t){const e=r.breakpoints||Fc;return Object.keys(t).reduce(((r,i)=>{if(-1!==Object.keys(e.values||Lc).indexOf(i))r[e.up(i)]=n(t[i],i);else{const e=i;r[e]=t[e]}return r}),{})}return n(t)}function Nc(e,t){if(!t||"string"!=typeof t)return null;if(e&&e.vars){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e)}function Uc(e,t,n,r=n){let i;return i="function"==typeof e?e(n):Array.isArray(e)?e[n]||r:Nc(e,n)||r,t&&(i=t(i)),i}var jc=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],a=Nc(e.theme,r)||{};return Bc(e,o,(e=>{let r=Uc(a,i,e);return e===r&&"string"==typeof e&&(r=Uc(a,i,`${t}${"default"===e?"":Ic(e)}`,e)),!1===n?r:{[n]:r}}))};return o.propTypes={[t]:Oc},o.filterProps=[t],o},Vc=function(e,t){return t?Dc(e,t,{clone:!1}):e};const $c={m:"margin",p:"padding"},qc={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Gc={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Wc=function(e){const t={};return e=>(void 0===t[e]&&(t[e]=(e=>{if(e.length>2){if(!Gc[e])return[e];e=Gc[e]}const[t,n]=e.split(""),r=$c[t],i=qc[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})(e)),t[e])}(),Zc=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Hc=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Xc=[...Zc,...Hc];function Yc(e,t,n,r){const i=Nc(e,t)||n;return"number"==typeof i?e=>"string"==typeof e?e:("number"!=typeof e&&console.error(`MUI: Expected ${r} argument to be a number or a string, got ${e}.`),i*e):Array.isArray(i)?e=>"string"==typeof e?e:(Number.isInteger(e)?e>i.length-1&&console.error([`MUI: The value provided (${e}) overflows.`,`The supported values are: ${JSON.stringify(i)}.`,`${e} > ${i.length-1}, you need to add the missing values.`].join("\n")):console.error([`MUI: The \`theme.${t}\` array type cannot be combined with non integer values.You should either use an integer value that can be used as index, or define the \`theme.${t}\` as a number.`].join("\n")),i[e]):"function"==typeof i?i:(console.error([`MUI: The \`theme.${t}\` value (${i}) is invalid.`,"It should be a number, an array or a function."].join("\n")),()=>{})}function Kc(e){return Yc(e,"spacing",8,"spacing")}function Qc(e,t){if("string"==typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"==typeof n?-n:`-${n}`}function Jc(e,t){const n=Kc(e.theme);return Object.keys(e).map((r=>function(e,t,n,r){if(-1===t.indexOf(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=Qc(t,n),e)),{})}(Wc(n),r);return Bc(e,e[n],i)}(e,t,r,n))).reduce(Vc,{})}function eu(e){return Jc(e,Zc)}function tu(e){return Jc(e,Hc)}function nu(e){return Jc(e,Xc)}eu.propTypes=Zc.reduce(((e,t)=>(e[t]=Oc,e)),{}),eu.filterProps=Zc,tu.propTypes=Hc.reduce(((e,t)=>(e[t]=Oc,e)),{}),tu.filterProps=Hc,nu.propTypes=Xc.reduce(((e,t)=>(e[t]=Oc,e)),{}),nu.filterProps=Xc;var ru=nu;const iu=["breakpoints","palette","spacing","shape"];var ou=function(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:o={}}=e,a=Ue(e,iu),s=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=Ue(e,zc),o=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>zs({},e,{[t.key]:t.val})),{})})(t),a=Object.keys(o);function s(e){return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"==typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const o=a.indexOf(i);return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==o&&"number"==typeof t[a[o]]?t[a[o]]:i)-r/100}${n})`}return zs({keys:a,values:o,up:s,down:l,between:c,only:function(e){return a.indexOf(e)+1<a.length?c(e,a[a.indexOf(e)+1]):s(e)},not:function(e){const t=a.indexOf(e);return 0===t?s(a[1]):t===a.length-1?l(a[t]):c(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},i)}(n),l=function(e=8){if(e.mui)return e;const t=Kc({spacing:e}),n=(...e)=>(e.length<=4||console.error(`MUI: Too many arguments provided, expected between 0 and 4, got ${e.length}`),(0===e.length?[1]:e).map((e=>{const n=t(e);return"number"==typeof n?`${n}px`:n})).join(" "));return n.mui=!0,n}(i);let c=Dc({breakpoints:s,direction:"ltr",components:{},palette:zs({mode:"light"},r),spacing:l,shape:zs({},Rc,o)},a);return c=t.reduce(((e,t)=>Dc(e,t)),c),c};const au=e.createContext(null);au.displayName="ThemeContext";var su=au;const lu=ou();var cu=function(t=lu){return function(t=null){const n=function(){const t=e.useContext(su);return e.useDebugValue(t),t}();return n&&(r=n,0!==Object.keys(r).length)?n:t;var r}(t)};const uu=e=>e;var hu=(()=>{let e=uu;return{configure(t){e=t},generate:t=>e(t),reset(){e=uu}}})();const du={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function pu(e,t){return du[t]||`${hu.generate(e)}-${t}`}function fu(e,t=0,n=1){return(e<t||e>n)&&console.error(`MUI: The value provided ${e} is out of range [${t}, ${n}].`),Math.min(Math.max(t,e),n)}function mu(e){if(e.type)return e;if("#"===e.charAt(0))return mu(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(`MUI: Unsupported \`${e}\` color.\nThe following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().`);let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(`MUI: unsupported \`${r}\` color space.\nThe following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function gu(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function yu(e){let t="hsl"===(e=mu(e)).type?mu(function(e){e=mu(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=(e,t=(e+n/30)%12)=>i-o*Math.max(Math.min(t-3,9-t,1),-1);let s="rgb";const l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),gu({type:s,values:l})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function _u(e,t){const n=yu(e),r=yu(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}var vu={black:"#000",white:"#fff"},xu={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},bu="#f3e5f5",wu="#ce93d8",Tu="#ba68c8",Eu="#ab47bc",Su="#9c27b0",ku="#7b1fa2",Cu="#e57373",Mu="#ef5350",Iu="#f44336",Pu="#d32f2f",Au="#c62828",Du="#ffb74d",zu="#ffa726",Ru="#ff9800",Ou="#f57c00",Lu="#e65100",Fu="#e3f2fd",Bu="#90caf9",Nu="#42a5f5",Uu="#1976d2",ju="#1565c0",Vu="#4fc3f7",$u="#29b6f6",qu="#03a9f4",Gu="#0288d1",Wu="#01579b",Zu="#81c784",Hu="#66bb6a",Xu="#4caf50",Yu="#388e3c",Ku="#2e7d32",Qu="#1b5e20";const Ju=["mode","contrastThreshold","tonalOffset"],eh={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:vu.white,default:vu.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},th={text:{primary:vu.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:vu.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function nh(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=function(e,t){if(e=mu(e),t=fu(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return gu(e)}(e.main,i):"dark"===t&&(e.dark=function(e,t){if(e=mu(e),t=fu(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return gu(e)}(e.main,o)))}const rh=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"],ih={textTransform:"uppercase"},oh='"Roboto", "Helvetica", "Arial", sans-serif';function ah(e,t){const n="function"==typeof t?t(e):t,{fontFamily:r=oh,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:a=400,fontWeightMedium:s=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=n,d=Ue(n,rh);"number"!=typeof i&&console.error("MUI: `fontSize` is required to be a number."),"number"!=typeof c&&console.error("MUI: `htmlFontSize` is required to be a number.");const p=i/14,f=h||(e=>e/c*p+"rem"),m=(e,t,n,i,o)=>{return zs({fontFamily:r,fontWeight:e,fontSize:f(t),lineHeight:n},r===oh?{letterSpacing:(a=i/t,Math.round(1e5*a)/1e5+"em")}:{},o,u);var a},g={h1:m(o,96,1.167,-1.5),h2:m(o,60,1.2,-.5),h3:m(a,48,1.167,0),h4:m(a,34,1.235,.25),h5:m(a,24,1.334,0),h6:m(s,20,1.6,.15),subtitle1:m(a,16,1.75,.15),subtitle2:m(s,14,1.57,.1),body1:m(a,16,1.5,.15),body2:m(a,14,1.43,.15),button:m(s,14,1.75,.4,ih),caption:m(a,12,1.66,.4),overline:m(a,12,2.66,1,ih)};return Dc(zs({htmlFontSize:c,pxToRem:f,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:a,fontWeightMedium:s,fontWeightBold:l},g),d,{clone:!1})}function sh(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}var lh=["none",sh(0,2,1,-1,0,1,1,0,0,1,3,0),sh(0,3,1,-2,0,2,2,0,0,1,5,0),sh(0,3,3,-2,0,3,4,0,0,1,8,0),sh(0,2,4,-1,0,4,5,0,0,1,10,0),sh(0,3,5,-1,0,5,8,0,0,1,14,0),sh(0,3,5,-1,0,6,10,0,0,1,18,0),sh(0,4,5,-2,0,7,10,1,0,2,16,1),sh(0,5,5,-3,0,8,10,1,0,3,14,2),sh(0,5,6,-3,0,9,12,1,0,3,16,2),sh(0,6,6,-3,0,10,14,1,0,4,18,3),sh(0,6,7,-4,0,11,15,1,0,4,20,3),sh(0,7,8,-4,0,12,17,2,0,5,22,4),sh(0,7,8,-4,0,13,19,2,0,5,24,4),sh(0,7,9,-4,0,14,21,2,0,5,26,4),sh(0,8,9,-5,0,15,22,2,0,6,28,5),sh(0,8,10,-5,0,16,24,2,0,6,30,5),sh(0,8,11,-5,0,17,26,2,0,6,32,5),sh(0,9,11,-5,0,18,28,2,0,7,34,6),sh(0,9,12,-6,0,19,29,2,0,7,36,6),sh(0,10,13,-6,0,20,31,3,0,8,38,7),sh(0,10,13,-6,0,21,33,3,0,8,40,7),sh(0,10,14,-6,0,22,35,3,0,8,42,7),sh(0,11,14,-7,0,23,36,3,0,9,44,8),sh(0,11,15,-7,0,24,38,3,0,9,46,8)];const ch=["duration","easing","delay"],uh={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},hh={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function dh(e){return`${Math.round(e)}ms`}function ph(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function fh(e){const t=zs({},uh,e.easing),n=zs({},hh,e.duration);return zs({getAutoHeightDuration:ph,create:(e=["all"],r={})=>{const{duration:i=n.standard,easing:o=t.easeInOut,delay:a=0}=r,s=Ue(r,ch);{const t=e=>"string"==typeof e,n=e=>!isNaN(parseFloat(e));t(e)||Array.isArray(e)||console.error('MUI: Argument "props" must be a string or Array.'),n(i)||t(i)||console.error(`MUI: Argument "duration" must be a number or a string but found ${i}.`),t(o)||console.error('MUI: Argument "easing" must be a string.'),n(a)||t(a)||console.error('MUI: Argument "delay" must be a number or a string.'),0!==Object.keys(s).length&&console.error(`MUI: Unrecognized argument(s) [${Object.keys(s).join(",")}].`)}return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof i?i:dh(i)} ${o} ${"string"==typeof a?a:dh(a)}`)).join(",")}},e,{easing:t,duration:n})}var mh={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const gh=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];var yh=function(e={},...t){const{mixins:n={},palette:r={},transitions:i={},typography:o={}}=e,a=Ue(e,gh),s=function(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=Ue(e,Ju),o=e.primary||function(e="light"){return"dark"===e?{main:Bu,light:Fu,dark:Nu}:{main:Uu,light:Nu,dark:ju}}(t),a=e.secondary||function(e="light"){return"dark"===e?{main:wu,light:bu,dark:Eu}:{main:Su,light:Tu,dark:ku}}(t),s=e.error||function(e="light"){return"dark"===e?{main:Iu,light:Cu,dark:Pu}:{main:Pu,light:Mu,dark:Au}}(t),l=e.info||function(e="light"){return"dark"===e?{main:$u,light:Vu,dark:Gu}:{main:Gu,light:qu,dark:Wu}}(t),c=e.success||function(e="light"){return"dark"===e?{main:Hu,light:Zu,dark:Yu}:{main:Ku,light:Xu,dark:Qu}}(t),u=e.warning||function(e="light"){return"dark"===e?{main:zu,light:Du,dark:Ou}:{main:"#ed6c02",light:Ru,dark:Lu}}(t);function h(e){const t=_u(e,th.text.primary)>=n?th.text.primary:eh.text.primary;{const n=_u(e,t);n<3&&console.error([`MUI: The contrast ratio of ${n}:1 for ${t} on ${e}`,"falls below the WCAG recommended absolute minimum contrast ratio of 3:1.","https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast"].join("\n"))}return t}const d=({color:e,name:t,mainShade:n=500,lightShade:i=300,darkShade:o=700})=>{if(!(e=zs({},e)).main&&e[n]&&(e.main=e[n]),!e.hasOwnProperty("main"))throw new Error(`MUI: The color${t?` (${t})`:""} provided to augmentColor(color) is invalid.\nThe color object needs to have a \`main\` property or a \`${n}\` property.`);if("string"!=typeof e.main)throw new Error(`MUI: The color${t?` (${t})`:""} provided to augmentColor(color) is invalid.\n\`color.main\` should be a string, but \`${JSON.stringify(e.main)}\` was provided instead.\n\nDid you intend to use one of the following approaches?\n\nimport { green } from "@mui/material/colors";\n\nconst theme1 = createTheme({ palette: {\n  primary: green,\n} });\n\nconst theme2 = createTheme({ palette: {\n  primary: { main: green[500] },\n} });`);return nh(e,"light",i,r),nh(e,"dark",o,r),e.contrastText||(e.contrastText=h(e.main)),e},p={dark:th,light:eh};return p[t]||console.error(`MUI: The palette mode \`${t}\` is not supported.`),Dc(zs({common:vu,mode:t,primary:d({color:o,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:s,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:xu,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:r},p[t]),i)}(r),l=ou(e);let c=Dc(l,{mixins:(u=l.breakpoints,l.spacing,h=n,zs({toolbar:{minHeight:56,[`${u.up("xs")} and (orientation: landscape)`]:{minHeight:48},[u.up("sm")]:{minHeight:64}}},h)),palette:s,shadows:lh.slice(),typography:ah(s,o),transitions:fh(i),zIndex:zs({},mh)});var u,h;c=Dc(c,a),c=t.reduce(((e,t)=>Dc(e,t)),c);{const e=["active","checked","completed","disabled","error","expanded","focused","focusVisible","required","selected"],t=(t,n)=>{let r;for(r in t){const i=t[r];if(-1!==e.indexOf(r)&&Object.keys(i).length>0){{const e=pu("",r);console.error([`MUI: The \`${n}\` component increases the CSS specificity of the \`${r}\` internal state.`,"You can not override it like this: ",JSON.stringify(t,null,2),"",`Instead, you need to use the '&.${e}' syntax:`,JSON.stringify({root:{[`&.${e}`]:i}},null,2),"","https://mui.com/r/state-classes-guide"].join("\n"))}t[r]={}}}};Object.keys(c.components).forEach((e=>{const n=c.components[e].styleOverrides;n&&0===e.indexOf("Mui")&&t(n,e)}))}return c}();function _h({props:e,name:t}){return function({props:e,name:t,defaultTheme:n}){return function(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){const n=zs({},t);return Object.keys(e).forEach((t=>{void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,r):r}({theme:cu(n),name:t,props:e})}({props:e,name:t,defaultTheme:yh})}var vh=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,xh=ql((function(e){return vh.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),bh=function(e){return"theme"!==e},wh=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?xh:bh},Th=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},Eh=e.useInsertionEffect?e.useInsertionEffect:function(e){e()},Sh="You have illegal escape sequence in your template literal, most likely inside content's property value.\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \"content: '\\00d7';\" should become \"content: '\\\\00d7';\".\nYou can read more about this here:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences",kh=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return jl(t,n,r),Eh((function(){return Vl(t,n,r)})),null},Ch=function t(n,r){if(void 0===n)throw new Error("You are trying to create a styled element with an undefined component.\nYou may have forgotten to import it.");var i,o,a=n.__emotion_real===n,s=a&&n.__emotion_base||n;void 0!==r&&(i=r.label,o=r.target);var l=Th(n,r,a),c=l||wh(s),u=!c("as");return function(){var h=arguments,d=a&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&d.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{void 0===h[0][0]&&console.error(Sh),d.push(h[0][0]);for(var p=h.length,f=1;f<p;f++)void 0===h[0][f]&&console.error(Sh),d.push(h[f],h[0][f])}var m=hc((function(t,n,r){var i=u&&t.as||s,a="",h=[],p=t;if(null==t.theme){for(var f in p={},t)p[f]=t[f];p.theme=(0,e.useContext)(dc)}"string"==typeof t.className?a=Ul(n.registered,h,t.className):null!=t.className&&(a=t.className+" ");var m=lc(d.concat(h),n.registered,p);a+=n.key+"-"+m.name,void 0!==o&&(a+=" "+o);var g=u&&void 0===l?wh(i):c,y={};for(var _ in t)u&&"as"===_||g(_)&&(y[_]=t[_]);return y.className=a,y.ref=r,(0,e.createElement)(e.Fragment,null,(0,e.createElement)(kh,{cache:n,serialized:m,isStringTag:"string"==typeof i}),(0,e.createElement)(i,y))}));return m.displayName=void 0!==i?i:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=n.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=d,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return void 0===o?"NO_COMPONENT_SELECTOR":"."+o}}),m.withComponent=function(e,n){return t(e,zs({},r,n,{shouldForwardProp:Th(m,n,!0)})).apply(void 0,d)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Ch[e]=Ch(e)}));var Mh=Ch,Ih=n(217);const Ph=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Ah(e,t=""){return e.displayName||e.name||function(e){const t=`${e}`.match(Ph);return t&&t[1]||""}(e)||t}function Dh(e,t,n){const r=Ah(t);return e.displayName||(""!==r?`${n}(${r})`:n)}const zh=["variant"];function Rh(e){return 0===e.length}function Oh(e){const{variant:t}=e,n=Ue(e,zh);let r=t||"";return Object.keys(n).sort().forEach((t=>{r+="color"===t?Rh(r)?e[t]:Ic(e[t]):`${Rh(r)?t:Ic(t)}${Ic(e[t].toString())}`})),r}var Lh=function(...e){const t=e.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),n=e=>Object.keys(e).reduce(((n,r)=>t[r]?Vc(n,t[r](e)):n),{});return n.propTypes=e.reduce(((e,t)=>Object.assign(e,t.propTypes)),{}),n.filterProps=e.reduce(((e,t)=>e.concat(t.filterProps)),[]),n};function Fh(e){return"number"!=typeof e?e:`${e}px solid`}const Bh=jc({prop:"border",themeKey:"borders",transform:Fh}),Nh=jc({prop:"borderTop",themeKey:"borders",transform:Fh}),Uh=jc({prop:"borderRight",themeKey:"borders",transform:Fh}),jh=jc({prop:"borderBottom",themeKey:"borders",transform:Fh}),Vh=jc({prop:"borderLeft",themeKey:"borders",transform:Fh}),$h=jc({prop:"borderColor",themeKey:"palette"}),qh=jc({prop:"borderTopColor",themeKey:"palette"}),Gh=jc({prop:"borderRightColor",themeKey:"palette"}),Wh=jc({prop:"borderBottomColor",themeKey:"palette"}),Zh=jc({prop:"borderLeftColor",themeKey:"palette"}),Hh=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=Yc(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:Qc(t,e)});return Bc(e,e.borderRadius,n)}return null};Hh.propTypes={borderRadius:Oc},Hh.filterProps=["borderRadius"];var Xh=Lh(Bh,Nh,Uh,jh,Vh,$h,qh,Gh,Wh,Zh,Hh),Yh=Lh(jc({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),jc({prop:"display"}),jc({prop:"overflow"}),jc({prop:"textOverflow"}),jc({prop:"visibility"}),jc({prop:"whiteSpace"})),Kh=Lh(jc({prop:"flexBasis"}),jc({prop:"flexDirection"}),jc({prop:"flexWrap"}),jc({prop:"justifyContent"}),jc({prop:"alignItems"}),jc({prop:"alignContent"}),jc({prop:"order"}),jc({prop:"flex"}),jc({prop:"flexGrow"}),jc({prop:"flexShrink"}),jc({prop:"alignSelf"}),jc({prop:"justifyItems"}),jc({prop:"justifySelf"}));const Qh=e=>{if(void 0!==e.gap&&null!==e.gap){const t=Yc(e.theme,"spacing",8,"gap"),n=e=>({gap:Qc(t,e)});return Bc(e,e.gap,n)}return null};Qh.propTypes={gap:Oc},Qh.filterProps=["gap"];const Jh=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=Yc(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:Qc(t,e)});return Bc(e,e.columnGap,n)}return null};Jh.propTypes={columnGap:Oc},Jh.filterProps=["columnGap"];const ed=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=Yc(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:Qc(t,e)});return Bc(e,e.rowGap,n)}return null};ed.propTypes={rowGap:Oc},ed.filterProps=["rowGap"];var td=Lh(Qh,Jh,ed,jc({prop:"gridColumn"}),jc({prop:"gridRow"}),jc({prop:"gridAutoFlow"}),jc({prop:"gridAutoColumns"}),jc({prop:"gridAutoRows"}),jc({prop:"gridTemplateColumns"}),jc({prop:"gridTemplateRows"}),jc({prop:"gridTemplateAreas"}),jc({prop:"gridArea"})),nd=Lh(jc({prop:"position"}),jc({prop:"zIndex",themeKey:"zIndex"}),jc({prop:"top"}),jc({prop:"right"}),jc({prop:"bottom"}),jc({prop:"left"})),rd=Lh(jc({prop:"color",themeKey:"palette"}),jc({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),jc({prop:"backgroundColor",themeKey:"palette"})),id=jc({prop:"boxShadow",themeKey:"shadows"});function od(e){return e<=1&&0!==e?100*e+"%":e}const ad=jc({prop:"width",transform:od}),sd=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||Lc[t]||od(t)}};return Bc(e,e.maxWidth,t)}return null};sd.filterProps=["maxWidth"];const ld=jc({prop:"minWidth",transform:od}),cd=jc({prop:"height",transform:od}),ud=jc({prop:"maxHeight",transform:od}),hd=jc({prop:"minHeight",transform:od});jc({prop:"size",cssProperty:"width",transform:od}),jc({prop:"size",cssProperty:"height",transform:od});var dd=Lh(ad,sd,ld,cd,ud,hd,jc({prop:"boxSizing"}));const pd=jc({prop:"fontFamily",themeKey:"typography"}),fd=jc({prop:"fontSize",themeKey:"typography"}),md=jc({prop:"fontStyle",themeKey:"typography"}),gd=jc({prop:"fontWeight",themeKey:"typography"}),yd=jc({prop:"letterSpacing"}),_d=jc({prop:"textTransform"}),vd=jc({prop:"lineHeight"}),xd=jc({prop:"textAlign"});var bd=Lh(jc({prop:"typography",cssProperty:!1,themeKey:"typography"}),pd,fd,md,gd,yd,vd,xd,_d);const wd={borders:Xh.filterProps,display:Yh.filterProps,flexbox:Kh.filterProps,grid:td.filterProps,positions:nd.filterProps,palette:rd.filterProps,shadows:id.filterProps,sizing:dd.filterProps,spacing:ru.filterProps,typography:bd.filterProps},Td={borders:Xh,display:Yh,flexbox:Kh,grid:td,positions:nd,palette:rd,shadows:id,sizing:dd,spacing:ru,typography:bd};Object.keys(wd).reduce(((e,t)=>(wd[t].forEach((n=>{e[n]=Td[t]})),e)),{});const Ed=function(e=Td){const t=Object.keys(e).reduce(((t,n)=>(e[n].filterProps.forEach((r=>{t[r]=e[n]})),t)),{});function n(e,n,r){const i={[e]:n,theme:r},o=t[e];return o?o(i):{[e]:n}}return function e(r){const{sx:i,theme:o={}}=r||{};if(!i)return null;function a(r){let i=r;if("function"==typeof r)i=r(o);else if("object"!=typeof r)return r;if(!i)return null;const a=function(e={}){var t;return(null==e||null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}(o.breakpoints),s=Object.keys(a);let l=a;return Object.keys(i).forEach((r=>{const a="function"==typeof(s=i[r])?s(o):s;var s;if(null!=a)if("object"==typeof a)if(t[r])l=Vc(l,n(r,a,o));else{const t=Bc({theme:o},a,(e=>({[r]:e})));!function(...e){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]),n=new Set(t);return e.every((e=>n.size===Object.keys(e).length))}(t,a)?l=Vc(l,t):l[r]=e({sx:a,theme:o})}else l=Vc(l,n(r,a,o))})),c=l,s.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),c);var c}return Array.isArray(i)?i.map(a):a(i)}}();Ed.filterProps=["sx"];var Sd=Ed;const kd=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Cd=["theme"],Md=["theme"];function Id(e){return 0===Object.keys(e).length}function Pd(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const Ad=ou(),Dd=function(e={}){const{defaultTheme:t=Ad,rootShouldForwardProp:n=Pd,slotShouldForwardProp:r=Pd,styleFunctionSx:i=Sd}=e;return(e,o={})=>{const{name:a,slot:s,skipVariantsResolver:l,skipSx:c,overridesResolver:u}=o,h=Ue(o,kd),d=void 0!==l?l:s&&"Root"!==s||!1,p=c||!1;let f;var m;a&&(f=`${a}-${m=s||"Root",m.charAt(0).toLowerCase()+m.slice(1)}`);let g=Pd;"Root"===s?g=n:s&&(g=r);const y=function(e,t){const n=Mh(e,t);return(...t)=>{const r="string"==typeof e?`"${e}"`:"component";return 0===t.length?console.error([`MUI: Seems like you called \`styled(${r})()\` without a \`style\` argument.`,'You must provide a `styles` argument: `styled("div")(styleYouForgotToPass)`.'].join("\n")):t.some((e=>void 0===e))&&console.error(`MUI: the styled(${r})(...args) API requires all its args to be defined.`),n(...t)}}(e,zs({shouldForwardProp:g,label:f},h)),_=(n,...r)=>{const o=r?r.map((e=>"function"==typeof e&&e.__emotion_real!==e?n=>{let{theme:r}=n,i=Ue(n,Cd);return e(zs({theme:Id(r)?t:r},i))}:e)):[];let l=n;a&&u&&o.push((e=>{const n=Id(e.theme)?t:e.theme,r=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(a,n);if(r){const t={};return Object.entries(r).forEach((([n,r])=>{t[n]="function"==typeof r?r(e):r})),u(e,t)}return null})),a&&!d&&o.push((e=>{const n=Id(e.theme)?t:e.theme;return((e,t,n,r)=>{var i,o;const{ownerState:a={}}=e,s=[],l=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return l&&l.forEach((n=>{let r=!0;Object.keys(n.props).forEach((t=>{a[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&s.push(t[Oh(n.props)])})),s})(e,((e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach((e=>{const t=Oh(e.props);r[t]=e.style})),r})(a,n),n,a)})),p||o.push((e=>{const n=Id(e.theme)?t:e.theme;return i(zs({},e,{theme:n}))}));const c=o.length-r.length;if(Array.isArray(n)&&c>0){const e=new Array(c).fill("");l=[...n,...e],l.raw=[...n.raw,...e]}else"function"==typeof n&&n.__emotion_real!==n&&(l=e=>{let{theme:r}=e,i=Ue(e,Md);return n(zs({theme:Id(r)?t:r},i))});const h=y(l,...o);{let t;a&&(t=`${a}${s||""}`),void 0===t&&(t=`Styled(${function(e){if(null!=e){if("string"==typeof e)return e;if("function"==typeof e)return Ah(e,"Component");if("object"==typeof e)switch(e.$$typeof){case Ih.ForwardRef:return Dh(e,e.render,"ForwardRef");case Ih.Memo:return Dh(e,e.type,"memo");default:return}}}(e)})`),h.displayName=t}return h};return y.withConfig&&(_.withConfig=y.withConfig),_}}({defaultTheme:yh,rootShouldForwardProp:e=>Pd(e)&&"classes"!==e});var zd=Dd;function Rd(e){return pu("MuiCircularProgress",e)}!function(e,t){const n={};["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"].forEach((e=>{n[e]=pu("MuiCircularProgress",e)}))}();const Od=["className","color","disableShrink","size","style","thickness","value","variant"];let Ld,Fd,Bd,Nd,Ud=e=>e;const jd=wc(Ld||(Ld=Ud`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Vd=wc(Fd||(Fd=Ud`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),$d=zd("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Pc(n.color)}`]]}})((({ownerState:e,theme:t})=>zs({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:t.palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&bc(Bd||(Bd=Ud`
      animation: ${0} 1.4s linear infinite;
    `),jd))),qd=zd("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Gd=zd("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Pc(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>zs({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&bc(Nd||(Nd=Ud`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Vd))),Wd=e.forwardRef((function(e,t){const n=_h({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:a=40,style:s,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,h=Ue(n,Od),d=zs({},n,{color:i,disableShrink:o,size:a,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e;return function(e,t,n){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>(r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e)),[]).join(" ")})),r}({root:["root",n,`color${Pc(r)}`],svg:["svg"],circle:["circle",`circle${Pc(n)}`,i&&"circleDisableShrink"]},Rd,t)})(d),f={},m={},g={};if("determinate"===u){const e=2*Math.PI*((44-l)/2);f.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),f.strokeDashoffset=`${((100-c)/100*e).toFixed(3)}px`,m.transform="rotate(-90deg)"}return(0,Ps.jsx)($d,zs({className:Os(p.root,r),style:zs({width:a,height:a},m,s),ownerState:d,ref:t,role:"progressbar"},g,h,{children:(0,Ps.jsx)(qd,{className:p.svg,ownerState:d,viewBox:"22 22 44 44",children:(0,Ps.jsx)(Gd,{className:p.circle,style:f,ownerState:d,cx:44,cy:44,r:(44-l)/2,fill:"none",strokeWidth:l})})}))}));var Zd,Hd;Wd.propTypes={classes:s().object,className:s().string,color:s().oneOfType([s().oneOf(["inherit","primary","secondary","error","info","success","warning"]),s().string]),disableShrink:(Zd=s().bool,Hd=e=>e.disableShrink&&e.variant&&"indeterminate"!==e.variant?new Error("MUI: You have provided the `disableShrink` prop with a variant other than `indeterminate`. This will have no effect."):null,function(...e){return Zd(...e)||Hd(...e)}),size:s().oneOfType([s().number,s().string]),style:s().object,sx:s().oneOfType([s().arrayOf(s().oneOfType([s().func,s().object,s().bool])),s().func,s().object]),thickness:s().number,value:s().number,variant:s().oneOf(["determinate","indeterminate"])};var Xd=Wd;const Yd={container:{width:"100vw",height:"100vh",zIndex:"10000",display:"flex",backdropFilter:"blur(9px)",background:"rgba(75, 75, 75, 0.69)",position:"fixed"},progressContainer:{margin:"auto",color:"white"}},Kd=()=>(0,Ps.jsx)("div",{style:Yd.container,children:(0,Ps.jsx)("div",{style:Yd.progressContainer,children:(0,Ps.jsx)(Xd,{size:75,color:"inherit"})})}),Qd={container:{position:"fixed",bottom:"99px",right:"15px",display:"flex",padding:"9px",fontWeight:"bold",borderRadius:"6px",color:"white",backgroundColor:"#4B4B4B",opacity:"0.81"}},Jd=({lat:e,lng:t,zoom:n})=>(0,Ps.jsxs)("div",{style:Qd.container,children:["Latitude: ",e," | Longitude: ",t," | Zoom: ",n]}),ep=e.createContext(null);function tp(t){const{children:n,dateAdapter:r,dateFormats:i,dateLibInstance:o,locale:a}=t,s=e.useMemo((()=>new r({locale:a,formats:i,instance:o})),[r,a,i,o]),l=e.useMemo((()=>({minDate:s.date("1900-01-01T00:00:00.000"),maxDate:s.date("2099-12-31T00:00:00.000")})),[s]),c=e.useMemo((()=>({utils:s,defaultDates:l})),[l,s]);return(0,Ps.jsx)(ep.Provider,{value:c,children:n})}function np(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function rp(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ip(e){rp(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function op(e,t){rp(2,arguments);var n=ip(e),r=np(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function ap(e,t){rp(2,arguments);var n=ip(e).getTime(),r=np(t);return new Date(n+r)}ep.displayName="MuiPickersAdapterContext",tp.propTypes={children:s().node,dateAdapter:s().func.isRequired,dateFormats:s().shape({dayOfMonth:s().string,fullDate:s().string,fullDateTime:s().string,fullDateTime12h:s().string,fullDateTime24h:s().string,fullDateWithWeekday:s().string,fullTime:s().string,fullTime12h:s().string,fullTime24h:s().string,hours12h:s().string,hours24h:s().string,keyboardDate:s().string,keyboardDateTime:s().string,keyboardDateTime12h:s().string,keyboardDateTime24h:s().string,minutes:s().string,month:s().string,monthAndDate:s().string,monthAndYear:s().string,monthShort:s().string,normalDate:s().string,normalDateWithWeekday:s().string,seconds:s().string,shortDate:s().string,weekday:s().string,weekdayShort:s().string,year:s().string}),dateLibInstance:s().any,locale:s().oneOfType([s().object,s().string])};var sp=36e5;function lp(e,t){rp(2,arguments);var n=ip(e),r=np(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+r+1,0);var a=o.getDate();return i>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function cp(e,t){rp(2,arguments);var n=np(t);return lp(e,12*n)}function up(e,t){rp(2,arguments);var n=ip(e),r=ip(t);return n.getFullYear()-r.getFullYear()}function hp(e,t){rp(2,arguments);var n=ip(e),r=ip(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function dp(e,t){rp(2,arguments);var n=ip(e),r=ip(t),i=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return 12*i+o}function pp(e){rp(1,arguments);var t=ip(e);return t.setHours(23,59,59,999),t}function fp(e){rp(1,arguments);var t=ip(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function mp(e){rp(1,arguments);var t=ip(e);return pp(t).getTime()===fp(t).getTime()}function gp(e,t){rp(2,arguments);var n,r=ip(e),i=ip(t),o=hp(r,i),a=Math.abs(dp(r,i));if(a<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*a);var s=hp(r,i)===-o;mp(ip(e))&&1===a&&1===hp(e,i)&&(s=!1),n=o*(a-Number(s))}return 0===n?0:n}var yp={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function _p(e){return e?yp[e]:yp.trunc}function vp(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function xp(e){rp(1,arguments);var t=ip(e);return t.setHours(0,0,0,0),t}var bp=864e5;function wp(e,t){rp(2,arguments);var n=xp(e),r=xp(t),i=n.getTime()-vp(n),o=r.getTime()-vp(r);return Math.round((i-o)/bp)}function Tp(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Ep(e,t){rp(2,arguments);var n=ip(e),r=ip(t),i=Tp(n,r),o=Math.abs(wp(n,r));n.setDate(n.getDate()-i*o);var a=Number(Tp(n,r)===-i),s=i*(o-a);return 0===s?0:s}Math.pow(10,8);var Sp=6e4,kp=36e5;function Cp(e,t){return rp(2,arguments),ip(e).getTime()-ip(t).getTime()}function Mp(e,t){rp(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:np(i),a=null==n.weekStartsOn?o:np(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=ip(e),l=s.getDay(),c=6+(l<a?-7:0)-(l-a);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}function Ip(e){rp(1,arguments);var t=ip(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Pp(e){return rp(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Ap(e){if(rp(1,arguments),!Pp(e)&&"number"!=typeof e)return!1;var t=ip(e);return!isNaN(Number(t))}var Dp={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function zp(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var Rp={date:zp({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:zp({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:zp({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Op={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Lp(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=i.width?String(i.width):o;r=e.formattingValues[a]||e.formattingValues[o]}else{var s=e.defaultWidth,l=i.width?String(i.width):e.defaultWidth;r=e.values[l]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var Fp={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Lp({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Lp({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Lp({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Lp({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Lp({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Bp(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Up(l,(function(e){return e.test(s)})):Np(l,(function(e){return e.test(s)}));a=e.valueCallback?e.valueCallback(c):c,a=n.valueCallback?n.valueCallback(a):a;var u=t.slice(s.length);return{value:a,rest:u}}}function Np(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function Up(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var jp,Vp={ordinalNumber:(jp={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(jp.matchPattern);if(!n)return null;var r=n[0],i=e.match(jp.parsePattern);if(!i)return null;var o=jp.valueCallback?jp.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;var a=e.slice(r.length);return{value:o,rest:a}}),era:Bp({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Bp({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Bp({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Bp({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Bp({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},$p={code:"en-US",formatDistance:function(e,t,n){var r,i=Dp[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Rp,formatRelative:function(e,t,n,r){return Op[e]},localize:Fp,match:Vp,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qp(e,t){rp(2,arguments);var n=np(t);return ap(e,-n)}var Gp=864e5;function Wp(e){rp(1,arguments);var t=1,n=ip(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Zp(e){rp(1,arguments);var t=ip(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Wp(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=Wp(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Hp(e){rp(1,arguments);var t=Zp(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Wp(n);return r}var Xp=6048e5;function Yp(e){rp(1,arguments);var t=ip(e),n=Wp(t).getTime()-Hp(t).getTime();return Math.round(n/Xp)+1}function Kp(e,t){rp(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:np(i),a=null==n.weekStartsOn?o:np(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=ip(e),l=s.getUTCDay(),c=(l<a?7:0)+l-a;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function Qp(e,t){rp(1,arguments);var n=ip(e),r=n.getUTCFullYear(),i=t||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:np(a),l=null==i.firstWeekContainsDate?s:np(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,l),c.setUTCHours(0,0,0,0);var u=Kp(c,t),h=new Date(0);h.setUTCFullYear(r,0,l),h.setUTCHours(0,0,0,0);var d=Kp(h,t);return n.getTime()>=u.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Jp(e,t){rp(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:np(i),a=null==n.firstWeekContainsDate?o:np(n.firstWeekContainsDate),s=Qp(e,t),l=new Date(0);l.setUTCFullYear(s,0,a),l.setUTCHours(0,0,0,0);var c=Kp(l,t);return c}var ef=6048e5;function tf(e,t){rp(1,arguments);var n=ip(e),r=Kp(n,t).getTime()-Jp(n,t).getTime();return Math.round(r/ef)+1}function nf(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var rf={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return nf("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):nf(n+1,2)},d:function(e,t){return nf(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return nf(e.getUTCHours()%12||12,t.length)},H:function(e,t){return nf(e.getUTCHours(),t.length)},m:function(e,t){return nf(e.getUTCMinutes(),t.length)},s:function(e,t){return nf(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return nf(Math.floor(r*Math.pow(10,n-3)),t.length)}},of=rf,af={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return of.y(e,t)},Y:function(e,t,n,r){var i=Qp(e,r),o=i>0?i:1-i;return"YY"===t?nf(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):nf(o,t.length)},R:function(e,t){return nf(Zp(e),t.length)},u:function(e,t){return nf(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return nf(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return nf(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return of.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return nf(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=tf(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):nf(i,t.length)},I:function(e,t,n){var r=Yp(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):nf(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):of.d(e,t)},D:function(e,t,n){var r=function(e){rp(1,arguments);var t=ip(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/Gp)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):nf(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return nf(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return nf(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return nf(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return of.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):of.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):nf(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):nf(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):of.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):of.s(e,t)},S:function(e,t){return of.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return lf(i);case"XXXX":case"XX":return cf(i);default:return cf(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return lf(i);case"xxxx":case"xx":return cf(i);default:return cf(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sf(i,":");default:return"GMT"+cf(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sf(i,":");default:return"GMT"+cf(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return nf(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return nf((r._originalDate||e).getTime(),t.length)}};function sf(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+nf(o,2)}function lf(e,t){return e%60==0?(e>0?"-":"+")+nf(Math.abs(e)/60,2):cf(e,t)}function cf(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+nf(Math.floor(i/60),2)+n+nf(i%60,2)}var uf=af;function hf(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function df(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var pf={p:df,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return hf(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",hf(i,t)).replace("{{time}}",df(o,t))}},ff=["D","DD"],mf=["YY","YYYY"];function gf(e){return-1!==ff.indexOf(e)}function yf(e){return-1!==mf.indexOf(e)}function _f(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var vf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bf=/^'([^]*?)'?$/,wf=/''/g,Tf=/[a-zA-Z]/;function Ef(e){return e.match(bf)[1].replace(wf,"'")}function Sf(e,t){rp(2,arguments);var n=ip(e),r=ip(t);return n.getTime()>r.getTime()}function kf(e,t){rp(2,arguments);var n=ip(e),r=ip(t);return n.getTime()<r.getTime()}function Cf(e){rp(1,arguments);var t=ip(e);return t.setMinutes(0,0,0),t}function Mf(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function If(e,t,n){rp(2,arguments);var r=n||{},i=r.locale,o=i&&i.options&&i.options.weekStartsOn,a=null==o?0:np(o),s=null==r.weekStartsOn?a:np(r.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=ip(e),c=np(t),u=l.getUTCDay(),h=c%7,d=(h+7)%7,p=(d<s?7:0)+c-u;return l.setUTCDate(l.getUTCDate()+p),l}var Pf=/^(1[0-2]|0?\d)/,Af=/^(3[0-1]|[0-2]?\d)/,Df=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,zf=/^(5[0-3]|[0-4]?\d)/,Rf=/^(2[0-3]|[0-1]?\d)/,Of=/^(2[0-4]|[0-1]?\d)/,Lf=/^(1[0-1]|0?\d)/,Ff=/^(1[0-2]|0?\d)/,Bf=/^[0-5]?\d/,Nf=/^[0-5]?\d/,Uf=/^\d/,jf=/^\d{1,2}/,Vf=/^\d{1,3}/,$f=/^\d{1,4}/,qf=/^-?\d+/,Gf=/^-?\d/,Wf=/^-?\d{1,2}/,Zf=/^-?\d{1,3}/,Hf=/^-?\d{1,4}/,Xf=/^([+-])(\d{2})(\d{2})?|Z/,Yf=/^([+-])(\d{2})(\d{2})|Z/,Kf=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Qf=/^([+-])(\d{2}):(\d{2})|Z/,Jf=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function em(e,t,n){var r=t.match(e);if(!r)return null;var i=parseInt(r[0],10);return{value:n?n(i):i,rest:t.slice(r[0].length)}}function tm(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function nm(e,t){return em(qf,e,t)}function rm(e,t,n){switch(e){case 1:return em(Uf,t,n);case 2:return em(jf,t,n);case 3:return em(Vf,t,n);case 4:return em($f,t,n);default:return em(new RegExp("^\\d{1,"+e+"}"),t,n)}}function im(e,t,n){switch(e){case 1:return em(Gf,t,n);case 2:return em(Wf,t,n);case 3:return em(Zf,t,n);case 4:return em(Hf,t,n);default:return em(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function om(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function am(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}var sm=[31,28,31,30,31,30,31,31,30,31,30,31],lm=[31,29,31,30,31,30,31,31,30,31,30,31];function cm(e){return e%400==0||e%4==0&&e%100!=0}var um={G:{priority:140,parse:function(e,t,n,r){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,r){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,r){var i=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return rm(4,e,i);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return rm(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var i=e.getUTCFullYear();if(n.isTwoDigitYear){var o=am(n.year,i);return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,r){var i=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return rm(4,e,i);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return rm(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var i=Qp(e,r);if(n.isTwoDigitYear){var o=am(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Kp(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Kp(e,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,r){return im("R"===t?4:t.length,e)},set:function(e,t,n,r){var i=new Date(0);return i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0),Wp(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,r){return im("u"===t?4:t.length,e)},set:function(e,t,n,r){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,r){switch(t){case"Q":case"QQ":return rm(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,r){switch(t){case"q":case"qq":return rm(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,r){var i=function(e){return e-1};switch(t){case"M":return em(Pf,e,i);case"MM":return rm(2,e,i);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,r){var i=function(e){return e-1};switch(t){case"L":return em(Pf,e,i);case"LL":return rm(2,e,i);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,r){switch(t){case"w":return em(zf,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return rm(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return Kp(function(e,t,n){rp(2,arguments);var r=ip(e),i=np(t),o=tf(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,r){switch(t){case"I":return em(zf,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return rm(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return Wp(function(e,t){rp(2,arguments);var n=ip(e),r=np(t),i=Yp(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,r){switch(t){case"d":return em(Af,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return rm(t.length,e)}},validate:function(e,t,n){var r=cm(e.getUTCFullYear()),i=e.getUTCMonth();return r?t>=1&&t<=lm[i]:t>=1&&t<=sm[i]},set:function(e,t,n,r){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,r){switch(t){case"D":case"DD":return em(Df,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return rm(t.length,e)}},validate:function(e,t,n){return cm(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,r){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,r){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=If(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return rm(t.length,e,i);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=If(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return rm(t.length,e,i);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=If(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,r){var i=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return rm(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});default:return n.day(e,{width:"wide",context:"formatting",valueCallback:i})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,r){return e=function(e,t){rp(2,arguments);var n=np(t);n%7==0&&(n-=7);var r=1,i=ip(e),o=i.getUTCDay(),a=((n%7+7)%7<r?7:0)+n-o;return i.setUTCDate(i.getUTCDate()+a),i}(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,r){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(om(n),0,0,0),e},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(e,t,n,r){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(om(n),0,0,0),e},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(e,t,n,r){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(om(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,r){switch(t){case"h":return em(Ff,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return rm(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,r){var i=e.getUTCHours()>=12;return i&&n<12?e.setUTCHours(n+12,0,0,0):i||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,r){switch(t){case"H":return em(Rf,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return rm(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,r){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,r){switch(t){case"K":return em(Lf,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return rm(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,r){switch(t){case"k":return em(Of,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return rm(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,r){var i=n<=24?n%24:n;return e.setUTCHours(i,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,r){switch(t){case"m":return em(Bf,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return rm(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,r){switch(t){case"s":return em(Nf,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return rm(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,r){return rm(t.length,e,(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))},set:function(e,t,n,r){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,r){switch(t){case"X":return tm(Xf,e);case"XX":return tm(Yf,e);case"XXXX":return tm(Kf,e);case"XXXXX":return tm(Jf,e);default:return tm(Qf,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,r){switch(t){case"x":return tm(Xf,e);case"xx":return tm(Yf,e);case"xxxx":return tm(Kf,e);case"xxxxx":return tm(Jf,e);default:return tm(Qf,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,r){return nm(e)},set:function(e,t,n,r){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,r){return nm(e)},set:function(e,t,n,r){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},hm=um,dm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fm=/^'([^]*?)'?$/,mm=/''/g,gm=/\S/,ym=/[a-zA-Z]/;function _m(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}function vm(e){return e.match(fm)[1].replace(mm,"'")}function xm(e){rp(1,arguments);var t=ip(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function bm(e){rp(1,arguments);var t=ip(e),n=t.getDay();return n}function wm(e){rp(1,arguments);var t=ip(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Tm(e,t){rp(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:np(i),a=null==n.weekStartsOn?o:np(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=ip(e),l=s.getDay(),c=(l<a?7:0)+l-a;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function Em(e){rp(1,arguments);var t=ip(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}var Sm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},km=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Cm=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Mm=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Im(e){var t,n={},r=e.split(Sm.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],Sm.timeZoneDelimiter.test(n.date)&&(n.date=e.split(Sm.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var i=Sm.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}function Pm(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}function Am(e,t){if(null===t)return new Date(NaN);var n=e.match(km);if(!n)return new Date(NaN);var r=!!n[4],i=Dm(n[1]),o=Dm(n[2])-1,a=Dm(n[3]),s=Dm(n[4]),l=Dm(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}(t,s,l):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Lm[t]||(Fm(e)?29:28))}(t,o,a)&&function(e,t){return t>=1&&t<=(Fm(e)?366:365)}(t,i)?(c.setUTCFullYear(t,o,Math.max(i,a)),c):new Date(NaN)}function Dm(e){return e?parseInt(e):1}function zm(e){var t=e.match(Cm);if(!t)return NaN;var n=Rm(t[1]),r=Rm(t[2]),i=Rm(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i)?n*kp+r*Sp+1e3*i:NaN}function Rm(e){return e&&parseFloat(e.replace(",","."))||0}function Om(e){if("Z"===e)return 0;var t=e.match(Mm);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?n*(r*kp+i*Sp):NaN}var Lm=[31,null,31,30,31,30,31,31,30,31,30,31];function Fm(e){return e%400==0||e%4==0&&e%100!=0}var Bm=n(209),Nm=n.n(Bm),Um={dayOfMonth:"d",fullDate:"PP",fullDateWithWeekday:"PPPP",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aaa",fullDateTime24h:"PP HH:mm",fullTime:"p",fullTime12h:"hh:mm aaa",fullTime24h:"HH:mm",hours12h:"hh",hours24h:"HH",keyboardDate:"P",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aaa",keyboardDateTime24h:"P HH:mm",minutes:"mm",month:"LLLL",monthAndDate:"MMMM d",monthAndYear:"LLLL yyyy",monthShort:"MMM",weekday:"EEEE",weekdayShort:"EEE",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",seconds:"ss",shortDate:"MMM d",year:"yyyy"},jm=function(e){var t=this,n=void 0===e?{}:e,r=n.locale,i=n.formats;this.lib="date-fns",this.is12HourCycleInCurrentLocale=function(){return!t.locale||/a/.test(t.locale.formatLong.time())},this.getFormatHelperText=function(e){var n=t.locale||$p;return e.match(/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Nm()[t])(e,n.formatLong,{}):e})).join("").replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase()},this.parseISO=function(e){return function(e,t){rp(1,arguments);var n=t||{},r=null==n.additionalDigits?2:np(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,o=Im(e);if(o.date){var a=Pm(o.date,r);i=Am(a.restDateString,a.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var s,l=i.getTime(),c=0;if(o.time&&(c=zm(o.time),isNaN(c)))return new Date(NaN);if(!o.timezone){var u=new Date(l+c),h=new Date(0);return h.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),h.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),h}return s=Om(o.timezone),isNaN(s)?new Date(NaN):new Date(l+c+s)}(e)},this.toISO=function(e){return function(e,t){rp(1,arguments);var n=ip(e);if(isNaN(n.getTime()))throw new RangeError("Invalid time value");var r=null!=t&&t.format?String(t.format):"extended",i=null!=t&&t.representation?String(t.representation):"complete";if("extended"!==r&&"basic"!==r)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==i&&"time"!==i&&"complete"!==i)throw new RangeError("representation must be 'date', 'time', or 'complete'");var o="",a="",s="extended"===r?"-":"",l="extended"===r?":":"";if("time"!==i){var c=nf(n.getDate(),2),u=nf(n.getMonth()+1,2),h=nf(n.getFullYear(),4);o="".concat(h).concat(s).concat(u).concat(s).concat(c)}if("date"!==i){var d=n.getTimezoneOffset();if(0!==d){var p=Math.abs(d),f=nf(Math.floor(p/60),2),m=nf(p%60,2);a="".concat(d<0?"+":"-").concat(f,":").concat(m)}else a="Z";var g=""===o?"":"T",y=[nf(n.getHours(),2),nf(n.getMinutes(),2),nf(n.getSeconds(),2)].join(l);o="".concat(o).concat(g).concat(y).concat(a)}return o}(e,{format:"extended"})},this.getCurrentLocaleCode=function(){var e;return(null===(e=t.locale)||void 0===e?void 0:e.code)||"en-US"},this.addSeconds=function(e,t){return function(e,t){rp(2,arguments);var n=np(t);return ap(e,1e3*n)}(e,t)},this.addMinutes=function(e,t){return function(e,t){rp(2,arguments);var n=np(t);return ap(e,6e4*n)}(e,t)},this.addHours=function(e,t){return function(e,t){rp(2,arguments);var n=np(t);return ap(e,n*sp)}(e,t)},this.addDays=function(e,t){return op(e,t)},this.addWeeks=function(e,t){return function(e,t){rp(2,arguments);var n=np(t);return op(e,7*n)}(e,t)},this.addMonths=function(e,t){return lp(e,t)},this.isValid=function(e){return Ap(t.date(e))},this.getDiff=function(e,n,r){switch(r){case"years":return function(e,t){rp(2,arguments);var n=ip(e),r=ip(t),i=hp(n,r),o=Math.abs(up(n,r));n.setFullYear(1584),r.setFullYear(1584);var a=hp(n,r)===-i,s=i*(o-Number(a));return 0===s?0:s}(e,t.date(n));case"quarters":return function(e,t,n){rp(2,arguments);var r=gp(e,t)/3;return _p(null==n?void 0:n.roundingMethod)(r)}(e,t.date(n));case"months":return gp(e,t.date(n));case"weeks":return function(e,t,n){rp(2,arguments);var r=Ep(e,t)/7;return _p(null==n?void 0:n.roundingMethod)(r)}(e,t.date(n));case"days":return Ep(e,t.date(n));case"hours":return function(e,t,n){rp(2,arguments);var r=Cp(e,t)/kp;return _p(null==n?void 0:n.roundingMethod)(r)}(e,t.date(n));case"minutes":return function(e,t,n){rp(2,arguments);var r=Cp(e,t)/Sp;return _p(null==n?void 0:n.roundingMethod)(r)}(e,t.date(n));case"seconds":return function(e,t,n){rp(2,arguments);var r=Cp(e,t)/1e3;return _p(null==n?void 0:n.roundingMethod)(r)}(e,t.date(n));default:return Cp(e,t.date(n))}},this.isAfter=function(e,t){return Sf(e,t)},this.isBefore=function(e,t){return kf(e,t)},this.startOfDay=function(e){return xp(e)},this.endOfDay=function(e){return pp(e)},this.getHours=function(e){return function(e){return rp(1,arguments),ip(e).getHours()}(e)},this.setHours=function(e,t){return function(e,t){rp(2,arguments);var n=ip(e),r=np(t);return n.setHours(r),n}(e,t)},this.setMinutes=function(e,t){return function(e,t){rp(2,arguments);var n=ip(e),r=np(t);return n.setMinutes(r),n}(e,t)},this.getSeconds=function(e){return function(e){return rp(1,arguments),ip(e).getSeconds()}(e)},this.setSeconds=function(e,t){return function(e,t){rp(2,arguments);var n=ip(e),r=np(t);return n.setSeconds(r),n}(e,t)},this.isSameDay=function(e,t){return function(e,t){rp(2,arguments);var n=xp(e),r=xp(t);return n.getTime()===r.getTime()}(e,t)},this.isSameMonth=function(e,t){return function(e,t){rp(2,arguments);var n=ip(e),r=ip(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}(e,t)},this.isSameYear=function(e,t){return function(e,t){rp(2,arguments);var n=ip(e),r=ip(t);return n.getFullYear()===r.getFullYear()}(e,t)},this.isSameHour=function(e,t){return function(e,t){rp(2,arguments);var n=Cf(e),r=Cf(t);return n.getTime()===r.getTime()}(e,t)},this.startOfMonth=function(e){return wm(e)},this.endOfMonth=function(e){return fp(e)},this.startOfWeek=function(e){return Tm(e,{locale:t.locale})},this.endOfWeek=function(e){return Mp(e,{locale:t.locale})},this.getYear=function(e){return function(e){return rp(1,arguments),ip(e).getFullYear()}(e)},this.setYear=function(e,t){return function(e,t){rp(2,arguments);var n=ip(e),r=np(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}(e,t)},this.date=function(e){return void 0===e?new Date:null===e?null:new Date(e)},this.toJsDate=function(e){return e},this.parse=function(e,n){return""===e?null:function(e,t,n,r){rp(3,arguments);var i=String(e),o=String(t),a=r||{},s=a.locale||$p;if(!s.match)throw new RangeError("locale must contain match property");var l=s.options&&s.options.firstWeekContainsDate,c=null==l?1:np(l),u=null==a.firstWeekContainsDate?c:np(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=s.options&&s.options.weekStartsOn,d=null==h?0:np(h),p=null==a.weekStartsOn?d:np(a.weekStartsOn);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===o)return""===i?ip(n):new Date(NaN);var f,m={firstWeekContainsDate:u,weekStartsOn:p,locale:s},g=[{priority:10,subPriority:-1,set:_m,index:0}],y=o.match(pm).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,pf[t])(e,s.formatLong,m):e})).join("").match(dm),_=[];for(f=0;f<y.length;f++){var v=y[f];!a.useAdditionalWeekYearTokens&&yf(v)&&_f(v,o,e),!a.useAdditionalDayOfYearTokens&&gf(v)&&_f(v,o,e);var x=v[0],b=hm[x];if(b){var w=b.incompatibleTokens;if(Array.isArray(w)){for(var T=void 0,E=0;E<_.length;E++){var S=_[E].token;if(-1!==w.indexOf(S)||S===x){T=_[E];break}}if(T)throw new RangeError("The format string mustn't contain `".concat(T.fullToken,"` and `").concat(v,"` at the same time"))}else if("*"===b.incompatibleTokens&&_.length)throw new RangeError("The format string mustn't contain `".concat(v,"` and any other token at the same time"));_.push({token:x,fullToken:v});var k=b.parse(i,v,s.match,m);if(!k)return new Date(NaN);g.push({priority:b.priority,subPriority:b.subPriority||0,set:b.set,validate:b.validate,value:k.value,index:g.length}),i=k.rest}else{if(x.match(ym))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if("''"===v?v="'":"'"===x&&(v=vm(v)),0!==i.indexOf(v))return new Date(NaN);i=i.slice(v.length)}}if(i.length>0&&gm.test(i))return new Date(NaN);var C=g.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return g.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),M=ip(n);if(isNaN(M))return new Date(NaN);var I=qp(M,vp(M)),P={};for(f=0;f<C.length;f++){var A=C[f];if(A.validate&&!A.validate(I,A.value,m))return new Date(NaN);var D=A.set(I,P,A.value,m);D[0]?(I=D[0],Mf(P,D[1])):I=D}return I}(e,n,new Date,{locale:t.locale})},this.format=function(e,n){return t.formatByString(e,t.formats[n])},this.formatByString=function(e,n){return function(e,t,n){rp(2,arguments);var r=String(t),i=n||{},o=i.locale||$p,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:np(a),l=null==i.firstWeekContainsDate?s:np(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,u=null==c?0:np(c),h=null==i.weekStartsOn?u:np(i.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var d=ip(e);if(!Ap(d))throw new RangeError("Invalid time value");var p=vp(d),f=qp(d,p),m={firstWeekContainsDate:l,weekStartsOn:h,locale:o,_originalDate:d};return r.match(xf).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,pf[t])(e,o.formatLong,m):e})).join("").match(vf).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return Ef(n);var a=uf[r];if(a)return!i.useAdditionalWeekYearTokens&&yf(n)&&_f(n,t,e),!i.useAdditionalDayOfYearTokens&&gf(n)&&_f(n,t,e),a(f,n,o.localize,m);if(r.match(Tf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}(e,n,{locale:t.locale})},this.isEqual=function(e,t){return null===e&&null===t||function(e,t){rp(2,arguments);var n=ip(e),r=ip(t);return n.getTime()===r.getTime()}(e,t)},this.isNull=function(e){return null===e},this.isAfterDay=function(e,t){return Sf(e,pp(t))},this.isBeforeDay=function(e,t){return kf(e,xp(t))},this.isBeforeYear=function(e,t){return kf(e,Em(t))},this.isAfterYear=function(e,t){return Sf(e,Ip(t))},this.isWithinRange=function(e,t){return function(e,t){rp(2,arguments);var n=ip(e).getTime(),r=ip(t.start).getTime(),i=ip(t.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}(e,{start:t[0],end:t[1]})},this.formatNumber=function(e){return e},this.getMinutes=function(e){return e.getMinutes()},this.getMonth=function(e){return e.getMonth()},this.getDaysInMonth=function(e){return xm(e)},this.setMonth=function(e,t){return function(e,t){rp(2,arguments);var n=ip(e),r=np(t),i=n.getFullYear(),o=n.getDate(),a=new Date(0);a.setFullYear(i,r,15),a.setHours(0,0,0,0);var s=xm(a);return n.setMonth(r,Math.min(o,s)),n}(e,t)},this.getMeridiemText=function(e){return"am"===e?"AM":"PM"},this.getNextMonth=function(e){return lp(e,1)},this.getPreviousMonth=function(e){return lp(e,-1)},this.getMonthArray=function(e){for(var n=[Em(e)];n.length<12;){var r=n[n.length-1];n.push(t.getNextMonth(r))}return n},this.mergeDateAndTime=function(e,n){return t.setSeconds(t.setMinutes(t.setHours(e,t.getHours(n)),t.getMinutes(n)),t.getSeconds(n))},this.getWeekdays=function(){var e=new Date;return function(e,t){rp(1,arguments);var n=e||{},r=ip(n.start),i=ip(n.end).getTime();if(!(r.getTime()<=i))throw new RangeError("Invalid interval");var o=[],a=r;a.setHours(0,0,0,0);var s=t&&"step"in t?Number(t.step):1;if(s<1||isNaN(s))throw new RangeError("`options.step` must be a number greater than 1");for(;a.getTime()<=i;)o.push(ip(a)),a.setDate(a.getDate()+s),a.setHours(0,0,0,0);return o}({start:Tm(e,{locale:t.locale}),end:Mp(e,{locale:t.locale})}).map((function(e){return t.formatByString(e,"EEEEEE")}))},this.getWeekArray=function(e){for(var n=Tm(wm(e),{locale:t.locale}),r=Mp(fp(e),{locale:t.locale}),i=0,o=n,a=[],s=null;kf(o,r);){var l=Math.floor(i/7);a[l]=a[l]||[];var c=bm(o);s!==c&&(s=c,a[l].push(o),i+=1),o=op(o,1)}return a},this.getYearRange=function(e,t){for(var n=Em(e),r=Ip(t),i=[],o=n;kf(o,r);)i.push(o),o=cp(o,1);return i},this.locale=r,this.formats=Object.assign({},Um,i)};const Vm={container:{position:"fixed",left:"0px",bottom:"0px",width:"calc(100vw - 42px)",display:"flex",backgroundColor:"white",borderRadius:"0px",padding:"15px",paddingLeft:"21px",paddingRight:"21px",zIndex:"1"},dateContainer:{display:"flex",flexDirection:"column",marginRight:"45px"},dateContainerTitle:{marginBottom:"6px",fontWeight:"500"}};o().accessToken="pk.eyJ1IjoiYXNoZXJoYW5kYWx5IiwiYSI6ImNsMHRyMTFvbzBweGMzY3BrYWdkYXk0bWcifQ.RwV5xSDWOO6aIhmd-LrWrA";const $m={container:{width:"100vw",height:"100vh",overflow:"hidden"},mapContainer:{width:"100%",height:"100%"}},qm=t=>{const n=(0,e.useRef)(null),r=(0,e.useRef)(null),[i,a]=(0,e.useState)(-122.121013),[s,l]=(0,e.useState)(47.671947),[c,u]=(0,e.useState)(12),[h,d]=(0,e.useState)(!0),[p,f]=(0,e.useState)(!0),{startDate:m,endDate:g,granularity:y,dateComponent:_,visualizingDate:v}=(t=>{const[n,r]=(0,e.useState)(new Date),[i,o]=(0,e.useState)(new Date),[a,s]=(0,e.useState)("days"),[l,c]=(0,e.useState)(0),[u,h]=(0,e.useState)(new Date);(0,e.useEffect)((()=>{const e=new Date;e.setDate(e.getDate()-30),r(e)}),[]),(0,e.useEffect)((()=>{c(0)}),[n,i]),(0,e.useEffect)((()=>{h(d())}),[l]);const d=()=>{const e=new Date(n.getTime());return e.setDate(n.getDate()+l),e};return{startDate:n,endDate:i,granularity:a,dateComponent:(0,Ps.jsx)("div",{style:Vm.container,children:(0,Ps.jsx)(tp,{dateAdapter:jm,children:(0,Ps.jsx)("div",{style:Vm.dateContainer,children:(0,Ps.jsx)("span",{style:Vm.dateContainerTitle,children:"Start Date:"})})})}),visualizingDate:u}})(),[x,b]=(0,e.useState)(Ms[0].key);return(0,e.useEffect)((()=>{r.current||(r.current=new(o().Map)({container:n.current,style:"mapbox://styles/mapbox/streets-v11",center:[i,s],zoom:c}),r.current.on("move",(()=>{a(r.current.getCenter().lng.toFixed(4)),l(r.current.getCenter().lat.toFixed(4)),u(r.current.getZoom().toFixed(2))})),r.current.on("load",(()=>{d(!1),r.current.addSource("earthquakes",{type:"geojson",data:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson"}),r.current.addLayer({id:"earthquakes",source:"earthquakes",type:"heatmap",paint:{"heatmap-radius":30,"heatmap-opacity":.75,"heatmap-intensity":.9}});const e=r.current.getStyle().layers;let t;for(const n of e)if("symbol"===n.type){t=n.id;break}r.current.addSource("urban-areas",{type:"geojson",data:"https://docs.mapbox.com/mapbox-gl-js/assets/ne_50m_urban_areas.geojson"}),r.current.addLayer({id:"urban-areas-fill",type:"fill",source:"urban-areas",layout:{},paint:{"fill-color":"#f08","fill-opacity":.4}},t),r.current.addLayer({id:"population",type:"circle",source:"urban-areas",paint:{"circle-radius":{base:1.75,stops:[[12,6],[22,30]]}}})})))}),[]),(0,e.useEffect)((()=>{setTimeout((()=>{f(!1)}),2e3)}),[]),(0,e.useEffect)((()=>{r.current&&!h&&(r.current.removeLayer("earthquakes"),r.current.addLayer({id:"earthquakes",source:"earthquakes",type:"heatmap",paint:{"heatmap-radius":Math.floor(60*Math.random())+10,"heatmap-opacity":.75,"heatmap-intensity":.9}}))}),[v]),(0,e.useEffect)((()=>{f(!0),setTimeout((()=>{f(!1)}),1e3)}),[m,g]),(0,Ps.jsxs)("div",{style:$m.container,children:[p&&(0,Ps.jsx)(Kd,{}),(0,Ps.jsx)("div",{style:$m.mapContainer,ref:n}),(0,Ps.jsx)(Ds,{gas:x,setGas:b}),(0,Ps.jsx)(Jd,{lat:s,lng:i,zoom:c}),_]})};r.render((0,Ps.jsx)(t().StrictMode,{children:(0,Ps.jsx)(qm,{})}),document.getElementById("main"))}()}();